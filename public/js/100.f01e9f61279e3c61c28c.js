(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{1530:function(e,t,n){"use strict";n.r(t);var r=n(18),a=n.n(r),o=n(19),c=n.n(o),i=n(12),l=n.n(i),s=n(20),u=n.n(s),p=n(21),m=n.n(p),f=n(14),h=n.n(f),d=n(5),j=n.n(d),E=n(0),g=n.n(E),v=n(16),P=function(e,t,n,r){return{type:"FETCH_PROJECTS",filters:e,sorts:t,pagination:n,filterType:r}},y=function(){return{type:"CLEAR_PROJECTS"}},b=function(e){return{type:"SET_PROJECT_CODE_FILTER",code:e}},w=function(e){return{type:"SET_PROJECT_FILTER",name:e}},C=function(e){return{type:"SET_TYPE_PROJECT_FILTER",projectTypeId:e}},R=function(){return{type:"CLEAR_FILTER_PROJECTS"}},O=function(e){return{type:"SET_PROJECTS_PAGINATION",pagination:e}},D=n(3),S=n(49),T=Object(v.b)((function(e){return{permissions:e.meDetails.permissions,projects:e.projects.list}}))((function(e){var t=e.permissions,n=void 0===t?{}:t,r=e.projects.meta,a=void 0===r?{}:r;return g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-md-4"},g.a.createElement("div",{className:"btn-group",role:"group"},g.a.createElement(S.a,{iconName:"glyphicon-arrow-left",onClickAction:D.e.goBack}),n.manageProject&&g.a.createElement(S.a,{iconName:"glyphicon-plus",onClickAction:function(){D.f.push("project/nieuw")}}),g.a.createElement(S.a,{iconName:"glyphicon-refresh",onClickAction:e.resetProjectFilters}))),g.a.createElement("div",{className:"col-md-4"},g.a.createElement("h3",{className:"text-center table-title"},"Projecten")),g.a.createElement("div",{className:"col-md-4"},g.a.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)))})),F=n(234),N=n.n(F),k=n(179),I=n(180),L=n(236),_=n(472);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var M=function(e){u()(n,e);var t=A(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).state={showActionButtons:!1,highlightRow:""},r}return c()(n,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(e){D.f.push("project/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.code,a=t.name,o=t.projectType,c=t.projectTypeCodeRef,i=t.totalParticipations,l=t.participationsDefinitive,s=t.amountOfLoanNeeded,u=t.amountDefinitive,p=i-l,m=s-u,f=0;return"loan"===c?s&&u&&(f=u/s*100):i&&l&&(f=l/i*100),g.a.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return e.openItem(n)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},g.a.createElement("td",null,r),g.a.createElement("td",null,a),g.a.createElement("td",null,o),g.a.createElement("td",null,"loan"!==c?i:"-"),g.a.createElement("td",null,"loan"!==c?l:"-"),g.a.createElement("td",null,"loan"!==c?p:"-"),g.a.createElement("td",null,"loan"===c?Object(_.a)(s):"-"),g.a.createElement("td",null,"loan"===c?Object(_.a)(u):"-"),g.a.createElement("td",null,"loan"===c?Object(_.a)(m):"-"),g.a.createElement("td",null,"".concat(f.toLocaleString("nl",{maximumFractionDigits:2}),"%")),g.a.createElement("td",null,this.state.showActionButtons?g.a.createElement("a",{role:"button",onClick:function(){return e.openItem(n)}},g.a.createElement("span",{className:"glyphicon glyphicon-pencil mybtn-success"})," "):"",(this.state.showActionButtons&&this.props.permissions.manageProject,"")))}}]),n}(E.Component),B=Object(v.b)((function(e){return{permissions:e.meDetails.permissions}}))(M),J=n(41),x=n(119),U=function(e){return g.a.createElement(J.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return x.a.deleteProject(e.id).then((function(){e.fetchProjectsData()})),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder project ",g.a.createElement("strong",null,e.code),"?")},q=n(132),G=n(838),K=n(130),V=Object(v.b)(null,(function(e){return{setProjectsSortsFilter:function(t,n){e(function(e,t){return{type:"SET_PROJECTS_SORTS_FILTER",field:e,order:t}}(t,n))}}}))((function(e){var t=function(t,n){e.setProjectsSortsFilter(t,n),setTimeout((function(){e.fetchProjectsListData()}),100)};return g.a.createElement("tr",{className:"thead-title"},g.a.createElement(G.a,{sortColumn:"code",title:"Projectcode",width:"10%",setSorts:t}),g.a.createElement(G.a,{sortColumn:"name",title:"Project",width:"15%",setSorts:t}),g.a.createElement(G.a,{sortColumn:"projectTypeId",title:"Type project",width:"10%",setSorts:t}),g.a.createElement(K.a,{title:"# deelnames nodig",width:"8%"}),g.a.createElement(K.a,{title:"Uitgegeven deelnames",width:"8%"}),g.a.createElement(K.a,{title:"Uit te geven deelnames",width:"8%"}),g.a.createElement(G.a,{sortColumn:"amountOfLoanNeeded",title:"Lening nodig",width:"8%",setSorts:t}),g.a.createElement(G.a,{sortColumn:"amountDefinitive",title:"Lening opgehaald",width:"8%",setSorts:t}),g.a.createElement(K.a,{title:"Lening uit te geven",width:"8%"}),g.a.createElement(K.a,{sortColumn:"percentageSpent",title:"Percentage uitgegeven",width:"8%",setSorts:t}),g.a.createElement("th",{width:"6%"}))})),W=n(22),H=Object(v.b)((function(e){return{filters:e.projects.filters,projectStatuses:e.systemData.projectStatuses,projectTypes:e.systemData.projectTypes}}),(function(e){return Object(W.b)({setProjectCodeFilter:b,setProjectFilter:w,setTypeProjectFilter:C,clearFilterProjects:R},e)}))((function(e){return g.a.createElement("tr",{className:"thead-filter"},g.a.createElement("th",null,g.a.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.code.data,onChange:function(t){e.setProjectCodeFilter(t.target.value)}})),g.a.createElement("th",null,g.a.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.name.data,onChange:function(t){e.setProjectFilter(t.target.value)}})),g.a.createElement("th",null,g.a.createElement("select",{className:"form-control input-sm",value:e.filters.projectTypeId.data,onChange:function(t){e.setTypeProjectFilter(t.target.value),setTimeout((function(){e.onSubmitFilter()}),100)}},g.a.createElement("option",null),e.projectTypes.map((function(e){return g.a.createElement("option",{key:e.id,value:e.id},e.name)})))),g.a.createElement("th",null),g.a.createElement("th",null),g.a.createElement("th",null),g.a.createElement("th",null),g.a.createElement("th",null),g.a.createElement("th",null),g.a.createElement("th",null),g.a.createElement("th",null))}));function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var X=function(e){u()(n,e);var t=Q(n);function n(e){var r;return a()(this,n),r=t.call(this,e),j()(l()(r),"handleKeyUp",(function(e){13===e.keyCode&&r.props.onSubmitFilter()})),j()(l()(r),"showDeleteItemModal",(function(e,t){r.setState(z(z({},r.state),{},{showDeleteItem:!0,deleteItem:z(z({},r.state.deleteItem),{},{id:e,name:t})}))})),j()(l()(r),"closeDeleteItemModal",(function(){r.setState(z(z({},r.state),{},{showDeleteItem:!1,deleteItem:z(z({},r.state.deleteItem),{},{id:"",name:""})}))})),r.state={showDeleteItem:!1,deleteItem:{id:"",name:""}},r}return c()(n,[{key:"render",value:function(){var e=this,t=this.props.projects,n=t.data,r=void 0===n?[]:n,a=t.meta,o=void 0===a?{}:a,c="",i=!0;return this.props.hasError?c="Fout bij het ophalen van projecten.":this.props.isLoading?c="Gegevens aan het laden.":0===r.length?c="Geen projecten gevonden!":i=!1,g.a.createElement("div",null,g.a.createElement("form",{onKeyUp:this.handleKeyUp},g.a.createElement(k.a,null,g.a.createElement(I.a,null,g.a.createElement(V,{fetchProjectsListData:function(){return e.props.fetchProjectsListData()}}),g.a.createElement(H,{onSubmitFilter:this.props.onSubmitFilter})),g.a.createElement(L.a,null,i?g.a.createElement("tr",null,g.a.createElement("td",{colSpan:11},c)):r.map((function(t){return g.a.createElement(B,N()({key:t.id},t,{showDeleteItemModal:e.showDeleteItemModal}))})))),g.a.createElement("div",{className:"col-md-6 col-md-offset-3"},g.a.createElement(q.a,{onPageChangeAction:this.props.handlePageClick,totalRecords:o.total,initialPage:this.props.projectsPagination.page}))),this.state.showDeleteItem&&g.a.createElement(U,N()({closeDeleteItemModal:this.closeDeleteItemModal,fetchProjectsData:this.props.fetchProjectsData},this.state.deleteItem)))}}]),n}(E.Component),Z=Object(v.b)((function(e){return{projects:e.projects.list,projectsPagination:e.projects.pagination,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}),null)(X),$=n(839),ee=n(235);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var ne=function(e){u()(n,e);var t=te(n);function n(e){var r;return a()(this,n),r=t.call(this,e),j()(l()(r),"resetProjectFilters",(function(){r.props.clearFilterProjects(),r.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),r.fetchProjectsData()})),r.state={filterType:"and",amountOfFilters:0},r.fetchProjectsData=r.fetchProjectsData.bind(l()(r)),r.handlePageClick=r.handlePageClick.bind(l()(r)),r}return c()(n,[{key:"componentDidMount",value:function(){this.fetchProjectsData()}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.params.value!==e.params.value){if(Object(ee.isEmpty)(e.params))this.props.clearFilterProjects();else switch(e.params.filter){case"type":this.props.clearFilterProjects(),this.props.setTypeProjectFilter(e.params.value)}setTimeout((function(){t.fetchProjectsData()}),100)}}},{key:"componentWillUnmount",value:function(){this.props.clearProjects()}},{key:"fetchProjectsData",value:function(){var e=this;setTimeout((function(){var t=Object($.a)(e.props.projectsFilters),n=e.props.projectsSorts,r={limit:20,offset:e.props.projectsPagination.offset},a=e.state.filterType;e.props.fetchProjects(t,n,r,a)}),100)}},{key:"handlePageClick",value:function(e){var t=e.selected,n=Math.ceil(20*t);this.props.setProjectsPagination({page:t,offset:n}),this.fetchProjectsData()}},{key:"onSubmitFilter",value:function(){this.props.clearProjects(),this.props.setProjectsPagination({page:0,offset:0}),this.fetchProjectsData()}},{key:"render",value:function(){var e=this;return g.a.createElement("div",null,g.a.createElement("div",{className:"panel panel-default col-md-12"},g.a.createElement("div",{className:"panel-body"},g.a.createElement("div",{className:"col-md-12 margin-10-top"},g.a.createElement(T,{resetProjectFilters:function(){return e.resetProjectFilters()}})),g.a.createElement("div",{className:"col-md-12 margin-10-top"},g.a.createElement(Z,{projects:this.props.projects,projectsPagination:this.props.projectsPagination,onSubmitFilter:function(){return e.onSubmitFilter()},handlePageClick:this.handlePageClick,fetchProjectsListData:this.fetchProjectsData})))))}}]),n}(E.Component);t.default=Object(v.b)((function(e){return{projects:e.projects.list,projectsFilters:e.projects.filters,projectsSorts:e.projects.sorts,projectsPagination:e.projects.pagination}}),(function(e){return Object(W.b)({fetchProjects:P,clearProjects:y,setProjectCodeFilter:b,setProjectFilter:w,setTypeProjectFilter:C,clearFilterProjects:R,setProjectsPagination:O},e)}))(ne)},838:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(6),c=n.n(o),i=function(e){var t=e.RowClassName,n=e.setSorts,r=e.sortColumn,o=e.title,c=e.width;return a.a.createElement("th",{className:t,width:c},o,a.a.createElement("span",{className:"glyphicon glyphicon-arrow-down pull-right small",role:"button",onClick:n.bind(void 0,r,"ASC")}),a.a.createElement("span",{className:"glyphicon glyphicon-arrow-up pull-right small",role:"button",onClick:n.bind(void 0,r,"DESC")}))};i.defaultProps={RowClassName:""},i.propTypes={setSorts:c.a.func.isRequired,sortColumn:c.a.string.isRequired,title:c.a.string.isRequired,width:c.a.string.isRequired,RowClassName:c.a.string},t.a=i},839:function(e,t,n){"use strict";t.a=function(e){var t=[];for(var n in e)""!==e[n].data&&t.push(e[n]);return t}}}]);