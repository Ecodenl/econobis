(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1566:function(e,t,a){"use strict";a.r(t);var r=a(14),n=a.n(r),o=a(15),c=a.n(o),s=a(9),l=a.n(s),i=a(16),d=a.n(i),m=a(17),u=a.n(m),f=a(12),p=a.n(f),h=a(5),w=a.n(h),v=a(0),y=a.n(v),g=a(106),b=a(318),E=a(4);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){w()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=p()(e);if(t){var n=p()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u()(this,a)}}var k=function(e){d()(a,e);var t=P(a);function a(e){var r;return n()(this,a),r=t.call(this,e),w()(l()(r),"enableTwoFactor",(function(){g.a.enableTwoFactor(r.state.password).then((function(){r.callFetchTwoFactorQr(),r.callFetchTwoFactorRecoveryCodes()}))})),w()(l()(r),"callFetchTwoFactorQr",(function(){return g.a.fetchTwoFactorQr(r.state.password).then((function(e){r.setState({qr:O({},e.data)})}))})),w()(l()(r),"callFetchTwoFactorRecoveryCodes",(function(){g.a.fetchTwoFactorRecoveryCodes(r.state.password).then((function(e){r.setState({recoveryCodes:e.data})}))})),r.state={qr:{svg:""},recoveryCodes:[],password:e.location.state?e.location.state.password:"",hasValidPassword:!1,errorMessage:""},r.checkPasswordHandler=r.checkPasswordHandler.bind(l()(r)),r}return c()(a,[{key:"componentDidMount",value:function(){var e=this;this.state.password&&g.a.checkPassword(this.state.password).then((function(){e.setState({hasValidPassword:!0}),e.enableTwoFactor()}))}},{key:"checkPasswordHandler",value:function(e){var t=this;e.preventDefault(),this.setState({errorMessage:""}),g.a.checkPassword(this.state.password).then((function(){t.setState({hasValidPassword:!0}),t.enableTwoFactor()})).catch((function(e){t.setState({errorMessage:"Wachtwoord is onjuist."})}))}},{key:"renderAlert",value:function(){if(this.state.errorMessage)return y.a.createElement("div",{className:"row margin-10-top text-center"},y.a.createElement("div",{className:"col-sm-10 col-md-offset-1"},y.a.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)))}},{key:"render",value:function(){var e=this;return y.a.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},y.a.createElement("div",{className:"panel panel-default add"},y.a.createElement("div",{className:"panel-body"},y.a.createElement("div",{className:"text-center"},y.a.createElement(b.a,{height:"150px"})),this.renderAlert(),this.state.hasValidPassword?y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"row margin-10-top text-center"},y.a.createElement("div",{className:"col-sm-10 col-md-offset-1"},"Het gebruik van twee factor authenticatie is ingeschakeld voor uw account. Sla de herstelcode op een veilige plek op en scan vervolgens de QR-code met een authenticator app.")),y.a.createElement("div",{className:"row margin-10-top text-center"},y.a.createElement("div",{className:"col-sm-10 col-md-offset-1"},y.a.createElement("h4",null,"Herstelcode:"),y.a.createElement("ul",{style:{listStyleType:"none",padding:0}},this.state.recoveryCodes.map((function(e){return y.a.createElement("li",{key:e,style:{"font-family":"courier"}},e)}))))),y.a.createElement("div",{className:"row margin-10-top text-center"},y.a.createElement("div",{className:"col-sm-10 col-md-offset-1"},y.a.createElement("h4",null,"QR"),y.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.qr.svg}}))),y.a.createElement("div",{className:"row margin-10-top"},y.a.createElement("div",{className:"col-sm-10 col-md-offset-1"},y.a.createElement("div",{className:"btn-group pull-right"},y.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){E.f.push("/two-factor/confirm")}},"Doorgaan"))))):y.a.createElement("form",{onSubmit:this.checkPasswordHandler},"Voer uw wachtwoord opnieuw in om twee factor authenticatie te activeren.",y.a.createElement("br",null),y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-xs-6"},y.a.createElement("input",{placeholder:"Wachtwoord",className:"form-control input-sm",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),y.a.createElement("div",{className:"col-xs-6"},y.a.createElement("button",{type:"submit",className:"btn btn-primary btn-sm"},"Ontgrendel")))))))}}]),a}(v.Component);t.default=k}}]);