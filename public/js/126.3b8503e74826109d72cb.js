(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{1581:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a.n(n),o=a(19),i=a.n(o),s=a(12),l=a.n(s),c=a(20),d=a.n(c),u=a(21),m=a.n(u),g=a(14),h=a.n(g),p=a(6),f=a.n(p),b=a(0),v=a.n(b),w=a(30),E=a(33),y=a(3),P=a(48),S=function(){return v.a.createElement("div",{className:"row"},v.a.createElement("div",{className:"col-md-4"},v.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},v.a.createElement(P.a,{iconName:"glyphicon-arrow-left",onClickAction:y.e?y.e.goBack:function(){}}))),v.a.createElement("div",{className:"col-md-4"},v.a.createElement("h4",{className:"text-center"},"Portal dashboard instellingen")),v.a.createElement("div",{className:"col-md-4"}))},x=a(16),k=a(235),D=a(13),M=a.n(D),j=a(31),O=a.n(j),N=a(7),C=a.n(N),T=a(40),R=a(104),H=a(237),I=a(1070),A=a(861),L=function(e){return v.a.createElement("div",{className:"row"},v.a.createElement("div",{className:"col-md-2"},v.a.createElement("div",{className:"btn-group btn-group-flex",role:"group"},v.a.createElement(P.a,{iconName:"glyphicon-plus",onClickAction:function(){return e.toggleAddWidgetModal()}}))),v.a.createElement("div",{className:"col-md-8"},v.a.createElement("h4",{className:"text-center table-title"},"Widgets")),v.a.createElement("div",{className:"col-md-2"},v.a.createElement("div",{className:"pull-right"},"Resultaten: ",e.widgets.length||0)))},z=(a(5),a(41)),W=a(37),B=a(1551),U=a(947);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var _=a(891).default,G=function(e){d()(a,e);var t=K(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"closeShowCropWidgetImage",(function(){n.setState(q(q({},n.state),{},{widget:q(q({},n.state.widget),{},{image:"",imageName:""}),showCropImageModal:!1}))})),f()(l()(n),"cropWidgetImage",(function(e){n.setState(q(q({},n.state),{},{widget:q(q({},n.state.widget),{},{image:e,imageName:e.name}),showCropImageModal:!1}))})),f()(l()(n),"addWidgetAction",(function(){var e={},t={},a=!1,r=n.state.widget;if(O.a.isEmpty(r.title)&&(e.title=!0,t.title="Titel verplicht veld.",a=!0),O.a.isEmpty(r.text)&&(e.text=!0,t.text="Tekst verplicht veld.",a=!0),O.a.isEmpty(r.imageName)&&(e.image=!0,t.image="Afbeelding verplicht veld.",a=!0),O.a.isEmpty(r.buttonText)&&(e.buttonText=!0,t.buttonText="Knoptekst verplicht veld.",a=!0),O.a.isEmpty(r.buttonLink)&&(e.buttonLink=!0,t.buttonLink="Knoplink verplicht veld.",a=!0),n.setState(q(q({},n.state),{},{errors:e,errorMessage:t})),!a){var o=new FormData;o.append("title",r.title),o.append("text",r.text),o.append("image",r.image),o.append("buttonText",r.buttonText),o.append("buttonLink",r.buttonLink),I.a.addDashboardWidget(o).then((function(e){n.props.addWidget(e.data),n.props.toggleModal()})).catch((function(e){console.log(e)}))}})),f()(l()(n),"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(q(q({},n.state),{},{widget:q(q({},n.state.widget),{},f()({},r,a))}))})),n.state={widget:{title:"",text:"",image:"",imageName:"",buttonText:"",buttonLink:"",active:!0},showCropImageModal:!1,errors:{title:!1,text:!1,image:!1,buttonText:!1,buttonLink:!1},errorMessage:{}},n}return i()(a,[{key:"onDropAccepted",value:function(e){this.setState(q(q({},this.state),{},{widget:q(q({},this.state.widget),{},{image:e[0],imageName:e[0].name}),showCropImageModal:!0}))}},{key:"onDropRejected",value:function(){alert("Er is wat fout gegaan.")}},{key:"render",value:function(){var e=this.state,t=e.widget,a=e.showCropImageModal,n=e.errors,r=e.errorMessage;return v.a.createElement(z.a,{closeModal:this.props.toggleModal,showConfirmAction:!0,title:this.props.title,buttonConfirmText:"Toevoegen",confirmAction:this.addWidgetAction},v.a.createElement("div",{className:"row"},v.a.createElement(B.a,{sm:12},v.a.createElement(W.a,{divSize:"col-sm-12",labelSize:"col-sm-12",size:"col-sm-12",label:"Titel",name:"title",value:t.title,onChangeAction:this.handleInputChange,required:"required",error:n.title,errorMessage:r.title})),v.a.createElement(B.a,{sm:12,style:{paddingLeft:"30px",paddingRight:"30px"}},v.a.createElement(A.a,{sizeInput:"col-sm-12",sizeLabel:"col-sm-12",size:"col-sm-12",label:"Tekst",name:"text",value:t.text,onChangeAction:this.handleInputChange,required:"required",error:n.text,errorMessage:r.text})),v.a.createElement(B.a,{sm:12,style:{paddingLeft:"30px",paddingRight:"30px"}},v.a.createElement("label",{className:"col-sm-12 required"},"Afbeelding"),!!t.imageName&&v.a.createElement("b",null,"Â geslecteerd bestand: ",t.imageName),v.a.createElement(_,{accept:"image/png",multiple:!1,className:"dropzone",onDropAccepted:this.onDropAccepted.bind(this),onDropRejected:this.onDropRejected.bind(this),maxSize:6e6},v.a.createElement("p",null,"Klik hier voor het uploaden van een bestand"),v.a.createElement("p",null,v.a.createElement("strong",null,"of")," sleep het bestand hierheen")),n.image&&v.a.createElement("div",{className:"col-sm-12"},v.a.createElement("span",{className:"has-error-message"}," ",r.image))),v.a.createElement(B.a,{sm:5},v.a.createElement(W.a,{divSize:"col-sm-12",labelSize:"col-sm-12",size:"col-sm-12",label:"Knoptekst",name:"buttonText",value:t.buttonText,onChangeAction:this.handleInputChange,required:"required",error:n.buttonText,errorMessage:r.buttonText})),v.a.createElement(B.a,{sm:7},v.a.createElement(W.a,{divSize:"col-sm-12",labelSize:"col-sm-12",size:"col-sm-12",label:"Knoplink",name:"buttonLink",value:t.buttonLink,onChangeAction:this.handleInputChange,required:"required",error:n.buttonLink,errorMessage:r.buttonLink}))),a&&v.a.createElement(U.a,{closeShowCrop:this.closeShowCropWidgetImage,image:t.image,imageLayoutItemName:"image-widget",cropLogo:this.cropWidgetImage}))}}]),a}(b.Component),V=a(234),J=a.n(V),$=a(815),Q=a.n($),X=a(1526),Y=a(1553),Z=a(1542),ee=a(1597),te=a(1598),ae=a(1528),ne=a(26),re=a.n(ne);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var ie=a(891).default,se=function(e){d()(a,e);var t=oe(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).state={error:!1,errorMaxSize:!1},n}return i()(a,[{key:"onDropAccepted",value:function(e){var t=this;this.props.addWidgetImage(e),setTimeout((function(){t.props.closeNewWidgetImage()}),500)}},{key:"onDropRejected",value:function(){this.setState({errorMaxSize:!0})}},{key:"render",value:function(){return v.a.createElement(z.a,{closeModal:this.props.closeNewWidgetImage,showConfirmAction:!1,title:"Upload widget image bestand (PNG)"},v.a.createElement("p",null,"Alleen image bestanden met bestandstype PNG kunnen gebruikt worden."),v.a.createElement("p",null,"Breedte en hoogte zijn variabel en afhankelijk van window breedte/hoogte. Breedte/Hoogte verhouding images blijft behouden en images zullen wel volledig getoond worden. Bij genoeg window breedte worden widgets per 2 naast elkaar getoond, anders onder elkaar. Aanbevolen afmeting (in pixels): 453x151 (3:1 verhouding)."),v.a.createElement("div",{className:"upload-file-content"},v.a.createElement(ie,{accept:"image/png",multiple:!1,className:"dropzone",onDropAccepted:this.onDropAccepted.bind(this),onDropRejected:this.onDropRejected.bind(this),maxSize:6291456},v.a.createElement("p",null,"Klik hier voor het uploaden van een bestand"),v.a.createElement("p",null,v.a.createElement("strong",null,"of")," sleep het bestand hierheen"))),this.state.error&&v.a.createElement("p",{className:"has-error-message"},"Uploaden mislukt. Probeer nogmaals een bestand te uploaden."),this.state.errorMaxSize&&v.a.createElement("p",{className:"has-error-message"},"Uploaden mislukt. Het bestand moet bestandstype PNG zijn en mag maximaal 6MB groot zijn."))}}]),a}(b.Component),le=a(816),ce=a(1073),de=a(64),ue=a(65),me=function(e){var t=e.row,a=e.index,n=e.moveRow,r=e.edit,o=e.handleInputChange,i=e.removeWidget,s=e.imageHash,l=Object(b.useRef)(null),c=Object(b.useRef)(null),d=Object(b.useState)(!1),u=Q()(d,2),m=u[0],g=u[1],h=Object(b.useState)(!1),p=Q()(h,2),f=p[0],w=p[1],E=Object(b.useState)(""),y=Q()(E,2),S=y[0],x=y[1],k=Object(b.useState)(!1),D=Q()(k,2),M=D[0],j=D[1],O=Object(b.useState)(""),N=Q()(O,2),C=N[0],T=N[1],R=["over-ons","project-schrijf-je-in","huidige-deelnames"],H=["buttonLink"],L=Object(ee.a)({accept:"row",hover:function(e,t){if(l.current){var r=e.index,o=a;if(r!==o){var i=l.current.getBoundingClientRect(),s=(i.bottom-i.top)/2,c=t.getClientOffset().y-i.top;r<o&&c<s||r>o&&c>s||(n(r,o),e.index=o)}}}}),B=Q()(L,2)[1],F=Object(te.a)({type:"row",item:{type:"row",index:a},collect:function(e){return{isDragging:e.isDragging()}}}),q=Q()(F,3),K=q[0].isDragging,_=q[1],G=K?0:1;(0,q[2])(B(l)),_(c);var V=function(){g(!m)};return v.a.createElement(v.a.Fragment,null,v.a.createElement("tr",{ref:l,style:{opacity:G}},r&&v.a.createElement("td",{ref:c},v.a.createElement(re.a,{icon:ae.arrows_vertical}),v.a.createElement(de.c,{color:"blue",size:"15px","data-tip":"Je kunt de volgorde van de widgets aanpassen door deze te slepen","data-for":"tooltip-".concat(l)}),v.a.createElement(ue.a,{id:"tooltip-".concat(l),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})),r?t.cells.map((function(e){switch(e.column.id){case"title":case"text":case"buttonText":case"buttonLink":return v.a.createElement("td",{key:e.column.id},v.a.createElement(A.a,{sizeInput:"col-sm-12",size:"col-sm-12",name:"".concat(e.row.id,"-").concat(e.column.id),value:e.value,onChangeAction:o,itemId:e.row.id}));case"image":var t=e.value&&e.value.includes("images/")?"".concat(URL_API,"/portal").concat(e.value,"?").concat(s):"".concat(URL_API,"/portal/images/").concat(e.value,"?").concat(s);return v.a.createElement("td",{key:e.column.id},v.a.createElement(ce.a,{src:S&&S.preview?S.preview:t,thumbnail:!0,style:{border:"1px solid #999",display:"inline-block",padding:"1px",borderRadius:"1px",height:"100%",width:"100px",boxShadow:"0 0 0 1px #fff inset"},onClick:V}),v.a.createElement(W.a,{type:"hidden",label:"",divSize:"col-sm-12",size:"col-sm-12",value:S?S.name:e.value,onClickAction:V,onChangeaction:function(){}}));case"active":return v.a.createElement("td",{key:e.column.id},v.a.createElement(le.a,{label:"",name:"".concat(e.row.id,"-").concat(e.column.id),value:e.value,onChangeAction:o,itemId:e.row.id}));default:return v.a.createElement("td",{key:e.column.id},v.a.createElement(W.a,{type:"text",divSize:"col-sm-12",divClassName:"no-padding",size:"col-sm-12",name:"".concat(e.row.id,"-").concat(e.column.id),value:e.value,onChangeAction:o,itemId:e.row.id,disabled:R.includes(e.row.id)&&H.includes(e.column.id)}))}})):t.cells.map((function(e){switch(e.column.id){case"active":return v.a.createElement("td",e.getCellProps(),e.value?"Ja":"Nee");case"image":var t=e.value&&e.value.includes("images/")?"".concat(URL_API,"/portal").concat(e.value,"?").concat(s):"".concat(URL_API,"/portal/images/").concat(e.value,"?").concat(s);return v.a.createElement("td",{key:e.column.id},v.a.createElement(ce.a,{src:S&&S.preview?S.preview:t,thumbnail:!0,style:{border:"1px solid #999",display:"inline-block",padding:"1px",borderRadius:"1px",height:"100%",width:"100px",boxShadow:"0 0 0 1px #fff inset"}}))}return v.a.createElement("td",e.getCellProps(),e.render("Cell"))})),r&&v.a.createElement("td",null,v.a.createElement(P.a,{iconName:"glyphicon-remove",buttonClassName:"btn-danger btn-sm",disabled:R.includes(t.id),onClickAction:function(){return i(t.id)}}))),m&&v.a.createElement(se,{closeNewWidgetImage:function(){g(!1)},addWidgetImage:function(e){x(e[0]),w(!0)}}),f&&v.a.createElement(U.a,{closeShowCrop:function(){x(""),w(!1)},image:S,imageLayoutItemName:"image-widget",cropLogo:function(e){x(e);var a=new FormData;a.append("id",t.id),a.append("image",e),I.a.updateDashboardWidget(a).then((function(e){w(!1),j(!0),T(e.data.message)})).catch((function(e){w(!1),console.log(e),alert("Er is iets misgegaan bij opslaan. Herlaad de pagina en probeer het nogmaals.")}))}}),M&&v.a.createElement(z.a,{title:"Succes",closeModal:function(){j(!M)},buttonCancelText:"Ok",showConfirmAction:!1},C))},ge=a(1531),he=a.n(ge);function pe(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return fe(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var be=function(e){var t=e.columns,a=e.data,n=e.edit,r=e.handleInputChange,o=e.removeWidget,i=e.imageHash,s=Object(b.useState)(a),l=Q()(s,2),c=l[0],d=l[1];Object(b.useEffect)((function(){d(a)}),[a]),Object(b.useEffect)((function(){var e,t=pe(c.entries());try{for(t.s();!(e=t.n()).done;){var a=Q()(e.value,2),n=a[0];a[1].order=n+1}}catch(e){t.e(e)}finally{t.f()}}),[c]);var u=v.a.useCallback((function(e){return e.id}),[]),m=Object(X.useTable)({data:c,columns:t,getRowId:u}),g=m.getTableProps,h=m.getTableBodyProps,p=m.headerGroups,f=m.rows,w=m.prepareRow,E=function(e,t){var a=c[e];d(he()(c,{$splice:[[e,1],[t,0,a]]}))};return v.a.createElement(Y.a,{backend:Z.a},v.a.createElement("table",J()({},g(),{className:"table table-condensed table-hover table-striped col-xs-12"}),v.a.createElement("thead",null,p.map((function(e){return v.a.createElement("tr",J()({},e.getHeaderGroupProps(),{className:"thead-title"}),n&&v.a.createElement("th",null),e.headers.map((function(e){return v.a.createElement("th",e.getHeaderProps(),e.render("Header"),e.textToolTip&&v.a.createElement("span",null," ",v.a.createElement(de.c,{color:"white",size:"15px","data-tip":e.render("textToolTip"),"data-for":"tooltip-".concat(e.render("accessor"))}),v.a.createElement(ue.a,{id:"tooltip-".concat(e.render("accessor")),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})))})),n&&v.a.createElement("th",null))}))),v.a.createElement("tbody",h(),f.map((function(e,t){return w(e)||v.a.createElement(me,J()({index:t,row:e,moveRow:E,edit:n,handleInputChange:r,removeWidget:o},e.getRowProps(),{imageHash:i}))})))))};function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var we=function(e){d()(a,e);var t=ve(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"toggleAddWidgetModal",(function(){n.setState({addWidgetModal:!n.state.addWidgetModal})})),n.state={addWidgetModal:!1},n}return i()(a,[{key:"render",value:function(){var e=this.props.widgets,t=this.props.edit;return v.a.createElement(v.a.Fragment,null,t?v.a.createElement(v.a.Fragment,null,v.a.createElement(L,{widgets:e,toggleAddWidgetModal:this.toggleAddWidgetModal}),v.a.createElement("div",{style:{height:"5px"}})):v.a.createElement("h5",null,"Widgets"),v.a.createElement(be,{columns:[{Header:"Titel",textToolTip:"",accessor:"title"},{Header:"Tekst",textToolTip:"",accessor:"text"},{Header:"Afbeelding",textToolTip:"",accessor:"image"},{Header:"Knoptekst",textToolTip:"",accessor:"buttonText"},{Header:"Knoplink",textToolTip:"Knoplinks zonder HTTPS:// verwijzen naar pagina binnen xxxxxx.mijnenergiesamen.nl (de gebruikers portaal pagina) \n                     <br /> bijvoorbeeld inschrijven-projecten verwijst naar: <br />\n                     https://xxxxxx.mijnenergiesamen.nl/#/inschrijven-projecten <br />\n                     Knoplinks met HTTPS:// (Externe links) verwijzen naar een pagina buiten de gebruikersportaal <br />\n                     bijvoorbeeld https://www.google.com/\n                     zal na aanklikken de website in een nieuw tabblad(nieuw scherm) openen.",accessor:"buttonLink"},{Header:"Actief",textToolTip:"",accessor:"active"}],data:e.sort((function(e,t){return e.order>t.order?1:-1})),edit:t,handleInputChange:this.props.handleWidgetInputChange,removeWidget:this.props.removeWidget,imageHash:this.props.imageHash}),this.state.addWidgetModal&&v.a.createElement(G,{title:"Widget toevoegen",toggleModal:this.toggleAddWidgetModal,addWidget:this.props.addWidget}))}}]),a}(b.Component),Ee=Object(x.b)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(we),ye=a(1247),Pe=a(1248);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}C.a.locale("nl");var De=function(e){d()(a,e);var t=ke(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(xe(xe({},n.state),{},{dashboardSettings:xe(xe({},n.state.dashboardSettings),{},f()({},r,a))}))})),f()(l()(n),"togglePreviewPortalDashboardPagePc",(function(){n.setState({showPreviewPortalDashboardPagePc:!n.state.showPreviewPortalDashboardPagePc})})),f()(l()(n),"togglePreviewPortalDashboardPageMobile",(function(){n.setState({showPreviewPortalDashboardPageMobile:!n.state.showPreviewPortalDashboardPageMobile})})),f()(l()(n),"setShowMenu",(function(){n.setState({showMenu:!n.state.showMenu})})),f()(l()(n),"handleSubmit",(function(e){e.preventDefault();var t=n.state,a=t.dashboardSettings,r=t.widgets;n.setState(xe(xe({},n.state),{},{errors:{}})),I.a.updateDashboardSettings({welcomeTitle:a.welcomeTitle,welcomeMessage:a.welcomeMessage,widgets:r}).then((function(e){n.props.updateState(e.data),n.props.switchToView()})).catch((function(e){console.log("error PortalSettingsDashboardFormGeneralEdit - handleSubmit - updateDashboardSettings"),console.log(e),n.props.setError(e.response.status,e.response.data.message)}))})),f()(l()(n),"handleWidgetInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.getAttribute("data-item-id"),o=t.name.replace(r+"-",""),i=Object.assign(M()(n.state.widgets),f()({},n.state.widgets.findIndex((function(e){return e.id===r})),xe(xe({},n.state.widgets[n.state.widgets.findIndex((function(e){return e.id===r}))]),{},f()({},o,a))));n.setState(xe(xe({},n.state),{},{widgets:i}))})),f()(l()(n),"addWidget",(function(e){n.setState(xe(xe({},n.state),{},{widgets:[].concat(M()(n.state.widgets),[e])}))})),f()(l()(n),"removeWidget",(function(e){I.a.removeDashboardWidget(e).then((function(e){n.setState(xe(xe({},n.state),{},{widgets:e.data}))})).catch((function(e){console.log("error PortalSettingsDashboardFormGeneralEdit - removeWidget - removeDashboardWidget"),console.log(e),n.props.setError(e.response.status,e.response.data.message)}))})),n.state={showPreviewPortalDashboardPagePc:!1,showPreviewPortalDashboardPageMobile:!1,showMenu:!1,imageHash:Date.now(),dashboardSettings:xe({},e.dashboardSettings),widgets:M()(e.dashboardSettings.widgets),errors:{welcomeTitle:"",welcomeMessage:""}},n}return i()(a,[{key:"render",value:function(){var e=this.state.dashboardSettings,t=e.welcomeTitle,a=e.welcomeMessage,n=this.state.widgets,r="".concat(URL_API,"/portal/images/logo.png?").concat(this.props.imageHash),o="".concat(URL_API,"/portal/images/background-header.png?").concat(this.props.imageHash);return v.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},v.a.createElement(w.a,null,v.a.createElement(E.a,null,v.a.createElement("div",{className:"row"},v.a.createElement(A.a,{label:"Welkomsttitel",divSize:"col-sm-8",name:"welcomeTitle",value:t,onChangeAction:this.handleInputChange,error:!!this.state.errors.welcomeTitle})),v.a.createElement("div",{className:"row"},v.a.createElement(A.a,{label:"Welkomstbericht",divSize:"col-sm-8",name:"welcomeMessage",value:a,onChangeAction:this.handleInputChange,error:!!this.state.errors.welcomeMessage})))),v.a.createElement(w.a,null,v.a.createElement(E.a,null,v.a.createElement("div",{className:"row",style:{margin:"0"}},v.a.createElement(Ee,{widgets:n,edit:!0,handleWidgetInputChange:this.handleWidgetInputChange,addWidget:this.addWidget,removeWidget:this.removeWidget,imageHash:this.props.imageHash}))),v.a.createElement(E.a,null,v.a.createElement("div",{className:"pull-right btn-group",role:"group"},v.a.createElement(T.a,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),v.a.createElement(T.a,{buttonText:"Opslaan",type:"submit",value:"Submit"}))),this.state.showPreviewPortalDashboardPagePc&&v.a.createElement(ye.a,{previewFromLayout:!1,closeModal:this.togglePreviewPortalDashboardPagePc,setShowMenu:this.setShowMenu,showMenu:this.state.showMenu,imageHash:this.state.imageHash,attachmentLogoHeader:"",logoHeaderUrl:r,attachmentImageBgHeader:"",imageBgHeaderUrl:o,dashboardSettings:this.props.dashboardSettings}),this.state.showPreviewPortalDashboardPageMobile&&v.a.createElement(Pe.a,{previewFromLayout:!1,closeModal:this.togglePreviewPortalDashboardPageMobile,setShowMenu:this.setShowMenu,showMenu:this.state.showMenu,imageHash:this.state.imageHash,attachmentLogoHeader:"",logoHeaderUrl:r,attachmentImageBgHeader:"",imageBgHeaderUrl:o,dashboardSettings:this.props.dashboardSettings})))}}]),a}(b.Component),Me=Object(x.b)(null,(function(e){return{setError:function(t,a){e(Object(R.b)(t,a))},fetchSystemData:function(){e(Object(H.a)())}}}))(De),je=a(23);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var Ne=function(e){d()(a,e);var t=Oe(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"togglePreviewPortalDashboardPagePc",(function(){n.setState({showPreviewPortalDashboardPagePc:!n.state.showPreviewPortalDashboardPagePc})})),f()(l()(n),"togglePreviewPortalDashboardPageMobile",(function(){n.setState({showPreviewPortalDashboardPageMobile:!n.state.showPreviewPortalDashboardPageMobile})})),f()(l()(n),"setShowMenu",(function(){n.setState({showMenu:!n.state.showMenu})})),n.state={showPreviewPortalDashboardPagePc:!1,showPreviewPortalDashboardPageMobile:!1,showMenu:!1,imageHash:Date.now()},n}return i()(a,[{key:"render",value:function(){var e=this.props.dashboardSettings,t=e.welcomeTitle,a=e.welcomeMessage,n=e.widgets,r="".concat(URL_API,"/portal/images/logo.png?").concat(this.props.imageHash),o="".concat(URL_API,"/portal/images/background-header.png?").concat(this.props.imageHash);return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",null,v.a.createElement(w.a,null,v.a.createElement(E.a,null,v.a.createElement("div",{className:"row"},v.a.createElement("div",{className:"col-md-6"},v.a.createElement("div",{className:"btn-group btn-group-flex",role:"group"},v.a.createElement(T.a,{buttonText:"Preview dashboard pagina PC",onClickAction:this.togglePreviewPortalDashboardPagePc}),v.a.createElement(T.a,{buttonText:"Preview dashboard pagina mobiel",onClickAction:this.togglePreviewPortalDashboardPageMobile})))))),this.state.showPreviewPortalDashboardPagePc&&v.a.createElement(ye.a,{previewFromLayout:!1,closeModal:this.togglePreviewPortalDashboardPagePc,setShowMenu:this.setShowMenu,showMenu:this.state.showMenu,imageHash:this.state.imageHash,attachmentLogoHeader:"",logoHeaderUrl:r,attachmentImageBgHeader:"",imageBgHeaderUrl:o,dashboardSettings:this.props.dashboardSettings}),this.state.showPreviewPortalDashboardPageMobile&&v.a.createElement(Pe.a,{previewFromLayout:!1,closeModal:this.togglePreviewPortalDashboardPageMobile,setShowMenu:this.setShowMenu,showMenu:this.state.showMenu,imageHash:this.state.imageHash,attachmentLogoHeader:"",logoHeaderUrl:r,attachmentImageBgHeader:"",imageBgHeaderUrl:o,dashboardSettings:this.props.dashboardSettings})),v.a.createElement("div",{onClick:this.props.switchToEdit},v.a.createElement(w.a,null,v.a.createElement(E.a,null,v.a.createElement("div",{className:"row"},v.a.createElement(je.a,{label:"Welkomsttitel",divSize:"col-sm-8",value:t,className:"col-sm-8 form-group"})),v.a.createElement("div",{className:"row"},v.a.createElement(je.a,{label:"Welkomstbericht",divSize:"col-sm-8",value:a,className:"col-sm-8 form-group"})))),v.a.createElement(w.a,null,v.a.createElement(E.a,null,v.a.createElement("div",{className:"row",style:{margin:"0"}},v.a.createElement(Ee,{widgets:n,edit:!1,imageHash:this.state.imageHash}))))))}}]),a}(b.Component),Ce=a(1101);function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var Re=function(e){d()(a,e);var t=Te(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"switchToEdit",(function(){n.setState({showEdit:!0})})),f()(l()(n),"switchToView",(function(){n.setState({showEdit:!1,imageHash:Date.now(),activeDiv:""})})),n.state={showEdit:!1,imageHash:Date.now(),activeDiv:""},n}return i()(a,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.meDetails.permissions,a=void 0===t?{}:t;return a.managePortalSettings?v.a.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&a.managePortalSettings?v.a.createElement(Me,{dashboardSettings:this.props.dashboardSettings,updateState:this.props.updateState,meDetails:this.props.meDetails,switchToView:this.switchToView,imageHash:this.state.imageHash}):Object(k.isEmpty)(this.props.dashboardSettings)?v.a.createElement("p",null,"Nog geen dashboard instellingen opgeslagen."):v.a.createElement(Ne,{dashboardSettings:this.props.dashboardSettings,switchToEdit:this.switchToEdit,imageHash:this.state.imageHash})):v.a.createElement(Ce.a,null)}}]),a}(b.Component),He=Object(x.b)((function(e){return{meDetails:e.meDetails}}))(Re),Ie=function(e){var t=e.dashboardSettings,a=e.hasError,n=e.isLoading,r=e.updateState,o="",i=!0;return a?o="Fout bij het ophalen van dashboard instellingen.":n?o="Gegevens aan het laden.":i=!1,i?v.a.createElement("div",null,o):v.a.createElement("div",null,v.a.createElement(He,{dashboardSettings:t,updateState:r}))};function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var We=function(e){d()(a,e);var t=ze(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"callFetchDashboardSettings",(function(){n.setState({isLoading:!0,hasError:!1});I.a.fetchDashboardSettings("?keys[]=welcomeTitle&keys[]=welcomeMessage&keys[]=widgets").then((function(e){n.setState({isLoading:!1,dashboardSettings:Le({},e.data)})})).catch((function(e){n.setState({isLoading:!1,hasError:!0})}))})),f()(l()(n),"updateState",(function(e){n.setState({dashboardSettings:Le({},e)})})),n.state={dashboardSettings:{},isLoading:!1,hasError:!1},n}return i()(a,[{key:"componentDidMount",value:function(){this.callFetchDashboardSettings()}},{key:"render",value:function(){return v.a.createElement("div",{className:"row"},v.a.createElement("div",{className:"col-md-9"},v.a.createElement("div",{className:"col-md-12 margin-10-top"},v.a.createElement(w.a,null,v.a.createElement(E.a,{className:"panel-small"},v.a.createElement(S,null)))),v.a.createElement("div",{className:"col-md-12 margin-10-top"},v.a.createElement(Ie,{dashboardSettings:this.state.dashboardSettings,isLoading:this.state.isLoading,hasError:this.state.hasError,updateState:this.updateState})),v.a.createElement("div",{className:"col-md-12 margin-10-top"})),v.a.createElement("div",{className:"col-md-3"}))}}]),a}(b.Component);t.default=We},861:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),i=a.n(o),s=function(e){var t,a=e.label,n=e.size,o=e.sizeLabel,i=e.sizeInput,s=e.id,l=e.name,c=e.value,d=e.onChangeAction,u=e.required,m=e.error,g=e.errorMessage,h=e.rows;return r.a.createElement("div",{className:"form-group ".concat(n)},r.a.createElement("div",{className:"row"},!!a&&r.a.createElement("div",{className:o},r.a.createElement("label",{htmlFor:s,className:"col-sm-12 ".concat(u)},a)),r.a.createElement("div",{className:i},r.a.createElement("textarea",{name:l,value:c,onChange:d,className:"form-control input-sm "+(m?"has-error":""),rows:h,"data-item-id":null!==(t=e.itemId)&&void 0!==t?t:""}))),m&&r.a.createElement("div",{className:i},r.a.createElement("span",{className:"has-error-message"}," ",g)))};s.defaultProps={size:"col-sm-12",sizeLabel:"col-sm-3",sizeInput:"col-sm-9",value:"",required:"",error:!1,errorMessage:"",rows:"5"},s.propTypes={label:i.a.string,type:i.a.string,size:i.a.string,sizeLabel:i.a.string,sizeInput:i.a.string,id:i.a.string,name:i.a.string.isRequired,value:i.a.oneOfType([i.a.string,i.a.number]),onChangeAction:i.a.func,required:i.a.string,error:i.a.bool,errorMessage:i.a.string},t.a=s}}]);