(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{1667:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a.n(n),i=a(16),c=a.n(i),o=a(11),l=a.n(o),s=a(17),p=a.n(s),u=a(18),m=a.n(u),d=a(13),h=a.n(d),f=a(5),v=a.n(f),g=a(0),b=a.n(g),y=a(33),E=a.n(y),C=a(4),N=a(28),S=a(31),T=a(51);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var O=function(e){p()(a,e);var t=I(a);function a(e){return r()(this,a),t.call(this,e)}return c()(a,[{key:"render",value:function(){return b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col-sm-12"},b.a.createElement(N.a,null,b.a.createElement(S.a,{className:"panel-small"},b.a.createElement("div",{className:"col-md-4"},b.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},b.a.createElement(T.a,{iconName:"glyphicon-arrow-left",onClickAction:C.e.goBack}))),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("h3",{className:"text-center table-title"},"Nieuwe overdracht")),b.a.createElement("div",{className:"col-md-4"})))))}}]),a}(g.Component),j=a(20),k=a(7),w=a.n(k),P=a(52),A=a(39),R=a(123),W=a(36),D=a(89),q=a(285);w.a.locale("nl");var B=Object(j.b)((function(e){return{participantProjectPayoutTypes:e.systemData.participantProjectPayoutTypes}}))((function(e){var t=e.participationTransfer,a=t.transferToContactId,n=t.participationsAmount,r=t.participationWorth,i=t.didSign,c=t.dateBook,o=e.participation;return b.a.createElement("form",{className:"form-horizontal col-md-12",onSubmit:e.handleSubmit},b.a.createElement("div",{className:"row"},b.a.createElement(W.a,{label:"Huidige participant",name:"currentParticipantName",value:o.contact?o.contact.fullName:"",readOnly:!0}),b.a.createElement(q.a,{label:"Contact",name:"transferToContactId",options:e.contacts,value:a,onChangeAction:e.handleReactSelectChange,optionName:"fullName",isLoading:e.peekLoading.contacts,required:"required",error:e.errors.transferToContactId})),b.a.createElement("div",{className:"row"},b.a.createElement(W.a,{label:"Project",name:"projectName",value:o.project?o.project.name:"",readOnly:!0}),b.a.createElement(W.a,{type:"number",min:"0",max:o.participationsCurrent+"",label:"Aantal deelnames overdragen",name:"participationsAmount",value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.participationsAmount})),b.a.createElement("div",{className:"row"},b.a.createElement(W.a,{label:"Huidig aantal deelnames",name:"participationsCurrent",value:o.participationsCurrent,readOnly:!0}),b.a.createElement(W.a,{type:"number",min:"0",label:"Waarde per deelname",name:"participationWorth",value:r,onChangeAction:e.handleInputChange,required:"required",error:e.errors.participationWorth})),b.a.createElement("div",{className:"row"},b.a.createElement(W.a,{label:"Waarde over te dragen deelnames",name:"participationsWorthTotal",value:n*r,readOnly:!0}),b.a.createElement(P.a,{label:"Overdrachtsdatum",name:"dateBook",value:c,onChangeAction:e.handleInputChangeDate})),b.a.createElement("div",{className:"row"},b.a.createElement(D.a,{label:"Getekend document",name:"didSign",value:i,onChangeAction:e.handleInputChange,required:"required"}),e.errors.didSign&&b.a.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},"Het document moet getekend zijn.")),b.a.createElement(R.a,null,b.a.createElement("div",{className:"pull-right btn-group",role:"group"},b.a.createElement(A.a,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))})),x=a(231);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){v()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var J=function(e){p()(a,e);var t=z(a);function a(e){var n;return r()(this,a),n=t.call(this,e),v()(l()(n),"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(H(H({},n.state),{},{participationTransfer:H(H({},n.state.participationTransfer),{},v()({},r,a))}))})),v()(l()(n),"handleSubmit",(function(e){e.preventDefault();var t=n.state.participationTransfer,a={},r=!1;E.a.isEmpty(t.transferToContactId+"")&&(a.transferToContactId=!0,r=!0),E.a.isEmpty(t.participationsAmount+"")&&(a.participationsAmount=!0,r=!0),t.participationsAmount>n.state.participation.participationsCurrent&&(a.participationsAmount=!0,r=!0),t.participationsAmount<=0&&(a.participationsAmount=!0,r=!0),E.a.isEmpty(t.participationWorth+"")&&(a.participationWorth=!0,r=!0),t.participationWorth<0&&(a.participationWorth=!0,r=!0),!1===t.didSign&&(a.didSign=!0,r=!0),n.setState(H(H({},n.state),{},{errors:a})),!r&&x.a.transferParticipation(t).then((function(e){C.f.push("/project/deelnemer/".concat(t.participationId))}))})),n.state={contacts:[],participation:{},participationTransfer:{participationId:e.params.participationId,transferToContactId:"",projectId:"",participationsAmount:0,participationWorth:"",didSign:!1,dateBook:""},errors:{transferToContactId:!1,participationsAmount:!1,participationWorth:!1,didSign:!1},peekLoading:{contacts:!0}},n.handleInputChangeDate=n.handleInputChangeDate.bind(l()(n)),n.handleReactSelectChange=n.handleReactSelectChange.bind(l()(n)),n}return c()(a,[{key:"componentWillMount",value:function(){var e=this;x.a.getContactsMembershipPeek(this.state.participationTransfer.participationId).then((function(t){t.unshift({id:"0",fullName:"Teruggave energieleverancier"}),e.setState({contacts:t,peekLoading:H(H({},e.state.peekLoading),{},{contacts:!1})})})),x.a.fetchParticipantProject(this.state.participationTransfer.participationId).then((function(t){e.setState({participation:t,participationTransfer:H(H({},e.state.participationTransfer),{},{projectId:t.project.id,participationWorth:t.project.participationWorth})})}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(H(H({},this.state),{},{participationTransfer:H(H({},this.state.participationTransfer),{},v()({},t,e))}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(H(H({},this.state),{},{participationTransfer:H(H({},this.state.participationTransfer),{},v()({},t,e))}))}},{key:"render",value:function(){return b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col-md-9"},b.a.createElement("div",{className:"col-md-12"},b.a.createElement(O,null)),b.a.createElement("div",{className:"col-md-12"},b.a.createElement(N.a,null,b.a.createElement(S.a,null,b.a.createElement("div",{className:"col-md-12"},b.a.createElement(B,{participationTransfer:this.state.participationTransfer,errors:this.state.errors,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,contacts:this.state.contacts,participation:this.state.participation,peekLoading:this.state.peekLoading,handleReactSelectChange:this.handleReactSelectChange})))))),b.a.createElement("div",{className:"col-md-3"}))}}]),a}(g.Component);t.default=J}}]);