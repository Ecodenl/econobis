(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{1609:function(e,t,n){"use strict";n.r(t);var r=n(18),a=n.n(r),l=n(19),c=n.n(l),o=n(12),s=n.n(o),u=n(20),i=n.n(u),m=n(21),p=n.n(m),d=n(14),f=n.n(d),v=n(5),h=n.n(v),g=n(0),E=n.n(g),b=n(31),y=n.n(b),w=n(3),N=n(30),S=n(32),P=n(48);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var R=function(e){i()(n,e);var t=O(n);function n(e){return a()(this,n),t.call(this,e)}return c()(n,[{key:"render",value:function(){return E.a.createElement("div",{className:"row"},E.a.createElement("div",{className:"col-sm-12"},E.a.createElement(N.a,null,E.a.createElement(S.a,{className:"panel-small"},E.a.createElement("div",{className:"col-md-4"},E.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},E.a.createElement(P.a,{iconName:"glyphicon-arrow-left",onClickAction:w.e.goBack}))),E.a.createElement("div",{className:"col-md-4"},E.a.createElement("h3",{className:"text-center table-title"},"Rapportage Energie Leverancier naar Excel")),E.a.createElement("div",{className:"col-md-4"})))))}}]),n}(g.Component),x=n(16),I=n(7),K=n.n(I),k=n(104),j=n(37),C=n(105),B=n(38),D=n(23);K.a.locale("nl");var A=Object(x.b)((function(e){return{energySuppliers:e.systemData.energySuppliers}}))((function(e){var t=e.excel,n=t.energySupplierId,r=t.documentName,a=t.distributions,l=t.isLastRevenuePartsKwh,c=t.isEndOfYearRevenuePartsKwh,o=[];return o.push({id:0,name:"** Alle energie leveranciers **"}),e.energySuppliers.map((function(e){o.push({id:e.id,name:e.name})})),E.a.createElement("form",{className:"form-horizontal col-md-12",onSubmit:e.handleSubmit},E.a.createElement("div",{className:"row"},E.a.createElement(k.a,{label:"Contacten van Energie Leverancier",name:"energySupplierId",options:o,emptyOption:!1,value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.energySupplierId}),"Maak overzicht per leverancier voor alle leveranciers (bestand per leverancier) of een specifieke leverancier"),E.a.createElement("div",{className:"row"},E.a.createElement(B.a,{label:"Bestandsnaam",name:"documentName",value:r,onChangeAction:e.handleInputChange,required:"required",error:e.errors.documentName}),0==n?"(Bestandsnaam wordt aangevuld met afkorting leverancier en ingestelde bestandsformaat)":"(Bestandsnaam wordt aangevuld met ingestelde bestandsformaat bij leverancier)"),E.a.createElement("div",{className:"row"},l||c?E.a.createElement(E.a.Fragment,null,E.a.createElement(D.a,{className:"form-group col-sm-6",label:"Rapportage voor deelnames",value:"Alle (aantal: "+a.length+")"})):a.length>0?E.a.createElement(E.a.Fragment,null,E.a.createElement(D.a,{className:"form-group col-sm-6",label:"Rapportage voor deelnames",value:a.map((function(e,t){return E.a.createElement(E.a.Fragment,null,e.contactName,E.a.createElement("br",null))}))})):E.a.createElement(E.a.Fragment,null,E.a.createElement(D.a,{className:"form-group col-sm-6",label:"Rapportage voor deelnames",value:"Geen"}))),E.a.createElement(C.a,null,E.a.createElement("div",{className:"pull-right btn-group",role:"group"},E.a.createElement(j.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancel}),E.a.createElement(j.a,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))})),L=n(35),F=n(239),q=n(57);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var J=function(e){i()(n,e);var t=z(n);function n(e){var r;return a()(this,n),r=t.call(this,e),h()(s()(r),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;r.setState(Y(Y({},r.state),{},{excel:Y(Y({},r.state.excel),{},h()({},a,n))}))})),h()(s()(r),"cancel",(function(e){e.preventDefault(),w.f.push("project/opbrengst-kwh/".concat(r.props.revenuePartsKwh.revenueId,"/deelperiode/").concat(r.props.params.revenuePartId))})),h()(s()(r),"handleSubmit",(function(e){e.preventDefault();var t=r.state.excel,n={},a=!1;y.a.isEmpty(t.energySupplierId+"")&&(n.energySupplierId=!0,a=!0),y.a.isEmpty(t.documentName+"")&&(n.documentName=!0,a=!0),r.setState(Y(Y({},r.state),{},{errors:n})),!a&&q.a.createEnergySupplierExcel(t.revenuePartId,t.energySupplierId,t.documentName).then((function(e){w.f.push("/documenten")}))})),r.state={excel:{revenuePartId:e.params.revenuePartId,energySupplierId:0,documentName:"",distributions:[]},isLoading:!1,errors:{energySupplierId:!1,documentName:!1}},r}return c()(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.fetchRevenuePartsKwh(this.props.params.revenuePartId),setTimeout((function(){F.a.peekDistributionsKwhById(e.props.revenuePartsKwh.distributionKwhForReportEnergySupplier).then((function(t){e.setState(Y(Y({},e.state),{},{excel:Y(Y({},e.state.excel),{},{isLastRevenuePartsKwh:e.props.revenuePartsKwh.isLastRevenuePartsKwh,isEndOfYearRevenuePartsKwh:e.props.revenuePartsKwh.isEndOfYearRevenuePartsKwh,distributions:t.data})}))}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.props.clearEnergySupplierExcelReportKwh()}},{key:"render",value:function(){return E.a.createElement("div",{className:"row"},E.a.createElement("div",{className:"col-md-9"},E.a.createElement("div",{className:"col-md-12"},E.a.createElement(R,null)),E.a.createElement("div",{className:"col-md-12"},E.a.createElement(N.a,null,E.a.createElement(S.a,null,E.a.createElement("div",{className:"col-md-12"},E.a.createElement(A,{excel:this.state.excel,errors:this.state.errors,handleInputChange:this.handleInputChange,handleSubmit:this.handleSubmit,cancel:this.cancel})))))),E.a.createElement("div",{className:"col-md-3"}))}}]),n}(g.Component);t.default=Object(x.b)((function(e){return{revenuePartsKwh:e.revenuePartsKwh,reportEnergySupplierExcel:e.revenuesKwhReportEnergySupplierExcel}}),(function(e){return{fetchRevenuePartsKwh:function(t){e(Object(L.p)(t))},clearEnergySupplierExcelReportKwh:function(){e(Object(L.a)())}}}))(J)}}]);