(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{1614:function(e,a,t){"use strict";t.r(a);var l=t(15),n=t.n(l),r=t(16),s=t.n(r),o=t(12),i=t.n(o),c=t(17),m=t.n(c),u=t(18),p=t.n(u),d=t(13),f=t.n(d),k=t(5),v=t.n(k),h=t(0),T=t.n(h),E=t(4),w=t(51),g=function(e){var a=e.name;return T.a.createElement("div",{className:"row"},T.a.createElement("div",{className:"col-md-4"},T.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},T.a.createElement(w.a,{iconName:"glyphicon-arrow-left",onClickAction:E.e.goBack}))),T.a.createElement("div",{className:"col-md-4"},T.a.createElement("h4",{className:"text-center"},"Taak type: ",a)),T.a.createElement("div",{className:"col-md-4"}))},y=t(160),b=t(142),N=t.n(b),S=t(20),W=t(7),C=t.n(W),O=t(36),x=t(39),D=t(28),j=t(31),z=t(9),I={fld:["id","name","usesWfCompletedTask","emailTemplateIdWfCompletedTask","numberOfDaysToSendEmailCompletedTask","usesWfExpiredTask","emailTemplateIdWfExpiredTask","usesWfNewTask","emailTemplateIdWfNewTask"],rlt:{emailTemplateWorkflowCompletedTask:[],emailTemplateWorkflowExpiredTask:[],emailTemplateWorkflowNewTask:[]}},R=function(e){var a="jory/task-type/".concat(e);return z.a.get(a,{params:{jory:I}})},P=function(e){var a="".concat("task-type","/").concat(e.id);return z.a.post(a,e,{params:{jory:I}})},L=t(25),A=t(287),F=t(89),q=t(285),G=t(22),B=t(76),U=t(33),J=t.n(U);function V(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function M(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?V(Object(t),!0).forEach((function(a){v()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function H(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,l=f()(e);if(a){var n=f()(this).constructor;t=Reflect.construct(l,arguments,n)}else t=l.apply(this,arguments);return p()(this,t)}}C.a.locale("nl");var K=function(e){m()(t,e);var a=H(t);function t(e){var l;return n()(this,t),l=a.call(this,e),v()(i()(l),"handleInputChange",(function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;l.setState(M(M({},l.state),{},{taskType:M(M({},l.state.taskType),{},v()({},n,t))}))})),v()(i()(l),"handleSubmit",(function(e){e.preventDefault();var a=l.state.taskType,t={},n=!1;1==a.usesWfCompletedTask&&(a.emailTemplateIdWfCompletedTask||(t.emailTemplateIdWfCompletedTask=!0,n=!0),J.a.isEmpty(a.numberOfDaysToSendEmailCompletedTask.toString())&&(t.numberOfDaysToSendEmailCompletedTask=!0,n=!0)),1==a.usesWfExpiredTask&&(a.emailTemplateIdWfExpiredTask||(t.emailTemplateIdWfExpiredTask=!0,n=!0)),1==a.usesWfNewTask&&(a.emailTemplateIdWfNewTask||(t.emailTemplateIdWfNewTask=!0,n=!0)),l.setState(M(M({},l.state),{},{errors:t})),!n&&P(a).then((function(e){l.props.updateState(e.data.data),l.props.fetchSystemData(),l.props.switchToView()})).catch((function(e){alert("Er is iets misgegaan bij opslaan. Herlaad de pagina en probeer het nogmaals.")}))})),l.state={emailTemplates:[],taskType:M({},e.taskType),errors:{usesWfCompletedTask:!1,emailTemplateIdWfCompletedTask:!1,numberOfDaysToSendEmailCompletedTask:!1,usesWfExpiredTask:!1,emailTemplateIdWfExpiredTask:!1,usesWfNewTask:!1,emailTemplateIdWfNewTask:!1},peekLoading:{emailTemplates:!0}},l.handleReactSelectChange=l.handleReactSelectChange.bind(i()(l)),l}return s()(t,[{key:"handleReactSelectChange",value:function(e,a){this.setState(M(M({},this.state),{},{taskType:M(M({},this.state.taskType),{},v()({},a,e))}))}},{key:"componentDidMount",value:function(){var e=this;B.a.fetchEmailTemplatesPeek().then((function(a){return e.setState({emailTemplates:a,peekLoading:M(M({},e.state.peekLoading),{},{emailTemplates:!1})})}))}},{key:"render",value:function(){var e=this.state.taskType,a=e.name,t=e.usesWfCompletedTask,l=e.emailTemplateIdWfCompletedTask,n=e.numberOfDaysToSendEmailCompletedTask,r=e.usesWfExpiredTask,s=e.emailTemplateIdWfExpiredTask,o=e.usesWfNewTask,i=e.emailTemplateIdWfNewTask;return T.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},T.a.createElement(D.a,null,T.a.createElement(j.a,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Omschrijving",divSize:"col-sm-10",value:a,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(F.a,{label:"Gebruikt workflow verlopen taak",divSize:"col-sm-10",name:"usesWfExpiredTask",value:r,onChangeAction:this.handleInputChange})),1==r&&T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Uitleg workflow verlopen taak",divSize:"col-sm-10",value:this.props.explanationWfExpiredTask,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(q.a,{label:"Template email verlopen taak",divSize:"col-sm-10",name:"emailTemplateIdWfExpiredTask",options:this.state.emailTemplates,value:s,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates,required:"required",error:this.state.errors.emailTemplateIdWfExpiredTask}))),T.a.createElement("div",{className:"row"},T.a.createElement(F.a,{label:"Gebruikt workflow afgehandelde taak",divSize:"col-sm-10",name:"usesWfCompletedTask",value:t,onChangeAction:this.handleInputChange})),1==t&&T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Uitleg workflow afgehandelde taak",divSize:"col-sm-10",value:this.props.explanationWfCompletedTask,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(q.a,{label:"Template email afgehandelde taak",divSize:"col-sm-10",name:"emailTemplateIdWfCompletedTask",options:this.state.emailTemplates,value:l,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates,required:"required",error:this.state.errors.emailTemplateIdWfCompletedTask})),T.a.createElement("div",{className:"row"},T.a.createElement(O.a,{label:"Aantal dagen email na afgehandelde taak",divSize:"col-sm-10",type:"number",min:"1",id:"numberOfDaysToSendEmailCompletedTask",name:"numberOfDaysToSendEmailCompletedTask",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.numberOfDaysToSendEmailCompletedTask}))),T.a.createElement("div",{className:"row"},T.a.createElement(F.a,{label:"Gebruikt workflow nieuwe taak",divSize:"col-sm-10",name:"usesWfNewTask",value:o,onChangeAction:this.handleInputChange})),1==o&&T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Uitleg workflow nieuwe taak",divSize:"col-sm-10",value:this.props.explanationWfNewTask,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(q.a,{label:"Template email nieuwe taak",divSize:"col-sm-10",name:"emailTemplateIdWfNewTask",options:this.state.emailTemplates,value:i,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates,required:"required",error:this.state.errors.emailTemplateIdWfNewTask})))),T.a.createElement(j.a,null,T.a.createElement("div",{className:"pull-right btn-group",role:"group"},T.a.createElement(x.a,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),T.a.createElement(x.a,{buttonText:"Opslaan",type:"submit",value:"Submit"})))))}}]),t}(h.Component),Q=Object(S.b)(null,(function(e){return Object(L.b)({fetchSystemData:A.a},e)}))(K),X=function(e){var a=e.name,t=e.usesWfCompletedTask,l=e.emailTemplateWorkflowCompletedTask,n=e.numberOfDaysToSendEmailCompletedTask,r=e.usesWfExpiredTask,s=e.emailTemplateWorkflowExpiredTask,o=e.usesWfNewTask,i=e.emailTemplateWorkflowNewTask,c=e.switchToEdit,m=e.explanationWfExpiredTask,u=e.explanationWfNewTask,p=e.explanationWfCompletedTask;return T.a.createElement("div",{onClick:c},T.a.createElement(D.a,null,T.a.createElement(j.a,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Omschrijving",divSize:"col-sm-10",value:a,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Gebruikt workflow verlopen taak",divSize:"col-sm-10",value:r?"Ja":"Nee",className:"col-sm-10 form-group"})),1==r&&T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Uitleg workflow verlopen taak",divSize:"col-sm-10",value:m,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Template email verlopen taak",divSize:"col-sm-10",value:s?s.name:"",className:"col-sm-10 form-group"}))),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Gebruikt workflow afgehandelde taak",divSize:"col-sm-10",value:t?"Ja":"Nee",className:"col-sm-10 form-group"})),1==t&&T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Uitleg workflow afgehandelde taak",divSize:"col-sm-10",value:p,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Template email afgehandelde taak",divSize:"col-sm-10",value:l?l.name:"",className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Aantal dagen email na afgehandelde taak",divSize:"col-sm-10",value:n,className:"col-sm-10 form-group"}))),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Gebruikt workflow nieuwe taak",divSize:"col-sm-10",value:o?"Ja":"Nee",className:"col-sm-10 form-group"})),1==o&&T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Uitleg workflow nieuwe taak",divSize:"col-sm-10",value:u,className:"col-sm-10 form-group"})),T.a.createElement("div",{className:"row"},T.a.createElement(G.a,{label:"Template email nieuwe taak",divSize:"col-sm-10",value:i?i.name:"",className:"col-sm-10 form-group"}))))))};function Y(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,l=f()(e);if(a){var n=f()(this).constructor;t=Reflect.construct(l,arguments,n)}else t=l.apply(this,arguments);return p()(this,t)}}var Z=function(e){m()(t,e);var a=Y(t);function t(e){var l;return n()(this,t),l=a.call(this,e),v()(i()(l),"switchToEdit",(function(){l.setState({showEdit:!0})})),v()(i()(l),"switchToView",(function(){l.setState({showEdit:!1,activeDiv:""})})),l.state={showEdit:!1,activeDiv:""},l}return s()(t,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,a=this.props.meDetails.permissions,t=void 0===a?{}:a,l=T.a.createElement("span",null,"Er zal automatisch eenmalig een email verstuurd worden naar de verantwoordelijke als deze taak is verlopen."),n=T.a.createElement("span",null,"Er zal automatisch eenmalig een email verstuurd worden naar contact taak als deze taak is afgehandeld is, rekening houdend met het opgegeven aantal dagen."),r=T.a.createElement("span",null,"Er zal automatisch een email verstuurd worden naar de verantwoordelijke als de nieuwe taak wordt opgeslagen.");return T.a.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&t.manageFinancial?T.a.createElement(Q,{taskType:this.props.taskType,switchToView:this.switchToView,updateState:this.props.updateState,explanationWfExpiredTask:l,explanationWfNewTask:r,explanationWfCompletedTask:n}):T.a.createElement(X,N()({},this.props.taskType,{switchToEdit:this.switchToEdit,explanationWfExpiredTask:l,explanationWfNewTask:r,explanationWfCompletedTask:n})))}}]),t}(h.Component),$=Object(S.b)((function(e){return{meDetails:e.meDetails,permissions:e.meDetails.permissions}}))(Z),_=function(e){var a=e.taskType,t=e.hasError,l=e.isLoading,n=e.updateState,r="",s=!0;return t?r="Fout bij het ophalen van taak type.":l?r="Gegevens aan het laden.":Object(y.isEmpty)(a)?r="Geen taak type gevonden!":s=!1,s?T.a.createElement("div",null,r):T.a.createElement("div",null,T.a.createElement($,{taskType:a,updateState:n}))};function ee(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function ae(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ee(Object(t),!0).forEach((function(a){v()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function te(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,l=f()(e);if(a){var n=f()(this).constructor;t=Reflect.construct(l,arguments,n)}else t=l.apply(this,arguments);return p()(this,t)}}var le=function(e){m()(t,e);var a=te(t);function t(e){var l;return n()(this,t),l=a.call(this,e),v()(i()(l),"callFetchTaskTypeDetails",(function(){l.setState({isLoading:!0,hasError:!1}),R(l.props.params.id).then((function(e){l.setState({isLoading:!1,taskType:ae({},e.data.data)})})).catch((function(e){l.setState({isLoading:!1,hasError:!0})}))})),v()(i()(l),"updateState",(function(e){l.setState({taskType:e})})),l.state={taskType:{},isLoading:!1,hasError:!1},l}return s()(t,[{key:"componentDidMount",value:function(){this.callFetchTaskTypeDetails()}},{key:"render",value:function(){return T.a.createElement("div",{className:"row"},T.a.createElement("div",{className:"col-md-9"},T.a.createElement("div",{className:"col-md-12 margin-10-top"},T.a.createElement(D.a,null,T.a.createElement(j.a,{className:"panel-small"},T.a.createElement(g,{name:this.state.taskType.name||""})))),T.a.createElement("div",{className:"col-md-12 margin-10-top"},T.a.createElement(_,{taskType:this.state.taskType,isLoading:this.state.isLoading,hasError:this.state.hasError,updateState:this.updateState}))),T.a.createElement("div",{className:"col-md-3"}))}}]),t}(h.Component);a.default=le}}]);