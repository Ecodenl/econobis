(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{1519:function(t,e,n){"use strict";n.r(e);var a=n(24),r=n.n(a),o=n(25),s=n.n(o),c=n(22),i=n.n(c),l=n(26),u=n.n(l),p=n(27),d=n.n(p),h=n(16),m=n.n(h),f=n(6),E=n.n(f),y=n(0),g=n.n(y),C=n(31),b=n(14),v=n(200),S=n(7),T=n.n(S),A=function(t,e,n,a,r){return{type:"FETCH_CONTACTS",filters:t,extraFilters:e,sorts:n,pagination:a,filterType:r}},N=function(){return{type:"CLEAR_CONTACTS"}},w=function(t){return{type:"SET_CHECKED_CONTACT_ALL",checkedValue:t}},D=function(t){return{type:"SET_NUMBER_FILTER",number:t}},F=function(t){return{type:"SET_TYPE_FILTER",typeId:t}},O=function(t){return{type:"SET_FULL_NAME_FILTER",fullName:t}},k=function(t){return{type:"SET_STREET_AND_NUMBER_FILTER",streetAndNumber:t}},x=function(t){return{type:"SET_POSTAL_CODE_FILTER",postalCode:t}},R=function(t){return{type:"SET_CITY_FILTER",city:t}},_=function(t){return{type:"SET_EMAIL_ADDRESS_FILTER",emailAddress:t}},P=function(t){return{type:"SET_PHONE_NUMBER_FILTER",phoneNumber:t}},I=function(t){return{type:"SET_STATUS_FILTER",statusId:t}},L=function(t){return{type:"SET_CREATED_AT_FILTER",createdAt:t}},G=function(){return{type:"CLEAR_FILTER_CONTACTS"}},M=function(t){return{type:"SET_CONTACTS_PAGINATION",pagination:t}},j=n(769),U=n(199),H=n.n(U),V=n(149),B=n(150),Y=n(201),q=n(756),W=Object(C.b)(null,(function(t){return{setContactsSortsFilter:function(e,n){t(function(t,e){return{type:"SET_CONTACTS_SORTS_FILTER",field:t,order:e}}(e,n))}}}))((function(t){var e=function(e,n){t.setContactsSortsFilter(e,n),setTimeout((function(){t.fetchContactsData()}),100)};return g.a.createElement("tr",{className:"thead-title"},t.showCheckbox?g.a.createElement("th",{width:"3%"}):null,g.a.createElement(q.a,{RowClassName:"hidden-xs",sortColumn:"number",title:"#",width:"5%",setSorts:e}),g.a.createElement(q.a,{RowClassName:"hidden-xs hidden-sm",sortColumn:"typeName",title:"Type",width:"7%",setSorts:e}),g.a.createElement(q.a,{sortColumn:"fullName",title:"Naam",width:"11%",setSorts:e}),g.a.createElement(q.a,{RowClassName:"hidden-xs",sortColumn:"streetAndNumber",title:"Adres",width:"12%",setSorts:e}),g.a.createElement(q.a,{RowClassName:"hidden-xs",sortColumn:"postalCode",title:"Postcode",width:"7%",setSorts:e}),g.a.createElement(q.a,{RowClassName:"hidden-xs",sortColumn:"city",title:"Plaats",width:"10%",setSorts:e}),g.a.createElement(q.a,{RowClassName:"hidden-xs",sortColumn:"emailAddress",title:"E-mail",width:"12%",setSorts:e}),g.a.createElement(q.a,{sortColumn:"phoneNumber",title:"Telefoon",width:"7%",setSorts:e}),g.a.createElement(q.a,{RowClassName:"hidden-xs hidden-sm",sortColumn:"createdAt",title:"Gemaakt op",width:"8%",setSorts:e}),g.a.createElement("th",{width:"3%"}))})),K=n(764),z=Object(C.b)((function(t){return{filters:t.contacts.filters,contactStatuses:t.systemData.contactStatuses,contactTypes:t.systemData.contactTypes}}),(function(t){return Object(b.b)({setNumberFilter:D,setTypeFilter:F,setFullNameFilter:O,setStreetAndNumberFilter:k,setPostalCodeFilter:x,setCityFilter:R,setEmailAddressFilter:_,setPhoneNumberFilter:P,setStatusFilter:I,setCreatedAtFilter:L},t)}))((function(t){return g.a.createElement("tr",{className:"thead-filter"},t.showCheckbox&&g.a.createElement("td",null,g.a.createElement("input",{type:"checkbox",value:t.checkedAllCheckboxes,onChange:t.selectAllCheckboxes})),g.a.createElement("th",{className:"hidden-xs"},g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.number.data,onChange:function(e){t.setNumberFilter(e.target.value)}})),g.a.createElement("th",{className:"hidden-xs hidden-sm"},g.a.createElement("select",{className:"form-control input-sm",value:t.filters.typeId.data,onChange:function(e){t.setTypeFilter(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},g.a.createElement("option",null),t.contactTypes.map((function(t){return g.a.createElement("option",{key:t.id,value:t.id},t.name)})))),g.a.createElement("th",null,g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.fullName.data,onChange:function(e){t.setFullNameFilter(e.target.value)}})),g.a.createElement("th",{className:"hidden-xs"},g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.streetAndNumber.data,onChange:function(e){t.setStreetAndNumberFilter(e.target.value)}})),g.a.createElement("th",{className:"hidden-xs"},g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.postalCode.data,onChange:function(e){t.setPostalCodeFilter(e.target.value)}})),g.a.createElement("th",{className:"hidden-xs"},g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.city.data,onChange:function(e){t.setCityFilter(e.target.value)}})),g.a.createElement("th",{className:"hidden-xs"},g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.emailAddress.data,onChange:function(e){t.setEmailAddressFilter(e.target.value)}})),g.a.createElement("th",null,g.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.phoneNumber.data,onChange:function(e){t.setPhoneNumberFilter(e.target.value)}})),g.a.createElement(K.a,{value:t.filters.createdAt.data&&t.filters.createdAt.data,onChangeAction:function(e){void 0===e?t.setCreatedAtFilter(""):t.setCreatedAtFilter(T()(e).format("Y-MM-DD"))}}),g.a.createElement("th",null))})),J=n(4);function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var Q=function(t){u()(n,t);var e=Z(n);function n(t){var a;return r()(this,n),(a=e.call(this,t)).state={showActionButtons:!1,highlightRow:""},a}return s()(n,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"setCheckedContact",value:function(t){this.props.setCheckedContact(t)}},{key:"openItem",value:function(t){J.f.push("/contact/".concat(t))}},{key:"render",value:function(){var t=this,e=this.props,n=e.checked,a=e.id,r=e.number,o=e.typeName,s=e.fullName,c=e.streetAndNumber,i=e.postalCode,l=e.city,u=e.emailAddress,p=e.phoneNumber,d=(e.statusName,e.createdAt);return g.a.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return t.openItem(a)},onMouseEnter:function(){return t.onRowEnter()},onMouseLeave:function(){return t.onRowLeave()}},this.props.showCheckbox&&g.a.createElement("td",null,g.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return t.setCheckedContact(a)}})),g.a.createElement("td",{className:"hidden-xs"},r),g.a.createElement("td",{className:"hidden-xs hidden-sm"},o," "),g.a.createElement("td",null,s),g.a.createElement("td",{className:"hidden-xs"},c),g.a.createElement("td",{className:"hidden-xs"},i),g.a.createElement("td",{className:"hidden-xs"},l),g.a.createElement("td",{className:"hidden-xs"},u),g.a.createElement("td",null,p),g.a.createElement("td",{className:"hidden-xs hidden-sm"},T()(d).format("DD-MM-Y")),g.a.createElement("td",null,this.state.showActionButtons?g.a.createElement("a",{role:"button",onClick:function(){return t.openItem(a)}},g.a.createElement("span",{className:"glyphicon glyphicon-pencil mybtn-success"})," "):"",this.state.showActionButtons?g.a.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,a,s)},g.a.createElement("span",{className:"glyphicon glyphicon-trash mybtn-danger"})," "):""))}}]),n}(y.Component);var X=Object(C.b)((function(t){return{statuses:t.statuses,types:t.types}}),(function(t){return{setCheckedContact:function(e){t(function(t){return{type:"SET_CHECKED_CONTACT",id:t}}(e))}}}))(Q),$=n(102),tt=Object(C.b)(null,(function(t){return{deleteContact:function(e){t(function(t){return{type:"DELETE_CONTACT",id:t}}(e))}}}))((function(t){return g.a.createElement($.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:t.closeDeleteItemModal,confirmAction:function(){return t.deleteContact(t.id),void t.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder contact: ",g.a.createElement("strong",null," ",t.fullName," "))})),et=n(749);n(757);function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){E()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var ot=function(t){u()(n,t);var e=rt(n);function n(t){var a;return r()(this,n),a=e.call(this,t),E()(i()(a),"handleKeyUp",(function(t){13===t.keyCode&&a.props.onSubmitFilter()})),E()(i()(a),"showDeleteItemModal",(function(t,e){a.setState(at(at({},a.state),{},{showDeleteItem:!0,deleteItem:at(at({},a.state.deleteItem),{},{id:t,fullName:e})}))})),E()(i()(a),"closeDeleteItemModal",(function(){a.setState(at(at({},a.state),{},{showDeleteItem:!1,deleteItem:at(at({},a.state.deleteItem),{},{id:"",fullName:""})}))})),a.state={showDeleteItem:!1,deleteItem:{id:"",fullName:""}},a}return s()(n,[{key:"render",value:function(){var t=this,e=this.props.contacts,n=e.data,a=void 0===n?[]:n,r=e.meta,o=void 0===r?{}:r,s="",c=!0;return this.props.hasError?s="Fout bij het ophalen van contacten.":this.props.isLoading?s="Gegevens aan het laden.":0===a.length?s="Geen contacten gevonden!":c=!1,g.a.createElement("div",null,g.a.createElement("form",{onKeyUp:this.handleKeyUp},g.a.createElement(V.a,null,g.a.createElement(B.a,null,g.a.createElement(W,{showCheckbox:this.props.showCheckboxList,fetchContactsData:function(){return t.props.fetchContactsData()}}),g.a.createElement(z,{showCheckbox:this.props.showCheckboxList,selectAllCheckboxes:function(){return t.props.selectAllCheckboxes()},onSubmitFilter:this.props.onSubmitFilter})),g.a.createElement(Y.a,null,c?g.a.createElement("tr",null,g.a.createElement("td",{colSpan:10},s)):a.map((function(e){return g.a.createElement(X,H()({key:e.id},e,{showCheckbox:t.props.showCheckboxList,checkedAllCheckboxes:t.props.checkedAllCheckboxes,showDeleteItemModal:t.showDeleteItemModal}))})))),g.a.createElement("div",{className:"col-md-6 col-md-offset-3"},g.a.createElement(et.a,{onPageChangeAction:this.props.handlePageClick,totalRecords:o.total,initialPage:this.props.contactsPagination.page}))),this.state.showDeleteItem&&g.a.createElement(tt,H()({closeDeleteItemModal:this.closeDeleteItemModal},this.state.deleteItem)))}}]),n}(y.Component),st=Object(C.b)((function(t){return{isLoading:t.loadingData.isLoading,hasError:t.loadingData.hasError}}))(ot),ct=n(702),it=Object(C.b)((function(t){return{contacts:t.contacts.list.data}}),(function(t){return{deleteSelectedContacts:function(e){t(function(t){return{type:"DELETE_SELECTED_CONTACTS",contactIds:t}}(e))}}}))((function(t){var e=function(){var e=0;return t.contacts.map((function(t){return!0===t.checked&&e++})),e};return g.a.createElement($.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:t.toggleShowDeleteSelectedItems,confirmAction:function(){return e=[],t.contacts.map((function(t){return!0===t.checked&&e.push(t.id)})),t.deleteSelectedContacts(e),void t.toggleShowDeleteSelectedItems();var e},title:"Verwijderen"},0!==e()?g.a.createElement("div",null,"Verwijder de geselecteerde ",g.a.createElement("strong",null,e())," contacten?"):g.a.createElement("div",null,"Geen contacten geselecteerd."))})),lt=n(876),ut=n(44),pt=n(709);function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var ht=function(t){u()(n,t);var e=dt(n);function n(t){var a;return r()(this,n),a=e.call(this,t),E()(i()(a),"handleInputChange",(function(t){var e=t.target,n="checkbox"===e.type?e.checked:e.value,r=e.name;a.setState(E()({},r,n))})),E()(i()(a),"handleSubmit",(function(t){var e=[];a.props.contacts.map((function(t){return!0===t.checked&&e.push(t.id)})),ut.a.addManyContactsToGroup(e,a.state.groupId).then((function(t){a.props.toggleAddGroup(),J.f.push("/contacten-in-groep/".concat(a.state.groupId))}))})),a.state={contactGroups:[],groupId:"",contactCount:0,contactIds:"",errors:{groupId:!1}},a}return s()(n,[{key:"componentDidMount",value:function(){var t=this;ut.a.peekStaticContactGroups().then((function(e){t.setState({contactGroups:e})}));var e=0;this.props.contacts.map((function(t){return!0===t.checked&&e++})),this.setState({contactCount:e})}},{key:"render",value:function(){return g.a.createElement($.a,{buttonConfirmText:"Toevoegen",closeModal:this.props.toggleAddGroup,confirmAction:this.handleSubmit,title:"Contacten toevoegen aan groep"},0!==this.state.contactCount?g.a.createElement("div",{className:"row"},g.a.createElement(pt.a,{size:"col-md-12",label:"Voeg ".concat(this.state.contactCount," contact(en) toe aan groep:"),name:"groupId",options:this.state.contactGroups,value:this.state.groupId,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.groupId})):g.a.createElement("div",null,"Geen contacten geselecteerd."))}}]),n}(y.Component),mt=Object(C.b)((function(t){return{contactDetails:t.contactDetails,contacts:t.contacts.list.data}}),(function(t){return{addContactToGroup:function(e){t(Object(lt.a)(e))}}}))(ht);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var Et=function(t){u()(n,t);var e=ft(n);function n(t){var a;return r()(this,n),a=e.call(this,t),E()(i()(a),"toggleShowDeleteSelectedItems",(function(){a.setState({showDeleteSelectedItems:!a.state.showDeleteSelectedItems})})),E()(i()(a),"toggleAddContactsToGroup",(function(){a.setState({showAddContactsToGroup:!a.state.showAddContactsToGroup})})),E()(i()(a),"newContact",(function(){J.f.push("/contact/nieuw")})),E()(i()(a),"importContacts",(function(){J.f.push("/contact/import")})),a.state={showDeleteSelectedItems:!1,showAddContactsToGroup:!1},a}return s()(n,[{key:"render",value:function(){var t=this.props.meDetails.permissions,e=void 0===t?{}:t,n=this.props.contacts.meta,a=void 0===n?{}:n;return g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-md-4"},g.a.createElement("div",{className:"btn-group",role:"group"},g.a.createElement(ct.a,{iconName:"glyphicon-refresh",onClickAction:this.props.resetContactFilters}),g.a.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},g.a.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown"},g.a.createElement("span",{className:"glyphicon glyphicon-plus"})),g.a.createElement("ul",{className:"dropdown-menu"},e.createPerson&&g.a.createElement("li",null,g.a.createElement(J.b,{to:"contact/nieuw/persoon"},"Persoon")),e.createOrganisation&&g.a.createElement("li",null,g.a.createElement(J.b,{to:"contact/nieuw/organisatie"},"Organisatie")),e.manageGroup&&g.a.createElement("li",null,g.a.createElement(J.b,{role:"button",onClick:this.props.toggleSaveAsGroup},"Groep")))),e.updatePerson&&e.updateOrganisation&&g.a.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},g.a.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown"},g.a.createElement("span",{className:"glyphicon glyphicon-share-alt"})),g.a.createElement("ul",{className:"dropdown-menu"},g.a.createElement("li",null,g.a.createElement("a",{role:"button",onClick:this.toggleAddContactsToGroup},"Voeg toe aan groep")))),g.a.createElement(ct.a,{iconName:"glyphicon-trash",onClickAction:this.toggleShowDeleteSelectedItems}),g.a.createElement(ct.a,{iconName:"glyphicon-ok",onClickAction:this.props.toggleShowCheckboxList}),g.a.createElement(ct.a,{iconName:"glyphicon-filter",onClickAction:this.props.toggleShowExtraFilters}),g.a.createElement(ct.a,{iconName:"glyphicon-download-alt",onClickAction:this.props.getCSV}),e.import&&g.a.createElement(ct.a,{iconName:"glyphicon-import",onClickAction:this.importContacts}))),g.a.createElement("div",{className:"col-md-4"},g.a.createElement("h3",{className:"text-center table-title"},"Contacten")),g.a.createElement("div",{className:"col-md-4"},g.a.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)),this.state.showDeleteSelectedItems&&g.a.createElement(it,{toggleShowDeleteSelectedItems:this.toggleShowDeleteSelectedItems}),this.state.showAddContactsToGroup&&g.a.createElement(mt,{toggleAddGroup:this.toggleAddContactsToGroup}))}}]),n}(y.Component),yt=Object(C.b)((function(t){return{meDetails:t.meDetails,contacts:t.contacts.list}}),null)(Et),gt=n(758),Ct=n(106),bt=n(748),vt=n.n(bt),St=function(t){return g.a.createElement($.a,{buttonConfirmText:"Aanmaken",buttonClassName:"btn-success",closeModal:t.closeDeleteItemModal,confirmAction:function(){t.saveAsGroup()},title:"Groep aanmaken"},"Wilt u een groep aanmaken op basis van de huidige filters?")},Tt=n(1221),At=n(703);function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){E()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var Ft=function(t){u()(n,t);var e=Dt(n);function n(t){var a;return r()(this,n),(a=e.call(this,t)).state={filterType:t.filterType,contactType:t.contactType,amountOfFilters:t.amountOfFilters,filters:t.extraFilters,yesNoOptions:[{id:0,name:"Nee"},{id:1,name:"Ja"}]},a.closeModal=a.closeModal.bind(i()(a)),a.confirmAction=a.confirmAction.bind(i()(a)),a.handleFilterFieldChange=a.handleFilterFieldChange.bind(i()(a)),a.handleFilterTypeChange=a.handleFilterTypeChange.bind(i()(a)),a.handleFilterValueChange=a.handleFilterValueChange.bind(i()(a)),a.addFilterRow=a.addFilterRow.bind(i()(a)),a.deleteFilterRow=a.deleteFilterRow.bind(i()(a)),a}return s()(n,[{key:"closeModal",value:function(){this.props.toggleShowExtraFilters()}},{key:"confirmAction",value:function(){this.props.handleExtraFiltersChange(this.state.filters,this.state.amountOfFilters,this.state.filterType)}},{key:"handleFilterFieldChange",value:function(t,e){var n=this.state.filters,a=this.state.amountOfFilters;"product"!==n[e].field&&"opportunityMeasureCategory"!==n[e].field||(delete(n=n.filter((function(t){return t.connectedTo!==n[e].connectName})))[e].connectName,a=n.length),"product"===t?(n[e]={field:"product",type:"eq",data:"",connectName:t+e},n.splice(e+1,0,{field:"dateStart",type:"eq",data:"",connectedTo:t+e}),n.splice(e+2,0,{field:"dateFinish",type:"eq",data:"",connectedTo:t+e}),n.splice(e+3,0,{field:"orderStatus",type:"eq",data:"",connectedTo:t+e}),a=n.length):"opportunityMeasureCategory"===t?(n[e]={field:"opportunityMeasureCategory",type:"eq",data:"",connectName:t+e},n.splice(e+1,0,{field:"opportunityStatus",type:"eq",data:"",connectedTo:t+e}),n.splice(e+2,0,{field:"opportunityMeasure",type:"eq",data:"",connectedTo:t+e}),n.splice(e+3,0,{field:"opportunityEvaluationRealised",type:"eq",data:"",connectedTo:t+e}),a=n.length):(n[e].field=t,n[e].data=""),this.setState(wt(wt({},this.state),{},{filters:n,amountOfFilters:a}))}},{key:"handleFilterTypeChange",value:function(t){this.setState(wt(wt({},this.state),{},{filterType:t}))}},{key:"handleFilterValueChange",value:function(t,e,n){var a=this.state.filters;a[n][t]=e,this.setState(wt(wt({},this.state),{},{filters:a}))}},{key:"addFilterRow",value:function(){var t=this,e=this.state.filters;e[this.state.amountOfFilters]={field:"name",type:"eq",data:""},setTimeout((function(){t.setState(wt(wt({},t.state),{},{filters:e}))}),300),setTimeout((function(){t.setState({amountOfFilters:t.state.amountOfFilters+1})}),300)}},{key:"deleteFilterRow",value:function(t){var e=this.state.filters;"product"!==e[t].field&&"opportunityMeasureCategory"!==e[t].field||(e=e.filter((function(n){return n.connectedTo!==e[t].connectName}))),e.splice(t,1),this.setState(wt(wt({},this.state),{},{filters:e,amountOfFilters:e.length}))}},{key:"render",value:function(){var t=this,e={name:{name:"Naam",type:"stringWithoutNull"},postalCode:{name:"Postcode",type:"numberOrString"},country:{name:"Land",type:"dropdown",dropDownOptions:this.props.countries},createdAt:{name:"Gemaakt op",type:"date"},currentObligations:{name:"Huidig aantal obligaties",type:"number"},currentParticipations:{name:"Huidig aantal participaties",type:"number"},currentPostalcodeLinkCapital:{name:"Huidig aantal postcoderoos",type:"number"},currentLoan:{name:"Huidig bedrag lening",type:"number"},staticContactGroup:{name:"Statische groep",type:"dropdownHas",dropDownOptions:this.props.staticContactGroups},occupation:{name:"Verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},occupationPrimary:{name:"Primaire verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},campaign:{name:"Campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns},opportunityMeasureCategory:{name:"Kans maatregel categorie",type:"dropdownHas",dropDownOptions:this.props.measureCategories},product:{name:"Product",type:"dropdownHas",dropDownOptions:this.props.products},dateOfBirth:{name:"Geboortedatum",type:"date"},energySupplier:{name:"Primaire Energie leverancier",type:"dropdown",dropDownOptions:this.props.energySuppliers},didAgreeAvg:{name:"Akkoord privacybeleid",type:"boolean",dropDownOptions:this.state.yesNoOptions},portalUser:{name:"Portal gebruiker actief",type:"boolean",dropDownOptions:this.state.yesNoOptions}},n={dateStart:{name:"Begin datum",type:"date"},dateFinish:{name:"Eind datum",type:"date"},orderStatus:{name:"Order status",type:"dropdownHas",dropDownOptions:this.props.orderStatuses}},a={opportunityStatus:{name:"Kans status",type:"dropdownHas",dropDownOptions:this.props.opportunityStatus},opportunityMeasure:{name:"Kans maatregel specifiek",type:"dropdownHas",dropDownOptions:this.props.measures},opportunityEvaluationRealised:{name:"Kans status evaluatie uitgevoerd",type:"dropdownHas",dropDownOptions:this.props.opportunityEvaluationStatuses}};return g.a.createElement($.a,{title:"Extra filters",buttonConfirmText:"Toepassen",confirmAction:this.confirmAction,closeModal:this.closeModal,buttonCancelText:"Sluiten",extraButtonLabel:"Maak groep",extraButtonClass:"btn-success",extraButtonAction:this.props.saveAsGroup},g.a.createElement("div",{className:"row filter-row"},g.a.createElement("h5",null,g.a.createElement("div",{className:"col-xs-6"},g.a.createElement("input",{onChange:function(){return t.handleFilterTypeChange("and")},type:"radio",name:"type",value:"and",id:"and",checked:"and"===this.state.filterType}),g.a.createElement("label",{htmlFor:"and"},'Alle extra filters zijn "EN"')),g.a.createElement("div",{className:"col-xs-6"},g.a.createElement("input",{onChange:function(){return t.handleFilterTypeChange("or")},type:"radio",name:"type",value:"or",id:"or",checked:"or"===this.state.filterType}),g.a.createElement("label",{htmlFor:"or"},'Alle extra filters zijn "OF"')))),g.a.createElement("table",{className:"table"},g.a.createElement("thead",null,g.a.createElement("tr",null,g.a.createElement("th",{className:"col-md-4"},"Zoekveld"),g.a.createElement("th",{className:"col-md-3"}),g.a.createElement("th",{className:"col-md-4"},"Waarde"),g.a.createElement("th",{className:"col-md-1"}))),g.a.createElement("tbody",null,0===this.state.filters.length?g.a.createElement("tr",null,g.a.createElement("td",{colSpan:4},"Geen filters gezet.")):this.state.filters.map((function(r,o){return g.a.createElement(Tt.a,{key:o,filter:r,filterNumber:o,fields:wt(wt(wt({},e),n),a),handleFilterFieldChange:t.handleFilterFieldChange,deleteFilterRow:t.deleteFilterRow,handleFilterValueChange:t.handleFilterValueChange,contactType:t.state.contactType})})))),g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-xs-12 text-right"},g.a.createElement(At.a,{buttonText:"Extra filter",onClickAction:this.addFilterRow}))))}}]),n}(y.Component),Ot=Object(C.b)((function(t){return{contactStatuses:t.systemData.contactStatuses,staticContactGroups:t.systemData.staticContactGroups,primaryOccupations:t.systemData.primaryOccupations,measureCategories:t.systemData.measureCategories,measures:t.systemData.measures,opportunityStatus:t.systemData.opportunityStatus,opportunityEvaluationStatuses:t.systemData.opportunityEvaluationStatuses,campaigns:t.systemData.campaigns,products:t.systemData.products,energySuppliers:t.systemData.energySuppliers,countries:t.systemData.countries,orderStatuses:t.systemData.orderStatuses}}))(Ft);function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}T.a.locale("nl");var xt=function(t){u()(n,t);var e=kt(n);function n(t){var a;if(r()(this,n),a=e.call(this,t),E()(i()(a),"fetchContactsData",(function(){setTimeout((function(){var t=a.state.extraFilters,e=Object(gt.a)(a.props.contactsFilters),n=a.props.contactsSorts,r={limit:20,offset:a.props.contactsPagination.offset},o=a.state.filterType;a.props.fetchContacts(e,t,n,r,o)}),100)})),E()(i()(a),"saveAsGroup",(function(){var t=a.state.extraFilters,e=Object(gt.a)(a.props.contactsFilters),n=a.state.filterType;Ct.a.saveAsGroup({filters:e,extraFilters:t,filterType:n}).then((function(t){J.f.push("/contact-groep/".concat(t.data.data.id,"/edit"))}))})),E()(i()(a),"toggleSaveAsGroup",(function(){a.setState({showSaveAsGroup:!a.state.showSaveAsGroup})})),E()(i()(a),"getCSV",(function(){a.props.blockUI(),setTimeout((function(){var t=a.state.extraFilters,e=Object(gt.a)(a.props.contactsFilters),n=a.props.contactsSorts;Ct.a.getCSV({filters:e,extraFilters:t,sorts:n}).then((function(t){vt()(t.data,"Contacten-"+T()().format("YYYY-MM-DD HH:mm:ss")+".csv"),a.props.unblockUI()})).catch((function(t){a.props.unblockUI()}))}),100)})),E()(i()(a),"resetContactFilters",(function(){a.props.clearFilterContacts(),a.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),a.fetchContactsData()})),E()(i()(a),"toggleShowCheckboxList",(function(){a.setState({showCheckboxList:!a.state.showCheckboxList})})),E()(i()(a),"selectAllCheckboxes",(function(){a.setState({checkedAllCheckboxes:!a.state.checkedAllCheckboxes}),a.props.setCheckedContactAll(!a.state.checkedAllCheckboxes)})),!Object(v.isEmpty)(t.params))switch(t.params.filter){case"type":a.props.clearFilterContacts(),a.props.setTypeFilter(t.params.value)}return a.state={showCheckboxList:!1,checkedAllCheckboxes:!1,showSaveAsGroup:!1,showExtraFilters:!1,filterType:"and",amountOfFilters:0,extraFilters:[]},a.handlePageClick=a.handlePageClick.bind(i()(a)),a.handleExtraFiltersChange=a.handleExtraFiltersChange.bind(i()(a)),a.getCSV=a.getCSV.bind(i()(a)),a.toggleShowExtraFilters=a.toggleShowExtraFilters.bind(i()(a)),a}return s()(n,[{key:"componentDidMount",value:function(){this.fetchContactsData()}},{key:"componentWillReceiveProps",value:function(t){var e=this;if(this.props.params.value!==t.params.value){if(Object(v.isEmpty)(t.params))this.props.clearFilterContacts();else switch(t.params.filter){case"type":this.props.clearFilterContacts(),this.props.setTypeFilter(t.params.value)}setTimeout((function(){e.fetchContactsData()}),100)}}},{key:"componentWillUnmount",value:function(){this.props.clearContacts()}},{key:"onSubmitFilter",value:function(){this.props.clearContacts(),this.props.setContactsPagination({page:0,offset:0}),this.fetchContactsData()}},{key:"handlePageClick",value:function(t){var e=t.selected,n=Math.ceil(20*e);this.props.setContactsPagination({page:e,offset:n}),this.fetchContactsData()}},{key:"handleExtraFiltersChange",value:function(t,e,n){var a=this;this.setState({filterType:n,amountOfFilters:t,extraFilters:t}),this.props.setContactsPagination({page:0,offset:0}),setTimeout((function(){a.fetchContactsData()}),100)}},{key:"prefillExtraFilter",value:function(){this.setState({filterType:"and",amountOfFilters:1,extraFilters:[{field:"name",type:"eq",data:""}]})}},{key:"toggleShowExtraFilters",value:function(){0===this.state.extraFilters.length&&!this.state.showExtraFilters&&this.prefillExtraFilter(),this.setState({showExtraFilters:!this.state.showExtraFilters})}},{key:"render",value:function(){var t=this;return g.a.createElement("div",null,g.a.createElement("div",{className:"panel panel-default"},g.a.createElement("div",{className:"panel-body"},g.a.createElement("div",{className:"col-md-12 margin-10-top"},g.a.createElement(yt,{toggleShowCheckboxList:function(){return t.toggleShowCheckboxList()},resetContactFilters:function(){return t.resetContactFilters()},selectAllCheckboxes:function(){return t.selectAllCheckboxes()},checkedAllCheckboxes:this.state.checkedAllCheckboxes,getCSV:this.getCSV,toggleSaveAsGroup:this.toggleSaveAsGroup,saveAsGroup:this.saveAsGroup,toggleShowExtraFilters:this.toggleShowExtraFilters})),g.a.createElement("div",{className:"col-md-12 margin-10-top"},g.a.createElement(st,{contacts:this.props.contacts,contactsPagination:this.props.contactsPagination,showCheckboxList:this.state.showCheckboxList,selectAllCheckboxes:function(){return t.selectAllCheckboxes()},checkedAllCheckboxes:this.state.checkedAllCheckboxes,onSubmitFilter:function(){return t.onSubmitFilter()},fetchContactsData:function(){return t.fetchContactsData()},handlePageClick:this.handlePageClick})))),this.state.showSaveAsGroup&&g.a.createElement(St,{saveAsGroup:this.saveAsGroup,closeDeleteItemModal:this.toggleSaveAsGroup}),this.state.showExtraFilters&&g.a.createElement(Ot,{saveAsGroup:this.saveAsGroup,filterType:this.state.filterType,toggleShowExtraFilters:this.toggleShowExtraFilters,handleExtraFiltersChange:this.handleExtraFiltersChange,contactType:this.props.contactsFilters.typeId.data,extraFilters:this.state.extraFilters,amountOfFilters:this.state.amountOfFilters}))}}]),n}(y.Component);e.default=Object(C.b)((function(t){return{contacts:t.contacts.list,contactsFilters:t.contacts.filters,contactsSorts:t.contacts.sorts,contactsPagination:t.contacts.pagination}}),(function(t){return Object(b.b)({fetchContacts:A,clearContacts:N,setCheckedContactAll:w,setTypeFilter:F,clearFilterContacts:G,setContactsPagination:M,blockUI:j.a,unblockUI:j.b},t)}))(xt)},757:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"w",(function(){return o})),n.d(e,"v",(function(){return s})),n.d(e,"y",(function(){return c})),n.d(e,"g",(function(){return i})),n.d(e,"i",(function(){return l})),n.d(e,"q",(function(){return u})),n.d(e,"a",(function(){return p})),n.d(e,"m",(function(){return d})),n.d(e,"x",(function(){return h})),n.d(e,"f",(function(){return m})),n.d(e,"k",(function(){return f})),n.d(e,"t",(function(){return E})),n.d(e,"d",(function(){return y})),n.d(e,"l",(function(){return g})),n.d(e,"u",(function(){return C})),n.d(e,"e",(function(){return b})),n.d(e,"n",(function(){return v})),n.d(e,"p",(function(){return S})),n.d(e,"o",(function(){return T})),n.d(e,"j",(function(){return A})),n.d(e,"r",(function(){return N})),n.d(e,"c",(function(){return w})),n.d(e,"s",(function(){return D}));var a=function(t){return{type:"FETCH_CONTACT_DETAILS",payload:t}},r=function(t){return{type:"DELETE_CONTACT",id:t}},o=function(t){return{type:"UPDATE_PERSON",contactDetails:t}},s=function(t){return{type:"UPDATE_ORGANISATION",contactDetails:t}},c=function(t){return{type:"UPDATE_PORTAL_USER",portalUser:t}},i=function(t){return{type:"DELETE_PORTAL_USER",id:t}},l=function(t){return{type:"NEW_ADDRESS",address:t}},u=function(t){return{type:"UPDATE_ADDRESS",address:t}},p=function(t){return{type:"DELETE_ADDRESS",id:t}},d=function(t){return{type:"NEW_PHONE_NUMBER",phoneNumber:t}},h=function(t){return{type:"UPDATE_PHONE_NUMBER",phoneNumber:t}},m=function(t){return{type:"DELETE_PHONE_NUMBER",id:t}},f=function(t){return{type:"NEW_EMAIL_ADDRESS",emailAddress:t}},E=function(t){return{type:"UPDATE_EMAIL_ADDRESS",emailAddress:t}},y=function(t){return{type:"DELETE_EMAIL_ADDRESS",id:t}},g=function(t){return{type:"NEW_CONTACT_NOTE",note:t}},C=function(t){return{type:"UPDATE_CONTACT_NOTE",note:t}},b=function(t){return{type:"DELETE_CONTACT_NOTE",id:t}},v=function(){return{type:"UNSET_PRIMARY_ADDRESSES"}},S=function(){return{type:"UNSET_PRIMARY_PHONE_NUMBERS"}},T=function(){return{type:"UNSET_PRIMARY_EMAIL_ADDRESSES"}},A=function(t){return{type:"NEW_CONTACT_ENERGY_SUPPLIER",contactEnergySupplier:t}},N=function(t){return{type:"UPDATE_CONTACT_ENERGY_SUPPLIER",contactEnergySupplier:t}},w=function(t){return{type:"DELETE_CONTACT_ENERGY_SUPPLIER",id:t}},D=function(t){return{type:"UPDATE_HOOM_ACCOUNT_ID",hoomAccountId:t}}},876:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var a=function(t){return{type:"ADD_CONTACT_TO_GROUP",contact:t}},r=function(t,e,n){return{type:"FETCH_CONTACT_GROUPS",filters:t,sorts:e,pagination:n}},o=function(){return{type:"CLEAR_CONTACT_GROUPS"}},s=function(t,e){return{type:"DELETE_CONTACT_GROUP",id:t,successAction:e}}}}]);