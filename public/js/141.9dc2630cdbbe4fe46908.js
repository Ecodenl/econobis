(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{1651:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),s=a(15),o=a.n(s),c=a(16),r=a.n(c),d=a(11),p=a.n(d),l=a(17),h=a.n(l),m=a(18),u=a.n(m),g=a(13),I=a.n(g),k=a(0),v=a.n(k),f=a(158),b=(a(7),a(4)),E=a(33),C=a.n(E),y=a(163),S=a(302),j=a(146),N=a(20),w=a(122),L=a(52),P=a(39),G=a(285),O=a(1223),D=a(164),A=a(89),T=a(54),F=function(e){var t=e.task,a=e.campaigns,n=e.intakes,i=e.contactGroups,s=e.opportunities,o=e.housingFiles,c=e.projects,r=e.participants,d=e.orders,p=e.invoices,l=e.handleReactSelectChange,h=e.peekLoading,m=t.intakeId,u=t.contactGroupId,g=t.opportunityId,I=t.campaignId,k=t.housingFileId,f=t.projectId,b=t.participantId,E=t.orderId,C=t.invoiceId;return v.a.createElement("div",null,v.a.createElement("div",{className:"row"},v.a.createElement(G.a,{label:"Campagne",name:"campaignId",options:a,value:I,onChangeAction:l,isLoading:h.campaigns}),v.a.createElement(G.a,{label:"Intake",size:"col-sm-6",name:"intakeId",options:n,value:m,onChangeAction:l,isLoading:h.intakes})),v.a.createElement("div",{className:"row"},v.a.createElement(G.a,{label:"Groep",size:"col-sm-6",name:"contactGroupId",options:i,value:u,onChangeAction:l,isLoading:h.contactGroups}),v.a.createElement(G.a,{label:"Kans",size:"col-sm-6",name:"opportunityId",options:s,value:g,onChangeAction:l,isLoading:h.opportunities})),v.a.createElement("div",{className:"row"},v.a.createElement(G.a,{label:"Woningdossier",size:"col-sm-6",name:"housingFileId",options:o,value:k,onChangeAction:l,isLoading:h.housingFiles}),v.a.createElement(G.a,{label:"Project",size:"col-sm-6",name:"projectId",options:c,value:f,onChangeAction:l,isLoading:h.projects})),v.a.createElement("div",{className:"row"},v.a.createElement(G.a,{label:"Participant project",size:"col-sm-6",name:"participantId",options:r,value:b,onChangeAction:l,isLoading:h.participants}),v.a.createElement(G.a,{label:"Order",size:"col-sm-6",name:"orderId",options:d,value:E,onChangeAction:l,isLoading:h.orders})),v.a.createElement("div",{className:"row"},v.a.createElement(G.a,{label:"Nota",size:"col-sm-6",name:"invoiceId",options:p,value:C,onChangeAction:l,isLoading:h.invoices})))},x=a(972),R=Object(N.b)((function(e){return{meDetails:e.meDetails,permissions:e.systemData.permissions,taskStatuses:e.systemData.taskStatuses,taskTypes:e.systemData.taskTypes,teams:e.systemData.teams,users:e.systemData.users}}),null)((function(e){var t=e.task,a=t.note,n=t.typeId,i=t.contactId,s=t.finished,o=t.dateFinished,c=t.finishedById,r=t.datePlannedStart,d=t.datePlannedFinish,p=t.startTimePlanned,l=t.endTimePlanned,h=t.responsible;return v.a.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},v.a.createElement("div",{className:"row"},v.a.createElement(w.a,{label:s?"Type notitie":"Type taak",size:"col-sm-6",name:"typeId",options:e.taskTypes,value:n,onChangeAction:e.handleInputChange})),v.a.createElement("div",{className:"row"},v.a.createElement(D.a,{label:s?"Notitie":"Taak",name:"note",value:a,onChangeAction:e.handleInputChange,required:"required",error:e.errors.note})),v.a.createElement("div",{className:"row margin-20-top"},v.a.createElement(L.a,{label:"Datum afhandelen",size:"col-sm-6",name:"datePlannedStart",value:r,onChangeAction:e.handleInputChangeDate}),v.a.createElement(O.a,{label:"Begin tijd",name:"startTimePlanned",value:p,onChangeAction:e.handleInputChangeTime})),v.a.createElement("div",{className:"row"},v.a.createElement(L.a,{label:"Einddatum",size:"col-sm-6",name:"datePlannedFinish",value:d,onChangeAction:e.handleInputChangeDate}),v.a.createElement(O.a,{label:"Eind tijd",name:"endTimePlanned",value:l,onChangeAction:e.handleInputChangeTime})),v.a.createElement("div",{className:"row"},v.a.createElement(A.a,{label:"Afgehandeld?",name:"finished",value:s,onChangeAction:e.handleInputChange}),v.a.createElement(x.a,{label:"Verantwoordelijke",size:"col-sm-6",name:"responsible",optionsInGroups:[{name:"user",label:"Gebruikers",options:e.users,optionName:"fullName"},{name:"team",label:"Teams",options:e.teams}],value:h,onChangeAction:e.handleInputChange,required:"required",error:e.errors.responsible})),v.a.createElement("div",{className:"row"},v.a.createElement(L.a,{label:"Datum gereed",name:"dateFinished",value:o,onChangeAction:e.handleInputChangeDate}),v.a.createElement(w.a,{label:"Afgerond door",name:"finishedById",options:e.users,value:c,onChangeAction:e.handleInputChange,optionName:"fullName"})),v.a.createElement("div",{className:"row margin-20-top"},v.a.createElement(G.a,{label:"Contact",name:"contactId",options:e.contacts,value:i,onChangeAction:e.handleReactSelectChange,optionName:"fullName",isLoading:e.peekLoading.contacts})),v.a.createElement("div",{className:"margin-10-top"},v.a.createElement(T.a,null,v.a.createElement("div",{className:"row",onClick:e.toggleExtraConnections},e.showExtraConnections?v.a.createElement("span",{className:"glyphicon glyphicon-menu-down"}):v.a.createElement("span",{className:"glyphicon glyphicon-menu-right"}),v.a.createElement("span",{className:"h5"},"Overige koppelingen"))),e.showExtraConnections&&v.a.createElement(F,{task:e.task,intakes:e.intakes,contactGroups:e.contactGroups,opportunities:e.opportunities,housingFiles:e.housingFiles,campaigns:e.campaigns,projects:e.projects,participants:e.participants,orders:e.orders,invoices:e.invoices,handleReactSelectChange:e.handleReactSelectChange,peekLoading:e.peekLoading})),v.a.createElement("div",{className:"panel-footer"},v.a.createElement("div",{className:"pull-right btn-group",role:"group"},v.a.createElement(P.a,{buttonText:"Opslaan",onClickAction:e.handleSubmit}))))})),z=a(51),B=a(28),q=a(31),J=function(e){var t=e.finished;return v.a.createElement("div",{className:"row"},v.a.createElement("div",{className:"col-sm-12"},v.a.createElement(B.a,null,v.a.createElement(q.a,{className:"panel-small"},v.a.createElement("div",{className:"col-md-4"},v.a.createElement("div",{className:"btn-group btn-group-flex",role:"group"},v.a.createElement(z.a,{iconName:"glyphicon-arrow-left",onClickAction:b.e.goBack}))),v.a.createElement("div",{className:"col-md-4"},v.a.createElement("h3",{className:"text-center table-title margin-small"},t?"Nieuwe notitie":"Nieuwe taak")),v.a.createElement("div",{className:"col-md-4"})))))},U=a(293),W=a(58),H=a(294),K=a(303),M=a(290),V=a(292),Q=a(295),X=a(298);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I()(e);if(t){var i=I()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return u()(this,a)}}var _=function(e){h()(a,e);var t=$(a);function a(e){var n;return o()(this,a),(n=t.call(this,e)).state={contacts:[],intakes:[],contactGroups:[],opportunities:[],campaigns:[],housingFiles:[],projects:[],participants:[],orders:[],invoices:[],task:{id:"",note:"",typeId:"",contactId:"",campaignId:"",intakeId:"",opportunityId:"",contactGroupId:"",housingFileId:"",projectId:"",participantId:"",orderId:"",invoiceId:"",datePlannedStart:"",datePlannedFinish:"",startTimePlanned:"",endTimePlanned:"",finished:!1,dateFinished:"",finishedById:"",responsible:""},errors:{note:!1,responsible:!1},showExtraConnections:!1,peekLoading:{contacts:!0,intakes:!0,contactGroups:!0,opportunities:!0,campaigns:!0,housingFiles:!0,projects:!0,participants:!0,orders:!0,invoices:!0}},n.updateStateByChangeParams=n.updateStateByChangeParams.bind(p()(n)),n.handleInputChange=n.handleInputChange.bind(p()(n)),n.handleInputChangeDate=n.handleInputChangeDate.bind(p()(n)),n.handleInputChangeTime=n.handleInputChangeTime.bind(p()(n)),n.handleSubmit=n.handleSubmit.bind(p()(n)),n.handleReactSelectChange=n.handleReactSelectChange.bind(p()(n)),n.toggleExtraConnections=n.toggleExtraConnections.bind(p()(n)),n}return r()(a,[{key:"componentDidMount",value:function(){var e=this;Object(f.isEmpty)(this.props.params)||this.updateStateByChangeParams(this.props.params),y.a.getContactsPeek().then((function(t){e.setState({contacts:t,peekLoading:Z(Z({},e.state.peekLoading),{},{contacts:!1})})})),U.a.peekIntakes().then((function(t){e.setState({intakes:t,peekLoading:Z(Z({},e.state.peekLoading),{},{intakes:!1})})})),W.a.peekContactGroups().then((function(t){e.setState({contactGroups:t,peekLoading:Z(Z({},e.state.peekLoading),{},{contactGroups:!1})})})),H.a.peekOpportunities().then((function(t){e.setState({opportunities:t,peekLoading:Z(Z({},e.state.peekLoading),{},{opportunities:!1})})})),S.a.peekCampaigns().then((function(t){e.setState({campaigns:t,peekLoading:Z(Z({},e.state.peekLoading),{},{campaigns:!1})})})),K.a.peekHousingFiles().then((function(t){e.setState({housingFiles:t,peekLoading:Z(Z({},e.state.peekLoading),{},{housingFiles:!1})})})),M.a.peekProjects().then((function(t){e.setState({projects:t,peekLoading:Z(Z({},e.state.peekLoading),{},{projects:!1})})})),V.a.peekParticipantsProjects().then((function(t){e.setState({participants:t,peekLoading:Z(Z({},e.state.peekLoading),{},{participants:!1})})})),Q.a.peekOrders().then((function(t){e.setState({orders:t,peekLoading:Z(Z({},e.state.peekLoading),{},{orders:!1})})})),X.a.peekInvoices().then((function(t){e.setState({invoices:t,peekLoading:Z(Z({},e.state.peekLoading),{},{invoices:!1})})}))}},{key:"componentWillReceiveProps",value:function(e){this.props.params.id===e.params.id&&this.props.params.type===e.params.type||this.updateStateByChangeParams(e.params)}},{key:"updateStateByChangeParams",value:function(e){if(!Object(f.isEmpty)(e)){var t=!1;if("afgehandeld"===e.closed&&(t=!0,this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t})}))),e.contactId&&e.projectId&&e.participantId)this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:e.contactId,intakeId:"",contactGroupId:"",opportunityId:"",projectId:e.projectId,participantId:e.participantId,orderId:"",invoiceId:""})}));else if(e.contactId&&e.opportunityId)this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:e.contactId,intakeId:"",contactGroupId:"",opportunityId:e.opportunityId,projectId:"",participantId:"",orderId:"",invoiceId:""})}));else switch(e.type){case"contact":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:e.id,intakeId:"",contactGroupId:"",opportunityId:"",projectId:"",participantId:"",orderId:"",invoiceId:""})}));break;case"intake":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:e.id,contactGroupId:"",opportunityId:"",projectId:"",participantId:"",orderId:"",invoiceId:""})}));break;case"contact-groep":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:e.id,opportunityId:"",projectId:"",participantId:"",orderId:"",invoiceId:""})}));break;case"kans":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:"",opportunityId:e.id,projectId:"",participantId:"",orderId:"",invoiceId:""})}));break;case"campagne":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:e.id,contactId:"",intakeId:"",contactGroupId:"",opportunityId:"",projectId:"",participantId:"",orderId:"",invoiceId:""})}));break;case"project":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:"",opportunityId:"",projectId:e.id,participantId:"",orderId:"",invoiceId:""})}));break;case"participant":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:"",opportunityId:"",projectId:"",participantId:e.id,orderId:"",invoiceId:""})}));break;case"order":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:"",opportunityId:"",projectId:"",participantId:"",orderId:e.id,invoiceId:""})}));break;case"nota":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:"",opportunityId:"",projectId:"",participantId:"",orderId:"",invoiceId:e.id})}));break;case"woningdossier":this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},{finished:t,campaignId:"",contactId:"",intakeId:"",contactGroupId:"",opportunityId:"",projectId:"",participantId:"",orderId:"",invoiceId:"",housingFileId:e.id})}))}}}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},i()({},n,a))}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},i()({},t,e))}))}},{key:"handleInputChangeTime",value:function(e,t){this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},i()({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Z(Z({},this.state),{},{task:Z(Z({},this.state.task),{},i()({},t,e))}))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.task,a={},n=!1;C.a.isEmpty(t.note)&&(a.note=!0,n=!0),C.a.isEmpty(t.responsible)&&(a.responsible=!0,n=!0),t.responsible.search("user")>=0&&(t.responsibleUserId=t.responsible.replace("user",""),t.responsibleTeamId=""),t.responsible.search("team")>=0&&(t.responsibleUserId="",t.responsibleTeamId=t.responsible.replace("team","")),this.setState(Z(Z({},this.state),{},{errors:a})),!n&&j.a.newTask(t).then((function(e){var t=e.data.data.id;b.f.push("/taak/".concat(t))})).catch((function(e){console.log(e)}))}},{key:"toggleExtraConnections",value:function(){this.setState({showExtraConnections:!this.state.showExtraConnections})}},{key:"render",value:function(){return v.a.createElement("div",{className:"row"},v.a.createElement("div",{className:"col-md-9"},v.a.createElement("div",{className:"col-md-12"},v.a.createElement(J,{finished:this.state.task.finished})),v.a.createElement("div",{className:"col-md-12"},v.a.createElement(B.a,null,v.a.createElement(q.a,null,v.a.createElement("div",{className:"col-md-12"},v.a.createElement(R,{task:this.state.task,contacts:this.state.contacts,intakes:this.state.intakes,contactGroups:this.state.contactGroups,opportunities:this.state.opportunities,campaigns:this.state.campaigns,housingFiles:this.state.housingFiles,projects:this.state.projects,participants:this.state.participants,orders:this.state.orders,invoices:this.state.invoices,errors:this.state.errors,meDetails:this.props.meDetails,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleInputChangeTime:this.handleInputChangeTime,handleSubmit:this.handleSubmit,handleReactSelectChange:this.handleReactSelectChange,toggleExtraConnections:this.toggleExtraConnections,showExtraConnections:this.state.showExtraConnections,peekLoading:this.state.peekLoading})))))),v.a.createElement("div",{className:"col-md-3"}))}}]),a}(k.Component);t.default=_}}]);