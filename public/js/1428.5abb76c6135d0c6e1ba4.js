"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[1428],{63484:(e,t,n)=>{n.d(t,{Ft:()=>a,Kf:()=>i,OU:()=>l,ib:()=>o,l0:()=>u,tl:()=>s,vl:()=>r,yw:()=>p,zz:()=>c});var o=function(e){return{type:"FETCH_CONTACT_GROUP_DETAILS",id:e}},a=function(e){return{type:"UPDATE_CONTACT_GROUP_DETAILS",contactGroupDetails:e}},r=function(){return{type:"CLEAR_CONTACT_GROUP_DETAILS"}},c=function(e,t){return{type:"DELETE_COMPOSED_GROUP",contactGroupId:e,contactGroupToDetachId:t}},s=function(e,t){return{type:"ATTACH_COMPOSED_GROUP",contactGroupId:e,contactGroupToAttachId:t}},i=function(e,t){return{type:"DELETE_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToDetachId:t}},l=function(e,t){return{type:"ATTACH_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToAttachId:t}},u=function(e){return{type:"UPDATE_LAPOSTA_LIST_ID",lapostaListId:e}},p=function(e){return{type:"DEACTIVATE_LAPOSTA_LIST_ID",lapostaListId:e}}},91428:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ee});var o=n(23029),a=n(92901),r=n(56822),c=n(53954),s=n(85501),i=n(64467),l=n(96540),u=n(69733),p=n(17375),d=function(e){return{type:"FETCH_CONTACTS_IN_GROUP",contactGroup:e}},m=function(){return{type:"CLEAR_CONTACTS_IN_GROUP"}},h=n(63484),f=n(58168),E=n(42285),g=n(45403),A=n(93913),I=n(26829);const v=function(e){return l.createElement("tr",{className:"thead-title-quaternary"},e.isUsedInLaposta?l.createElement(l.Fragment,null,l.createElement(I.A,{RowClassName:"hidden-xs",title:"#",width:"10%"}),l.createElement(I.A,{RowClassName:"hidden-xs hidden-sm",title:"Type",width:"10%"}),l.createElement(I.A,{sortColumn:"fullName",title:"Naam",width:"25%"}),l.createElement(I.A,{RowClassName:"hidden-xs",title:"E-mail",width:"25%"}),l.createElement(I.A,{RowClassName:"hidden-xs",title:"Laposta status",width:"10%"}),l.createElement(I.A,{RowClassName:"hidden-xs hidden-sm",title:"Toegevoegd aan groep op",width:"10%"}),l.createElement("th",{width:"10%"})):l.createElement(l.Fragment,null,l.createElement(I.A,{RowClassName:"hidden-xs",title:"#",width:"15%"}),l.createElement(I.A,{RowClassName:"hidden-xs hidden-sm",title:"Type",width:"15%"}),l.createElement(I.A,{sortColumn:"fullName",title:"Naam",width:"30%"}),l.createElement(I.A,{RowClassName:"hidden-xs",title:"E-mail",width:"30%"}),l.createElement(I.A,{RowClassName:"hidden-xs hidden-sm",title:"Toegevoegd aan groep op",width:"10%"}),l.createElement("th",{width:"10%"})))};var b=n(24179),C=n(95093),w=n.n(C),G=n(87722),N=n(88505),y=n(87696),T=n(41904),D=n(26819);function O(e,t,n){return t=(0,c.A)(t),(0,r.A)(e,k()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}var M=function(e){function t(e){var n;return(0,o.A)(this,t),(n=O(this,t,[e])).state={showActionButtons:!1,highlightRow:""},n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(e){b.RL.push("/contact/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.number,a=t.typeName,r=t.fullName,c=t.emailAddress,s=t.lapostaMemberId,i=t.lapostaMemberState,u=t.lapostaLastErrorMessage,p=t.memberToGroupSince,d=t.permissions,m=t.isUsedInLaposta,h="";switch(i){case"active":h="Actief";break;case"unsubscribed":h="Uitgeschreven";break;case"unconfirmed":h="Niet bevestigd";break;case"cleaned":h="Opgeschoond";break;case"unknown":h="Niet bekend in Laposta";break;case"inprogress":h="Wordt bijgewerkt";break;default:h=""}var f=!m||null!==s&&"unknown"!==i?null:"missing-data-row",E=!m||null!==s&&"unknown"!==i?"":"Koppeling niet gevonden in Laposta";return l.createElement("tr",{title:E,className:this.state.highlightRow+" "+f?f:"",onDoubleClick:function(){return e.openItem(n)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},l.createElement("td",{className:"hidden-xs"},o),l.createElement("td",{className:"hidden-xs hidden-sm"},a," "),l.createElement("td",null,r),l.createElement("td",{className:"hidden-xs"},c),m&&l.createElement("td",{className:"hidden-xs"},h,u?l.createElement(l.Fragment,null," ",l.createElement(T.TNq,{color:"red",size:"15px","data-tip":"Laatste (fout) melding synchronistatie Laposta: "+u,"data-for":"tooltip-lapostaLastErrorMessage"}),l.createElement(D.A,{id:"tooltip-lapostaLastErrorMessage",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})):null),l.createElement("td",{className:"hidden-xs hidden-sm"},p?w()(p).format("DD-MM-Y"):""),l.createElement("td",null,this.state.showActionButtons&&d.updatePerson&&d.updateOrganisation&&(m&&null!==s||this.props.contactGroupType&&"static"===this.props.contactGroupType.id)?l.createElement("a",{role:"button",onClick:this.props.showEditItemModal.bind(this,n,c,p)},l.createElement(G.Ay,{className:"mybtn-success",size:14,icon:N.w})):"","Â ",this.state.showActionButtons&&(d.updateContactGroupMembers||d.updatePerson&&d.updateOrganisation)&&this.props.contactGroupType&&"static"===this.props.contactGroupType.id?l.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,n,r)},l.createElement(G.Ay,{className:"mybtn-danger",size:14,icon:y.d})):""))}}])}(l.Component);const S=(0,u.Ng)((function(e){return{permissions:e.meDetails.permissions,contactGroupType:e.contactGroupDetails.type}}))(M);var P=n(63750);const L=(0,u.Ng)(null,(function(e){return{deleteContactInGroup:function(t,n){e(function(e,t){return{type:"DELETE_CONTACT_IN_GROUP",contactGroup:e,id:t}}(t,n))}}}))((function(e){return l.createElement(P.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteContactInGroup(e.groupId,e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder contact uit groep: ",l.createElement("strong",null," ",e.fullName," "))}));var R=n(73421),_=n(54814);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t=(0,c.A)(t),(0,r.A)(e,z()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}var B=function(e){function t(e){var n;return(0,o.A)(this,t),n=U(this,t,[e]),(0,i.A)(n,"handleChangeDate",(function(e){var t=e?w()(e).format("Y-MM-DD"):"";n.setState(x(x({},n.state),{},{memberToGroupSince:t}))})),n.state={memberToGroupSince:e.memberToGroupSince},n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this;return l.createElement(P.A,{buttonConfirmText:"Opslaan",buttonClassName:"btn-danger",closeModal:this.props.closeEditItemModal,confirmAction:function(){return e.props.updateContactInGroup(e.props.groupId,e.props.id,{memberToGroupSince:e.state.memberToGroupSince}),void e.props.closeEditItemModal()},title:"Wijzigen"},l.createElement("div",{className:"row"},l.createElement(_.A,{label:"Contact email",divSize:"col-xs-12",name:"emailAddress",value:this.props.emailAddress,readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(R.A,{label:"Wijzig datum toegevoegd aan groep op",divSize:"col-xs-12",name:"memberToGroupSince",value:this.props.memberToGroupSince,onChangeAction:this.handleChangeDate})),l.createElement("br",null))}}])}(l.Component);const H=(0,u.Ng)(null,(function(e){return{updateContactInGroup:function(t,n,o){e(function(e,t,n){return{type:"UPDATE_CONTACT_IN_GROUP",contactGroup:e,id:t,memberToGroupSince:n}}(t,n,o))}}}))(B);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t=(0,c.A)(t),(0,r.A)(e,W()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}var q=function(e){function t(e){var n;return(0,o.A)(this,t),n=V(this,t,[e]),(0,i.A)(n,"showDeleteItemModal",(function(e,t){n.setState(Y(Y({},n.state),{},{showDeleteItem:!0,deleteItem:Y(Y({},n.state.deleteItem),{},{id:e,fullName:t})}))})),(0,i.A)(n,"closeDeleteItemModal",(function(){n.setState(Y(Y({},n.state),{},{showDeleteItem:!1,deleteItem:Y(Y({},n.state.deleteItem),{},{id:"",fullName:""})}))})),(0,i.A)(n,"showEditItemModal",(function(e,t,o){n.setState(Y(Y({},n.state),{},{showEditItem:!0,editItem:Y(Y({},n.state.editItem),{},{id:e,emailAddress:t,memberToGroupSince:o})}))})),(0,i.A)(n,"closeEditItemModal",(function(){n.setState(Y(Y({},n.state),{},{showEditItem:!1,editItem:Y(Y({},n.state.editItem),{},{id:"",emailAddress:"",memberToGroupSince:""})}))})),n.state={showDeleteItem:!1,showEditItem:!1,deleteItem:{id:"",fullName:""},editItem:{id:"",emailAddress:"",memberToGroupSince:""}},n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t="",n=!0;return this.props.hasError?t="Fout bij het ophalen van contact in groep.":this.props.isLoading?t="Gegevens aan het laden.":0===this.props.contactsInGroup.length?t="Geen contact in groep gevonden!":n=!1,l.createElement("div",null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-xs-12"},l.createElement("span",null,"Totaal leden in groep: ",l.createElement("strong",null,this.props.contactsInGroup.length)))),l.createElement("form",{onKeyUp:this.handleKeyUp},l.createElement(E.A,null,l.createElement(g.A,null,l.createElement(v,{showCheckbox:this.props.showCheckboxList,refreshContactsInGroupData:this.props.refreshContactsInGroupData,isUsedInLaposta:this.props.contactGroupDetails.isUsedInLaposta})),l.createElement(A.A,null,n?l.createElement("tr",null,l.createElement("td",{colSpan:10},t)):this.props.contactsInGroup.map((function(t){return l.createElement(S,(0,f.A)({key:t.id},t,{showDeleteItemModal:e.showDeleteItemModal,showEditItemModal:e.showEditItemModal,groupId:e.props.groupId,isUsedInLaposta:e.props.contactGroupDetails.isUsedInLaposta}))}))))),this.state.showDeleteItem&&l.createElement(L,(0,f.A)({closeDeleteItemModal:this.closeDeleteItemModal,groupId:this.props.groupId},this.state.deleteItem)),this.state.showEditItem&&l.createElement(H,(0,f.A)({closeEditItemModal:this.closeEditItemModal,groupId:this.props.groupId},this.state.editItem,{refreshContactsInGroupData:this.props.refreshContactsInGroupData})))}}])}(l.Component);const K=(0,u.Ng)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError,contactGroupDetails:e.contactGroupDetails}}))(q);var X=n(5544),J=n(10467),Q=n(54756),Z=n.n(Q),$=n(93822),ee=n(14585);const te=function(e){var t=(0,l.useState)({}),n=(0,X.A)(t,2),o=n[0],a=n[1],r=(0,l.useState)(""),c=(0,X.A)(r,2),s=c[0],i=c[1],u=(0,l.useState)(!1),p=(0,X.A)(u,2),d=p[0],m=p[1],h=e.inspectionPersonTypeId,f=e.groupName,E=e.addPersonToGroup,g=e.sendEmailNewContactLink,A=e.closeModalAddToGroup,I=function(){var e=(0,J.A)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.length<=1)){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,$.A.fetchContactSearch(s,h);case 6:return t=e.sent,m(!1),e.abrupt("return",t.data.data);case 11:e.prev=11,e.t0=e.catch(3),m(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return l.createElement(P.A,{buttonConfirmText:"Toevoegen",closeModal:A,confirmAction:function(){return E(o.id)},title:"Contact toevoegen aan groep: ".concat(f)},g?l.createElement("div",{className:"alert alert-danger",role:"alert"},"Na toevoegen zal er automatisch een email verzonden worden naar dit contact."):null,"coach"==h?l.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is coach".'):null,"projectmanager"==h?l.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is projectleider".'):null,"externalparty"==h?l.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is externe partij".'):null,l.createElement("form",{className:"form-horizontal"},l.createElement("div",{className:"row"},l.createElement(ee.A,{label:"Voeg bestaand contact toe",divSize:"col-sm-12",size:"col-sm-8",name:"personId",id:"personId",loadOptions:I,optionName:"fullName",value:o,onChangeAction:function(e){e&&a(e)},required:"required",isLoading:d,handleInputChange:function(e){i(e)},multi:!1}))))};var ne=n(60738),oe=n(91858),ae=n(5419),re=n.n(ae),ce=n(23138),se=n(23384),ie=n(44926),le=n(9293),ue=n(83873),pe=n(60881);const de=(0,u.Ng)((function(e){return{permissions:e.meDetails.permissions,contactGroupDetails:e.contactGroupDetails}}),(function(e){return(0,p.zH)({blockUI:ce.o,unblockUI:ce.r},e)}))((function(e){var t=e.permissions,n=e.contactGroupDetails,o=e.blockUI,a=e.unblockUI,r=e.refreshContactsInGroupData,c=(0,l.useState)(!1),s=(0,X.A)(c,2),i=s[0],u=s[1],p=(0,l.useState)(!1),d=(0,X.A)(p,2),m=d[0],h=d[1],f=(0,l.useContext)(le.t).openEmailSendModal;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(oe.A,{iconName:"refresh",onClickAction:r}),(t.updateContactGroupMembers||t.updatePerson&&t.updateOrganisation)&&n.type&&"static"===n.type.id&&l.createElement("div",{className:"nav navbar-nav btn-group"},l.createElement("button",{onClick:function(){h(!m)},className:"btn btn-success btn-sm"},l.createElement(G.Ay,{size:14,icon:se.t}))),l.createElement(oe.A,{iconName:"download",onClickAction:function(){o(),ne.A.getCsv(n.id).then((function(e){re()(e.data,"Groep-"+n.name.substring(0,20)+"-"+w()().format("YYYY-MM-DD HH:mm:ss")+".csv"),a()})).catch((function(e){a()}))}}),l.createElement(oe.A,{iconName:"envelopeO",onClickAction:function(){ue.A.fetchMailboxesLoggedInUserPeek().then((function(e){e.data.data.length>0?ie.A.storeGroupMail(n.id).then((function(e){console.log("mail test 2"),console.log(e),f(e.data.id)})):u(!i)}))}}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title",onClick:function(){b.RL.push("/contact-groep/".concat(n.id))},role:"button"},"Contacten in groep: ",n.name)),l.createElement("div",{className:"col-md-4"}),m&&l.createElement(te,{closeModalAddToGroup:function(){h(!1)},addPersonToGroup:function(e){var t={groupId:n.id,contactId:e};ne.A.addContactToGroup(t).then((function(){h(!1),r()}))},groupName:n.name,sendEmailNewContactLink:n.sendEmailNewContactLink,inspectionPersonTypeId:n.inspectionPersonTypeId}),i&&l.createElement(pe.A,{closeModal:function(){u(!1)},title:"Waarschuwing",errorMessage:"Je bent nog niet toegevoegd aan een mailbox en kan geen groepsmail versturen. Toevoegen aan mailboxen kan via instellingen > mailboxen mits je de juiste rechten hebt!"}))}));function me(e,t,n){return t=(0,c.A)(t),(0,r.A)(e,he()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}var fe=function(e){function t(e){var n;return(0,o.A)(this,t),n=me(this,t,[e]),(0,i.A)(n,"refreshContactsInGroupData",(function(){n.props.clearContactsInGroup(),n.props.fetchContactsInGroup(n.props.params.contactGroup)})),n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){this.props.fetchContactsInGroup(this.props.params.contactGroup),this.props.fetchContactGroupDetails(this.props.params.contactGroup)}},{key:"componentWillUnmount",value:function(){this.props.clearContactsInGroup(),this.props.clearContactGroupDetails()}},{key:"render",value:function(){return l.createElement("div",null,l.createElement("div",{className:"panel panel-default"},l.createElement("div",{className:"panel-body"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(de,{refreshContactsInGroupData:this.refreshContactsInGroupData,groupId:this.props.params.contactGroup})),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(K,{contactsInGroup:this.props.contactsInGroup,groupId:this.props.params.contactGroup,refreshContactsInGroupData:this.refreshContactsInGroupData})))))}}])}(l.Component);const Ee=(0,u.Ng)((function(e){return{contactsInGroup:e.contactsInGroup}}),(function(e){return(0,p.zH)({fetchContactsInGroup:d,clearContactsInGroup:m,fetchContactGroupDetails:h.ib,clearContactGroupDetails:h.vl},e)}))(fe)}}]);