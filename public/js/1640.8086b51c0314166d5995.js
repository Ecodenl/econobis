"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[1640],{11640:(e,t,a)=>{a.d(t,{A:()=>w});var n=a(5544),r=(a(28706),a(23792),a(62010),a(26099),a(62953),a(96540)),i=a(69733),l=a(54814),o=a(14809),m=a(77465),c=a(55956),s=a(55849),u=a(9392),p=a(62493),d=a(9588),g=(a(42762),a(15941)),v=g.Ik().shape({name:g.Yj().required("Verplicht"),email:g.Yj().email("Ongeldige e-mail").required("Verplicht")}),A=g.Ik().shape({imapHost:g.Yj().required("Verplicht"),imapPort:g.Yj().required("Verplicht"),username:g.Yj().required("Verplicht")}),h=g.Ik().shape({smtpHost:g.Yj().required("Verplicht"),smtpPort:g.Yj().required("Verplicht"),username:g.Yj().required("Verplicht")}),E=g.Ik().shape({password:g.Yj().required("Verplicht")}),S=g.Ik().shape({mailgunDomainId:g.Yj().required("Verplicht").typeError("Verplicht")}),b=g.Ik().shape({oauthApiSettings:g.Ik().shape({clientId:g.Yj().trim().required("Verplicht"),projectId:g.Yj().trim().required("Verplicht"),tenantId:g.Yj().trim().required("Verplicht")})}),y=g.Ik().shape({oauthApiSettings:g.Ik().shape({clientSecret:g.Yj().trim().required("Verplicht")})}),I=a(30483),q=a(95093),T=a.n(q),f=a(42571);const N=function(e){var t,a,n,i,o,m,c,p,d,g,v,A,h,E,S,b,y=e.values,q=e.errors,T=e.touched,N=e.handleChange,w=e.handleBlur;return r.createElement(r.Fragment,null,r.createElement(u.A,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Microsoft Azure api instellingen"))),r.createElement(s.A,null,r.createElement("div",{className:"row"},r.createElement(l.A,{label:"Client id",name:"oauthApiSettings.clientId",value:null===(t=y.oauthApiSettings)||void 0===t?void 0:t.clientId,onChangeAction:N,onBlurAction:w,required:"required",error:(null===(a=q.oauthApiSettings)||void 0===a?void 0:a.clientId)&&(null===(n=T.oauthApiSettings)||void 0===n?void 0:n.clientId),errorMessage:null===(i=q.oauthApiSettings)||void 0===i?void 0:i.clientId}),r.createElement(l.A,{label:"Object ID",name:"oauthApiSettings.projectId",value:null===(o=y.oauthApiSettings)||void 0===o?void 0:o.projectId,onChangeAction:N,onBlurAction:w,required:"required",error:(null===(m=q.oauthApiSettings)||void 0===m?void 0:m.projectId)&&(null===(c=T.oauthApiSettings)||void 0===c?void 0:c.projectId),errorMessage:null===(p=q.oauthApiSettings)||void 0===p?void 0:p.projectId})),r.createElement("div",{className:"row"},r.createElement(I.A,{className:"form-group col-sm-6",label:"Redirect url",value:f.e}),r.createElement(l.A,{type:"text",label:"Client secret waarde",name:"oauthApiSettings.clientSecret",value:null===(d=y.oauthApiSettings)||void 0===d?void 0:d.clientSecret,className:"numeric-password",placeholder:"**********",onChangeAction:N,onBlurAction:w,required:"required",error:(null===(g=q.oauthApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=T.oauthApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(A=q.oauthApiSettings)||void 0===A?void 0:A.clientSecret})),r.createElement("div",{className:"row"},r.createElement(l.A,{label:"Tenant ID",name:"oauthApiSettings.tenantId",value:null===(h=y.oauthApiSettings)||void 0===h?void 0:h.tenantId,onChangeAction:N,onBlurAction:w,required:"required",error:(null===(E=q.oauthApiSettings)||void 0===E?void 0:E.tenantId)&&(null===(S=T.oauthApiSettings)||void 0===S?void 0:S.tenantId),errorMessage:null===(b=q.oauthApiSettings)||void 0===b?void 0:b.tenantId}))))},w=(0,i.Ng)((function(e){return{mailboxServerTypes:e.systemData.mailboxServerTypes,mailgunDomain:e.systemData.mailgunDomain}}))((function(e){var t,a=e.initialValues,i=e.processSubmit,g=e.mailgunDomain,q=e.mailboxServerTypes,f=e.switchToView,w=e.isNew,C=(0,r.useState)(a.incomingServerType),k=(0,n.A)(C,2),x=k[0],M=k[1],j=(0,r.useState)(a.outgoingServerType),P=(0,n.A)(j,2),V=P[0],B=P[1],D=(0,d.Wx)({initialValues:a,validationSchema:(t=v,"imap"===x&&(t=t.concat(A),w&&(t=t.concat(E))),"smtp"===V&&(t=t.concat(h),w&&(t=t.concat(E))),"mailgun"===V&&(t=t.concat(S)),"ms-oauth"!==x&&"ms-oauth"!==V||(t=t.concat(b),w&&(t=t.concat(y))),t),onSubmit:function(e,t){var a=t.setSubmitting;i(e,a)}}),F=D.values,H=D.errors,Y=D.touched,z=D.handleChange,L=D.handleSubmit,O=D.setFieldValue,U=D.handleBlur,W=D.isSubmitting;return(0,r.useEffect)((function(){F.incomingServerType&&M(F.incomingServerType),F.outgoingServerType&&B(F.outgoingServerType)}),[F.incomingServerType,F.outgoingServerType]),r.createElement("form",{className:"form-horizontal",onSubmit:L},r.createElement(p.A,null,r.createElement(s.A,null,r.createElement("div",{className:"row"},r.createElement(l.A,{label:"Weergave Naam",name:"name",value:F.name,onChangeAction:z,onBlurAction:U,required:"required",error:H.name&&Y.name,errorMessage:H.name}),r.createElement(l.A,{label:"E-mail",name:"email",value:F.email,onChangeAction:z,onBlurAction:U,required:"required",error:H.email&&Y.email,errorMessage:H.email})),r.createElement("div",{className:"row"},r.createElement(m.A,{label:"Actief",name:"isActive",value:F.isActive,onChangeAction:function(e){e.persist(),O(e.target.name,e.target.checked)},disabled:F.primary}),r.createElement(m.A,{label:"Primair (verzend wachtwoord mails)",name:"primary",value:F.primary,onChangeAction:function(e){e.persist(),O(e.target.name,e.target.checked)},disabled:!F.isActive||a.primary,size:"col-sm-5",textToolTip:a.primary&&"Switchen van primaire mailbox is alleen mogelijk door een andere mailbox op primair te zetten."})),r.createElement("div",{className:"row"},r.createElement(m.A,{label:r.createElement("span",null,"Koppel contact op email ",r.createElement("u",null,"aan")," adres",r.createElement("br",null),r.createElement("small",{style:{color:"#ccc",fontWeight:"normal"}},"Koppeling contact standaard op email ",r.createElement("u",null,"afzender")," adres")),name:"linkContactFromEmailToAddress",value:F.linkContactFromEmailToAddress,onChangeAction:function(e){e.persist(),O(e.target.name,e.target.checked)}}))),r.createElement(u.A,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Servergegevens"))),r.createElement(s.A,null,r.createElement("div",{className:"row"},r.createElement(o.A,{label:"Inkomende mail type",name:"incomingServerType",value:F.incomingServerType,options:q.incomingServerTypes,onChangeAction:z,emptyOption:!1,required:"required"}),r.createElement(o.A,{label:"Uitgaande mail type",name:"outgoingServerType",value:F.outgoingServerType,options:q.outgoingServerTypes,onChangeAction:z,emptyOption:!1,required:"required"})),r.createElement("div",{className:"row"},"imap"===F.incomingServerType?r.createElement(l.A,{label:"Inkomende IMAP host",name:"imapHost",value:F.imapHost,onChangeAction:z,onBlurAction:U,required:"required",error:H.imapHost&&Y.imapHost,errorMessage:H.imapHost}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===F.outgoingServerType?r.createElement(l.A,{label:"Uitgaande SMTP host",name:"smtpHost",value:F.smtpHost,onChangeAction:z,onBlurAction:U,required:"required",error:H.smtpHost&&Y.smtpHost,errorMessage:H.smtpHost}):null,"mailgun"===F.outgoingServerType?r.createElement(o.A,{label:"Uitgaand Mailgun domein",name:"mailgunDomainId",value:F.mailgunDomainId,options:g,optionName:"domain",onChangeAction:z,required:"required",error:H.mailgunDomainId&&Y.mailgunDomainId,errorMessage:H.mailgunDomainId}):null)),("imap"===F.incomingServerType||"smtp"===F.outgoingServerType)&&r.createElement(r.Fragment,null,r.createElement(u.A,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Instellingen"))),r.createElement(s.A,null,r.createElement("div",{className:"row"},r.createElement(l.A,{label:"Gebruikersnaam",name:"username",value:F.username,onChangeAction:z,onBlurAction:U,required:"required",error:H.username&&Y.username,errorMessage:H.username}),r.createElement(l.A,{type:"text",label:"Wachtwoord",name:"password",value:F.password,className:"numeric-password",placeholder:"**********",onChangeAction:z,onBlurAction:U,required:"required",error:H.password&&Y.password,errorMessage:H.password})),r.createElement("div",{className:"row"},"imap"===F.incomingServerType?r.createElement(l.A,{label:"Imap poort",name:"imapPort",value:F.imapPort,onChangeAction:z,onBlurAction:U,required:"required",error:H.imapPort&&Y.imapPort,errorMessage:H.imapPort}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===F.outgoingServerType&&r.createElement(l.A,{label:"Smtp poort",name:"smtpPort",value:F.smtpPort,onChangeAction:z,onBlurAction:U,required:"required",error:H.smtpPort&&Y.smtpPort,errorMessage:H.smtpPort})),r.createElement("div",{className:"row"},"imap"===F.incomingServerType?r.createElement(o.A,{label:"Imap versleutelde verbinding",name:"imapEncryption",value:F.imapEncryption,options:[{id:"ssl",name:"SSL"},{id:"ssl/novalidate-cert",name:"SSL - self-signed certificate"},{id:"tls",name:"TLS"}],onChangeAction:z}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===F.outgoingServerType&&r.createElement(o.A,{label:"Smtp versleutelde verbinding",name:"smtpEncryption",value:F.smtpEncryption,options:[{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"}],onChangeAction:z})),"imap"===F.incomingServerType&&r.createElement(r.Fragment,null,r.createElement("div",{className:"row"},r.createElement(l.A,{label:"Inbox prefix",name:"imapInboxPrefix",value:F.imapInboxPrefix,onChangeAction:z,onBlurAction:U,error:H.imapInboxPrefix&&Y.imapInboxPrefix,errorMessage:H.imapInboxPrefix})),r.createElement("div",{className:"row"},r.createElement(m.A,{label:"Zet email als gelezen op server",name:"emailMarkAsSeen",value:F.emailMarkAsSeen,onChangeAction:z,onBlurAction:U}))))),("ms-oauth"===F.incomingServerType||"ms-oauth"===F.outgoingServerType)&&r.createElement(N,{values:F,errors:H,touched:Y,handleChange:z,handleBlur:U}),"mailgun"===F.incomingServerType&&r.createElement(r.Fragment,null,r.createElement(u.A,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Mailgun instellingen"))),r.createElement(s.A,null,r.createElement("div",{className:"row"},r.createElement(I.A,{className:"form-group col-sm-12",labelSize:"col-sm-3",valueSize:"col-sm-9",label:"Forward email",value:F.inboundMailgunEmail?F.inboundMailgunEmail:"Nog niet bepaald",textToolTip:"Forward email "+F.email+" naar "+(F.inboundMailgunEmail?F.inboundMailgunEmail:"Nog niet bepaald")+" om deze in Econobis te ontvangen."})))),F.id&&r.createElement(r.Fragment,null,r.createElement(u.A,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Log"))),r.createElement(s.A,null,r.createElement("div",{className:"row"},r.createElement(I.A,{label:"Datum email laatst opgehaald",value:F.dateLastFetched?T()(F.dateLastFetched).format("L HH:mm:ss"):"Nog niet bepaald",className:"form-group col-sm-6"}),r.createElement(I.A,{label:"UID email laatst opgehaald",value:F.imapIdLastFetched,className:"form-group col-sm-6"})))),r.createElement(s.A,null,r.createElement("div",{className:"pull-right btn-group",role:"group"},F.id?r.createElement(r.Fragment,null,r.createElement(c.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:f}),r.createElement(c.A,{buttonText:"Opslaan",onClickAction:L,type:"submit",value:"Submit",loading:W})):r.createElement(c.A,{buttonText:"Opslaan",onClickAction:L,type:"submit",value:"Submit",loading:W})))))}))},42571:(e,t,a)=>{a.d(t,{e:()=>r});var n=a(61643),r="".concat((0,n.e)(),"/api/oauth/ms-azure/callback")},42762:(e,t,a)=>{var n=a(46518),r=a(43802).trim;n({target:"String",proto:!0,forced:a(60706)("trim")},{trim:function(){return r(this)}})},60706:(e,t,a)=>{var n=a(10350).PROPER,r=a(79039),i=a(47452);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!=="​᠎"[e]()||n&&i[e].name!==e}))}}}]);