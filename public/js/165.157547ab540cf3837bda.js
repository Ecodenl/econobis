"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[165],{10165:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var n=a(15671),r=a(43144),i=a(97326),c=a(60136),o=a(82963),l=a(61120),s=a(4942),p=a(67294),u=a(48966),m=a.n(u),d=a(61409),h=a(14309),f=a(98688),g=a(55451);const v=function(e){(0,c.Z)(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function s(e){return(0,n.Z)(this,s),i.call(this,e)}return(0,r.Z)(s,[{key:"render",value:function(){return p.createElement("div",{className:"row"},p.createElement("div",{className:"col-sm-12"},p.createElement(h.Z,null,p.createElement(f.Z,{className:"panel-small"},p.createElement("div",{className:"col-md-4"},p.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},p.createElement(g.Z,{iconName:"arrowLeft",onClickAction:d.mW.goBack}))),p.createElement("div",{className:"col-md-4"},p.createElement("h3",{className:"text-center table-title"},"Nieuwe overdracht")),p.createElement("div",{className:"col-md-4"})))))}}]),s}(p.Component);var b=a(37974),y=a(30381),E=a.n(y),C=a(54138),Z=a(49332),N=a(25626),S=a(9181),k=a(21606),T=a(82084);E().locale("nl");const I=(0,b.$j)((function(e){return{participantProjectPayoutTypes:e.systemData.participantProjectPayoutTypes}}))((function(e){var t=e.participationTransfer,a=t.transferToContactId,n=t.participationsAmount,r=t.participationWorth,i=t.didSign,c=t.dateBook,o=e.participation;return p.createElement("form",{className:"form-horizontal col-md-12",onSubmit:e.handleSubmit},p.createElement("div",{className:"row"},p.createElement(S.Z,{label:"Huidige participant",name:"currentParticipantName",value:o.contact?o.contact.fullName:"",readOnly:!0}),p.createElement(T.Z,{label:"Contact",name:"transferToContactId",options:e.contacts,value:a,onChangeAction:e.handleReactSelectChange,optionName:"fullName",isLoading:e.peekLoading.contacts,required:"required",error:e.errors.transferToContactId})),p.createElement("div",{className:"row"},p.createElement(S.Z,{label:"Project",name:"projectName",value:o.project?o.project.name:"",readOnly:!0}),p.createElement(S.Z,{type:"number",min:"0",max:o.participationsCurrent+"",label:"Aantal deelnames overdragen",name:"participationsAmount",value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.participationsAmount})),p.createElement("div",{className:"row"},p.createElement(S.Z,{label:"Huidig aantal deelnames",name:"participationsCurrent",value:o.participationsCurrent,readOnly:!0}),p.createElement(S.Z,{type:"number",min:"0",label:"Waarde per deelname",name:"participationWorth",value:r,onChangeAction:e.handleInputChange,required:"required",error:e.errors.participationWorth})),p.createElement("div",{className:"row"},p.createElement(S.Z,{label:"Waarde over te dragen deelnames",name:"participationsWorthTotal",value:n*r,readOnly:!0}),p.createElement(C.Z,{label:"Overdrachtsdatum",name:"dateBook",value:c,onChangeAction:e.handleInputChangeDate})),p.createElement("div",{className:"row"},p.createElement(k.Z,{label:"Getekend document",name:"didSign",value:i,onChangeAction:e.handleInputChange,required:"required"}),e.errors.didSign&&p.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},"Het document moet getekend zijn.")),p.createElement(N.Z,null,p.createElement("div",{className:"pull-right btn-group",role:"group"},p.createElement(Z.Z,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))}));var j=a(52927);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const P=function(e){(0,c.Z)(g,e);var t,a,u=(t=g,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function g(e){var t;return(0,n.Z)(this,g),t=u.call(this,e),(0,s.Z)((0,i.Z)(t),"handleInputChange",(function(e){var a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;t.setState(A(A({},t.state),{},{participationTransfer:A(A({},t.state.participationTransfer),{},(0,s.Z)({},r,n))}))})),(0,s.Z)((0,i.Z)(t),"handleSubmit",(function(e){e.preventDefault();var a=t.state.participationTransfer,n={},r=!1;m().isEmpty(a.transferToContactId+"")&&(n.transferToContactId=!0,r=!0),m().isEmpty(a.participationsAmount+"")&&(n.participationsAmount=!0,r=!0),a.participationsAmount>t.state.participation.participationsCurrent&&(n.participationsAmount=!0,r=!0),a.participationsAmount<=0&&(n.participationsAmount=!0,r=!0),m().isEmpty(a.participationWorth+"")&&(n.participationWorth=!0,r=!0),a.participationWorth<0&&(n.participationWorth=!0,r=!0),!1===a.didSign&&(n.didSign=!0,r=!0),t.setState(A(A({},t.state),{},{errors:n})),!r&&j.Z.transferParticipation(a).then((function(e){d.nA.push("/project/deelnemer/".concat(a.participationId))}))})),t.state={contacts:[],participation:{},participationTransfer:{participationId:e.params.participationId,transferToContactId:"",projectId:"",participationsAmount:0,participationWorth:"",didSign:!1,dateBook:""},errors:{transferToContactId:!1,participationsAmount:!1,participationWorth:!1,didSign:!1},peekLoading:{contacts:!0}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,i.Z)(t)),t.handleReactSelectChange=t.handleReactSelectChange.bind((0,i.Z)(t)),t}return(0,r.Z)(g,[{key:"componentWillMount",value:function(){var e=this;j.Z.getContactsMembershipPeek(this.state.participationTransfer.participationId).then((function(t){t.unshift({id:"0",fullName:"Teruggave energieleverancier"}),e.setState({contacts:t,peekLoading:A(A({},e.state.peekLoading),{},{contacts:!1})})})),j.Z.fetchParticipantProject(this.state.participationTransfer.participationId).then((function(t){e.setState({participation:t,participationTransfer:A(A({},e.state.participationTransfer),{},{projectId:t.project.id,participationWorth:t.project.participationWorth})})}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(A(A({},this.state),{},{participationTransfer:A(A({},this.state.participationTransfer),{},(0,s.Z)({},t,e))}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(A(A({},this.state),{},{participationTransfer:A(A({},this.state.participationTransfer),{},(0,s.Z)({},t,e))}))}},{key:"render",value:function(){return p.createElement("div",{className:"row"},p.createElement("div",{className:"col-md-9"},p.createElement("div",{className:"col-md-12"},p.createElement(v,null)),p.createElement("div",{className:"col-md-12"},p.createElement(h.Z,null,p.createElement(f.Z,null,p.createElement("div",{className:"col-md-12"},p.createElement(I,{participationTransfer:this.state.participationTransfer,errors:this.state.errors,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,contacts:this.state.contacts,participation:this.state.participation,peekLoading:this.state.peekLoading,handleReactSelectChange:this.handleReactSelectChange})))))),p.createElement("div",{className:"col-md-3"}))}}]),g}(p.Component)}}]);