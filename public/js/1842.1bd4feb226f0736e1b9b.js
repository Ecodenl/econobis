"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[1842],{7639:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(5544),l=n(96540),r=n(5556),i=n.n(r),o=n(76508),s=n(60119),c=n(95093),u=n.n(c);n(92572),u().locale("nl");var m=function(e){var t=e.className,n=e.value,r=e.onChangeAction,i=e.placeholder,c=(0,l.useState)(!1),m=(0,a.A)(c,2),p=m[0],f=m[1],E=(0,l.useRef)(null),d=(0,l.useRef)(null),h=n?u()(n).format("DD-MM-YYYY"):"";(0,l.useEffect)(function(){var e=function(e){if(p){var t=d.current,n=E.current;t&&!t.contains(e.target)&&n&&!n.contains(e.target)&&f(!1)}};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[p]);var v=function(){return f(!0)};return l.createElement("th",{className:"DayPicker-overflow ".concat(t),style:{position:"relative"}},l.createElement("input",{ref:E,type:"text",className:"form-control input-sm",placeholder:i||"",defaultValue:h,onFocus:v,onClick:v,onBlur:function(e){var t=e.target.value,n=u()(t,"DD-MM-YYYY",!0);n.isValid()?r&&r(n.toDate()):""===t&&r&&r(null)},autoComplete:"off"}),p&&l.createElement("div",{ref:d,style:{position:"absolute",zIndex:1e3,background:"#fff",boxShadow:"0 6px 24px rgba(0,0,0,.2)",borderRadius:8,marginTop:6}},l.createElement(o.h,{mode:"single",locale:s.nl,showWeekNumber:!0,selected:h?u()(h,"DD-MM-YYYY").toDate():void 0,onSelect:function(e){e?(r&&r(e),E.current&&(E.current.value=u()(e).format("DD-MM-YYYY"))):(r&&r(null),E.current&&(E.current.value="")),f(!1)}})))};m.defaultProps={className:"",value:null,placeholder:""},m.propTypes={className:i().string,value:i().oneOfType([i().string,i().object]),onChangeAction:i().func,placeholder:i().string};const p=m},9152:(e,t,n)=>{n.d(t,{A:()=>m}),n(94170);var a=n(96540),l=n(5556),r=n.n(l),i=n(87722),o=n(71866),s=n(56908),c=void 0,u=function(e){var t=e.RowClassName,n=e.setSorts,l=e.sortColumn,r=e.title,u=e.width;return a.createElement("th",{className:t,width:u},r,a.createElement(i.Ay,{className:"pull-right small",size:14,icon:s.m,role:"button",onClick:n.bind(c,l,"ASC")}),a.createElement(i.Ay,{className:"pull-right small",size:14,icon:o.b,role:"button",onClick:n.bind(c,l,"DESC")}))};u.defaultProps={RowClassName:""},u.propTypes={setSorts:r().func.isRequired,sortColumn:r().string.isRequired,title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const m=u},19737:(e,t,n)=>{n.d(t,{A:()=>a});const a=function(e){var t=[];for(var n in e)""!==e[n].data&&t.push(e[n]);return t}},26829:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),l=n(5556),r=n.n(l),i=function(e){var t=e.RowClassName,n=e.title,l=e.width;return a.createElement("th",{className:t,width:l},n)};i.defaultProps={RowClassName:""},i.propTypes={title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const o=i},30070:(e,t,n)=>{n.d(t,{H:()=>l,_:()=>a});var a=function(e,t,n,a){return{type:"FETCH_EMAILS",folder:e,filters:t,sorts:n,pagination:a}},l=function(){return{type:"CLEAR_EMAILS"}}},34782:(e,t,n)=>{var a=n(46518),l=n(34376),r=n(33517),i=n(20034),o=n(35610),s=n(26198),c=n(25397),u=n(97040),m=n(78227),p=n(70597),f=n(67680),E=p("slice"),d=m("species"),h=Array,v=Math.max;a({target:"Array",proto:!0,forced:!E},{slice:function(e,t){var n,a,m,p=c(this),E=s(p),g=o(e,E),A=o(void 0===t?E:t,E);if(l(p)&&(n=p.constructor,(r(n)&&(n===h||l(n.prototype))||i(n)&&null===(n=n[d]))&&(n=void 0),n===h||void 0===n))return f(p,g,A);for(a=new(void 0===n?h:n)(v(A-g,0)),m=0;g<A;g++,m++)g in p&&u(a,m,p[g]);return a.length=m,a}})},42285:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},45403:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("thead",null,e.children)}},51842:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te}),n(60825);var a=n(23029),l=n(92901),r=n(50388),i=n(53954),o=n(85501),s=n(58168),c=(n(94170),n(76031),n(96540)),u=n(69733),m=n(30070),p=n(78598),f=n(23138),E=function(e){return{type:"SET_FILTER_EMAIL_DATE",date:e}},d=function(e){return{type:"SET_FILTER_EMAIL_MAILBOX",mailbox:e}},h=function(e){return{type:"SET_FILTER_EMAIL_SENT_BY",sentBy:e}},v=function(e){return{type:"SET_FILTER_EMAIL_TO",to:e}},g=function(e){return{type:"SET_FILTER_EMAIL_CONTACT",contact:e}},A=function(e){return{type:"SET_FILTER_EMAIL_SUBJECT",subject:e}},y=function(e){return{type:"SET_FILTER_EMAIL_STATUS_ID",statusId:e}},b=function(e){return{type:"SET_FILTER_EMAIL_RESPONSIBLE_NAME",responsibleName:e}},N=function(e){return{type:"SET_FILTER_EMAIL_ME",me:e}},S=function(){return{type:"CLEAR_FILTER_EMAIL"}},w=n(46749),C=(n(62062),n(26099),n(42285)),F=n(45403),k=n(93913),D=(n(48598),n(34782),n(62010),n(47767)),R=n(95093),M=n.n(R),T=n(61741),I=n(87722),_=n(87696),L=n(88505);function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}M().locale("nl");var P=function(e){function t(e){var n,l,o,s;return(0,a.A)(this,t),l=this,o=t,s=[e],o=(0,i.A)(o),(n=(0,r.A)(l,x()?Reflect.construct(o,s||[],(0,i.A)(l).constructor):o.apply(l,s))).state={showActionButtons:!1,highlightRow:""},n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(e){this.props.navigate("/email/".concat(e))}},{key:"removeEmail",value:function(e){var t=this;T.A.moveToFolder(e,"removed").then(function(){t.props.fetchEmailsData()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.date,l=t.mailboxName,r=t.from,i=t.to,o=t.contacts,s=t.subject,u=t.status,m=t.folder,p=t.responsibleName;return c.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return e.openItem(n)},onMouseOver:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},c.createElement("td",null,a&&M()(a).format("DD-MM-YYYY HH:mm")),c.createElement("td",null,l),c.createElement("td",null,r),c.createElement("td",null,i&&i.map(function(e){return e}).join(", ")),c.createElement("td",null,o&&o.length>3?o.slice(0,3).map(function(e){return e.fullName}).join(", ")+" ... en nog "+(o.length-3)+" andere":o.map(function(e){return e.fullName}).join(", ")),c.createElement("td",null,s),"inbox"===m&&c.createElement("td",null,u?u.name:""),"sent"===m&&c.createElement("td",null,"Verzonden"),"removed"===m&&c.createElement("td",null,"Verwijderd"),c.createElement("td",null,p),c.createElement("td",null,this.state.showActionButtons?c.createElement("a",{role:"button",onClick:function(){return e.openItem(n)}},c.createElement(I.Ay,{className:"mybtn-success",size:14,icon:L.w})):"",!this.state.showActionButtons||"inbox"!==m&&"sent"!==m?"":c.createElement("a",{role:"button",onClick:function(){return e.removeEmail(n)}},c.createElement(I.Ay,{className:"mybtn-danger",size:14,icon:_.d}))))}}])}(c.Component);const q=function(e){var t=(0,D.Zp)();return c.createElement(P,(0,s.A)({},e,{navigate:t}))};var Y=n(74850),B=n(9152),j=n(26829);const z=(0,u.Ng)(null,function(e){return{setEmailSortsFilter:function(t,n){e(function(e,t){return{type:"SET_EMAIL_SORTS",field:e,order:t}}(t,n))}}})(function(e){var t=function(t,n){e.setEmailSortsFilter(t,n),setTimeout(function(){e.fetchEmailsData()},100)};return c.createElement("tr",{className:"thead-title"},c.createElement(B.A,{sortColumn:"date",title:"Datum",width:"10%",setSorts:t}),c.createElement(B.A,{sortColumn:"mailbox",title:"Mailbox",width:"10%",setSorts:t}),c.createElement(B.A,{sortColumn:"sentBy",title:"Afzender",width:"10%",setSorts:t}),c.createElement(B.A,{sortColumn:"to",title:"Aan",width:"10%",setSorts:t}),c.createElement(j.A,{title:"Gekoppeld contact",width:"10%"}),c.createElement(B.A,{sortColumn:"subject",title:"Onderwerp",width:"15%",setSorts:t}),c.createElement(B.A,{sortColumn:"statusId",title:"Status",width:"10%",setSorts:t}),c.createElement(j.A,{title:"Verantwoordelijke",width:"10%"}),c.createElement(j.A,{title:"",width:"5%"}))});var U=n(82960),O=n(7639);const H=(0,u.Ng)(function(e){return{filters:e.emails.filters,emailStatuses:e.systemData.emailStatuses}},function(e){return(0,U.zH)({setFilterEmailDate:E,setFilterEmailMailbox:d,setFilterEmailSentBy:h,setFilterEmailStatusId:y,setFilterEmailSubject:A,setFilterEmailTo:v,setFilterEmailContact:g,setFilterResponsibleName:b},e)})(function(e){return c.createElement("tr",{className:"thead-filter"},c.createElement(O.A,{value:e.filters.date.data&&e.filters.date.data,onChangeAction:function(t){void 0===t?e.setFilterEmailDate(""):e.setFilterEmailDate(M()(t).format("Y-MM-DD"))}}),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.mailbox.data,onChange:function(t){e.setFilterEmailMailbox(t.target.value)}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.sentBy.data,onChange:function(t){e.setFilterEmailSentBy(t.target.value)}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.to.data,onChange:function(t){e.setFilterEmailTo(t.target.value)}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.contact.data,onChange:function(t){e.setFilterEmailContact(t.target.value)}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.subject.data,onChange:function(t){e.setFilterEmailSubject(t.target.value)}})),c.createElement("th",null,"ontvangen"===e.folder&&c.createElement("select",{className:"form-control input-sm",value:e.filters.statusId.data,onChange:function(t){e.setFilterEmailStatusId(t.target.value),setTimeout(function(){e.onSubmitFilter()},100)}},c.createElement("option",null),c.createElement("option",{value:"null"},"Geen status"),e.emailStatuses.map(function(e){return c.createElement("option",{key:e.id,value:e.id},e.name)}))),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.responsibleName.data,onChange:function(t){e.setFilterResponsibleName(t.target.value)}})),c.createElement("th",null))}),G=(0,u.Ng)(function(e){return{emails:e.emails.list,emailsPagination:e.emails.pagination}},null)(function(e){var t=e.emails,n=t.data,a=void 0===n?[]:n,l=t.meta,r=void 0===l?{}:l;return t.isLoading,c.createElement("div",null,c.createElement("form",{onKeyUp:function(t){13===t.keyCode&&e.onSubmitFilter()}},c.createElement(C.A,null,c.createElement(F.A,null,c.createElement(z,{fetchEmailsData:function(){return e.fetchEmailsData()}}),c.createElement(H,{folder:e.folder,onSubmitFilter:e.onSubmitFilter})),c.createElement(k.A,null,0===a.length?c.createElement("tr",null,c.createElement("td",{colSpan:9},"Geen e-mails gevonden!")):a.map(function(t){return c.createElement(q,(0,s.A)({fetchEmailsData:e.fetchEmailsData,key:t.id},t))}))),c.createElement("div",{className:"col-md-6 col-md-offset-3"},c.createElement(Y.A,{onPageChangeAction:e.handlePageClick,totalRecords:r.total,initialPage:e.emailsPagination.page}))))});var V=n(91858);const W=(0,u.Ng)(function(e){return{emails:e.emails.list}},null)(function(e){var t=(0,D.Zp)(),n=e.emails.meta,a=void 0===n?{}:n;return c.createElement("div",{className:"row"},c.createElement("div",{className:"col-xs-12"},c.createElement("div",{className:"alert alert-info",role:"alert"},'Uitvoeren mappen ontvangen wordt tijdelijk alleen \'s ochtends rond 8.00 automatisch gedaan en niet meer elke 10 minuten (tussen 08.00 en 20.00). Gebruik knop "Alle mappen ontvangen" op deze pagina om nieuwe e-mails te ontvangen.')),c.createElement("div",{className:"col-md-4"},c.createElement("div",{className:"btn-group",role:"group"},c.createElement(V.A,{iconName:"refresh",onClickAction:e.refreshData,title:"Alle mappen ontvangen"}),c.createElement(V.A,{iconName:"plus",onClickAction:function(){t("/email/nieuw")},title:"Nieuwe e-mail"}))),c.createElement("div",{className:"col-md-4"},c.createElement("h3",{className:"text-center table-title"},e.me?"Eigen e-mail":"E-mail"," ",e.folder," ")),c.createElement("div",{className:"col-md-4"},c.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)))});var Z=n(62493),J=n(55849),K=n(2543),X=n(83873),Q=n(19737);function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($=function(){return!!e})()}var ee=function(e){function t(e){var n,l,o,s;return(0,a.A)(this,t),l=this,o=t,s=[e],o=(0,i.A)(o),n=(0,r.A)(l,$()?Reflect.construct(o,s||[],(0,i.A)(l).constructor):o.apply(l,s)),(0,K.isEmpty)(e.params)?n.props.resetEmailsFilters():"eigen"===e.params.type&&n.props.setFilterMe(!0),n.refreshData=n.refreshData.bind(n),n.handlePageClick=n.handlePageClick.bind(n),n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"componentDidMount",value:function(){this.fetchEmailsData()}},{key:"componentWillUnmount",value:function(){this.props.clearEmails()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.params.folder!==e.params.folder&&((0,K.isEmpty)(e.params.folder)||(this.props.clearFilterEmail(),this.props.setEmailsPagination({page:0,offset:0}),this.props.clearEmails(),this.fetchEmailsData())),this.props.params.type!==e.params.type&&((0,K.isEmpty)(e.params)||("eigen"===e.params.type?this.props.setFilterMe(!0):this.props.clearFilterEmail()),setTimeout(function(){t.props.setEmailsPagination({page:0,offset:0}),t.props.clearEmails(),t.fetchEmailsData()},100))}},{key:"resetEmailsFilters",value:function(){this.props.clearFilterEmail(),this.fetchEmailsData()}},{key:"onSubmitFilter",value:function(){this.props.clearEmails(),this.props.setEmailsPagination({page:0,offset:0}),this.fetchEmailsData()}},{key:"fetchEmailsData",value:function(){var e=this;setTimeout(function(){var t=(0,Q.A)(e.props.emailsFilters),n=e.props.emailsSorts,a={limit:20,offset:e.props.emailsPagination.offset};e.props.fetchEmails(e.props.params.folder,t,n,a)},100)}},{key:"refreshData",value:function(){var e=this;this.props.blockUI(),X.A.receiveMailFromMailboxesUser().then(function(t){e.props.clearEmails(),e.resetEmailsFilters(),e.props.fetchEmails(e.props.params.folder,{limit:20,offset:0}),e.props.unblockUI()}).catch(function(t){console.log(t),e.props.setError(t.response.status,t.response.data.message),e.props.unblockUI()})}},{key:"handlePageClick",value:function(e){var t=e.selected,n=Math.ceil(20*t);this.props.setEmailsPagination({page:t,offset:n}),this.fetchEmailsData()}},{key:"render",value:function(){var e=this,t="ontvangen";"removed"==this.props.params.folder?t="verwijderd":"sent"==this.props.params.folder&&(t="verzonden");var n=!1;return"eigen"==this.props.params.type&&(n=!0),c.createElement(Z.A,{className:"col-lg-12"},c.createElement(J.A,null,c.createElement("div",{className:"col-md-12 margin-10-top"},c.createElement(W,{refreshData:this.refreshData,folder:t,me:n})),c.createElement("div",{className:"col-md-12 margin-10-top"},c.createElement(G,{folder:t,handlePageClick:this.handlePageClick,emails:this.props.emails,emailsPagination:this.props.emailsPagination,onSubmitFilter:function(){return e.onSubmitFilter()},fetchEmailsData:function(){return e.fetchEmailsData()}}))))}}])}(c.Component);const te=(0,u.Ng)(function(e){return{emails:e.emails.list,emailsPagination:e.emails.pagination,emailsFilters:e.emails.filters,emailsSorts:e.emails.sorts}},function(e){return(0,U.zH)({fetchEmails:m._,clearEmails:m.H,clearFilterEmail:S,setEmailsPagination:p.e,blockUI:f.o,unblockUI:f.r,setFilterMe:N,setError:w.N},e)})(function(e){var t=(0,D.g)();return c.createElement(ee,(0,s.A)({},e,{params:t}))})},56908:(e,t)=>{t.m=void 0,t.m={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 832q0 53-37 90l-651 652q-39 37-91 37-53 0-90-37l-651-652q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l294 294v-704q0-52 38-90t90-38h128q52 0 90 38t38 90v704l294-294q37-37 90-37 52 0 91 37l75 75q37 39 37 91z"}}]}},71866:(e,t)=>{t.b=void 0,t.b={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 971q0 51-37 90l-75 75q-38 38-91 38-54 0-90-38l-294-293v704q0 52-37.5 84.5t-90.5 32.5h-128q-53 0-90.5-32.5t-37.5-84.5v-704l-294 293q-36 38-90 38t-90-38l-75-75q-38-38-38-90 0-53 38-91l651-651q35-37 90-37 54 0 91 37l651 651q37 39 37 91z"}}]}},78598:(e,t,n)=>{n.d(t,{e:()=>a});var a=function(e){return{type:"SET_EMAILS_PAGINATION",pagination:e}}},93913:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("tbody",null,e.children)}}}]);