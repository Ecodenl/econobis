"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[2277],{95912:(e,t,n)=>{n.d(t,{Ef:()=>a,QQ:()=>c,QX:()=>u,Um:()=>s,WX:()=>l,Xn:()=>m,oo:()=>r,ps:()=>i,zm:()=>o});var a=function(e){return{type:"FETCH_CONTACT_GROUP_DETAILS",id:e}},l=function(e){return{type:"UPDATE_CONTACT_GROUP_DETAILS",contactGroupDetails:e}},r=function(){return{type:"CLEAR_CONTACT_GROUP_DETAILS"}},c=function(e,t){return{type:"DELETE_COMPOSED_GROUP",contactGroupId:e,contactGroupToDetachId:t}},o=function(e,t){return{type:"ATTACH_COMPOSED_GROUP",contactGroupId:e,contactGroupToAttachId:t}},s=function(e,t){return{type:"DELETE_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToDetachId:t}},i=function(e,t){return{type:"ATTACH_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToAttachId:t}},m=function(e){return{type:"UPDATE_LAPOSTA_LIST_ID",lapostaListId:e}},u=function(e){return{type:"DEACTIVATE_LAPOSTA_LIST_ID",lapostaListId:e}}},65797:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(29439),l=n(67294),r=n(86706),c=n(41355),o=n(60813),s=n(95912);const i=(0,r.$j)((function(e){return{id:e.contactGroupDetails.id,lapostaListId:e.contactGroupDetails.lapostaListId}}),(function(e){return{deActivatedContactGroupLapostaList:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){e(deActivatedContactGroupLapostaList(t))}))}}))((function(e){var t=e.closeModal,n=e.id,r=e.lapostaListId,i=(0,l.useState)("Aanmaken laposta lijst gestart"),m=(0,a.Z)(i,2),u=m[0],d=m[1],p=(0,l.useState)([]),f=(0,a.Z)(p,2),E=f[0],b=f[1];return(0,l.useEffect)((function(){o.Z.deActivateLapostaList(n).then((function(e){d("Laposta lijst is succesvol uitgezet"),(0,s.QX)(r),setTimeout(t,2e3)})).catch((function(e){if(e.response&&422===e.response.status){if(e.response.data&&e.response.data.errors)e.response.data.errors.econobis&&e.response.data.errors.econobis.length&&(d("De volgende fouten gevonden tijdens uitzetten:"),b(e.response.data.errors.econobis));else if(e.response.data&&e.response.data.message){d("Er is iets misgegaan bij het uitzetten van Laposta ("+e.response.status+").");for(var t=[],n=0,l=Object.entries(JSON.parse(e.response.data.message));n<l.length;n++){var r=(0,a.Z)(l[n],2),c=(r[0],r[1]);t.push("".concat(c))}b(t)}}else d("Er is iets misgegaan bij het uitzetten van Laposta ("+(e.response&&e.response.status)+").")}))}),[]),l.createElement(c.Z,{buttonClassName:"btn-danger",closeModal:t,buttonCancelText:"Sluiten",showConfirmAction:!1,title:"Uitzetten van Laposta"},l.createElement("p",null,u),E.length?l.createElement("ul",null,E.map((function(e){return l.createElement("li",null,e)}))):null)}))},52277:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(93433),l=n(4942),r=n(29439),c=n(67294),o=n(69265);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var i="".concat(URL_API,"/api/email-splitview");const m={fetchSelectList:function(e){var t=e.filter,n=e.sorts,a=e.limit,l=e.offset;return o.Z.get("".concat(i,"/select-list"),{params:{jory:{fld:[],flt:t,srt:n,lmt:a,ofs:l}}})},fetchEmail:function(e){return o.Z.get("".concat(i,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return o.Z.post("".concat(i,"/").concat(e),t)},updateMultiple:function(e,t){return o.Z.post("".concat(i,"/update-multiple"),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ids:e},t))},storeReply:function(e){return o.Z.post("".concat(i,"/").concat(e,"/store-reply"))},storeReplyAll:function(e){return o.Z.post("".concat(i,"/").concat(e,"/store-reply-all"))},storeForward:function(e){return o.Z.post("".concat(i,"/").concat(e,"/store-forward"))},deleteMultiple:function(e){return o.Z.post("".concat(i,"/delete-multiple"),{ids:e})}};var u=n(97894),d=n(58475),p=n(76979),f=n(40158),E=n(77320),b=n(69009),h=n(75502),v=n(61409),g=n(86706),y=n(71840),O=n(16589),N=n(65677),w=n(39669),j=n(18274),S=n(91857);function C(e){var t,n=e.email,l=e.updateEmailAttributes,r=e.deleted,o=(0,c.useContext)(j.v),s=o.openEmailDetailsModal,i=o.openEmailSendModal,m=(0,g.v9)((function(e){return(0,S.g)(e.systemData.emailStatuses)}));return c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body panel-small"},c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-6",style:{paddingLeft:"25px"}},"concept"!==n.folder&&c.createElement("div",{className:"btn-group margin-small margin-10-right",role:"group"},c.createElement("button",{type:"button",title:"Beantwoorden",className:"btn btn-success btn-sm",onClick:function(){O.Z.storeReply(n.id).then((function(e){i(e.data.id)}))}},c.createElement(u.ZP,{icon:d.q,size:13})),c.createElement("button",{type:"button",title:"Allen beantwoorden",className:"btn btn-success btn-sm",onClick:function(){O.Z.storeReplyAll(n.id).then((function(e){i(e.data.id)}))}},c.createElement(u.ZP,{icon:p.p,size:13})),c.createElement("button",{type:"button",title:"Doorsturen",className:"btn btn-success btn-sm",onClick:function(){O.Z.storeForward(n.id).then((function(e){i(e.data.id)}))}},c.createElement(u.ZP,{icon:f.c,size:13}))),"concept"===n.folder&&c.createElement("div",{className:"btn-group margin-small margin-10-right",role:"group"},c.createElement("button",{type:"button",title:"Openen",className:"btn btn-success btn-sm",onClick:function(){return i(n.id)}},c.createElement(u.ZP,{icon:h.r,size:13}))),c.createElement("div",{className:"btn-group margin-small",role:"group"},c.createElement("button",{type:"button",title:"Verwijderen",className:"btn btn-sm "+("removed"===n.folder?"btn-danger":" btn-success"),onClick:function(){return"removed"===n.folder?void(confirm("Weet je zeker dat je dit e-mailbericht permanent wilt verwijderen?")&&O.Z.deleteMultiple([n.id]).then((function(){r()}))):l({folder:"removed"})}},c.createElement(u.ZP,{icon:E._,size:13})),"concept"!==n.folder&&c.createElement("button",{type:"button",title:"Openen",className:"btn btn-success btn-sm",onClick:function(){return s(n.id)}},c.createElement(u.ZP,{icon:b.R,size:13})))),c.createElement("div",{className:"col-sm-6"},c.createElement("label",{className:"col-sm-6"},"Aan"),c.createElement("div",{className:"col-sm-6"},c.createElement(N.Z,{emailAddresses:(t=(0,a.Z)(n.toAddresses),n.contactGroup&&t.push({email:null,name:n.contactGroup.name}),t)})))),c.createElement("div",{className:"row",style:{marginTop:"12px"}},c.createElement("div",{className:"col-sm-6"},c.createElement("label",{className:"col-sm-6"},"Gekoppeld contact"),c.createElement("div",{className:"col-sm-6"},n&&[].concat((0,a.Z)(n.contacts),(0,a.Z)(n.manualContacts)).map((function(e){return c.createElement("span",{key:e.id},c.createElement(v.rU,{to:"/contact/".concat(e.id),className:"link-underline"},e.fullName)," ",c.createElement("br",null))})))),c.createElement(y.Z,{label:"Status",size:"col-sm-6",name:"status",options:m,value:n.status,onChangeAction:function(e){return l({status:e.target.value})},emptyOption:!1})),c.createElement("div",{className:"row"},c.createElement("div",{className:"col-sm-6"},c.createElement("label",{className:"col-sm-6"},"CC"),c.createElement("div",{className:"col-sm-6"},c.createElement(N.Z,{emailAddresses:n.ccAddresses}))),c.createElement(w.Z,{values:{responsibleUserId:n.responsibleUserId,responsibleTeamId:n.responsibleTeamId},onChangeAction:l})),c.createElement("div",{className:"row"},c.createElement("div",{className:"col-sm-3"},c.createElement("label",{className:"col-sm-12"},"Opmerking")),c.createElement("div",{className:"col-sm-9"},n.note))))}var x=n(73574),Z=n(96561);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=e.emailId,n=e.updatedEmailHandler,a=e.deleted,l=e.folder,o=(0,c.useContext)(j.v),s=o.isEmailDetailsModalOpen,i=o.isEmailSendModalOpen,u=o.modalEmailId,d=(0,c.useState)({attachments:[],toAddresses:[],contacts:[],manualContacts:[]}),p=(0,r.Z)(d,2),f=p[0],E=p[1],b=(0,c.useContext)(j.v).openEmailSendModal;(0,c.useEffect)((function(){s||f.id!==u||h()}),[s]),(0,c.useEffect)((function(){i||h()}),[i]),(0,c.useEffect)((function(){h()}),[t]);var h=function(){t&&m.fetchEmail(t).then((function(e){E(e)}))},v=function(e){E(P(P({},f),e)),O.Z.update(t,e).then((function(){n()}))};(0,c.useEffect)((function(){return document.getElementById("split-view-email-html").addEventListener("click",g),function(){document.getElementById("split-view-email-html")&&document.getElementById("split-view-email-html").removeEventListener("click",g)}}),[]);var g=function(e){"A"===e.target.tagName&&e.target.href&&-1!==e.target.href.indexOf("mailto:")&&(e.preventDefault(),confirm("Wil je een e-mail opstellen aan mailadres "+e.target.href.replace("mailto:","")+"?")&&O.Z.storeNew({to:[e.target.href.replace("mailto:","")]}).then((function(e){b(e.data.id)})))};return f?c.createElement("div",null,"removed"===f.folder&&"removed"!==l&&c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body panel-small"},c.createElement("div",{className:"row",style:{marginLeft:"-5px"}},c.createElement("div",{className:"col-md-12"},c.createElement("span",{className:"h5",style:{color:"#e64a4a"}},"Deze e-mail is verwijderd. ",c.createElement("a",{style:{color:"#e64a4a",cursor:"pointer"},onClick:function(){return v({folder:l})}},c.createElement("strong",null,"Klik hier om verwijderen ongedaan te maken."))))))),c.createElement(C,{email:f,updateEmailAttributes:v,deleted:a}),c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body panel-small",style:{padding:"20px"},id:"split-view-email-html"},c.createElement(Z.Z,{style:{height:"calc(100vh - 550px)"}},c.createElement("div",{dangerouslySetInnerHTML:{__html:f.htmlBodyWithEmbeddedImages}})))),c.createElement(x.Z,{email:f})):c.createElement(c.Fragment,null)}var I=n(30381),D=n.n(I),q=n(91050),T=n(41355),L=n(56170);function M(e){var t=e.emailIds,n=e.onSaved,l=(0,g.v9)((function(e){return e.systemData.emailStatuses})),o=(0,g.v9)((function(e){return e.systemData.teams})),s=(0,g.v9)((function(e){return e.systemData.users})),i=(0,c.useState)(!1),m=(0,r.Z)(i,2),d=m[0],p=m[1],f=(0,c.useState)(-1),E=(0,r.Z)(f,2),b=E[0],v=E[1],N=(0,c.useState)(-1),w=(0,r.Z)(N,2),j=w[0],S=w[1],C=(0,c.useState)(-1),x=(0,r.Z)(C,2),Z=x[0],k=x[1];return c.createElement(c.Fragment,null,c.createElement("button",{type:"button",title:"Bewerken",className:"btn btn-success btn-sm",onClick:function(){p(!0)}},c.createElement(u.ZP,{icon:h.r,size:13})),d&&c.createElement(T.Z,{buttonConfirmText:"Opslaan",closeModal:function(){return p(!1)},confirmAction:function(){var e={};-1!==parseInt(b)&&(e.status=b),-1!==j&&(e.responsibleUserId=j),-1!==Z&&(e.responsibleTeamId=Z),O.Z.updateMultiple(t,e).then((function(){p(!1),n()}))},title:"Bulk bewerken",modalClassName:"modal-lg"},c.createElement("div",{className:"row",style:{marginTop:"12px"}},c.createElement(y.Z,{label:"Status",size:"col-sm-6",name:"status",options:[{id:-1,name:"--- niet wijzigen ---"}].concat((0,a.Z)(l)),value:b,onChangeAction:function(e){return v(e.target.value)},emptyOption:!1}),c.createElement(L.Z,{label:"Verantwoordelijke",size:"col-sm-6",name:"responsible",optionsInGroups:[{name:"general",label:"Algemeen",options:[{id:"-1",name:"--- niet wijzigen ---"},{id:"0",name:"--- geen ---"}]},{name:"user",label:"Gebruikers",options:s,optionName:"fullName"},{name:"team",label:"Teams",options:o}],value:-1===j&&-1===Z?"general-1":j?"user"+j:Z?"team"+Z:"general0",onChangeAction:function(e){return function(e){if("general-1"===e)return S(-1),void k(-1);S(null),k(null),0===e.indexOf("user")&&S(e.replace("user","")),0===e.indexOf("team")&&k(e.replace("team",""))}(e.target.value)},emptyOption:!1}))))}function z(e){var t=e.emails,n=e.folder,l=e.emailCount,o=e.fetchMoreEmails,s=e.selectedEmailId,i=e.setSelectedEmailId,m=e.onUpdated,d=e.multiselectEnabled,p=e.setMultiselectEnabled,f=(0,c.useState)([]),b=(0,r.Z)(f,2),h=b[0],v=b[1],g=function(e){localStorage.setItem("lastOpenedEmailId",e.id),i(e.id)};return(0,c.useEffect)((function(){if(!s&&0!==t.length){var e=t.findIndex((function(e){return e.id===parseInt(localStorage.getItem("lastOpenedEmailId"))}));g(t[-1===e?0:e])}}),[t]),(0,c.useEffect)((function(){v([]),p(!1)}),[n]),c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body panel-small",style:{height:"calc(100vh - 190px)",overflow:"auto"},onScroll:function(e){e.target.scrollHeight-e.target.scrollTop-e.target.clientHeight<10&&(t.length>=l||o())}},d&&c.createElement("div",{className:"row"},c.createElement("div",{className:"col-xs-12",style:{display:"flex",justifyContent:"space-between"}},c.createElement("div",{style:{flex:"none",display:"flex",marginLeft:"6px",alignItems:"center"},onClick:function(){h.length===t.length?v([]):v(t.map((function(e){return e.id})))}},c.createElement("input",{type:"checkbox",checked:h.length===t.length,style:{marginRight:"5px"}}),"Selecteer alles"),c.createElement("div",{className:"btn-group margin-small",role:"group"},c.createElement(M,{emailIds:h,onSaved:function(){v([]),p(!1),m()}}),c.createElement("button",{type:"button",title:"Verwijderen",className:"btn btn-sm "+("removed"===n?"btn-danger":"btn-success"),onClick:function(){"removed"===n?confirm("Weet je zeker dat je deze e-mails permanent wilt verwijderen?")&&O.Z.deleteMultiple(h).then((function(){v([]),m()})):O.Z.updateMultiple(h,{folder:"removed"}).then((function(){v([]),m()}))}},c.createElement(u.ZP,{icon:E._,size:13}))))),c.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},c.createElement("thead",null,c.createElement("tr",{className:"thead-title"},c.createElement("th",null,c.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.createElement("div",null,function(){switch(n){case"inbox":return"Inbox";case"sent":return"Verzonden";case"concept":return"Concepten";case"removed":return"Verwijderd";default:return"Onbekend"}}()," (",l,")"))))),c.createElement("tbody",null,0===t.length?c.createElement("tr",null,c.createElement("td",null,"Geen e-mails gevonden!")):t.map((function(e){return c.createElement("tr",{key:e.id,style:{cursor:"pointer"}},c.createElement("td",{style:{borderRadius:"5px",backgroundColor:e.id===s?"#d6e1f3":"#fff",fontWeight:"unread"===e.status?"bold":"normal"}},c.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d&&c.createElement("div",{style:{flex:"none",display:"flex",marginRight:"10px"},onClick:function(){return function(e){h.includes(e.id)?v(h.filter((function(t){return t!==e.id}))):v([].concat((0,a.Z)(h),[e.id]))}(e)}},c.createElement("input",{type:"checkbox",checked:h.includes(e.id)})),c.createElement("div",{style:{flex:1},onClick:function(){return g(e)}},c.createElement("span",{style:{fontSize:"15px"}},(0,S.X)(e.status)," ",e.from)," ",c.createElement("span",{style:{fontSize:"12px"}},"(",e.mailbox.name,")"),c.createElement("br",null),c.createElement("span",null,e.subject)),c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"end"},onClick:function(){return g(e)}},c.createElement("span",{style:{fontSize:"12px"}},function(e){return"concept"===e.folder?e.createdAt&&D()(e.createdAt).format("DD-MM-YYYY HH:mm"):e.date&&D()(e.date).format("DD-MM-YYYY HH:mm")}(e)),c.createElement("div",null,c.createElement("span",{style:{color:"#999"}},e.responsibleName),e.hasAttachments&&c.createElement(u.ZP,{icon:q.s,size:18}))))))})),t.length<l&&c.createElement("tr",null,c.createElement("td",null,c.createElement("button",{className:"btn btn-link pull-right",onClick:function(){return o()}},"meer laden...")))))))}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=e.filters,n=e.setFilters,a=(0,g.v9)((function(e){return e.systemData.emailStatuses}));return c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body panel-small"},c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-12"},c.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12",style:{marginBottom:"0px"}},c.createElement("thead",null,c.createElement("tr",{className:"thead-title"},c.createElement("th",{className:"",width:"10%"},"Van e-mail"),c.createElement("th",{className:"",width:"10%"},"Gekoppeld contact"),c.createElement("th",{className:"",width:"15%"},"Onderwerp"),c.createElement("th",{className:"",width:"7%"},"Van"),c.createElement("th",{className:"",width:"7%"},"T/m"),c.createElement("th",{className:"",width:"10%"},"Status"),c.createElement("th",{className:"",width:"10%"},"Verantwoordelijke"),c.createElement("th",{className:"",width:"11%"},"Mailbox"),c.createElement("th",{className:"",width:"10%"},"Aan"),c.createElement("th",{className:"",width:"5%"},"Bijlage")),c.createElement("tr",{className:"thead-filter"},c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:t.from,onChange:function(e){n(G(G({},t),{},{from:e.target.value}))}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:t.contact,onChange:function(e){n(G(G({},t),{},{contact:e.target.value}))}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:t.subject,onChange:function(e){n(G(G({},t),{},{subject:e.target.value}))}})),c.createElement("th",null,c.createElement("input",{type:"date",className:"form-control input-sm",value:t.dateSentStart,onChange:function(e){n(G(G({},t),{},{dateSentStart:e.target.value,fetch:!0}))}})),c.createElement("th",null,c.createElement("input",{type:"date",className:"form-control input-sm",value:t.dateSentEnd,onChange:function(e){n(G(G({},t),{},{dateSentEnd:e.target.value,fetch:!0}))}})),c.createElement("th",null,c.createElement("select",{className:"form-control input-sm",value:t.status,onChange:function(e){n(G(G({},t),{},{status:e.target.value,fetch:!0}))}},c.createElement("option",null),a.map((function(e){return c.createElement("option",{key:e.id,value:e.id},e.name)})))),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:t.responsible,onChange:function(e){n(G(G({},t),{},{responsible:e.target.value}))}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:t.mailbox,onChange:function(e){n(G(G({},t),{},{mailbox:e.target.value}))}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:t.to,onChange:function(e){n(G(G({},t),{},{to:e.target.value}))}})),c.createElement("th",null,c.createElement("select",{className:"form-control input-sm",value:t.attachment,onChange:function(e){n(G(G({},t),{},{attachment:e.target.value,fetch:!0}))}},c.createElement("option",null),c.createElement("option",{value:1},"Ja"))))))))))}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){localStorage.setItem("emailFilters",JSON.stringify(e))}function F(){var e=localStorage.getItem("emailFilters");return e?B(B({},Y),JSON.parse(e)):B({},Y)}var Y={from:"",contact:"",subject:"",mailbox:"",status:"",responsible:"",to:"",attachment:"",dateSentStart:"",dateSentEnd:""},V=n(90329),W=n(55451),X=n(92375);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=e.router,n=(0,c.useState)([]),l=(0,r.Z)(n,2),o=l[0],s=l[1],i=(0,c.useState)(0),d=(0,r.Z)(i,2),p=d[0],f=d[1],E=(0,c.useState)(null),b=(0,r.Z)(E,2),h=b[0],y=b[1],N=(0,c.useState)(!1),w=(0,r.Z)(N,2),S=w[0],C=w[1],x=(0,c.useState)(!1),Z=(0,r.Z)(x,2),k=Z[0],P=Z[1],I=(0,c.useState)(null),D=(0,r.Z)(I,2),q=D[0],L=D[1],M=(0,c.useState)(Q({},Y)),_=(0,r.Z)(M,2),G=_[0],R=_[1],B=(0,c.useContext)(j.v),J=B.isEmailDetailsModalOpen,K=B.isEmailSendModalOpen,ee=B.openEmailSendModal,te=(0,g.v9)((function(e){return e.meDetails.mailboxes.length>0})),ne=(0,c.useState)(!1),ae=(0,r.Z)(ne,2),le=ae[0],re=ae[1],ce=(0,c.useState)("Nieuwe e-mails worden opgehaald ..."),oe=(0,r.Z)(ce,2),se=oe[0],ie=oe[1];(0,c.useEffect)((function(){!J&&p>0&&me()}),[J]),(0,c.useEffect)((function(){!K&&p>0&&me()}),[K]),(0,c.useEffect)((function(){R(Q(Q({},F()),{},{fetch:!0})),y(null)}),[t.params.folder]),(0,c.useEffect)((function(){R(Q(Q({},F()),{},{fetch:!0})),t.location.query.contact?$(t.location.query.contact).then((function(e){L(e.data.data)})):L(null)}),[t.location.query.contact]),(0,c.useEffect)((function(){G.fetch&&(R(Q(Q({},G),{},{fetch:!1})),H(G),m.fetchSelectList({filter:ue(),limit:50,offset:0,sorts:de()}).then((function(e){s(e.data.items),f(e.data.total)})))}),[G.fetch]);var me=function(){return m.fetchSelectList({filter:ue(),limit:Math.max(o.length,50),offset:0,sorts:de()}).then((function(e){s(e.data.items),f(e.data.total)}))},ue=function(){return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l={and:[{f:"folder",d:t}]};return e.subject&&l.and.push({f:"subject",o:"like",d:"%".concat(e.subject,"%")}),e.from&&l.and.push({f:"from",o:"like",d:"%".concat(e.from,"%")}),e.contact&&l.and.push({or:[{f:"contacts.fullName",o:"like",d:"%".concat(e.contact,"%")},{f:"manualContacts.fullName",o:"like",d:"%".concat(e.contact,"%")}]}),e.mailbox&&l.and.push({f:"mailbox.name",o:"like",d:"%".concat(e.mailbox,"%")}),e.status&&l.and.push({f:"status",d:e.status}),e.responsible&&l.and.push({or:[{f:"responsibleUser.firstName",o:"like",d:"%".concat(e.responsible,"%")},{f:"responsibleUser.lastName",o:"like",d:"%".concat(e.responsible,"%")},{f:"responsibleTeam.name",o:"like",d:"%".concat(e.responsible,"%")}]}),e.to&&l.and.push({f:"to",o:"like",d:"%".concat(e.to,"%")}),e.attachment&&l.and.push({f:"attachmentsWithoutCids.id",o:">",d:0}),e.attachment&&l.and.push({f:"attachmentsWithoutCids.id",o:">",d:0}),e.dateSentStart&&l.and.push({f:"dateSent",o:">=",d:e.dateSentStart}),e.dateSentEnd&&l.and.push({f:"dateSent",o:"<=",d:e.dateSentEnd+" 23:59:59"}),n&&l.and.push({or:[{f:"contacts.contactId",d:n},{f:"manualContacts.contactId",d:n}]}),a&&l.and.push({f:"eigenOpenstaand"}),l}(G,t.params.folder,t.location.query.contact,t.location.query.eigen)},de=function(){return"concept"===t.params.folder?["-createdAt"]:["-dateSent"]},pe=function(){if(t.location.query.contact)return H(Y),void v.nA.push(t.location.pathname);R(Q(Q({},Y),{},{fetch:!0}))};function fe(){C(!1)}var Ee=function(){return Object.keys(G).some((function(e){return!!G[e]&&"fetch"!==e}))};return c.createElement("div",null,te?c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-4",style:{paddingLeft:"17px",marginTop:"-10px",marginBottom:"5px"}},c.createElement("div",{className:"btn-group",role:"group"},c.createElement(W.Z,{iconName:"refresh",onClickAction:function(){S||(C(!0),V.Z.receiveMailFromMailboxesUser().then((function(){ie("Ophalen nieuwe e-mails is voltooid."),me(),setTimeout(fe,5e3)})).catch((function(e){ie("Er ging iets mis bij ophalen nieuwe e-mails.")})))},title:"Alle mappen verzenden/ontvangen"}),c.createElement(W.Z,{iconName:"plus",onClickAction:function(){O.Z.storeNew().then((function(e){ee(e.data.id)}))},title:"Nieuwe e-mail"}),c.createElement(W.Z,{iconName:"check",onClickAction:function(){return re(!le)},title:"Contactselectie maken"}))),c.createElement("div",{className:"col-md-4",style:{marginTop:"-10px",marginBottom:"5px"}},q&&c.createElement("span",{style:{marginLeft:"6px"}},"Email voor contact ",c.createElement("strong",null,null==q?void 0:q.fullName),c.createElement("a",{role:"button",style:{marginLeft:"10px"},className:"btn btn-success btn-sm",onClick:function(){return v.nA.push(t.location.pathname)}},"Filter wissen"))),c.createElement("div",{className:"col-md-4",style:{marginTop:"-10px",marginBottom:"5px"}},Ee()&&c.createElement("button",{type:"button",className:"btn btn-success pull-right btn-sm",style:{marginRight:"4px"},onClick:pe},"Wis alle filters")),S&&c.createElement(T.Z,{buttonClassName:"btn-danger",closeModal:fe,buttonCancelText:"Sluiten",showConfirmAction:!1,title:"Alle mappen verzenden/ontvangen"},c.createElement("p",null,se))):c.createElement("div",{className:"row"},c.createElement("div",{className:"col-xs-12"},c.createElement("div",{className:"alert alert-info",role:"alert"},"U heeft nog geen toegang tot een mailbox toegekend gekregen."))),c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-12"},c.createElement("form",{onKeyUp:function(e){13===e.keyCode&&R(Q(Q({},G),{},{fetch:!0}))}},c.createElement(U,{filters:G,setFilters:R})))),c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-4 margin-10-top",style:{paddingRight:"0px"}},Ee()&&c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body panel-small"},"Let op: filters actief  ",c.createElement("a",{role:"button",onClick:pe},c.createElement(u.ZP,{size:16,icon:X.Y})))),c.createElement(z,{emails:o,folder:t.params.folder,emailCount:p,fetchMoreEmails:function(){if(!k)return P(!0),m.fetchSelectList({filter:ue(),limit:50,offset:o.length,sorts:de()}).then((function(e){s([].concat((0,a.Z)(o),(0,a.Z)(e.data.items))),P(!1)}))},selectedEmailId:h,setSelectedEmailId:y,updateEmailAttributes:function(e,t){var n=o.map((function(n){return n.id===e?Q(Q({},n),t):n}));s(n)},onUpdated:me,multiselectEnabled:le,setMultiselectEnabled:re})),c.createElement("div",{className:"col-md-8 margin-10-top"},c.createElement(A,{emailId:h,updatedEmailHandler:me,folder:t.params.folder,deleted:function(){localStorage.setItem("lastOpenedEmailId",null),y(null),me()}}))))}n(65797);var $=function(e){return o.Z.get("/jory/contact/"+e,{params:{jory:{fld:["fullName"]}}})}},69009:(e,t)=>{t.R=void 0,t.R={viewBox:"0 0 1792 1792",children:[{name:"path",attribs:{d:"M1408 928v320q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h704q14 0 23 9t9 23v64q0 14-9 23t-23 9h-704q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-320q0-14 9-23t23-9h64q14 0 23 9t9 23zM1792 64v512q0 26-19 45t-45 19-45-19l-176-176-652 652q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l652-652-176-176q-19-19-19-45t19-45 45-19h512q26 0 45 19t19 45z"}}]}},91050:(e,t)=>{t.s=void 0,t.s={viewBox:"0 0 1408 1792",children:[{name:"path",attribs:{d:"M1404 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"}}]}},92375:(e,t)=>{t.Y=void 0,t.Y={viewBox:"0 0 1536 1792",children:[{name:"path",attribs:{d:"M1536 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z"}}]}}}]);