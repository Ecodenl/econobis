"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[2549],{82549:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b}),a(60825);var r=a(23029),n=a(92901),s=a(56822),o=a(53954),l=a(85501),c=a(64467),m=a(58168),i=(a(62010),a(96540)),u=a(69733),d=a(84976),p=a(47767),h=a(18743),f=a(68495),v=a(95506),g=a(95093),w=a.n(g),E=a(49887);function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}var A=function(e){function t(e){var a,n,l,m;return(0,r.A)(this,t),n=this,l=t,m=[e],l=(0,o.A)(l),a=(0,s.A)(n,N()?Reflect.construct(l,m||[],(0,o.A)(n).constructor):l.apply(n,m)),(0,c.A)(a,"handleInputChange",(function(e){var t=e.target,r=t.value,n=t.name;a.setState((0,c.A)({},n,r))})),(0,c.A)(a,"handleSubmit",(function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};f.A.loginUser(t).then((function(e){200==e.status?(localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),localStorage.setItem("last_activity",w()().format()),a.props.authSuccess(),E.A.fetchTwoFactorStatus().then((function(e){e.data.requireTwoFactorAuthentication?e.data.twoFactorActivated?e.data.hasValidToken?a.props.navigate("/"):a.props.navigate("/two-factor/confirm"):a.props.navigate("/two-factor/activate",{state:{password:a.state.password}}):a.props.navigate("/")}))):a.setState({username:"",password:"",errorMessage:"Verkeerde inloggegevens ingevuld!"})}))})),a.state={username:"",password:"",errorMessage:""},a}return(0,l.A)(t,e),(0,n.A)(t,[{key:"renderAlert",value:function(){if(this.state.errorMessage)return i.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return i.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},i.createElement("div",{className:"panel panel-default add"},i.createElement("div",{className:"panel-body"},i.createElement("div",{className:"text-center"},i.createElement(v.A,{height:"150px"})),i.createElement("form",{onSubmit:this.handleSubmit},i.createElement("div",{className:"row margin-10-top"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"username",className:"control-label"},"E-mail:"),i.createElement("input",{type:"text",name:"username",value:t,className:"form-control",placeholder:"E-mail...",onChange:this.handleInputChange})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"password",className:"control-label"},"Wachtwoord:"),i.createElement("input",{type:"password",name:"password",value:a,className:"form-control",placeholder:"Wachtwoord ...",onChange:this.handleInputChange}))),this.renderAlert()),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},i.createElement(d.N_,{to:"/wachtwoord-vergeten",className:"link-underline"},"Wachtwoord vergeten?"),i.createElement("div",{className:"btn-group pull-right"},i.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))))))))}}])}(i.Component);const b=(0,u.Ng)(null,(function(e){return{authSuccess:function(){e((0,h.W)())}}}))((function(e){var t=(0,p.Zp)();return i.createElement(A,(0,m.A)({},e,{navigate:t}))}))}}]);