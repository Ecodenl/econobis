"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[2549],{82549:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var r=a(23029),n=a(92901),s=a(56822),o=a(53954),l=a(85501),c=a(64467),m=a(96540),u=a(69733),i=a(24179),d=a(18743),h=a(68495),p=a(95506),f=a(95093),v=a.n(f),g=a(49887);function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var E=function(e){function t(e){var a,n,l,m;return(0,r.A)(this,t),n=this,l=t,m=[e],l=(0,o.A)(l),a=(0,s.A)(n,w()?Reflect.construct(l,m||[],(0,o.A)(n).constructor):l.apply(n,m)),(0,c.A)(a,"handleInputChange",(function(e){var t=e.target,r=t.value,n=t.name;a.setState((0,c.A)({},n,r))})),(0,c.A)(a,"handleSubmit",(function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};h.A.loginUser(t).then((function(e){200==e.status?(localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),localStorage.setItem("last_activity",v()().format()),a.props.authSuccess(),g.A.fetchTwoFactorStatus().then((function(e){e.data.requireTwoFactorAuthentication?e.data.twoFactorActivated?e.data.hasValidToken?i.RL.push("/"):i.RL.push("/two-factor/confirm"):i.RL.push({pathname:"/two-factor/activate",state:{password:a.state.password}}):i.RL.push("/")}))):a.setState({username:"",password:"",errorMessage:"Verkeerde inloggegevens ingevuld!"})}))})),a.state={username:"",password:"",errorMessage:""},a}return(0,l.A)(t,e),(0,n.A)(t,[{key:"renderAlert",value:function(){if(this.state.errorMessage)return m.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return m.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},m.createElement("div",{className:"panel panel-default add"},m.createElement("div",{className:"panel-body"},m.createElement("div",{className:"text-center"},m.createElement(p.A,{height:"150px"})),m.createElement("form",{onSubmit:this.handleSubmit},m.createElement("div",{className:"row margin-10-top"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement("div",{className:"form-group"},m.createElement("label",{htmlFor:"username",className:"control-label"},"E-mail:"),m.createElement("input",{type:"text",name:"username",value:t,className:"form-control",placeholder:"E-mail...",onChange:this.handleInputChange})),m.createElement("div",{className:"form-group"},m.createElement("label",{htmlFor:"password",className:"control-label"},"Wachtwoord:"),m.createElement("input",{type:"password",name:"password",value:a,className:"form-control",placeholder:"Wachtwoord ...",onChange:this.handleInputChange}))),this.renderAlert()),m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement(i.N_,{to:"wachtwoord-vergeten",className:"link-underline"},"Wachtwoord vergeten?"),m.createElement("div",{className:"btn-group pull-right"},m.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))))))))}}])}(m.Component);const N=(0,u.Ng)(null,(function(e){return{authSuccess:function(){e((0,d.W)())}}}))(E)}}]);