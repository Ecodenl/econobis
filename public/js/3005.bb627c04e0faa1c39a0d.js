"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3005],{43005:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(5544),l=n(96540),r=n(62493),c=n(55849),o=n(91858),i=n(42285),m=n(45403),u=n(26829),s=n(93913),d=n(95093),E=n.n(d);function f(e){var t=e.mailgunLog,n=e.hasError,r=(0,l.useState)(""),c=(0,a.A)(r,2),o=c[0],i=c[1];return l.createElement("tr",{className:o,onMouseEnter:function(){i("highlight-row")},onMouseLeave:function(){i("")}},l.createElement("td",null,E()(t.eventDate).format("DD-MM-YYYY HH:mm")),l.createElement("td",null,t.domain.domain),l.createElement("td",null,n?l.createElement("span",{className:"text-danger"},t.event):l.createElement("span",null,t.event)),l.createElement("td",null,t.deliveryStatus),l.createElement("td",null,t.recipient),l.createElement("td",null,t.subject))}var p=n(61941),h=n(74850),g=n(41904),v=n(26819);function A(){var e=["rejected","failed_temporary","failed_permanent","complained","unsubscribed"],t=(0,l.useState)(!0),n=(0,a.A)(t,2),d=n[0],E=n[1],A=(0,l.useState)([]),k=(0,a.A)(A,2),N=k[0],y=k[1],b=(0,l.useState)(0),w=(0,a.A)(b,2),S=w[0],j=w[1],D=(0,l.useState)(0),C=(0,a.A)(D,2),_=C[0],M=C[1],x=(0,l.useState)(""),P=(0,a.A)(x,2),Y=P[0],L=P[1],z=(0,l.useState)("all-error"),G=(0,a.A)(z,2),H=G[0],R=G[1],Z=(0,l.useState)([]),I=(0,a.A)(Z,2),O=I[0],T=I[1],W=(0,l.useState)(""),q=(0,a.A)(W,2),B=q[0],F=q[1];(0,l.useEffect)((function(){J(),K()}),[]),(0,l.useEffect)((function(){J()}),[_,B,H]);var J=function(){return E(!0),p.A.get("jory/mailgun-event",{params:{jory:U(),meta:["total"]}}).then((function(e){y(e.data.data),j(e.data.meta.total),E(!1)})).catch((function(){L("Er is iets misgegaan met ophalen van de mailgun logs."),E(!1)}))},K=function(){return p.A.get("jory/mailgun-domain",{params:{jory:{fld:["id","domain"],srt:["domain"]}}}).then((function(e){T(e.data.data)}))},Q=function(){return Y||(d?"Gegevens aan het laden.":0===N.length?"Geen mailgun logs gevonden, kies een domein en type.":"")},U=function(){return{fld:["id","event","recipient","subject","eventDate","deliveryStatus"],rlt:{domain:{fld:["domain"]}},srt:["-eventDate"],flt:V(),lmt:100,ofs:100*_}},V=function(){var t={and:[]};return B&&t.and.push({f:"mailgunDomainId",d:B}),H&&("all-error"===H?t.and.push({f:"event",o:"in",d:e}):t.and.push({f:"event",d:H})),t};return l.createElement(r.A,{className:"col-md-12"},l.createElement(c.A,null,l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(o.A,{iconName:"refresh",onClickAction:function(){return E(!0),p.A.post("mailgun-event/fetch-from-mailgun").then((function(){J()})).catch((function(){L("Er is iets misgegaan met ophalen van de mailgun logs bij mailgun."),E(!1)}))}}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title"},"Mailgun logs ",l.createElement(g.__w,{color:"blue",size:"15px","data-tip":"De mailgun logs worden elke nacht opgehaald,<br>je kan op het ververs icoontje klikken om direct de meest recente logs op te halen","data-for":"tooltip-note"}),l.createElement(v.A,{id:"tooltip-note",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})," ",l.createElement(g.gZZ,{color:"blue",size:"15px",style:{cursor:"pointer"},onClick:function(){return window.open("https://help.mailgun.com/hc/en-us/articles/203661564-What-do-each-of-the-event-filter-types-mean","_blank")}}))),l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"pull-right"},"Resultaten: ",S)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(i.A,null,l.createElement(m.A,null,l.createElement("tr",{className:"thead-title"},l.createElement(u.A,{title:"Datum",width:"10%"}),l.createElement(u.A,{title:"Domein",width:"20%"}),l.createElement(u.A,{title:"Type",width:"10%"}),l.createElement(u.A,{title:"Status",width:"20%"}),l.createElement(u.A,{title:"Aan",width:"20%"}),l.createElement(u.A,{title:"Onderwerp",width:"20%"}))),l.createElement(s.A,null,l.createElement("tr",{className:"thead-filter"},l.createElement("th",null),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:B,onChange:function(e){return F(e.target.value)}},l.createElement("option",null),O.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.domain)})))),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:H,onChange:function(e){return R(e.target.value)}},l.createElement("option",null),l.createElement("option",{key:"all-error",value:"all-error"},"- alle fouten -"),["accepted","rejected","delivered","failed_temporary","failed_permanent","opened","clicked","unsubscribed","complained","stored"].map((function(e){return l.createElement("option",{key:e,value:e},e)})))),l.createElement("th",null),l.createElement("th",null),l.createElement("th",null)),Q()?l.createElement("tr",null,l.createElement("td",{colSpan:6},Q())):N.map((function(t){return l.createElement(f,{key:t.id,mailgunLog:t,hasError:e.includes(t.event)})}))))),l.createElement("div",{className:"col-md-6 col-md-offset-3"},l.createElement(h.A,{onPageChangeAction:function(e){return M(e.selected)},totalRecords:S,initialPage:0,recordsPerPage:100}))))}}}]);