"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3005],{26829:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),l=n(5556),r=n.n(l),c=function(e){var t=e.RowClassName,n=e.title,l=e.width;return a.createElement("th",{className:t,width:l},n)};c.defaultProps={RowClassName:""},c.propTypes={title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const o=c},42285:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},43005:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(5544),l=(n(74423),n(62062),n(26099),n(96540)),r=n(62493),c=n(55849),o=n(91858),i=n(42285),m=n(45403),u=n(26829),s=n(93913),d=n(95093),f=n.n(d);function p(e){var t=e.mailgunLog,n=e.hasError,r=(0,l.useState)(""),c=(0,a.A)(r,2),o=c[0],i=c[1];return l.createElement("tr",{className:o,onMouseEnter:function(){i("highlight-row")},onMouseLeave:function(){i("")}},l.createElement("td",null,f()(t.eventDate).format("DD-MM-YYYY HH:mm")),l.createElement("td",null,t.domain.domain),l.createElement("td",null,n?l.createElement("span",{className:"text-danger"},t.event):l.createElement("span",null,t.event)),l.createElement("td",null,t.deliveryStatus),l.createElement("td",null,t.recipient),l.createElement("td",null,t.subject))}var E=n(61941),h=n(74850),g=n(41904),v=n(26819);function A(){var e=["rejected","failed_temporary","failed_permanent","complained","unsubscribed"],t=(0,l.useState)(!0),n=(0,a.A)(t,2),d=n[0],f=n[1],A=(0,l.useState)([]),N=(0,a.A)(A,2),b=N[0],w=N[1],k=(0,l.useState)(0),y=(0,a.A)(k,2),S=y[0],j=y[1],C=(0,l.useState)(0),D=(0,a.A)(C,2),R=D[0],_=D[1],x=(0,l.useState)(""),M=(0,a.A)(x,2),P=M[0],Y=M[1],L=(0,l.useState)("all-error"),q=(0,a.A)(L,2),z=q[0],G=q[1],H=(0,l.useState)([]),T=(0,a.A)(H,2),Z=T[0],I=T[1],O=(0,l.useState)(""),W=(0,a.A)(O,2),B=W[0],F=W[1];(0,l.useEffect)((function(){J(),K()}),[]),(0,l.useEffect)((function(){J()}),[R,B,z]);var J=function(){return f(!0),(0,E.A)().get("jory/mailgun-event",{params:{jory:U(),meta:["total"]}}).then((function(e){w(e.data.data),j(e.data.meta.total),f(!1)})).catch((function(){Y("Er is iets misgegaan met ophalen van de mailgun logs."),f(!1)}))},K=function(){return(0,E.A)().get("jory/mailgun-domain",{params:{jory:{fld:["id","domain"],srt:["domain"]}}}).then((function(e){I(e.data.data)}))},Q=function(){return P||(d?"Gegevens aan het laden.":0===b.length?"Geen mailgun logs gevonden, kies een domein en type.":"")},U=function(){return{fld:["id","event","recipient","subject","eventDate","deliveryStatus"],rlt:{domain:{fld:["domain"]}},srt:["-eventDate"],flt:V(),lmt:100,ofs:100*R}},V=function(){var t={and:[]};return B&&t.and.push({f:"mailgunDomainId",d:B}),z&&("all-error"===z?t.and.push({f:"event",o:"in",d:e}):t.and.push({f:"event",d:z})),t};return l.createElement(r.A,{className:"col-md-12"},l.createElement(c.A,null,l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(o.A,{iconName:"refresh",onClickAction:function(){return f(!0),(0,E.A)().post("mailgun-event/fetch-from-mailgun").then((function(){J()})).catch((function(){Y("Er is iets misgegaan met ophalen van de mailgun logs bij mailgun."),f(!1)}))}}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title"},"Mailgun logs ",l.createElement(g.__w,{color:"blue",size:"15px","data-tip":"De mailgun logs worden elke nacht opgehaald,<br>je kan op het ververs icoontje klikken om direct de meest recente logs op te halen","data-for":"tooltip-note"}),l.createElement(v.A,{id:"tooltip-note",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})," ",l.createElement(g.gZZ,{color:"blue",size:"15px",style:{cursor:"pointer"},onClick:function(){return window.open("https://help.mailgun.com/hc/en-us/articles/203661564-What-do-each-of-the-event-filter-types-mean","_blank")}}))),l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"pull-right"},"Resultaten: ",S)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(i.A,null,l.createElement(m.A,null,l.createElement("tr",{className:"thead-title"},l.createElement(u.A,{title:"Datum",width:"10%"}),l.createElement(u.A,{title:"Domein",width:"20%"}),l.createElement(u.A,{title:"Type",width:"10%"}),l.createElement(u.A,{title:"Status",width:"20%"}),l.createElement(u.A,{title:"Aan",width:"20%"}),l.createElement(u.A,{title:"Onderwerp",width:"20%"}))),l.createElement(s.A,null,l.createElement("tr",{className:"thead-filter"},l.createElement("th",null),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:B,onChange:function(e){return F(e.target.value)}},l.createElement("option",null),Z.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.domain)})))),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:z,onChange:function(e){return G(e.target.value)}},l.createElement("option",null),l.createElement("option",{key:"all-error",value:"all-error"},"- alle fouten -"),["accepted","rejected","delivered","failed_temporary","failed_permanent","opened","clicked","unsubscribed","complained","stored"].map((function(e){return l.createElement("option",{key:e,value:e},e)})))),l.createElement("th",null),l.createElement("th",null),l.createElement("th",null)),Q()?l.createElement("tr",null,l.createElement("td",{colSpan:6},Q())):b.map((function(t){return l.createElement(p,{key:t.id,mailgunLog:t,hasError:e.includes(t.event)})}))))),l.createElement("div",{className:"col-md-6 col-md-offset-3"},l.createElement(h.A,{onPageChangeAction:function(e){return _(e.selected)},totalRecords:S,initialPage:0,recordsPerPage:100}))))}},45403:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("thead",null,e.children)}},93913:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("tbody",null,e.children)}}}]);