"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[307],{7639:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(5544),l=n(96540),r=n(5556),i=n.n(r),o=n(76508),u=n(60119),s=n(95093),c=n.n(s);n(92572),c().locale("nl");var d=function(e){var t=e.className,n=e.value,r=e.onChangeAction,i=e.placeholder,s=(0,l.useState)(!1),d=(0,a.A)(s,2),m=d[0],f=d[1],h=(0,l.useRef)(null),p=(0,l.useRef)(null),A=n?c()(n).format("DD-MM-YYYY"):"";(0,l.useEffect)(function(){var e=function(e){if(m){var t=p.current,n=h.current;t&&!t.contains(e.target)&&n&&!n.contains(e.target)&&f(!1)}};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[m]);var T=function(){return f(!0)};return l.createElement("th",{className:"DayPicker-overflow ".concat(t),style:{position:"relative"}},l.createElement("input",{ref:h,type:"text",className:"form-control input-sm",placeholder:i||"",defaultValue:A,onFocus:T,onClick:T,onBlur:function(e){var t=e.target.value,n=c()(t,"DD-MM-YYYY",!0);n.isValid()?r&&r(n.toDate()):""===t&&r&&r(null)},autoComplete:"off"}),m&&l.createElement("div",{ref:p,style:{position:"absolute",zIndex:1e3,background:"#fff",boxShadow:"0 6px 24px rgba(0,0,0,.2)",borderRadius:8,marginTop:6}},l.createElement(o.h,{mode:"single",locale:u.nl,showWeekNumber:!0,selected:A?c()(A,"DD-MM-YYYY").toDate():void 0,onSelect:function(e){e?(r&&r(e),h.current&&(h.current.value=c()(e).format("DD-MM-YYYY"))):(r&&r(null),h.current&&(h.current.value="")),f(!1)}})))};d.defaultProps={className:"",value:null,placeholder:""},d.propTypes={className:i().string,value:i().oneOfType([i().string,i().object]),onChangeAction:i().func,placeholder:i().string};const m=d},9152:(e,t,n)=>{n.d(t,{A:()=>d}),n(94170);var a=n(96540),l=n(5556),r=n.n(l),i=n(87722),o=n(71866),u=n(56908),s=void 0,c=function(e){var t=e.RowClassName,n=e.setSorts,l=e.sortColumn,r=e.title,c=e.width;return a.createElement("th",{className:t,width:c},r,a.createElement(i.Ay,{className:"pull-right small",size:14,icon:u.m,role:"button",onClick:n.bind(s,l,"ASC")}),a.createElement(i.Ay,{className:"pull-right small",size:14,icon:o.b,role:"button",onClick:n.bind(s,l,"DESC")}))};c.defaultProps={RowClassName:""},c.propTypes={setSorts:r().func.isRequired,sortColumn:r().string.isRequired,title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const d=c},19737:(e,t,n)=>{n.d(t,{A:()=>a});const a=function(e){var t=[];for(var n in e)""!==e[n].data&&t.push(e[n]);return t}},30307:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H}),n(60825);var a=n(23029),l=n(92901),r=n(50388),i=n(53954),o=n(85501),u=(n(94170),n(76031),n(96540)),s=n(69733),c=n(82960),d=function(e,t,n){return{type:"FETCH_AUDIT_TRAIL",filters:e,sorts:t,pagination:n}},m=function(){return{type:"CLEAR_AUDIT_TRAIL"}},f=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_MODEL",model:e}},h=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_REVISIONABLE_ID",revisionableId:e}},p=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_FIELD",field:e}},A=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_OLD_VALUE",oldValue:e}},T=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_NEW_VALUE",newValue:e}},v=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_CHANGED_BY_ID",changedById:e}},E=function(e){return{type:"SET_FILTER_AUDIT_TRAIL_UPDATED_AT",updatedAt:e}},g=function(){return{type:"CLEAR_FILTER_AUDIT_TRAIL"}},y=function(e){return{type:"SET_AUDIT_TRAIL_PAGINATION",pagination:e}},N=n(58168),R=n(64467),D=(n(62062),n(26099),n(42285)),I=n(45403),F=n(93913),C=n(9152);const _=(0,s.Ng)(null,function(e){return{setAuditTrailSortsFilter:function(t,n){e(function(e,t){return{type:"SET_AUDIT_TRAIL_SORTS",field:e,order:t}}(t,n))}}})(function(e){var t=function(t,n){e.setAuditTrailSortsFilter(t,n),setTimeout(function(){e.fetchAuditTrailData()},100)};return u.createElement("tr",{className:"thead-title"},u.createElement(C.A,{sortColumn:"model",title:"Type record",width:"15%",setSorts:t}),u.createElement(C.A,{sortColumn:"revisionable_id",title:"Id",width:"10%",setSorts:t}),u.createElement(C.A,{sortColumn:"field",title:"Veldnaam",width:"15%",setSorts:t}),u.createElement(C.A,{sortColumn:"oldValue",title:"Oude waarde",width:"15%",setSorts:t}),u.createElement(C.A,{sortColumn:"newValue",title:"Nieuwe waarde",width:"15%",setSorts:t}),u.createElement(C.A,{sortColumn:"changedById",title:"Gewijzigd door",width:"15%",setSorts:t}),u.createElement(C.A,{sortColumn:"updatedAt",title:"Gewijzigd op",width:"15%",setSorts:t}))});n(62010);var w=n(95093),b=n.n(w),S=n(7639);const L=(0,s.Ng)(function(e){return{filters:e.auditTrail.filters,users:e.systemData.usersAll}},function(e){return(0,c.zH)({setFilterAuditTrailModel:f,setFilterAuditTrailField:p,setFilterAuditTrailOldValue:A,setFilterAuditTrailNewValue:T,setFilterAuditTrailChangedById:v,setFilterAuditTrailUpdatedAt:E,setFilterAuditTrailRevisionableId:h},e)})(function(e){return u.createElement("tr",{className:"thead-filter"},u.createElement("th",null,u.createElement("select",{className:"form-control input-sm",value:e.filters.model.data,onChange:function(t){e.setFilterAuditTrailModel(t.target.value),setTimeout(function(){e.onSubmitFilter()},100)}},u.createElement("option",null),e.models.map(function(e){return u.createElement("option",{key:e.id,value:e.id},e.name)}))),u.createElement("th",null,u.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.revisionableId.data,onChange:function(t){e.setFilterAuditTrailRevisionableId(t.target.value)}})),u.createElement("th",null,u.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.field.data,onChange:function(t){e.setFilterAuditTrailField(t.target.value)}})),u.createElement("th",null,u.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.oldValue.data,onChange:function(t){e.setFilterAuditTrailOldValue(t.target.value)}})),u.createElement("th",null,u.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.newValue.data,onChange:function(t){e.setFilterAuditTrailNewValue(t.target.value)}})),u.createElement("th",null,u.createElement("select",{className:"form-control input-sm",value:e.filters.changedById.data,onChange:function(t){e.setFilterAuditTrailChangedById(t.target.value),setTimeout(function(){e.onSubmitFilter()},100)}},u.createElement("option",null),e.users.map(function(e){return u.createElement("option",{key:e.id,value:e.id},e.fullName)}))),u.createElement(S.A,{value:e.filters.updatedAt.data&&e.filters.updatedAt.data,onChangeAction:function(t){void 0===t?e.setFilterAuditTrailUpdatedAt(""):e.setFilterAuditTrailUpdatedAt(b()(t).format("Y-MM-DD"))}}),u.createElement("th",null))});function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}const U=function(e){function t(e){var n,l,o,u;return(0,a.A)(this,t),l=this,o=t,u=[e],o=(0,i.A)(o),(n=(0,r.A)(l,k()?Reflect.construct(o,u||[],(0,i.A)(l).constructor):o.apply(l,u))).state={highlightRow:""},n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"onRowEnter",value:function(){this.setState({highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({highlightRow:""})}},{key:"render",value:function(){var e=this,t=this.props,n=t.model,a=t.revisionableId,l=t.field,r=t.oldValue,i=t.newValue,o=t.valueChanged,s=t.changedBy,c=t.changedAt;return u.createElement("tr",{className:this.state.highlightRow,onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},u.createElement("td",null,n),u.createElement("td",null,a),u.createElement("td",null,l),u.createElement("td",null,o?r||"Null":u.createElement("span",{style:{color:"green"},title:"Waarde is niet gewijzigd"},r||"Null")),u.createElement("td",null,o?i||"Null":u.createElement("span",{style:{color:"green"},title:"Waarde is niet gewijzigd"},i||"Null")),u.createElement("td",null,s?s.fullName:""),u.createElement("td",null,b()(c).format("L")))}}])}(u.Component);var P=n(74850);function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}var M=function(e){function t(e){var n,l,o,u;return(0,a.A)(this,t),l=this,o=t,u=[e],o=(0,i.A)(o),n=(0,r.A)(l,q()?Reflect.construct(o,u||[],(0,i.A)(l).constructor):o.apply(l,u)),(0,R.A)(n,"handleKeyUp",function(e){13===e.keyCode&&n.props.onSubmitFilter()}),n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"render",value:function(){var e=this,t=this.props.auditTrail,n=t.data,a=void 0===n?[]:n,l=t.meta,r=void 0===l?{}:l,i="",o=!0;return this.props.hasError?i="Fout bij het ophalen van audit trail.":this.props.isLoading?i="Gegevens aan het laden.":0===a.length?i="Geen audit trail gevonden!":o=!1,u.createElement("div",null,u.createElement("form",{onKeyUp:this.handleKeyUp},u.createElement(D.A,null,u.createElement(I.A,null,u.createElement(_,{fetchAuditTrailData:function(){return e.props.fetchAuditTrailData()}}),u.createElement(L,{onSubmitFilter:this.props.onSubmitFilter,models:this.props.models})),u.createElement(F.A,null,o?u.createElement("tr",null,u.createElement("td",{colSpan:7},i)):a.map(function(e){return u.createElement(U,(0,N.A)({key:e.id},e))}))),u.createElement("div",{className:"col-md-6 col-md-offset-3"},u.createElement(P.A,{onPageChangeAction:this.props.handlePageClick,totalRecords:r.total,initialPage:this.props.auditTrailPagination.page}))))}}])}(u.Component);const V=(0,s.Ng)(function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}})(M);var Y=n(91858);const B=(0,s.Ng)(function(e){return{permissions:e.meDetails.permissions,auditTrail:e.auditTrail.list}},null)(function(e){var t=e.auditTrail.meta,n=void 0===t?{}:t;return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-4"},u.createElement("div",{className:"btn-group",role:"group"},u.createElement(Y.A,{iconName:"refresh",onClickAction:e.resetAuditTrailFilters}))),u.createElement("div",{className:"col-md-4"},u.createElement("h3",{className:"text-center table-title"},"Audit trail")),u.createElement("div",{className:"col-md-4"},u.createElement("div",{className:"pull-right"},"Resultaten: ",n.total||0)))});var x=n(19737),O=n(62493),z=n(55849),j=n(89728);function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(G=function(){return!!e})()}var W=function(e){function t(e){var n,l,o,u;return(0,a.A)(this,t),l=this,o=t,u=[e],o=(0,i.A)(o),(n=(0,r.A)(l,G()?Reflect.construct(o,u||[],(0,i.A)(l).constructor):o.apply(l,u))).state={models:[]},n.fetchAuditTrailData=n.fetchAuditTrailData.bind(n),n.resetAuditTrailFilters=n.resetAuditTrailFilters.bind(n),n.handlePageClick=n.handlePageClick.bind(n),n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchAuditTrailData(),j.A.fetchAuditTrailModels().then(function(t){e.setState({models:t})})}},{key:"componentWillUnmount",value:function(){this.props.clearAuditTrail()}},{key:"fetchAuditTrailData",value:function(){var e=this;setTimeout(function(){var t=(0,x.A)(e.props.auditTrailFilters),n=e.props.auditTrailSorts,a={limit:20,offset:e.props.auditTrailPagination.offset};e.props.fetchAuditTrail(t,n,a)},100)}},{key:"resetAuditTrailFilters",value:function(){this.props.clearFilterAuditTrail(),this.fetchAuditTrailData()}},{key:"onSubmitFilter",value:function(){this.props.clearAuditTrail(),this.props.setAuditTrailPagination({page:0,offset:0}),this.fetchAuditTrailData()}},{key:"handlePageClick",value:function(e){var t=e.selected,n=Math.ceil(20*t);this.props.setAuditTrailPagination({page:t,offset:n}),this.fetchAuditTrailData()}},{key:"render",value:function(){var e=this;return u.createElement(O.A,null,u.createElement(z.A,null,u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(B,{resetAuditTrailFilters:function(){return e.resetAuditTrailFilters()}})),u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(V,{auditTrail:this.props.auditTrail,models:this.state.models,auditTrailPagination:this.props.auditTrailPagination,onSubmitFilter:function(){return e.onSubmitFilter()},fetchAuditTrailData:function(){return e.fetchAuditTrailData()},handlePageClick:this.handlePageClick}))))}}])}(u.Component);const H=(0,s.Ng)(function(e){return{auditTrail:e.auditTrail.list,auditTrailFilters:e.auditTrail.filters,auditTrailSorts:e.auditTrail.sorts,auditTrailPagination:e.auditTrail.pagination}},function(e){return(0,c.zH)({fetchAuditTrail:d,clearAuditTrail:m,clearFilterAuditTrail:g,setAuditTrailPagination:y},e)})(W)},42285:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},45403:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("thead",null,e.children)}},56908:(e,t)=>{t.m=void 0,t.m={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 832q0 53-37 90l-651 652q-39 37-91 37-53 0-90-37l-651-652q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l294 294v-704q0-52 38-90t90-38h128q52 0 90 38t38 90v704l294-294q37-37 90-37 52 0 91 37l75 75q37 39 37 91z"}}]}},71866:(e,t)=>{t.b=void 0,t.b={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 971q0 51-37 90l-75 75q-38 38-91 38-54 0-90-38l-294-293v704q0 52-37.5 84.5t-90.5 32.5h-128q-53 0-90.5-32.5t-37.5-84.5v-704l-294 293q-36 38-90 38t-90-38l-75-75q-38-38-38-90 0-53 38-91l651-651q35-37 90-37 54 0 91 37l651 651q37 39 37 91z"}}]}},93913:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("tbody",null,e.children)}}}]);