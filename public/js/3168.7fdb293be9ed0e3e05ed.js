"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3168],{3168:(e,a,t)=>{t.r(a),t.d(a,{default:()=>q});var r=t(96540),l=t(23029),n=t(92901),s=t(56822),i=t(53954),o=t(85501),d=t(64467),c=t(58168),u=t(47767),m=t(57761),f=t.n(m),h=t(54814),p=t(55956),g=t(55849),b=t(62493),v=t(77465),E=t(23932),F=t(72505),A=t.n(F),N=t(31714),y=t(96643),k=t(30483),C=t(35692),D=t(95093),V=t.n(D);function I(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?I(Object(t),!0).forEach((function(a){(0,d.A)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var x=function(e){function a(e){var t,r,n,o;return(0,l.A)(this,a),r=this,n=a,o=[e],n=(0,i.A)(n),t=(0,s.A)(r,w()?Reflect.construct(n,o||[],(0,i.A)(r).constructor):n.apply(r,o)),(0,d.A)(t,"handleInputChange",(function(e){var a=e.target,r="checkbox"===a.type?a.checked:a.value,l=a.name;t.setState(M(M({},t.state),{},{freeField:M(M({},t.state.freeField),{},(0,d.A)({},l,r))}))})),(0,d.A)(t,"handleInputChangeDate",(function(e,a){var r=e?V()(e).format("Y-MM-DD"):"";t.setState(M(M({},t.state),{},{freeField:M(M({},t.state.freeField),{},(0,d.A)({},a,r))}))})),(0,d.A)(t,"handleInputChangeDatetimeDate",(function(e,a){var r=e||"",l="08:00";t.state.freeField.defaultValue&&(l=V()(t.state.freeField.defaultValue).format("HH:mm"));var n="";f().isEmpty(r)||(n=V()(r+" "+l+":00").format("YYYY-MM-DD HH:mm:ss")),t.setState(M(M({},t.state),{},{freeField:M(M({},t.state.freeField),{},(0,d.A)({},a,n))}))})),(0,d.A)(t,"handleInputChangeDatetimeTime",(function(e,a){var r="",l=e||"08:00";t.state.freeField.defaultValue&&(r=V()(t.state.freeField.defaultValue).format("Y-MM-DD"));var n="";f().isEmpty(r)||(n=V()(r+" "+l+":00").format("YYYY-MM-DD HH:mm:ss")),t.setState(M(M({},t.state),{},{freeField:M(M({},t.state.freeField),{},(0,d.A)({},a,n))}))})),(0,d.A)(t,"handleSubmit",(function(e){e.preventDefault();var a=t.state.freeField,r={},l={},n=!1,s=(0,y.m)({fieldFormatType:"defaultValue",defaultValue:t.state.freeField.defaultValue,mandatory:t.state.freeField.mandatory,mask:t.state.freeField.mask});s&&(l.defaultValue=s,r.defaultValue=!0,n=!0),f().isEmpty(a.tableId+"")&&(r.tableId=!0,l.tableId="verplicht",n=!0),f().isEmpty(a.fieldFormatId+"")&&(r.fieldFormatId=!0,l.fieldFormatId="verplicht",n=!0),f().isEmpty(a.fieldName)&&(r.fieldName=!0,l.fieldName="verplicht",n=!0),null==a.fieldNameWebform||f().isEmpty(a.fieldNameWebform)||a.fieldNameWebform.match(/^[a-z0-9_]+$/)||(r.fieldNameWebform=!0,l.fieldNameWebform="Waarde ongeldig",n=!0),a.mandatory&&f().isEmpty(""+a.defaultValue)&&(r.defaultValue=!0,l.defaultValue="verplicht",n=!0),f().isEmpty(a.sortOrder+"")&&(r.sortOrder=!0,l.sortOrder="verplicht",n=!0),t.setState(M(M({},t.state),{},{errors:r,errorsMessage:l})),n||E.A.newFreeFieldsField(a).then((function(e){t.props.navigate("/vrije-velden/".concat(e.data.id))})).catch((function(e){console.log(e),alert("Er is iets mis gegaan met opslaan!")}))})),t.state={freeField:{tableId:"",fieldFormatId:"",fieldName:"",fieldNameWebform:"",visiblePortal:!1,changePortal:!1,mandatory:!1,defaultValue:"",exportable:!1,sortOrder:"",mask:""},freeFieldsTables:[],freeFieldsFieldFormats:[],errors:{tableId:!1,fieldFormatId:!1,fieldName:!1,fieldNameWebform:!1,visiblePortal:!1,changePortal:!1,mandatory:!1,defaultValue:!1,exportable:!1,sortOrder:!1,mask:!1},errorsMessage:{tableId:"",fieldFormatId:"",fieldName:"",fieldNameWebform:"",visiblePortal:"",changePortal:"",mandatory:"",defaultValue:"",exportable:"",sortOrder:"",mask:""}},t.handleReactSelectChange=t.handleReactSelectChange.bind(t),t}return(0,o.A)(a,e),(0,n.A)(a,[{key:"componentDidMount",value:function(){var e=this;A().all([E.A.peekFreeFieldsTables(),E.A.peekFreeFieldsFieldFormats()]).then(A().spread((function(a,t){e.setState({freeFieldsTables:a.data.data,freeFieldsFieldFormats:t.data.data})})))}},{key:"handleReactSelectChange",value:function(e,a){this.setState(M(M({},this.state),{},{freeField:M(M({},this.state.freeField),{},(0,d.A)({},a,e))}))}},{key:"getTablePrefixFieldNameWebform",value:function(e){var a=null;if(e){var t=this.state.freeFieldsTables.find((function(a){return a.id==e}));a=t?t.prefixFieldNameWebform:null}return a}},{key:"render",value:function(){var e=this.state.freeField,a=e.tableId,t=e.fieldFormatId,l=e.fieldName,n=e.fieldNameWebform,s=e.visiblePortal,i=e.changePortal,o=e.mandatory,d=e.defaultValue,c=e.exportable,u=e.sortOrder,m=e.mask,f=this.getTablePrefixFieldNameWebform(a),E=this.state.freeFieldsFieldFormats.find((function(e){return e.id==t})),F=E?E.formatType:null;return r.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},r.createElement(b.A,null,r.createElement(g.A,null,r.createElement("div",{className:"row"},r.createElement(N.A,{label:"Op onderdeel",id:"tableId",name:"tableId",options:this.state.freeFieldsTables,value:a,onChangeAction:this.handleReactSelectChange,required:"required",error:this.state.errors.tableId,errorMessage:this.state.errorsMessage.tableId}),r.createElement(N.A,{label:"Type",id:"fieldFormatId",name:"fieldFormatId",options:this.state.freeFieldsFieldFormats,value:t,onChangeAction:this.handleReactSelectChange,required:"required",error:this.state.errors.fieldFormatId,errorMessage:this.state.errorsMessage.fieldFormatId})),r.createElement("div",{className:"row"},r.createElement(h.A,{label:"Veldnaam",name:"fieldName",value:l,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.fieldName,errorMessage:this.state.errorsMessage.fieldName}),r.createElement(v.A,{label:"Verplicht",name:"mandatory",value:o,onChangeAction:this.handleInputChange,error:this.state.errors.mandatory,errorMessage:this.state.errorsMessage.mandatory})),r.createElement("div",{className:"row"},r.createElement(v.A,{label:"Zichtbaar in portaal",name:"visiblePortal",value:s,onChangeAction:this.handleInputChange,error:this.state.errors.visiblePortal,errorMessage:this.state.errorsMessage.visiblePortal}),r.createElement(v.A,{label:"Aan te passen in portaal",name:"changePortal",value:i,onChangeAction:this.handleInputChange,error:this.state.errors.changePortal,errorMessage:this.state.errorsMessage.changePortal})),r.createElement("div",{className:"row"},r.createElement("div",{className:"form-group col-sm-6"}," "),r.createElement(v.A,{label:"Exporteerbaar",name:"exportable",value:c,onChangeAction:this.handleInputChange,error:this.state.errors.exportable,errorMessage:this.state.errorsMessage.exportable})),r.createElement("div",{className:"row"},F&&r.createElement(C.A,{fieldFormatType:F,defaultValue:d,mandatory:o,errors:this.state.errors,errorsMessage:this.state.errorsMessage,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleInputChangeDatetimeDate:this.handleInputChangeDatetimeDate,handleInputChangeDatetimeTime:this.handleInputChangeDatetimeTime})),r.createElement("div",{className:"row"},r.createElement(h.A,{label:"Volgorde",name:"sortOrder",value:u,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.sortOrder,errorMessage:this.state.errorsMessage.sortOrder,type:"number"})),null!=f?r.createElement("div",{className:"row"},r.createElement(k.A,{className:"form-group col-sm-6 ",label:"Veldnaam webformulier",value:n?f+n:""}),r.createElement(h.A,{label:"Wijzig veldnaam webformulier",name:"fieldNameWebform",value:n,size:"col-sm-5",onChangeAction:this.handleInputChange,error:this.state.errors.fieldNameWebform,errorMessage:this.state.errorsMessage.fieldNameWebform,textToolTip:"Te gebruiken veldnaam voor webformulier in snake_case notatie. Alleen kleine letters, cijfers en liggend streepje (undescore) toegestaan.Veldnamen voor webformulieren hebben altijd een vaste prefix, afhankelijk van onderdeel."})):null,r.createElement("hr",null),r.createElement("div",{className:"row"},r.createElement(h.A,{label:"Masker",name:"mask",value:m,onChangeAction:this.handleInputChange,error:this.state.errors.mask,errorMessage:this.state.errorsMessage.mask}),r.createElement("div",{className:"form-group col-sm-3 "},r.createElement("div",{className:"col-sm-12"},"Legenda:",r.createElement("br",null),"9 = nummer",r.createElement("br",null),"a = letter",r.createElement("br",null),"x = nummer / letter",r.createElement("br",null),"Alle andere karakters zullen letterlijk moeten worden gebruikt")),r.createElement("div",{className:"form-group col-sm-3"},r.createElement("div",{className:"col-sm-6"},"Voorbeelden:",r.createElement("br",null),"999-999",r.createElement("br",null),"9a9/999a",r.createElement("br",null),"999-99-9999",r.createElement("br",null),"xx.xx.xxxx.xx"),r.createElement("div",{className:"col-sm-6"},r.createElement("br",null),"123-760",r.createElement("br",null),"3q2/887w",r.createElement("br",null),"987-65-4329",r.createElement("br",null),"12.qq.12aw.3r")))),r.createElement(g.A,null,r.createElement("div",{className:"pull-right btn-group",role:"group"},r.createElement(p.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(r.Component);const O=function(e){var a=(0,u.Zp)();return r.createElement(x,(0,c.A)({},e,{navigate:a}))};var T=t(91858);const S=function(){var e=(0,u.Zp)();return r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-4"},r.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},r.createElement(T.A,{iconName:"arrowLeft",onClickAction:function(){return e(-1)}}))),r.createElement("div",{className:"col-md-4"},r.createElement("h4",{className:"text-center margin-small"},"Nieuw vrij veld")),r.createElement("div",{className:"col-md-4"}))},q=function(){return r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-9"},r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement(b.A,null,r.createElement(g.A,{className:"panel-small"},r.createElement(S,null)))),r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement(O,null))),r.createElement("div",{className:"col-md-3"}))}},16888:(e,a,t)=>{t.d(a,{A:()=>g});var r=t(5544),l=t(96540),n=t(5556),s=t.n(n),i=t(60801),o=t.n(i),d=t(95093),c=t.n(d),u=t(91385),m=t(4353),f=t(41904),h=t(26819),p=function(e){var a=e.className,t=e.divSize,n=e.sizeDate,s=e.sizeTime,i=e.label,d=e.id,p=e.name,g=e.value,b=e.onChangeActionDate,v=e.onChangeActionTime,E=e.readOnly,F=e.required,A=e.start,N=e.end,y=e.step,k=e.textToolTip,C=e.error,D=e.errorMessage,V=e.disabledBefore,I=e.disabledAfter,M=e.nullable,w=e.nullableLabel,x=(0,l.useState)(!1),O=(0,r.A)(x,2),T=O[0],S=O[1],q=g?c()(g).format("L"):"",P=g?c()(g).format("HH:mm"):"",j=(0,l.useState)({before:V?new Date(V):"",after:I?new Date(I):""}),W=(0,r.A)(j,2),z=W[0],R=(W[1],(0,l.useState)("00:00"==g)),Y=(0,r.A)(R,2),_=Y[0],H=Y[1];return l.createElement("div",{className:"form-group ".concat(t)},l.createElement("label",{htmlFor:d,className:"col-sm-6 ".concat(F)},i),l.createElement("div",{className:"".concat(n)},l.createElement(u.default,{id:d,value:q,formatDate:m.formatDate,parseDate:m.parseDate,onDayChange:function(e){var a=e?c()(e).format("Y-MM-DD"):"",t=!1;a&&V&&c()(a).isBefore(V)&&(t=!0),a&&I&&c()(a).isAfter(I)&&(t=!0),S(t),!t&&b(a,p)},dayPickerProps:{showWeekNumbers:!0,locale:"nl",firstDayOfWeek:1,localeUtils:m.default,disabledDays:z},inputProps:{className:"form-control input-sm ".concat(a)+(T||C?" has-error":""),name:p,onBlur:function(e){var a=c()(e.target.value,"DD-MM-YYYY",!0),t=!1;a.isValid()||""===e.target.value||(t=!0),V&&a.isBefore(V)&&(t=!0),I&&a.isAfter(I)&&(t=!0),S(t)},autoComplete:"off",readOnly:E,disabled:E},required:F,readOnly:E,placeholder:""})),l.createElement("div",{className:"".concat(s)},_?l.createElement("span",null,"Onbekend"):E?l.createElement("input",{name:p,value:P,className:"form-control input-sm",readOnly:!0,disabled:!0}):l.createElement(o(),{name:p,value:P,onChange:function(e){var a=c()("1900-01-01 00:00:00").add(e,"seconds").format("HH:mm");v(a,p)},start:A,end:N,step:y,format:24,className:"input-sm"})),l.createElement("div",{className:"col-sm-1"},M?l.createElement("label",null,l.createElement("input",{type:"checkbox",name:"nullableChecked",value:!0,title:_?"Vink uit: tijdstip zetten":"Vink aan: tijdstip onbekend",checked:_,onChange:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value;H(t),v(t?"00:00":"08:00",p)}})," ",w):"",k&&l.createElement(l.Fragment,null,l.createElement(f.__w,{color:"blue",size:"15px","data-tip":k,"data-for":"tooltip-".concat(p)}),l.createElement(h.A,{id:"tooltip-".concat(p),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"}))),C&&l.createElement("div",{className:"col-sm-offset-6 col-sm-6"},l.createElement("span",{className:"has-error-message"}," ",D)))};p.defaultProps={className:"",divSize:"col-sm-6",sizeDate:"col-sm-3",sizeTime:"col-sm-2",required:"",readOnly:!1,value:null,name:"",textToolTip:"",error:!1,errorMessage:"",disabledBefore:null,disabledAfter:null,start:"08:00",end:"23:00",step:15,nullable:!1,nullableLabel:"",nullableChecked:!1},p.propTypes={label:s().string.isRequired,className:s().string,divSize:s().string,sizeDate:s().string,sizeTime:s().string,id:s().string,name:s().string.isRequired,value:s().oneOfType([s().string]),onChangeActionDate:s().func,onChangeActionTime:s().func,start:s().string,end:s().string,step:s().number,readOnly:s().bool,textToolTip:s().string,error:s().bool,errorMessage:s().string,disabledBefore:s().string,disabledAfter:s().string,nullable:s().bool,nullableLabel:s().string,nullableChecked:s().bool};const g=p},23932:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(61941),l=t(61643);const n={fetchFreeFieldsFields:function(e,a,t){var n="".concat((0,l.e)(),"/api/free-fields-field/grid");return(0,r.A)().get(n,{params:{filters:JSON.stringify(e),sorts:JSON.stringify(a),limit:t.limit,offset:t.offset}})},deleteFreeFieldsField:function(e){var a="".concat((0,l.e)(),"/api/free-fields-field/").concat(e,"/delete");return(0,r.A)().post(a)},newFreeFieldsField:function(e){var a="".concat((0,l.e)(),"/api/free-fields-field");return(0,r.A)().post(a,e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},fetchFreeFieldDetails:function(e){var a="".concat((0,l.e)(),"/api/free-fields-field/").concat(e);return(0,r.A)().get(a).then((function(e){return e.data.data}))},updateFreeFieldsField:function(e){return(0,r.A)().post("".concat((0,l.e)(),"/api/free-fields-field/").concat(e.id,"/update"),e)},fetchFilterFreeFieldsFieldsContact:function(){var e="".concat((0,l.e)(),"/api/free-fields-field/get-for-filter/contacts");return(0,r.A)().get(e)},fetchFilterFreeFieldsFieldsAddress:function(){var e="".concat((0,l.e)(),"/api/free-fields-field/get-for-filter/addresses");return(0,r.A)().get(e)},peekFreeFieldsTables:function(){var e="".concat((0,l.e)(),"/api/free-fields-field/free-fields-tables/peek");return(0,r.A)().get(e)},peekFreeFieldsFieldFormats:function(){var e="".concat((0,l.e)(),"/api/free-fields-field/free-fields-field-formats/peek");return(0,r.A)().get(e)},fetchFreeFieldsFieldRecords:function(e,a){var t="".concat((0,l.e)(),"/api/free-fields-field-records/get-values");return(0,r.A)().get(t,{params:{table:e,recordId:a}}).then((function(e){return e.data}))},updateFreeFieldsFieldRecords:function(e,a){var t="".concat((0,l.e)(),"/api/free-fields-field-records/update-values");return(0,r.A)().post(t,{data:{records:e,recordId:a}})}}},35692:(e,a,t)=>{t.d(a,{A:()=>d});var r=t(96540),l=t(54814),n=t(77465),s=t(73421),i=t(33579),o=t(16888);const d=function(e){var a=e.fieldFormatType,t=e.defaultValue,d=e.mandatory,c=e.errors,u=e.errorsMessage,m=e.handleInputChange,f=e.handleInputChangeDate,h=e.handleInputChangeDatetimeDate,p=e.handleInputChangeDatetimeTime;switch(a){case"boolean":return r.createElement(n.A,{label:"Standaard waarde",name:"defaultValue",value:t,onChangeAction:m,required:d?"required":"",error:c.defaultValue,errorMessage:u.defaultValue});case"text_short":return r.createElement(l.A,{label:"Standaard waarde",name:"defaultValue",value:t,onChangeAction:m,type:"text",required:d?"required":"",error:c.defaultValue,errorMessage:u.defaultValue});case"text_long":return r.createElement(i.A,{label:"Standaard waarde",name:"defaultValue",value:t,onChangeAction:m,required:d?"required":"",error:c.defaultValue,errorMessage:u.defaultValue});case"int":case"double_2_dec":case"amount_euro":return r.createElement(l.A,{label:"Standaard waarde",name:"defaultValue",value:t,onChangeAction:m,type:"number",required:d?"required":"",error:c.defaultValue,errorMessage:u.defaultValue});case"date":return r.createElement(s.A,{label:"Standaard waarde",name:"defaultValue",value:t,onChangeAction:f,required:d?"required":"",error:c.defaultValue,errorMessage:u.defaultValue});case"datetime":return r.createElement(o.A,{label:"Standaard waarde",name:"defaultValue",value:t,onChangeActionDate:h,onChangeActionTime:p,required:d?"required":"",error:c.defaultValue,errorMessage:u.defaultValue,nullable:!0})}}},96643:(e,a,t)=>{t.d(a,{m:()=>n});var r=t(57761),l=t.n(r);function n(e){var a=null;switch(e.fieldFormatType){case"defaultValue":a=e.defaultValue;break;case"boolean":a=e.fieldRecordValueBoolean;break;case"text_short":case"text_long":a=e.fieldRecordValueText;break;case"int":a=e.fieldRecordValueInt;break;case"double_2_dec":case"amount_euro":a=e.fieldRecordValueDouble;break;case"date":case"datetime":a=e.fieldRecordValueDatetime}return 1!=e.mandatory||null!=a&&!l().isEmpty(a+"")?!function(e,a){if(null!=e&&!l().isEmpty(""+e)&&null!=a&&!l().isEmpty(""+a)){var t=e.toString(),r=a.split(""),n=t.split(""),s=0;if(!a.includes("?")&&a.length!=t.length)return!1;for(s in r)switch(r[s]){case"9":if(!n[s]||!n[s].match(/^[0-9]$/))return!1;break;case"a":if(!n[s]||!n[s].match(/^[a-zA-Z]$/))return!1;break;case"x":if(!n[s]||!n[s].match(/^[a-zA-Z0-9]$/))return!1;break;default:if(n[s]!=r[s])return!1}}return!0}(a,e.mask,e.mandatory)&&"voldoet niet aan het masker: "+e.mask:"verplicht"}}}]);