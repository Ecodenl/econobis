"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3259],{5339:(t,e,a)=>{a.d(e,{D:()=>r,d:()=>n});var n=function(t,e,a,n,r,i){return{type:"FETCH_PARTICIPANTS_PROJECT",filters:t,extraFilters:e,sorts:a,pagination:n,filterType:r,fetchFromProject:i}},r=function(){return{type:"CLEAR_PARTICIPANTS_PROJECT"}}},23534:(t,e,a)=>{a.d(e,{Au:()=>s,B$:()=>r,TG:()=>f,U:()=>i,WN:()=>p,Y6:()=>h,_Q:()=>d,f3:()=>n,iE:()=>u,iS:()=>o,j8:()=>c,o_:()=>l,u7:()=>m});var n=function(t){return{type:"SET_FILTER_PROJECT_PARTICIPANT_ID",id:t}},r=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_CONTACT_TYPE",contactType:t}},i=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_NAME",name:t}},o=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_ADDRESS",address:t}},s=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_POSTAL_CODE",postalCode:t}},l=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_CITY",city:t}},c=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_AMOUNT_DEFINITIVE",amountDefinitive:t}},p=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_PARTICIPATIONS_DEFINITIVE",participationsDefinitive:t}},u=function(t){return{type:"SET_FILTER_PARTICIPANT_MUTATION_STATUS_ID",participantMutationStatusId:t}},h=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_DATE_REGISTER",dateRegister:t}},m=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_ENERGY_SUPPLIER_ID",energySupplierId:t}},d=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_ID",projectId:t}},f=function(){return{type:"CLEAR_FILTER_PARTICIPANTS_PROJECT"}}},19069:(t,e,a)=>{a.d(e,{a:()=>n});var n=function(t){return{type:"SET_PARTICIPANTS_PROJECTS_PAGINATION",pagination:t}}},53594:(t,e,a)=>{a.d(e,{N:()=>n});var n=function(t,e){return{type:"SET_PARTICIPANTS_PROJECT_SORTS_FILTER",field:t,order:e}}},33259:(t,e,a)=>{a.r(e),a.d(e,{default:()=>mt});var n=a(93433),r=a(15671),i=a(43144),o=a(97326),s=a(60136),l=a(82963),c=a(61120),p=a(4942),u=a(67294),h=a(37974),m=a(83920),d=a(15690),f=a(5339),g=a(23534),E=a(19069),P=a(72506),C=a(87462),y=a(96498),v=a(75286),T=a(24480),k=a(69025),F=a(53594),I=a(52822);const b=(0,h.$j)(null,(function(t){return{setParticipantsProjectSortsFilter:function(e,a){t((0,F.N)(e,a))}}}))((function(t){var e=function(e,a){t.setParticipantsProjectSortsFilter(e,a),setTimeout((function(){t.refreshParticipantsProjectData()}),100)};return u.createElement("tr",{className:"thead-title"},u.createElement(I.Z,{title:"",width:"2%"}),u.createElement(k.Z,{sortColumn:"contactType",title:"Type",width:"9%",setSorts:e}),u.createElement(k.Z,{sortColumn:"name",title:"Naam",width:"9%",setSorts:e}),u.createElement(k.Z,{sortColumn:"address",title:"Adres",width:"9%",setSorts:e}),u.createElement(k.Z,{sortColumn:"postalCode",title:"Postcode",width:"8%",setSorts:e}),u.createElement(k.Z,{sortColumn:"city",title:"Plaats",width:"9%",setSorts:e}),u.createElement(I.Z,{title:"Project",width:"8%"}),u.createElement(I.Z,{title:"Aantal deelnames",width:"9%"}),u.createElement(k.Z,{sortColumn:"participantMutationStatusId",title:"Deelname status",width:"8%",setSorts:e}),u.createElement(k.Z,{sortColumn:"dateRegister",title:"Eerste ingangsdatum deelname",width:"9%",setSorts:e}),u.createElement(k.Z,{sortColumn:"energySupplier",title:"Energie leverancier",width:"9%",setSorts:e}),u.createElement("th",{width:"5%"}))}));var j=a(30381),S=a.n(j),A=a(38404);const w=(0,h.$j)((function(t){return{filters:t.participantsProject.filters,contactTypes:t.systemData.contactTypes,contactStatuses:t.systemData.contactStatuses,participantMutationStatuses:t.systemData.participantMutationStatuses,energySuppliers:t.systemData.energySuppliers}}),(function(t){return(0,m.DE)({clearFilterParticipantsProject:g.TG,setFilterParticipantProjectAddress:g.iS,setFilterParticipantProjectCity:g.o_,setFilterParticipantProjectContactType:g.B$,setFilterParticipantProjectParticipationsDefinitive:g.WN,setFilterParticipantProjectDateRegister:g.Y6,setFilterParticipantProjectEnergySupplierId:g.u7,setFilterParticipantProjectName:g.U,setFilterParticipantMutationStatusId:g.iE,setFilterParticipantProjectPostalCode:g.Au,setFilterProjectId:g._Q},t)}))((function(t){var e=[].concat((0,n.Z)(t.participantMutationStatuses),[{id:"isTerminated",name:"Beëindigd"}]);return u.createElement("tr",{className:"thead-filter"},u.createElement("th",null,t.showCheckboxList&&t.checkedAll&&u.createElement("input",{type:"checkbox",onChange:t.toggleCheckedAll,checked:!0}),t.showCheckboxList&&!t.checkedAll&&u.createElement("input",{type:"checkbox",onChange:t.toggleCheckedAll})),u.createElement("th",null,t.showCheckboxList?null:u.createElement("select",{className:"form-control input-sm",value:t.filters.contactType.data,onChange:function(e){t.setFilterParticipantProjectContactType(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},u.createElement("option",null),t.contactTypes.map((function(t){return u.createElement("option",{key:t.id,value:t.id},t.name)})))),u.createElement("th",null,t.showCheckboxList?null:u.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.name.data,onChange:function(e){t.setFilterParticipantProjectName(e.target.value)}})),u.createElement("th",null,t.showCheckboxList?null:u.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.address.data,onChange:function(e){t.setFilterParticipantProjectAddress(e.target.value)}})),u.createElement("th",null,t.showCheckboxList?null:u.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.postalCode.data,onChange:function(e){t.setFilterParticipantProjectPostalCode(e.target.value)}})),u.createElement("th",null,t.showCheckboxList?null:u.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.city.data,onChange:function(e){t.setFilterParticipantProjectCity(e.target.value)}})),u.createElement("th",null,t.showCheckboxList?null:u.createElement("select",{className:"form-control input-sm",value:t.filters.projectId.data,onChange:function(e){t.setFilterProjectId(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},u.createElement("option",null),t.projects.map((function(t){return u.createElement("option",{key:t.id,value:t.id},t.name)})))),u.createElement("th",null,t.showCheckboxList?null:u.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.participationsDefinitive.data,onChange:function(e){t.setFilterParticipantProjectParticipationsDefinitive(e.target.value)}})),u.createElement("th",null,t.showCheckboxList?null:u.createElement("select",{className:"form-control input-sm",value:t.filters.participantMutationStatusId.data,onChange:function(e){t.setFilterParticipantMutationStatusId(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},u.createElement("option",null),e.map((function(t){return u.createElement("option",{key:t.id,value:t.id},t.name)})))),t.showCheckboxList?u.createElement("th",null):u.createElement(A.Z,{value:t.filters.dateRegister.data&&t.filters.dateRegister.data,onChangeAction:function(e){void 0===e?t.setFilterParticipantProjectDateRegister(""):t.setFilterParticipantProjectDateRegister(S()(e).format("Y-MM-DD"))}}),u.createElement("th",null,t.showCheckboxList?null:u.createElement("select",{className:"form-control input-sm",value:t.filters.energySupplierId.data,onChange:function(e){t.setFilterParticipantProjectEnergySupplierId(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},u.createElement("option",null),t.energySuppliers.map((function(t){return u.createElement("option",{key:t.id,value:t.id},t.name)})))),u.createElement("th",null))}));var x=a(61409),Z=a(48966),R=a.n(Z),N=a(88211),D=a(97894),O=a(75502);S().locale("nl");const _=function(t){(0,s.Z)(o,t);var e,a,n=(e=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(a){var r=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function o(t){var e;return(0,r.Z)(this,o),(e=n.call(this,t)).state={showActionButtons:!1,highlightRow:""},e}return(0,i.Z)(o,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(t){x.nA.push("/project/deelnemer/".concat(t))}},{key:"render",value:function(){var t=this,e=this.props,a=e.id,n=e.contact,r=e.address,i=e.participationsInteressed,o=e.participationsOptioned,s=e.participationsGranted,l=e.participationsDefinitive,c=e.amountInteressed,p=e.amountOptioned,h=e.amountGranted,m=e.amountDefinitive,d=e.uniqueMutationStatuses,f=e.dateRegister,g=e.project,E=g?g.typeCodeRef:"",P=i+o+s+l,C=c+p+h+m,y="",v="",T="";r&&(r.street&&(y=r.street),r.number&&(v=r.number),r.addition&&(T=r.addition));var k=!(n.primaryEmailAddress&&n.primaryEmailAddress.email&&!R().isEmpty(n.primaryEmailAddress.email)),F=k?"Primair e-mailadres bij contact ontbreekt.":"",I=k?this.state.highlightRow+" missing-data-row":this.state.highlightRow;return u.createElement("tr",{title:F,className:I,onDoubleClick:function(){return t.openItem(a)},onMouseEnter:function(){return t.onRowEnter()},onMouseLeave:function(){return t.onRowLeave()}},u.createElement("td",null,this.props.showCheckboxList?u.createElement("input",{type:"checkbox",name:a,onChange:this.props.toggleParticipantCheck,checked:!!this.props.participantIds&&this.props.participantIds.includes(a)}):null),u.createElement("td",null,n.type?n.type.name:""),u.createElement("td",null,n.fullName),u.createElement("td",null,y+" "+v+(T?"-"+T:"")),u.createElement("td",null,r?r.postalCode:""),u.createElement("td",null,r?r.city:""),u.createElement("td",null,g?g.name:""),"loan"===E?u.createElement("td",null,C?(0,N.Z)(C):""):u.createElement("td",null,P||""),u.createElement("td",null,d.map((function(t){return t.name})).join(", ")),u.createElement("td",null,f?S()(f).format("L"):""),u.createElement("td",null,r.currentAddressEnergySupplierElectricity?r.currentAddressEnergySupplierElectricity.energySupplier.name:""),u.createElement("td",null,this.state.showActionButtons?u.createElement("a",{role:"button",onClick:function(){return t.openItem(a)}},u.createElement(D.ZP,{className:"mybtn-success",size:14,icon:O.r})):""))}}]),o}(u.Component);var L=a(51910);var M=function(t){(0,s.Z)(h,t);var e,a,n=(e=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(a){var r=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function h(t){var e;return(0,r.Z)(this,h),e=n.call(this,t),(0,p.Z)((0,o.Z)(e),"handleKeyUp",(function(t){13===t.keyCode&&e.props.onSubmitFilter()})),e}return(0,i.Z)(h,[{key:"render",value:function(){var t=this,e=this.props.participantsProject,a=e.data,n=void 0===a?[]:a,r=e.meta,i=void 0===r?{}:r,o="",s=!0;return this.props.hasError?o="Fout bij het ophalen van deelnemers.":this.props.isLoading?o="Gegevens aan het laden.":0===n.length?o="Geen deelnemers gevonden!":s=!1,u.createElement("form",{onKeyUp:this.handleKeyUp},u.createElement(y.Z,null,u.createElement(v.Z,null,u.createElement(b,{refreshParticipantsProjectData:function(){return t.props.refreshParticipantsProjectData()}}),u.createElement(w,{onSubmitFilter:this.props.onSubmitFilter,toggleCheckedAll:this.props.toggleCheckedAll,showCheckboxList:this.props.showCheckboxList,checkedAll:this.props.checkedAll,projects:this.props.projects})),u.createElement(T.Z,null,s?u.createElement("tr",null,u.createElement("td",{colSpan:11},o)):n.map((function(e){return u.createElement(_,(0,C.Z)({key:e.id,showCheckboxList:t.props.showCheckboxList,checkedAll:t.props.checkedAll,toggleParticipantCheck:t.props.toggleParticipantCheck,participantIds:t.props.participantIds},e))})))),u.createElement("div",{className:"col-md-4 col-md-offset-4"},u.createElement(L.Z,{recordsPerPage:20,onPageChangeAction:this.props.handlePageClick,totalRecords:i.total,initialPage:this.props.participantsProjectPagination.page})))}}]),h}(u.Component);const G=(0,h.$j)((function(t){return{isLoading:t.loadingData.isLoading,hasError:t.loadingData.hasError}}))(M);var B=a(55451),J=a(49332);const U=(0,h.$j)((function(t){return{participantsProject:t.participantsProject.list,permissions:t.meDetails.permissions}}),null)((function(t){var e=t.participantsProject.meta,a=void 0===e?{}:e;return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-2"},u.createElement("div",{className:"btn-group btn-group-flex",role:"group"},u.createElement(B.Z,{iconName:"refresh",onClickAction:t.resetParticipantProjectFilters}),u.createElement(B.Z,{iconName:"download",onClickAction:t.getExcel}),u.createElement(J.Z,{buttonText:"Rapportage",onClickAction:t.toggleShowCheckboxList}))),u.createElement("div",{className:"col-md-8"},u.createElement("h4",{className:"text-center table-title"},"Deelnemers project")),u.createElement("div",{className:"col-md-2"},u.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)))}));var Y=a(4257),q=a(14309),H=a(98688),V=a(19789),$=a(80251),z=a(41355),W=a(9181),Q=a(71840),K=a(7250),X=a(1114),tt=a(35823),et=a.n(tt),at=a(9669),nt=a.n(at),rt=a(82563),it=a(7002),ot=a(72898);function st(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function lt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?st(Object(a),!0).forEach((function(e){(0,p.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ct=function(t){(0,s.Z)(p,t);var e,a,n=(e=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(a){var r=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function p(t){var e;return(0,r.Z)(this,p),(e=n.call(this,t)).state={filterType:t.filterType,amountOfFilters:t.amountOfFilters,filters:t.extraFilters,yesNoOptions:[{id:1,name:"Ja"},{id:0,name:"Nee"}],projects:[],contacts:[]},e.closeModal=e.closeModal.bind((0,o.Z)(e)),e.confirmAction=e.confirmAction.bind((0,o.Z)(e)),e.handleFilterFieldChange=e.handleFilterFieldChange.bind((0,o.Z)(e)),e.handleFilterTypeChange=e.handleFilterTypeChange.bind((0,o.Z)(e)),e.handleFilterValueChange=e.handleFilterValueChange.bind((0,o.Z)(e)),e.addFilterRow=e.addFilterRow.bind((0,o.Z)(e)),e.deleteFilterRow=e.deleteFilterRow.bind((0,o.Z)(e)),e}return(0,i.Z)(p,[{key:"componentDidMount",value:function(){var t=this;nt().all([it.Z.peekProjects(),ot.Z.getContactsPeek()]).then(nt().spread((function(e,a){t.setState({projects:e,contacts:a})})))}},{key:"closeModal",value:function(){this.props.toggleShowExtraFilters()}},{key:"confirmAction",value:function(){this.props.handleExtraFiltersChange(this.state.filters,this.state.amountOfFilters,this.state.filterType)}},{key:"handleFilterFieldChange",value:function(t,e){var a=this.state.filters;a[e].field=t,a[e].data="",this.setState(lt(lt({},this.state),{},{filters:a}))}},{key:"handleFilterTypeChange",value:function(t){this.setState(lt(lt({},this.state),{},{filterType:t}))}},{key:"handleFilterValueChange",value:function(t,e,a){var n=this.state.filters;n[a][t]=e,this.setState(lt(lt({},this.state),{},{filters:n}))}},{key:"addFilterRow",value:function(){var t=this,e=this.state.filters;e[this.state.amountOfFilters]={field:"name",type:"eq",data:""},setTimeout((function(){t.setState(lt(lt({},t.state),{},{filters:e}))}),300),setTimeout((function(){t.setState({amountOfFilters:t.state.amountOfFilters+1})}),300)}},{key:"deleteFilterRow",value:function(t){var e=this.state.filters;e.splice(t,1),this.setState(lt(lt({},this.state),{},{filters:e,amountOfFilters:e.length}))}},{key:"render",value:function(){var t=this,e={name:{name:"Naam",type:"string"},postalCode:{name:"Postcode",type:"string"},amountDefinitive:{name:"Huidig aantal lening",type:"number"},participationsDefinitive:{name:"Huidig aantal deelnames",type:"number"},dateRegister:{name:"Datum inschrijving",type:"date"},datePayed:{name:"Datum betaald",type:"date"},participationStatusId:{name:"Deelnames status",type:"dropdown",dropDownOptions:this.props.participantMutationStatuses},contactBirthday:{name:"Contact geboortedatum",type:"date"},projectId:{name:"Project",type:"dropdownHas",dropDownOptions:this.state.projects},dateContractSend:{name:"Datum contract verzonden",type:"date"},dateContractRetour:{name:"Datum contract retour",type:"date"},dateEnd:{name:"Einddatum",type:"date"},giftedByContactId:{name:"Geschonken door",type:"dropdown",dropDownOptions:this.state.contacts,optionName:"fullName"},participationsSold:{name:"Deelnames overgedragen",type:"number"},didAcceptAgreement:{name:"Akkoord voorwaarden",type:"dropdown",dropDownOptions:this.state.yesNoOptions},didUnderstandInfo:{name:"Projectinfo begrepen",type:"dropdown",dropDownOptions:this.state.yesNoOptions},participationsRequested:{name:"Deelnames aangevraagd",type:"number"}};return u.createElement(z.Z,{title:"Extra filters",buttonConfirmText:"Toepassen",confirmAction:this.confirmAction,closeModal:this.closeModal,buttonCancelText:"Sluiten",extraButtonLabel:"Maak groep",extraButtonClass:"btn-success",extraButtonAction:this.props.saveAsGroup},u.createElement("div",{className:"row filter-row"},u.createElement("h5",null,u.createElement("div",{className:"col-xs-6"},u.createElement("input",{onChange:function(){return t.handleFilterTypeChange("and")},type:"radio",name:"type",value:"and",id:"and",checked:"and"===this.state.filterType}),u.createElement("label",{htmlFor:"and"},'Alle extra filters zijn "EN"')),u.createElement("div",{className:"col-xs-6"},u.createElement("input",{onChange:function(){return t.handleFilterTypeChange("or")},type:"radio",name:"type",value:"or",id:"or",checked:"or"===this.state.filterType}),u.createElement("label",{htmlFor:"or"},'Alle extra filters zijn "OF"')))),u.createElement("table",{className:"table"},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",{className:"col-md-4"},"Zoekveld"),u.createElement("th",{className:"col-md-3"}),u.createElement("th",{className:"col-md-4"},"Waarde"),u.createElement("th",{className:"col-md-1"}))),u.createElement("tbody",null,0===this.state.filters.length?u.createElement("tr",null,u.createElement("td",{colSpan:4},"Geen filters gezet.")):this.state.filters.map((function(a,n){return u.createElement(rt.Z,{key:n,filter:a,filterNumber:n,fields:e,handleFilterFieldChange:t.handleFilterFieldChange,deleteFilterRow:t.deleteFilterRow,handleFilterValueChange:t.handleFilterValueChange})})))),u.createElement("div",{className:"row"},u.createElement("div",{className:"col-xs-12 text-right"},u.createElement(J.Z,{buttonText:"Extra filter",onClickAction:this.addFilterRow}))))}}]),p}(u.Component);const pt=(0,h.$j)((function(t){return{participantMutationStatuses:t.systemData.participantMutationStatuses,contactStatuses:t.systemData.contactStatuses}}))(ct);var ut=a(21606);var ht=function(t){(0,s.Z)(m,t);var e,a,h=(e=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(a){var r=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function m(t){var e;return(0,r.Z)(this,m),e=h.call(this,t),(0,p.Z)((0,o.Z)(e),"fetchParticipantsProjectData",(function(){setTimeout((function(){var t=e.state.extraFilters,a=(0,Y.Z)(e.props.participantsProjectFilters),n=e.props.participantsProjectSorts,r={limit:20,offset:e.props.participantsProjectPagination.offset},i=e.state.filterType;e.props.fetchParticipantsProject(a,t,n,r,i,!1)}),100)})),(0,p.Z)((0,o.Z)(e),"resetParticipantProjectFilters",(function(){e.props.clearFilterParticipantsProject(),e.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),e.fetchParticipantsProjectData()})),(0,p.Z)((0,o.Z)(e),"toggleShowCheckboxList",(function(){e.state.showCheckboxList?e.setState({showCheckboxList:!1,participantIds:[]}):e.setState({showCheckboxList:!0,participantIds:e.props.participantsProject.meta.participantIdsTotal,checkedAll:!0})})),(0,p.Z)((0,o.Z)(e),"toggleModal",(function(){e.setState({showModal:!e.state.showModal})})),(0,p.Z)((0,o.Z)(e),"toggleCheckedAll",(function(){var t=event.target.checked,a=[];t&&(a=e.props.participantsProject.meta.participantIdsTotal),e.setState({participantIds:a,checkedAll:t})})),(0,p.Z)((0,o.Z)(e),"toggleParticipantCheck",(function(t){var a=t.target.checked,r=Number(t.target.name);a?e.setState({participantIds:[].concat((0,n.Z)(e.state.participantIds),[r])},e.checkAllParticipantsAreChecked):e.setState({participantIds:e.state.participantIds.filter((function(t){return t!==r})),checkedAll:!1})})),(0,p.Z)((0,o.Z)(e),"checkParticipantReport",(function(){var t=!1;R().isEmpty(e.state.templateId)?(t=!0,e.setState({templateIdError:!0})):e.setState({templateIdError:!1}),R().isEmpty(e.state.emailTemplateId)?(t=!0,e.setState({emailTemplateIdError:!0})):e.setState({emailTemplateIdError:!1}),e.state.participantIds.length>0&&!t?(e.props.previewParticipantReport({templateId:e.state.templateId,emailTemplateId:e.state.emailTemplateId,subject:e.state.subject,participantIds:e.state.participantIds,showOnPortal:e.state.showOnPortal}),x.nA.push("/project/preview-rapportage")):t||e.setState({showModal:!0,modalText:"Er zijn geen deelnemers geselecteerd.",buttonConfirmText:"Voeg deelnemers toe"})})),(0,p.Z)((0,o.Z)(e),"getExcel",(function(){e.props.blockUI();for(var t=1e3,a=Math.ceil(e.props.participantsProject.meta.total/t),n=e.props.participantsProject.meta.total>t,r=1,i=1;i<=a;i++){var o={limit:t,offset:i*t-t},s=(0,Y.Z)(e.props.participantsProjectFilters),l=e.state.extraFilters,c=e.props.participantsProjectSorts;X.Z.getExcel(s,l,c,o,!1,null).then((function(t){if(i="Deelnemers-".concat(S()().format("YYYY-MM-DD HH:mm:ss"),".xlsx"),n)var i="Deelnemers-".concat(S()().format("YYYY-MM-DD HH:mm:ss")," (").concat(r," van ").concat(a,").xlsx");et()(t.data,i),r+=1,e.props.unblockUI()})).catch((function(t){e.props.unblockUI()}))}})),(0,p.Z)((0,o.Z)(e),"saveAsGroup",(function(){var t=e.state.extraFilters,a=(0,Y.Z)(e.props.participantsProjectFilters),n=e.state.filterType;X.Z.saveAsGroup({filters:a,extraFilters:t,filterType:n,saveFromProject:!1}).then((function(t){x.nA.push("/contact-groep/".concat(t.data.data.id,"/edit"))}))})),e.state={participantIds:[],templateId:"",templateIdError:!1,templates:[],emailTemplateId:"",emailTemplateIdError:!1,emailTemplates:[],subject:[],documentGroup:"",checkedAll:!1,showCheckboxList:!1,showModal:!1,modalText:"",buttonConfirmText:"",readyForCreation:!1,showExtraFilters:!1,filterType:"and",amountOfFilters:0,extraFilters:[],projects:[],showOnPortal:!0},e.handleInputChange=e.handleInputChange.bind((0,o.Z)(e)),e.handleExtraFiltersChange=e.handleExtraFiltersChange.bind((0,o.Z)(e)),e.toggleParticipantCheck=e.toggleParticipantCheck.bind((0,o.Z)(e)),e.handleEmailTemplateChange=e.handleEmailTemplateChange.bind((0,o.Z)(e)),e.handleSubjectChange=e.handleSubjectChange.bind((0,o.Z)(e)),e.handlePageClick=e.handlePageClick.bind((0,o.Z)(e)),e.toggleShowExtraFilters=e.toggleShowExtraFilters.bind((0,o.Z)(e)),e}return(0,i.Z)(m,[{key:"componentDidMount",value:function(){var t=this;this.fetchParticipantsProjectData(),$.Z.fetchDocumentTemplatesPeekGeneral().then((function(e){var a=[];e.forEach((function(t){"participation"!=t.group&&"revenue"!=t.group||a.push({id:t.id,name:t.name})})),t.setState({templates:a})})),V.Z.fetchEmailTemplatesPeek().then((function(e){t.setState({emailTemplates:e})})),nt().all([it.Z.peekProjects(),ot.Z.getContactsPeek()]).then(nt().spread((function(e,a){t.setState({projects:e,contacts:a})})))}},{key:"componentWillUnmount",value:function(){this.props.clearParticipantsProject()}},{key:"onSubmitFilter",value:function(){var t=this;this.props.setParticipantsProjectPagination({page:0,offset:0}),setTimeout((function(){t.fetchParticipantsProjectData()}),100)}},{key:"handlePageClick",value:function(t){var e=this,a=t.selected,n=Math.ceil(20*a);this.props.setParticipantsProjectPagination({page:a,offset:n}),setTimeout((function(){e.fetchParticipantsProjectData()}),100)}},{key:"handleInputChange",value:function(t){var e=t.target,a="checkbox"===e.type?e.checked:e.value,n=e.name;this.setState((0,p.Z)({},n,a))}},{key:"handleSubjectChange",value:function(t){var e=t.target,a="checkbox"===e.type?e.checked:e.value;this.setState({subject:a})}},{key:"handleEmailTemplateChange",value:function(t){var e=this,a=t.target,n="checkbox"===a.type?a.checked:a.value;a.name,this.setState({emailTemplateId:n}),V.Z.fetchEmailTemplateWithUser(n).then((function(t){e.setState({subject:t.subject?t.subject:e.state.subject})}))}},{key:"handleExtraFiltersChange",value:function(t,e,a){var n=this;this.setState({filterType:a,amountOfFilters:e,extraFilters:t}),this.props.setParticipantsProjectPagination({page:0,offset:0}),setTimeout((function(){n.fetchParticipantsProjectData()}),100)}},{key:"checkAllParticipantsAreChecked",value:function(){this.setState({checkedAll:this.state.participantIds.length===this.props.participantsProject.meta.participantIdsTotal.length})}},{key:"prefillExtraFilter",value:function(){this.setState({filterType:"and",amountOfFilters:1,extraFilters:[{field:"name",type:"eq",data:""}]})}},{key:"toggleShowExtraFilters",value:function(){0===this.state.extraFilters.length&&!this.state.showExtraFilters&&this.prefillExtraFilter(),this.setState({showExtraFilters:!this.state.showExtraFilters})}},{key:"render",value:function(){var t,e=this,a=0;return this.state.participantIds&&(a=this.props&&this.props.participantsProject&&this.props.participantsProject.meta&&this.props.participantsProject.meta.participantIdsTotal?this.state.participantIds.length+"/"+this.props.participantsProject.meta.participantIdsTotal.length:this.state.participantIds.length),u.createElement(q.Z,null,u.createElement(H.Z,null,this.state.showCheckboxList?null:u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(U,{resetParticipantProjectFilters:function(){return e.resetParticipantProjectFilters()},toggleShowCheckboxList:this.toggleShowCheckboxList,handleExtraFiltersChange:this.handleExtraFiltersChange,toggleShowExtraFilters:this.toggleShowExtraFilters,getExcel:this.getExcel,saveAsGroup:this.saveAsGroup})),this.state.showCheckboxList?u.createElement(q.Z,null,u.createElement(H.Z,null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-12"},u.createElement(K.Z,{label:"Documentgroep",value:"Deelname / Opbrengst"}),u.createElement(Q.Z,{label:"Document template",name:"templateId",value:this.state.templateId,options:this.state.templates,onChangeAction:this.handleInputChange,required:"required",error:this.state.templateIdError})),u.createElement("div",{className:"col-md-12"},u.createElement(Q.Z,{label:"E-mail template",name:"emailTemplateId",value:this.state.emailTemplateId,options:this.state.emailTemplates,onChangeAction:this.handleEmailTemplateChange,required:"required",error:this.state.emailTemplateIdError}),u.createElement(W.Z,{label:"E-mail onderwerp",name:"subject",value:this.state.subject,onChangeAction:this.handleSubjectChange})),u.createElement("div",{className:"col-md-12"},u.createElement(K.Z,{label:"Geselecteerde deelnemers",value:a}),u.createElement(ut.Z,{label:"Rapportage tonen op portal",name:"showOnPortal",value:this.state.showOnPortal,onChangeAction:this.handleInputChange})),u.createElement("div",{className:"col-md-12"},u.createElement("div",{className:"margin-10-top pull-right btn-group",role:"group"},u.createElement(J.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.toggleShowCheckboxList}),u.createElement(J.Z,{buttonText:"Preview rapportage",onClickAction:this.checkParticipantReport,type:"submit",value:"Submit"})))))):null,u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(G,(t={participantsProject:this.props.participantsProject,participantsProjectPagination:this.props.participantsProjectPagination,onSubmitFilter:function(){return e.onSubmitFilter()},refreshParticipantsProjectData:function(){return e.fetchParticipantsProjectData()},handlePageClick:this.handlePageClick,showCheckboxList:this.state.showCheckboxList,toggleCheckedAll:this.toggleCheckedAll,checkedAll:this.state.checkedAll,toggleParticipantCheck:this.toggleParticipantCheck,participantIds:this.state.participantIds},(0,p.Z)(t,"toggleCheckedAll",this.toggleCheckedAll),(0,p.Z)(t,"projects",this.state.projects?this.state.projects:[]),t)))),this.state.showModal&&u.createElement(z.Z,{title:"Deelnemer rapport maken",closeModal:this.toggleModal,buttonConfirmText:this.state.buttonConfirmText,confirmAction:this.createParticipantReport},this.state.modalText),this.state.showExtraFilters&&u.createElement(pt,{toggleShowExtraFilters:this.toggleShowExtraFilters,handleExtraFiltersChange:this.handleExtraFiltersChange,extraFilters:this.state.extraFilters,amountOfFilters:this.state.amountOfFilters,filterType:this.state.filterType,saveAsGroup:this.saveAsGroup}))}}]),m}(u.Component);const mt=(0,h.$j)((function(t){return{participantsProject:t.participantsProject.list,participantsProjectFilters:t.participantsProject.filters,participantsProjectSorts:t.participantsProject.sorts,participantsProjectPagination:t.participantsProject.pagination}}),(function(t){return(0,m.DE)({blockUI:P.Q,unblockUI:P.e,previewParticipantReport:d.PQ,fetchParticipantsProject:f.d,clearParticipantsProject:f.D,setParticipantsProjectPagination:E.a,clearFilterParticipantsProject:g.TG},t)}))(ht)},88211:(t,e,a)=>{a.d(e,{Z:()=>n});const n=function(t){return t||(t=0),t=parseFloat(t),isNaN(t)?"Ongeldig bedrag":"€ ".concat(t.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}))}}}]);