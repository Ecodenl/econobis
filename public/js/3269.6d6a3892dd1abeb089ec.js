"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3269],{3269:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var a=r(15671),n=r(43144),o=r(97326),c=r(60136),s=r(82963),l=r(61120),i=r(4942),d=r(67294),m=r(13550),u=r(6479),f=r(61409);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const w=function(e){(0,c.Z)(w,e);var t,r,h=(t=w,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,s.Z)(this,e)});function w(e){var t;return(0,a.Z)(this,w),t=h.call(this,e),(0,i.Z)((0,o.Z)(t),"enableTwoFactor",(function(){m.Z.enableTwoFactor(t.state.password).then((function(){t.callFetchTwoFactorQr(),t.callFetchTwoFactorRecoveryCodes()}))})),(0,i.Z)((0,o.Z)(t),"callFetchTwoFactorQr",(function(){return m.Z.fetchTwoFactorQr(t.state.password).then((function(e){t.setState({qr:p({},e.data)})}))})),(0,i.Z)((0,o.Z)(t),"callFetchTwoFactorRecoveryCodes",(function(){m.Z.fetchTwoFactorRecoveryCodes(t.state.password).then((function(e){t.setState({recoveryCodes:e.data})}))})),t.state={qr:{svg:""},recoveryCodes:[],password:e.location.state?e.location.state.password:"",hasValidPassword:!1,errorMessage:""},t.checkPasswordHandler=t.checkPasswordHandler.bind((0,o.Z)(t)),t}return(0,n.Z)(w,[{key:"componentDidMount",value:function(){var e=this;this.state.password&&m.Z.checkPassword(this.state.password).then((function(){e.setState({hasValidPassword:!0}),e.enableTwoFactor()}))}},{key:"checkPasswordHandler",value:function(e){var t=this;e.preventDefault(),this.setState({errorMessage:""}),m.Z.checkPassword(this.state.password).then((function(){t.setState({hasValidPassword:!0}),t.enableTwoFactor()})).catch((function(e){t.setState({errorMessage:"Wachtwoord is onjuist."})}))}},{key:"renderAlert",value:function(){if(this.state.errorMessage)return d.createElement("div",{className:"row margin-10-top text-center"},d.createElement("div",{className:"col-sm-10 col-md-offset-1"},d.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)))}},{key:"render",value:function(){var e=this;return d.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},d.createElement("div",{className:"panel panel-default add"},d.createElement("div",{className:"panel-body"},d.createElement("div",{className:"text-center"},d.createElement(u.Z,{height:"150px"})),this.renderAlert(),this.state.hasValidPassword?d.createElement(d.Fragment,null,d.createElement("div",{className:"row margin-10-top text-center"},d.createElement("div",{className:"col-sm-10 col-md-offset-1"},"Het gebruik van twee factor authenticatie is ingeschakeld voor uw account. Sla de herstelcode op een veilige plek op en scan vervolgens de QR-code met een authenticator app.")),d.createElement("div",{className:"row margin-10-top text-center"},d.createElement("div",{className:"col-sm-10 col-md-offset-1"},d.createElement("h4",null,"Herstelcode:"),d.createElement("ul",{style:{listStyleType:"none",padding:0}},this.state.recoveryCodes.map((function(e){return d.createElement("li",{key:e,style:{"font-family":"courier"}},e)}))))),d.createElement("div",{className:"row margin-10-top text-center"},d.createElement("div",{className:"col-sm-10 col-md-offset-1"},d.createElement("h4",null,"QR"),d.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.qr.svg}}))),d.createElement("div",{className:"row margin-10-top"},d.createElement("div",{className:"col-sm-10 col-md-offset-1"},d.createElement("div",{className:"btn-group pull-right"},d.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){f.nA.push("/two-factor/confirm")}},"Doorgaan"))))):d.createElement("form",{onSubmit:this.checkPasswordHandler},"Voer uw wachtwoord opnieuw in om twee factor authenticatie te activeren.",d.createElement("br",null),d.createElement("div",{className:"row"},d.createElement("div",{className:"col-xs-6"},d.createElement("input",{placeholder:"Wachtwoord",className:"form-control input-sm",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),d.createElement("div",{className:"col-xs-6"},d.createElement("button",{type:"submit",className:"btn btn-primary btn-sm"},"Ontgrendel")))))))}}]),w}(d.Component)}}]);