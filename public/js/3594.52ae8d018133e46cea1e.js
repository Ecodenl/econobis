"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3594],{7639:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(96540),i=n(5556),r=n.n(i),l=n(91385),c=n(4353),o=n(95093),s=n.n(o);s().locale("nl");var m=function(e){var t=e.className,n=e.value,i=e.onChangeAction,r=e.placeholder,o=n?s()(n).format("L"):"";return a.createElement("th",{className:"DayPicker-overflow ".concat(t)},a.createElement(l.default,{value:o,onDayChange:i,formatDate:c.formatDate,parseDate:c.parseDate,dayPickerProps:{showWeekNumbers:!0,locale:"nl",firstDayOfWeek:1,localeUtils:c.default},inputProps:{className:"form-control input-sm",placeholder:r},placeholder:""}))};m.defaultProps={className:"",value:null,placeholder:""},m.propTypes={className:r().string,value:r().oneOfType([r().string,r().object]),onChangeAction:r().func,placeholder:r().string};const u=m},9152:(e,t,n)=>{n.d(t,{A:()=>u}),n(94170);var a=n(96540),i=n(5556),r=n.n(i),l=n(87722),c=n(71866),o=n(56908),s=void 0,m=function(e){var t=e.RowClassName,n=e.setSorts,i=e.sortColumn,r=e.title,m=e.width;return a.createElement("th",{className:t,width:m},r,a.createElement(l.Ay,{className:"pull-right small",size:14,icon:o.m,role:"button",onClick:n.bind(s,i,"ASC")}),a.createElement(l.Ay,{className:"pull-right small",size:14,icon:c.b,role:"button",onClick:n.bind(s,i,"DESC")}))};m.defaultProps={RowClassName:""},m.propTypes={setSorts:r().func.isRequired,sortColumn:r().string.isRequired,title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const u=m},22663:(e,t,n)=>{n.d(t,{A:()=>r}),n(28706),n(60739);var a=n(61941),i="financial-overview-project";const r={fetchFinancialOverviewProjects:function(e){var t="".concat(i,"/grid");return(0,a.A)().get(t,{params:{financialOverviewId:JSON.stringify(e)}})},fetchFinancialOverviewProjectDetails:function(e){var t="jory/".concat(i,"/").concat(e);return(0,a.A)().get(t,{params:{jory:{fld:["id","projectId","definitive","startDate","endDate","numberOfParticipantProjects","numberOfFinancialOverviewContactsSend","hasInterimFinancialOverviewContacts","totalQuantityStartValue","totalQuantityEndValue","bookworthStartValue","bookworthEndValue","totalAmountStartValue","totalAmountEndValue"],rlt:{financialOverview:{fld:["id","description","administrationId","year","definitive","statusId","dateProcessed","usesInterimFinancialOverviews"],rlt:{administration:{fld:["id","name"]}}},project:{fld:["id","code","name"],rlt:{projectType:{fld:["id","codeRef","name"]}}},financialOverviewParticipantProjects:{fld:["id","participantProjectId","quantityStartValue","quantityEndValue","bookworthStartValue","bookworthEndValue","amountStartValue","amountEndValue"],rlt:{participantProject:{fld:["id","contactId"],rlt:{contact:{fld:["id","fullName"]}}}}}}}}})},newFinancialOverviewProject:function(e){var t="".concat(i);return e.jory=JSON.stringify({fld:["id","projectId","definitive"],rlt:{project:{fld:["id","code","name"],rlt:{projectType:{fld:["id","codeRef","name"]}}}}}),(0,a.A)().post(t,e)},updateFinancialOverviewProject:function(e,t){var n="".concat(i,"/").concat(e);return(0,a.A)().post(n,t)},deleteFinancialOverviewProject:function(e){var t="".concat(i,"/").concat(e,"/delete");return(0,a.A)().post(t)},getCSV:function(e){var t="".concat(i,"/").concat(e,"/csv");return(0,a.A)().get(t)}}},25562:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(5544),i=n(96540);const r=function(e){var t=(0,i.useState)(!1),n=(0,a.A)(t,2),r=n[0],l=n[1];function c(t){t.key===e&&l(!0)}function o(t){t.key===e&&l(!1)}return(0,i.useEffect)((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",o)}}),[]),r}},37190:(e,t,n)=>{n.d(t,{A:()=>r}),n(52675),n(89463);var a=n(96540),i=n(63750);const r=function(e){var t=e.deleteFinancialOverview,n=e.closeDeleteItemModal,r=e.description,l=e.id;return a.createElement(i.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:n,confirmAction:function(){return t(l),void n()},title:"Verwijderen"},"Verwijder waardestaat: ",a.createElement("strong",null,r),"?")}},40506:(e,t,n)=>{n.d(t,{A:()=>r}),n(28706),n(60739);var a=n(61941),i="financial-overview";const r={fetchFinancialOverviewDetails:function(e){var t="jory/financial-overview/".concat(e);return(0,a.A)().get(t,{params:{jory:{fld:["id","description","administrationId","year","definitive","statusId","dateProcessed","documentTemplateFinancialOverviewId","emailTemplateFinancialOverviewId","totalFinancialOverviewProjectsInProgress","totalFinancialOverviewProjectsConcept","totalFinancialOverviewProjectsDefinitive","usesInterimFinancialOverviews","hasInterimFinancialOverviewContacts"],rlt:{administration:{fld:["id","name"],rlt:{emailTemplateFinancialOverview:{fld:["name"]}}},documentTemplateFinancialOverview:{fld:["id","name"]},emailTemplateFinancialOverview:{fld:["id","name"]}}}}})},newFinancialOverview:function(e){var t=i;return e.jory=JSON.stringify({fld:["id"]}),(0,a.A)().post(t,e)},updateFinancialOverview:function(e){var t="".concat(i,"/").concat(e.id);return(0,a.A)().post(t,e)},deleteFinancialOverview:function(e){var t="".concat(i,"/").concat(e,"/delete");return(0,a.A)().post(t)},fetchNewProjectsForFinancialOverview:function(e){var t="".concat(i,"/").concat(e.id,"/projects-for-financial-overview");return(0,a.A)().get(t,e)},fetchTotalsInfoFinancialOverview:function(e){var t="".concat(i,"/").concat(e.id,"/totals-info-financial-overview");return(0,a.A)().get(t,e)}}},42285:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(96540);const i=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},45403:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(96540);const i=function(e){return a.createElement("thead",null,e.children)}},69188:(e,t,n)=>{n.d(t,{A:()=>r}),n(28706),n(60739);var a=n(61941),i="financial-overview-contact";const r={fetchFinancialOverviewContacts:function(e,t,n,r,l,c,o){var s="".concat(i,"/grid");return(0,a.A)().get(s,{params:{financialOverviewId:JSON.stringify(r),onlyInterimFinancialOverviewContacts:JSON.stringify(l),onlyEmailFinancialOverviewContacts:JSON.stringify(c),onlyPostFinancialOverviewContacts:JSON.stringify(o),filters:JSON.stringify(e),sorts:JSON.stringify(t),limit:n.limit,offset:n.offset}})},fetchFinancialOverviewContactDetails:function(e){var t="".concat(i,"/").concat(e,"/get");return(0,a.A)().get(t)},fetchFinancialOverviewContactForInterim:function(e){var t="".concat(i,"/").concat(e,"/get-for-interim");return(0,a.A)().get(t)},updateFinancialOverviewContactForInterim:function(e,t,n){var r="".concat(i,"/").concat(e,"/update-for-interim");return(0,a.A)().post(r,{emailTemplateFinancialOverviewId:t,documentTemplateFinancialOverviewId:n})},getFinancialOverviewContactsForSending:function(e,t,n){var r="".concat(i,"/").concat(e,"/sending/").concat(n);return(0,a.A)().post(r,{ids:t})},sendAll:function(e,t){var n="".concat(i,"/").concat(e,"/send-all");document.body.style.cursor="wait";var r=(0,a.A)().post(n,{ids:t},{responseType:"blob"});return document.body.style.cursor="default",r},sendAllPost:function(e,t){var n="".concat(i,"/").concat(e,"/send-all-post");document.body.style.cursor="wait";var r=(0,a.A)().post(n,{ids:t},{responseType:"blob"});return document.body.style.cursor="default",r},sendInterim:function(e){var t="".concat(i,"/").concat(e,"/send-interim");document.body.style.cursor="wait";var n=(0,a.A)().post(t,{responseType:"blob"});return document.body.style.cursor="default",n},sendInterimPost:function(e){var t="".concat(i,"/").concat(e,"/send-interim-post");document.body.style.cursor="wait";var n=(0,a.A)().post(t,{responseType:"blob"});return document.body.style.cursor="default",n},download:function(e){var t="".concat(i,"/").concat(e,"/download");return(0,a.A)().get(t,{responseType:"blob"})},downloadPreview:function(e){var t="".concat(i,"/").concat(e,"}/download-preview");return(0,a.A)().get(t,{responseType:"blob"})},getEmailPreview:function(e){var t="".concat(i,"/").concat(e,"/email-preview");return(0,a.A)().get(t)}}},72219:(e,t,n)=>{n.d(t,{A:()=>v});var a=n(5544),i=(n(28706),n(51629),n(62010),n(26099),n(3362),n(9391),n(23500),n(96540)),r=n(69733),l=n(47767),c=n(63750),o=n(69188),s=n(34390),m=n(6438),u=n(98564),d=n(55956);function v(e){var t=e.financialOverviewContactId,n=e.onClose,v=((0,r.wA)(),(0,l.Zp)()),f=(0,i.useState)(!0),p=(0,a.A)(f,2),w=p[0],h=p[1],E=(0,i.useState)([]),g=(0,a.A)(E,2),O=g[0],A=g[1],b=(0,i.useState)(null),F=(0,a.A)(b,2),j=F[0],y=F[1],N=(0,i.useState)(null),C=(0,a.A)(N,2),S=C[0],k=C[1],P=(0,i.useState)([]),I=(0,a.A)(P,2),D=I[0],T=I[1],M=(0,i.useState)([]),z=(0,a.A)(M,2),L=z[0],R=z[1],x=(0,i.useState)(!0),V=(0,a.A)(x,2),B=V[0],J=V[1],Y=(0,i.useState)(!0),G=(0,a.A)(Y,2),W=G[0],q=G[1],Z=(0,i.useState)(!1),H=(0,a.A)(Z,2),U=H[0],_=H[1];return(0,i.useEffect)((function(){t&&(o.A.fetchFinancialOverviewContactForInterim(t).then((function(e){var t,n,a,i,r,l,c,o,s,m,u,d=null!==(t=null==e||null===(n=e.data)||void 0===n?void 0:n.data)&&void 0!==t?t:[];console.log(null!==(a=null==e||null===(i=e.data)||void 0===i?void 0:i.data)&&void 0!==a?a:[]),A(d),y(null!==(r=null!==(l=null==d?void 0:d.documentTemplateFinancialOverviewId)&&void 0!==l?l:null==d||null===(c=d.financialOverview)||void 0===c?void 0:c.documentTemplateFinancialOverviewId)&&void 0!==r?r:null),k(null!==(o=null!==(s=null==d?void 0:d.emailTemplateFinancialOverviewId)&&void 0!==s?s:null==d||null===(m=d.financialOverview)||void 0===m?void 0:m.emailTemplateFinancialOverviewId)&&void 0!==o?o:null),_(null!==(u=null==d?void 0:d.emailToAllowed)&&void 0!==u&&u)})).catch((function(e){console.log(e),A([]),y(null),k(null),_(!1)})),s.A.fetchDocumentTemplatesPeekGeneral().then((function(e){var t=[];e.forEach((function(e){"financial-overview"==e.group&&t.push({id:e.id,name:e.name})})),T(t),J(!1)})).catch((function(e){console.log(e),J(!1)})),m.A.fetchEmailTemplatesPeek().then((function(e){R(e),q(!1)})).catch((function(e){console.log(e),q(!1)})))}),[t]),i.createElement(i.Fragment,null,w&&i.createElement(c.A,{modalClassName:"modal-lg",confirmAction:function(){var e;t&&null!=O&&null!==(e=O.financialOverview)&&void 0!==e&&e.id&&o.A.updateFinancialOverviewContactForInterim(t,S,j).then((function(){})).catch((function(e){console.log(e),A([]),y(null),k(null),_(!1)})).finally((function(){h(!1),n&&n()}))},closeModal:function(){h(!1),n&&n()},title:"Tussentijdse waardestaat"},i.createElement("div",null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-12"},i.createElement("h4",null,"Tussentijdse waardestaat voor ",null==O?void 0:O.contactFullNameFnf))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-12"},i.createElement(u.A,{label:"Document template",name:"documentTemplateFinancialOverviewId",options:D,value:j,onChangeAction:y,required:"required",isLoading:B}))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-12"},i.createElement(u.A,{label:"E-mail template",name:"emailTemplateFinancialOverviewId",options:L,value:S,onChangeAction:k,placeholder:"Gebruik administratie e-mail template",clearable:!0,isLoading:W}))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-12"},i.createElement("div",{className:"btn-group pull-right",role:"group"},U?i.createElement(d.A,{buttonText:"Preview e-mail tussentijdse waardestaat",onClickAction:function(){var e;t&&null!=O&&null!==(e=O.financialOverview)&&void 0!==e&&e.id&&o.A.updateFinancialOverviewContactForInterim(t,S,j).then((function(){v("/waardestaat/".concat(O.financialOverview.id,"/aanmaken/email/").concat(t))})).catch((function(e){console.log(e),A([]),y(null),k(null),_(!1)})).finally((function(){h(!1),n&&n()}))}}):null,i.createElement(d.A,{buttonText:"Preview post tussentijdse waardestaat",onClickAction:function(){var e;t&&null!=O&&null!==(e=O.financialOverview)&&void 0!==e&&e.id&&(o.A.updateFinancialOverviewContactForInterim(t,S,j).then((function(){v("/waardestaat/".concat(O.financialOverview.id,"/aanmaken/post/").concat(t))})).catch((function(e){console.log(e),A([]),y(null),k(null),_(!1)})).finally((function(){h(!1),n&&n()})),h(!1),n&&n())}})))))))}},93594:(e,t,n)=>{n.r(t),n.d(t,{default:()=>We}),n(60825);var a=n(23029),i=n(92901),r=n(56822),l=n(53954),c=n(85501),o=n(64467),s=n(58168),m=(n(25276),n(62062),n(26099),n(96540)),u=(n(2008),n(51629),n(67945),n(84185),n(83851),n(81278),n(79432),n(23500),n(52675),n(89463),n(94170),n(47767)),d=n(91858),v=n(5556),f=n(37190);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var E=function(e){function t(e){var n,i,c,s;return(0,a.A)(this,t),i=this,c=t,s=[e],c=(0,l.A)(c),n=(0,r.A)(i,h()?Reflect.construct(c,s||[],(0,l.A)(i).constructor):c.apply(i,s)),(0,o.A)(n,"showDeleteItemModal",(function(e,t){n.setState(w(w({},n.state),{},{showDeleteItem:!0,deleteItem:w(w({},n.state.deleteItem),{},{id:e,description:t})}))})),(0,o.A)(n,"closeDeleteItemModal",(function(){n.setState(w(w({},n.state),{},{showDeleteItem:!1,deleteItem:w(w({},n.state.deleteItem),{},{id:"",description:""})}))})),n.state={showDeleteItem:!1,deleteItem:{id:"",description:""}},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this,t=this.props.financialOverview,n=t.id,a=t.description,i=t.statusId,r=t.definitive,l=t.hasInterimFinancialOverviewContacts;return m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-4"},m.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},m.createElement(d.A,{iconName:"arrowLeft",onClickAction:function(){return e.props.navigate(-1)}}),r||"concept"!==i||l?null:m.createElement(d.A,{iconName:"trash",onClickAction:this.showDeleteItemModal.bind(this,n,a)}))),m.createElement("div",{className:"col-md-4"},m.createElement("h4",{className:"text-center"},"Waardestaat: ",a)),m.createElement("div",{className:"col-md-4"}),this.state.showDeleteItem&&m.createElement(f.A,(0,s.A)({closeDeleteItemModal:this.closeDeleteItemModal},this.state.deleteItem,{deleteFinancialOverview:this.props.deleteFinancialOverview})))}}])}(m.Component);E.propTypes={description:v.any};const g=function(e){var t=(0,u.Zp)();return m.createElement(E,(0,s.A)({},e,{navigate:t}))};var O=n(2543),A=n(69733),b=(n(62010),n(30483)),F=n(62493),j=n(55849),y=n(95093),N=n.n(y);const C=function(e){var t,n,a,i=e.description,r=e.year,l=e.statusId,c=e.dateProcessed,o=e.hasInterimFinancialOverviewContacts,s=e.documentTemplateFinancialOverview,u=e.emailTemplateFinancialOverview,v=e.switchToEdit,f=e.callFetchFinancialOverviewDetails,p=e.administration,w=u?u.name:null!==(t=null==p||null===(n=p.emailTemplateFinancialOverview)||void 0===n?void 0:n.name)&&void 0!==t?t:"Geen e-mail template ingesteld!",h="";switch(l){case"in-progress":h="Wordt aangemaakt...";break;case"concept":h=o?"Concept / Verwerkt":"Concept";break;case"definitive":h="Definitief";break;case"processed":h="Verwerkt"}var E=c?N()(c).format("DD-MM-Y"):"",g=null;return"in-progress"===l&&(g="Waardestaat ".concat(i," wordt op dit moment gemaakt. Gebruik blauwe refresh/vernieuwen knop of F5 (Command + R op Mac) om status overzicht te verversen. ")),m.createElement(m.Fragment,null,m.createElement("div",{onClick:v},m.createElement(F.A,null,m.createElement(j.A,null,m.createElement("div",{className:"row"},m.createElement(b.A,{label:"Jaar",value:r}),m.createElement(b.A,{label:"Status",value:h})),m.createElement("div",{className:"row"},m.createElement(b.A,{label:"Administratie",value:null!==(a=null==p?void 0:p.name)&&void 0!==a?a:""}),m.createElement(b.A,{label:"Datum verwerkt",value:E})),m.createElement("div",{className:"row"},m.createElement(b.A,{label:"Document template",value:s?s.name:""})),m.createElement("div",{className:"row"},m.createElement(b.A,{label:"E-mail template",value:null!=w?w:""}))))),"in-progress"===l?m.createElement("div",null,m.createElement(F.A,null,m.createElement(j.A,null,m.createElement("div",{className:"col-md-12 margin-10-top"},m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-10"},m.createElement("div",{className:"btn-group btn-group-flex",role:"group"},m.createElement(d.A,{iconName:"refresh",onClickAction:f})))),m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-12"},g?m.createElement("div",{className:"alert alert-danger"},g):null)))))):null,"concept"===l&&o?m.createElement("div",null,m.createElement(F.A,null,m.createElement(j.A,null,m.createElement("div",{className:"col-md-12 margin-10-top"},m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-12"},m.createElement("div",{className:"alert alert-warning"},"Er zijn reeds verwerkte tussentijdse waardestaten gemaakt!"))))))):null)};n(50113);var S=n(57761),k=n.n(S),P=n(55956),I=n(34390),D=n(98564),T=n(40506),M=n(6438);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}N().locale("nl");var x=function(e){function t(e){var n,i,c,s;return(0,a.A)(this,t),i=this,c=t,s=[e],c=(0,l.A)(c),n=(0,r.A)(i,R()?Reflect.construct(c,s||[],(0,l.A)(i).constructor):c.apply(i,s)),(0,o.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(L(L({},n.state),{},{financialOverview:L(L({},n.state.financialOverview),{},(0,o.A)({},i,a))}))})),(0,o.A)(n,"handleInputChangeDate",(function(e,t){n.setState(L(L({},n.state),{},{financialOverview:L(L({},n.state.financialOverview),{},(0,o.A)({},t,e))}))})),(0,o.A)(n,"handleReactSelectChange",(function(e,t){n.setState(L(L({},n.state),{},{financialOverview:L(L({},n.state.financialOverview),{},(0,o.A)({},t,e))}))})),(0,o.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.financialOverview,a={},i={},r=!1;k().isEmpty(t.year+"")&&(a.year=!0,i.year="Jaar is een verplicht veld.",r=!0),t.year<2e3&&(a.year=!0,i.year="Jaar mag niet voor 2000 liggen.",r=!0),k().isEmpty(t.administrationId+"")&&(a.administrationId=!0,i.administrationId="Administratie is een verplicht veld.",r=!0),k().isEmpty(t.documentTemplateFinancialOverviewId+"")&&(a.documentTemplateFinancialOverviewId=!0,i.documentTemplateFinancialOverviewId="Document template is een verplicht veld.",r=!0),n.setState(L(L({},n.state),{},{errors:a,errorMessage:i})),!r&&T.A.updateFinancialOverview(t).then((function(e){n.props.callFetchFinancialOverviewDetails(),n.props.switchToView()})).catch((function(e){alert("Er is iets misgegaan bij opslaan. Herlaad de pagina en probeer het nogmaals.")}))})),n.state={financialOverview:{id:e.id?e.id:"",year:e.year?e.year:N()().subtract(1,"year").format("Y"),description:e.description?e.description:"",documentTemplateFinancialOverviewId:e.documentTemplateFinancialOverviewId?e.documentTemplateFinancialOverviewId:"",emailTemplateFinancialOverviewId:e.emailTemplateFinancialOverviewId?e.emailTemplateFinancialOverviewId:"",administrationId:e.administrationId?e.administrationId:"",definitive:!!e.definitive&&e.definitive,statusId:e.statusId?e.statusId:"",dateProcessed:e.dateProcessed?e.dateProcessed:null,hasInterimFinancialOverviewContacts:!!e.hasInterimFinancialOverviewContacts&&e.hasInterimFinancialOverviewContacts},administrations:e.administrations?e.administrations:null,documentTemplates:[],emailTemplates:[],peekLoading:{documentTemplates:!0,emailTemplates:!0},errorMessage:!1,errors:{year:!1,administrationId:!1,documentTemplateFinancialOverviewId:!1,emailTemplateFinancialOverviewId:!1}},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){var e=this;I.A.fetchDocumentTemplatesPeekGeneral().then((function(t){var n=[];t.forEach((function(e){"financial-overview"==e.group&&n.push({id:e.id,name:e.name})})),e.setState((function(e){return{documentTemplates:n,peekLoading:L(L({},e.peekLoading),{},{documentTemplates:!1})}}))})).catch((function(t){console.log(t),e.setState((function(e){return{peekLoading:L(L({},e.peekLoading),{},{documentTemplates:!1})}}))})),M.A.fetchEmailTemplatesPeek().then((function(t){e.setState((function(e){return{emailTemplates:t,peekLoading:L(L({},e.peekLoading),{},{emailTemplates:!1})}}))})).catch((function(t){console.log(t),e.setState((function(e){return{peekLoading:L(L({},e.peekLoading),{},{emailTemplates:!1})}}))}))}},{key:"render",value:function(){var e=this.state.financialOverview,t=e.year,n=e.administrationId,a=e.statusId,i=e.dateProcessed,r=e.hasInterimFinancialOverviewContacts,l=e.documentTemplateFinancialOverviewId,c=e.emailTemplateFinancialOverviewId,o="";switch(a){case"in-progress":o="Wordt aangemaakt...";break;case"concept":o=r?"Concept / Verwerkt":"Concept";break;case"definitive":o="Definitief";break;case"processed":o="Verwerkt"}var s=i?N()(i).format("DD-MM-Y"):"";return m.createElement(m.Fragment,null,m.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.createElement(F.A,null,m.createElement(j.A,null,m.createElement("div",{className:"row"},m.createElement(b.A,{className:"form-group col-md-6",label:"Jaar",value:t}),m.createElement(b.A,{className:"form-group col-md-6",label:"Status",value:o})),m.createElement("div",{className:"row"},m.createElement(b.A,{className:"form-group col-md-6",label:"Administratie",value:n?this.state.administrations&&this.state.administrations.find((function(e){return e.id==n})).name:""}),m.createElement(b.A,{className:"form-group col-md-6",label:"Datum verwerkt",value:s})),m.createElement("div",{className:"row"},m.createElement(D.A,{label:"Document template",name:"documentTemplateFinancialOverviewId",options:this.state.documentTemplates,value:l,onChangeAction:this.handleReactSelectChange,required:"required",isLoading:this.state.peekLoading.documentTemplates,error:this.state.errors.documentTemplateFinancialOverviewId,errorMessage:this.state.errorMessage.documentTemplateFinancialOverviewId})),m.createElement("div",{className:"row"},m.createElement(D.A,{label:"E-mail template",name:"emailTemplateFinancialOverviewId",options:this.state.emailTemplates,value:c,onChangeAction:this.handleReactSelectChange,placeholder:"Gebruik administratie e-mail template",clearable:!0,isLoading:this.state.peekLoading.emailTemplates,error:this.state.errors.emailTemplateFinancialOverviewId,errorMessage:this.state.errorMessage.emailTemplateFinancialOverviewId}))),m.createElement(j.A,null,m.createElement("div",{className:"pull-right btn-group",role:"group"},m.createElement(P.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),m.createElement(P.A,{buttonText:"Opslaan",type:"submit",value:"Submit",onClickAction:this.handleSubmit}))))),"concept"===a&&r?m.createElement("div",null,m.createElement(F.A,null,m.createElement(j.A,null,m.createElement("div",{className:"col-md-12 margin-10-top"},m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-12"},m.createElement("div",{className:"alert alert-warning"},"Er zijn reeds verwerkte tussentijdse waardestaten gemaakt!"))))))):null)}}])}(m.Component);const V=(0,A.Ng)((function(e){return{administrations:e.meDetails.administrations}}),null)(x);function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var J=function(e){function t(e){var n,i,c,s;return(0,a.A)(this,t),i=this,c=t,s=[e],c=(0,l.A)(c),n=(0,r.A)(i,B()?Reflect.construct(c,s||[],(0,l.A)(i).constructor):c.apply(i,s)),(0,o.A)(n,"switchToEdit",(function(){"concept"===n.props.financialOverview.statusId&&n.setState({showEdit:!0})})),(0,o.A)(n,"switchToView",(function(){n.setState({showEdit:!1,activeDiv:""})})),n.state={showEdit:!1,activeDiv:""},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.meDetails.permissions,n=void 0===t?{}:t;return m.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&n.manageFinancialOverview?m.createElement(V,(0,s.A)({},this.props.financialOverview,{switchToView:this.switchToView,callFetchFinancialOverviewDetails:this.props.callFetchFinancialOverviewDetails,administrations:this.props.administrations})):m.createElement(C,(0,s.A)({},this.props.financialOverview,{switchToEdit:this.switchToEdit,callFetchFinancialOverviewDetails:this.props.callFetchFinancialOverviewDetails})))}}])}(m.Component);const Y=(0,A.Ng)((function(e){return{meDetails:e.meDetails,permissions:e.meDetails.permissions,administrations:e.meDetails.administrations}}))(J);var G=n(9392),W=n(60436),q=n(5544),Z=(n(28706),n(2892),n(72505)),H=n.n(Z),U=(n(74423),n(21699),n(87722)),_=n(10118);const Q=function(e){var t=e.id,n=e.contactFullName,a=e.statusId,i=e.status,r=e.dateSent,l=e.emailedTo,c=e.allowInterimFinancialOverview,o=e.showSelectFinancialOverviewContactsToSend,s=e.toggleFinancialOverviewContactCheck,d=e.financialOverviewContactIds,v=e.createInterim,f=(0,u.Zp)(),p=r?N()(r).format("DD-MM-Y"):"",w=(0,m.useState)(""),h=(0,q.A)(w,2),E=h[0],g=h[1],O="in-progress"===a||"is-sending"===a||"error-making"===a||"error-sending"===a||"is-resending"===a?"in-progress-row":"sent"===a?"success-row-light":"";return m.createElement("tr",{className:"".concat(E," ").concat(O),onMouseEnter:function(){g("highlight-row")},onMouseLeave:function(){g("")}},o&&m.createElement("td",null,m.createElement("input",{type:"checkbox",name:t,onChange:s,checked:!!(d&&d.length>0)&&d.includes(t)})),m.createElement("td",null,n),m.createElement("td",null,i),m.createElement("td",null,p),m.createElement("td",null,l),m.createElement("td",null,m.createElement("a",{role:"button",onClick:function(){return function(e,t){f("sent"===t||"error-sending"===t?"/waardestaat-contact/inzien/".concat(e):"/waardestaat-contact/preview/".concat(e))}(t,a)}},m.createElement(U.Ay,{size:14,icon:_.y5U,title:"sent"===a||"error-sending"===a?"Inzien":"Preview"})),c?m.createElement(m.Fragment,null,"   ",m.createElement("a",{role:"button",onClick:function(){return v(t)}},m.createElement(U.Ay,{size:14,icon:_.Cal,title:"Tussentijdse waardestaat"}))):null))};var K=n(69188),X=n(25562),$=n(74850),ee=n(42285),te=n(45403),ne=n(9152),ae=n(93913),ie=n(7639);const re=[{code:"concept",name:"Concept"},{code:"to-send",name:"Te verzenden"},{code:"in-progress",name:"Wordt definitief gemaakt"},{code:"error-making",name:"Fout bij maken"},{code:"is-sending",name:"Wordt verstuurd"},{code:"error-sending",name:"Opnieuw te verzenden"},{code:"is-resending",name:"Wordt opnieuw verstuurd"},{code:"sent",name:"Verzonden"}],le=function(e){var t=e.showSelectFinancialOverviewContactsToSend,n=e.toggleCheckedAll,a=e.filter,i=e.handleChangeFilter;return m.createElement("tr",{className:"thead-filter"},t&&m.createElement("th",null,m.createElement("input",{type:"checkbox",onChange:n})),m.createElement("th",null,m.createElement("input",{type:"text",className:"form-control input-sm",value:a.contact,onChange:function(e){return i("contact",e.target.value)}})),m.createElement("th",null,m.createElement("select",{className:"form-control input-sm",value:a.statusId,onChange:function(e){return i("statusId",e.target.value)}},m.createElement("option",null),re.map((function(e){return m.createElement("option",{key:e.code,value:e.code},e.name)})))),m.createElement(ie.A,{value:a.dateSent?a.dateSent:null,onChangeAction:function(e){return i("dateSent",e?N()(e).format("YYYY-MM-DD"):null)}}),m.createElement("th",null,m.createElement("input",{type:"text",className:"form-control input-sm",value:a.emailedTo,onChange:function(e){return i("emailedTo",e.target.value)}})),m.createElement("th",null))};var ce=n(60881),oe=n(72219);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ue=(0,A.Ng)(null,(function(e){return{previewFinancialOverview:function(t){e(function(e){return{type:"FINANCIAL_OVERVIEW_PREVIEW_REPORT",data:e}}(t))}}}))((function(e){var t=e.financialOverview,n=e.previewFinancialOverview,a=(0,u.Zp)(),i=(0,m.useState)(!1),r=(0,q.A)(i,2),l=r[0],c=r[1],v=(0,m.useState)(!1),f=(0,q.A)(v,2),p=(f[0],f[1]),w=(0,m.useState)([]),h=(0,q.A)(w,2),E=h[0],g=h[1],O=(0,m.useState)(!1),A=(0,q.A)(O,2),b=A[0],F=A[1],j=(0,m.useState)(!1),y=(0,q.A)(j,2),C=y[0],S=y[1],k=(0,m.useState)(!1),I=(0,q.A)(k,2),D=I[0],M=I[1],z=(0,m.useState)(!1),L=(0,q.A)(z,2),R=L[0],x=L[1],V=(0,m.useState)("Selecteer preview e-mail waardestaten"),B=(0,q.A)(V,2),J=B[0],Y=B[1],G=(0,m.useState)("Selecteer preview post waardestaten"),Z=(0,q.A)(G,2),U=Z[0],_=Z[1],ie=(0,m.useState)([]),re=(0,q.A)(ie,2),se=re[0],ue=re[1],de=(0,m.useState)([]),ve=(0,q.A)(de,2),fe=ve[0],pe=ve[1],we=(0,m.useState)(!0),he=(0,q.A)(we,2),Ee=he[0],ge=he[1],Oe=(0,m.useState)({total:0}),Ae=(0,q.A)(Oe,2),be=Ae[0],Fe=Ae[1],je=(0,m.useState)([]),ye=(0,q.A)(je,2),Ne=ye[0],Ce=ye[1],Se=(0,m.useState)([{field:"contact",order:"ASC"}]),ke=(0,q.A)(Se,2),Pe=ke[0],Ie=ke[1],De=(0,m.useState)({offset:0,limit:50}),Te=(0,q.A)(De,2),Me=Te[0],ze=Te[1],Le=(0,X.A)("Enter"),Re=(0,m.useState)(!1),xe=(0,q.A)(Re,2),Ve=xe[0],Be=xe[1],Je=(0,m.useState)(null),Ye=(0,q.A)(Je,2),Ge=Ye[0],We=Ye[1];function qe(){var e;ge(!0),ue([]),H().all([K.A.fetchFinancialOverviewContacts((e=[],Ne.contact&&e.push({field:"contact",data:Ne.contact}),Ne.statusId&&e.push({field:"statusId",data:Ne.statusId}),Ne.dateSent&&e.push({field:"dateSent",data:N()(Ne.dateSent).format("YYYY-MM-DD")}),Ne.emailedTo&&e.push({field:"emailedTo",data:Ne.emailedTo}),e),Pe,Me,t.id,b,C,D),T.A.fetchTotalsInfoFinancialOverview(t)]).then(H().spread((function(e,t){ue(e.data.data),Fe(e.data.meta),pe(t.data),ge(!1)}))).catch((function(e){ge(!1),alert("Er is iets misgegaan met ophalen van de gegevens.")}))}function Ze(){l?(c(!1),g([])):(c(!0),g([]))}function He(){ue([]),ze(me(me({},Me),{},{page:0,offset:0}))}function Ue(e,t){var n=Pe;3===n.length&&n.pop();var a={field:"".concat(e),order:"".concat(t)};Ie([a].concat((0,W.A)(n)))}function _e(e){var t=e.target.checked,n=Number(e.target.name);t?(g([].concat((0,W.A)(E),[n])),p(E.length===be.financialOverviewContactIdsTotal.length)):(g((0,W.A)(E.filter((function(e){return e!==n})))),p(!1))}function Qe(e){We(e),Be(!0)}(0,m.useEffect)((function(){qe()}),[Me.offset,Pe,Ne.contact,Ne.statusId,Ne.dateSent,Ne.emailedTo,b,C,D,t.totalFinancialOverviewProjectsConcept,t.totalFinancialOverviewProjectsDefinitive,t.statusId]),(0,m.useEffect)((function(){Le&&qe()}),[Le]);var Ke=null;fe.totalFinancialOverviewContactsErrorSending>0&&(Ke="Een fout verzonden waardestaat is definitief aangemaakt in Econobis, maar kon niet worden verzonden. Dit omdat het contact een fout e-mailadres heeft of omdat de mailbox niet werkte. Corrigeer het e-mailadres of zorg er voor dat de mail box weer werkt. Vervolgens kan je met bovenstaande knoppen de waardestaat opnieuw verzenden. Omdat de waardestaat definitief is kan je deze niet verwijderen.");var Xe=0;E&&(Xe=be&&be.financialOverviewContactIdsTotal?E.length+"/"+be.financialOverviewContactIdsTotal.length:E.length);var $e=0,et=0,tt=0,nt=0,at=0,it=null,rt=null,lt=null,ct=null,ot=null,st=null;return fe&&($e=fe.totalFinancialOverviewContactsInProgress?fe.totalFinancialOverviewContactsInProgress:0,et=fe.totalFinancialOverviewContactsIsSending?fe.totalFinancialOverviewContactsIsSending:0,tt=fe.totalFinancialOverviewContactsIsResending?fe.totalFinancialOverviewContactsIsResending:0,(at+=(nt=fe.totalFinancialOverviewContactsErrorMaking?fe.totalFinancialOverviewContactsErrorMaking:0)+$e+tt+et)>0&&(it="Overzicht status bij het maken en verzenden waardestaten",$e>0&&(lt="- Concept waardestaten die nu definitief gemaakt worden: "+$e),et>0&&(ct="- Definitieve waardestaten die nu verzonden (e-mail of PDF) worden: "+et),tt>0&&(ot="- Definitieve waardestaten die nu opnieuw verzonden worden: "+tt),nt>0&&(st='- Definitieve waardestaten met status "Fout bij maken": '+nt),rt="Gebruik blauwe refresh/vernieuwen knop of F5 (Command + R op Mac) om status overzicht te verversen.")),m.createElement("div",null,m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-6"},m.createElement("div",{className:"btn-group btn-group-flex",role:"group"},m.createElement(d.A,{iconName:"refresh",onClickAction:function(){Ce([]),qe(),c(!1),p(!1),g([]),F(!1),S(!1),M(!1),x(!1),Y("Selecteer preview e-mail waardestaten"),_("Selecteer preview post waardestaten")}}),t.definitive&&"definitive"===t.statusId&&(fe.totalFinancialOverviewContactsToSend>0||fe.totalFinancialOverviewContactsErrorSending>0)&&!D&&be.total>0?m.createElement(P.A,{buttonText:J,onClickAction:function(){return Y("Preview e-mail waardestaten"),S(!0),void(E.length>0?(n(E),a("/waardestaat/".concat(t.id,"/aanmaken/email"))):Ze())}}):null,t.definitive&&"definitive"===t.statusId&&(fe.totalFinancialOverviewContactsToSend>0||fe.totalFinancialOverviewContactsErrorSending>0)&&!C&&be.total>0?m.createElement(P.A,{buttonText:U,onClickAction:function(){return _("Preview post waardestaten"),M(!0),void(E.length>0?(n(E),a("/waardestaat/".concat(t.id,"/aanmaken/post"))):Ze())}}):null,t.usesInterimFinancialOverviews?m.createElement(P.A,{buttonText:b?"Toon alles":"Alleen voor tussentijds",onClickAction:function(){return F(!b)}}):null)),m.createElement("div",{className:"col-md-6"},m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-12"},m.createElement("div",{className:"pull-right"},"Resultaten: ",be.total||0))))),m.createElement("div",{className:"col-md-12"},Ke?m.createElement("div",{className:"alert alert-danger"},Ke):null),l?m.createElement("div",{className:"col-md-12"},Xe?m.createElement("div",{className:"alert alert-success"},"Geselecteerde waardestaten: ",Xe):null):m.createElement("div",{className:"col-md-12"},it?m.createElement("div",{className:"alert alert-warning"},it,m.createElement("br",null),lt?m.createElement("span",null,lt," ",m.createElement("br",null)):null,ct?m.createElement("span",null,ct," ",m.createElement("br",null)):null,ot?m.createElement("span",null,ot," ",m.createElement("br",null)):null,st?m.createElement("span",null,st," ",m.createElement("br",null)):null,m.createElement("br",null)," ",rt):null),m.createElement("div",{className:"col-md-12"},R?m.createElement(ce.A,{closeModal:function(){x(!R)},title:"Te veel waardestaten geselecteerd",errorMessage:"Er kunnen maximaal 50 post waardestaten tegelijk aangemaakt worden."}):null),m.createElement("form",{onKeyUp:function(e){13===e.keyCode&&He()},className:"margin-10-top"},m.createElement(ee.A,null,m.createElement(te.A,null,m.createElement("tr",{className:"thead-title"},l&&m.createElement("th",{width:"5%"}),m.createElement(ne.A,{title:"Contact",width:"30%",setSorts:Ue,sortColumn:"contact"}),m.createElement(ne.A,{title:"Status",width:"15%",setSorts:Ue,sortColumn:"statusId"}),m.createElement(ne.A,{title:"Datum verzonden",width:"15%",setSorts:Ue,sortColumn:"dateSent"}),m.createElement(ne.A,{title:"E-mail",width:"30%",setSorts:Ue,sortColumn:"emailedTo"}),m.createElement("th",{width:"5%"})),m.createElement(le,{showSelectFinancialOverviewContactsToSend:l,toggleCheckedAll:function(){var e=event.target.checked,t=[];e&&(t=be.financialOverviewContactIdsTotal),g(t),p(e)},filter:Ne,handleChangeFilter:function(e,t){Ce(me(me({},Ne),{},(0,o.A)({},e,t))),He()}})),m.createElement(ae.A,null,Ee?m.createElement("tr",null,m.createElement("td",{colSpan:l?6:5},"Bezig met gegevens laden")):se.length>0?se.map((function(e){return m.createElement(Q,(0,s.A)({key:e.id},e,{showSelectFinancialOverviewContactsToSend:l,toggleFinancialOverviewContactCheck:_e,financialOverviewContactIds:E,createInterim:Qe}))})):m.createElement("tr",null,m.createElement("td",{colSpan:l?6:5},"Geen resultaten!")))),m.createElement("div",{className:"col-md-6 col-md-offset-3"},m.createElement($.A,{onPageChangeAction:function(e){var t=Math.ceil(50*e.selected);ze(me(me({},Me),{},{offset:t}))},totalRecords:be.total,initialPage:0,recordsPerPage:50}))),Ve&&m.createElement(oe.A,{financialOverviewContactId:Ge,onClose:function(){return Be(!1)}}))}));function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}const ve=function(e){function t(e){return(0,a.A)(this,t),n=this,i=t,c=[e],i=(0,l.A)(i),(0,r.A)(n,de()?Reflect.construct(i,c||[],(0,l.A)(n).constructor):i.apply(n,c));var n,i,c}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return m.createElement(F.A,null,m.createElement(G.A,null,m.createElement("span",{className:"h5 text-bold"},"Contacten")),m.createElement(j.A,null,m.createElement("div",{className:"col-md-12"},m.createElement(ue,{financialOverview:this.props.financialOverview}))))}}])}(m.Component);var fe=n(22663);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}const Ee=function(e){function t(e){var n,i,c,s;return(0,a.A)(this,t),i=this,c=t,s=[e],c=(0,l.A)(c),n=(0,r.A)(i,he()?Reflect.construct(c,s||[],(0,l.A)(i).constructor):c.apply(i,s)),(0,o.A)(n,"callFetchNewProjectsForFinancialOverview",(function(){n.setState({isLoading:!0,hasError:!1}),T.A.fetchNewProjectsForFinancialOverview(n.props.financialOverview).then((function(e){n.setState({isLoading:!1,projectsForFinancialOverview:e.data})})).catch((function(e){n.setState({isLoading:!1,hasError:!0})}))})),(0,o.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.financialOverviewProject,a={},i=!1;k().isEmpty(t.projectId+"")&&(a.projectId=!0,i=!0),n.setState(we(we({},n.state),{},{errors:a})),!i&&fe.A.newFinancialOverviewProject(t).then((function(e){n.props.toggleShowNew(),n.props.refreshFinancialOverviewProjects()})).catch((function(e){var t="Er is iets misgegaan bij opslaan. Probeer het opnieuw.";500!==e.response.status&&(t=e.response.data.message),n.setState({showErrorModal:!0,modalErrorMessage:t})}))})),(0,o.A)(n,"closeErrorModal",(function(){n.setState({showErrorModal:!1,modalErrorMessage:""})})),n.state={financialOverviewProjects:e.financialOverview.financialOverviewProjects,financialOverviewProject:{financialOverviewId:e.financialOverview.id,projectId:"",definitive:!1},errorMessage:!1,errors:{projectId:!1},projectsForFinancialOverview:[],isLoading:!1,hasError:!1,showErrorModal:!1,modalErrorMessage:""},n.handleReactSelectChange=n.handleReactSelectChange.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){this.callFetchNewProjectsForFinancialOverview()}},{key:"handleReactSelectChange",value:function(e,t){this.setState(we(we({},this.state),{},{financialOverviewProject:we(we({},this.state.financialOverviewProject),{},(0,o.A)({},t,e))}))}},{key:"render",value:function(){var e=this.state.financialOverviewProject.projectId;return m.createElement(m.Fragment,null,m.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.createElement(F.A,{className:"panel-grey"},m.createElement(j.A,null,m.createElement("div",{className:"row"},this.props.financialOverview&&this.props.financialOverview.definitive?m.createElement("div",{className:"col-sm-12 margin-10-bottom"},m.createElement("p",{className:"text-danger"},"Aan definitieve waardestaat kunnen geen projecten meer toegevoegd worden.",m.createElement("br",null))):m.createElement(D.A,{label:"Project",name:"projectId",options:this.state.projectsForFinancialOverview,value:e,onChangeAction:this.handleReactSelectChange,required:"required",error:this.state.errors.projectId,errorMessage:this.state.errorMessage.projectId})),m.createElement("div",{className:"pull-right btn-group",role:"group"},m.createElement(P.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),this.props.financialOverview&&!this.props.financialOverview.definitive?m.createElement(P.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"}):null)))),this.state.showErrorModal&&m.createElement(ce.A,{closeModal:this.closeErrorModal,title:"Fout bij opslaan",errorMessage:this.state.modalErrorMessage}))}}])}(m.Component);var ge=n(63750);const Oe=function(e){var t=!1;return e.financialOverviewProject.definitive&&(t=!0),m.createElement(ge.A,{buttonConfirmText:"Bevestig",buttonClassName:"btn-danger",closeModal:e.closeMakeConceptItemModal,confirmAction:e.makeConceptProject,showConfirmAction:t,title:"Concept maken"},m.createElement("p",null,"Maak project ",m.createElement("strong",null," ","".concat(e.financialOverviewProject.projectName)," ")," weer concept in waardestaat."),e.financialOverviewProject.definitive?null:m.createElement("p",{className:"text-danger"},m.createElement("strong",null,"Fout!")," Dit project is al concept in waardestaat en kan niet meer worden gewijzigd.",m.createElement("br",null)))},Ae=function(e){var t=!1;return e.financialOverviewProject.definitive||(t=!0),m.createElement(ge.A,{buttonConfirmText:"Bevestig",buttonClassName:"btn-danger",closeModal:e.closeMakeDefinitiveItemModal,confirmAction:e.makeDefinitiveProject,showConfirmAction:t,title:"Definitief maken"},m.createElement("p",null,"Maak project ",m.createElement("strong",null," ","".concat(e.financialOverviewProject.projectName)," ")," definitief in waardestaat."),null!==e.financialOverviewProject.projectDateEntry?m.createElement("p",{className:"text-danger"},m.createElement("strong",null,"Standaard ingangsdatum mutaties (",N()(e.financialOverviewProject.projectDateEntry).format("DD-MM-YYYY"),") bij dit project zal komen te vervallen."),m.createElement("br",null)):null,0===e.totalFinancialOverviewProjectsInProgress&&1===e.totalFinancialOverviewProjectsConcept?m.createElement("p",{className:"text-danger"},m.createElement("strong",null,"Dit is het laatste project dat definitief gemaakt wordt in deze waardestaat. Hiermee wordt de totale waardestaat definitief. Hierna kan je geen wijzigingen meer aanbrengen in deze waardestaat. Weet je het zeker?"),m.createElement("br",null)):null,e.financialOverviewProject.definitive?m.createElement("p",{className:"text-danger"},m.createElement("strong",null,"Fout!")," Dit project is al definitief in waardestaat en kan niet meer worden gewijzigd.",m.createElement("br",null)):null)},be=function(e){var t=!1;return e.financialOverviewProject.definitive||(t=!0),m.createElement(ge.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:e.deleteProject,showConfirmAction:t,title:"Verwijderen"},m.createElement("p",null,"Verwijder project uit waardestaat: ",m.createElement("strong",null," ","".concat(e.financialOverviewProject.projectName)," ")),e.financialOverviewProject.definitive?m.createElement("p",{className:"text-danger"},m.createElement("strong",null,"Fout!")," Dit project heeft al een definitieve waardestaat en kan niet meer worden verwijderd.",m.createElement("br",null)):null)};var Fe=n(24362),je=n(87696),ye=n(40704);const Ne=function(e){var t=e.financialOverview,n=e.financialOverviewProject,a=e.setShowNewFalse,i=e.refreshFinancialOverviewProjects,r=(0,u.Zp)(),l=(0,m.useState)(!1),c=(0,q.A)(l,2),o=c[0],s=c[1],d=(0,m.useState)(""),v=(0,q.A)(d,2),f=v[0],p=v[1],w=(0,m.useState)(!1),h=(0,q.A)(w,2),E=h[0],g=h[1],O=(0,m.useState)(!1),A=(0,q.A)(O,2),b=A[0],F=A[1],j=(0,m.useState)(!1),y=(0,q.A)(j,2),N=y[0],C=y[1],S=(0,m.useState)(!1),k=(0,q.A)(S,2),P=k[0],I=k[1],D=(0,m.useState)(!1),T=(0,q.A)(D,2),M=T[0],z=T[1];function L(e,t){var n=new FormData;n.append("definitive",t),fe.A.updateFinancialOverviewProject(e,n).then((function(e){i()})).catch((function(e){var t="Er is iets misgegaan bij opslaan. Probeer het opnieuw.";500!==e.response.status&&(t=e.response.data.message),I(!0),z(t)}))}function R(){g(!E)}function x(e){F(!b)}function V(){C(!N)}var B="in-progress"===n.statusId?"in-progress-row":"concept"===n.statusId&&n.hasInterimFinancialOverviewContacts?"in-progress-row-light":"definitive"===n.statusId?"success-row-light":"";return m.createElement(m.Fragment,null,m.createElement("tr",{className:"".concat(f," ").concat(B),onDoubleClick:function(){return e=n.id,void r("/waardestaat-project/".concat(e));var e},onMouseEnter:function(){"in-progress"!==n.statusId&&(s(!0),p("highlight-row"))},onMouseLeave:function(){return s(!1),void p("")}},m.createElement("td",null,n.projectCode),m.createElement("td",null,n.projectName),m.createElement("td",null,n.projectType),m.createElement("td",null,n.status),m.createElement("td",null,t.definitive?m.createElement("a",{role:"button"},m.createElement(U.Ay,{className:"mybtn-primary",size:14,icon:Fe.z})," "):o?n.definitive?m.createElement("a",{role:"button",onClick:R},m.createElement(U.Ay,{className:"mybtn-danger",size:14,icon:ye.T})," "):m.createElement(m.Fragment,null,m.createElement("a",{role:"button",onClick:x},m.createElement(U.Ay,{className:"mybtn-success",size:14,icon:Fe.z})),"concept"!==n.statusId||n.hasInterimFinancialOverviewContacts?"":m.createElement(m.Fragment,null,"   ",m.createElement("a",{role:"button",onClick:V},m.createElement(U.Ay,{className:"mybtn-danger",size:14,icon:je.d})))):"")),E&&m.createElement(Oe,{financialOverviewProject:n,makeConceptProject:function(){L(n.id,!1),R()},closeMakeConceptItemModal:R}),b&&m.createElement(Ae,{totalFinancialOverviewProjectsInProgress:t.totalFinancialOverviewProjectsInProgress,totalFinancialOverviewProjectsConcept:t.totalFinancialOverviewProjectsConcept,totalFinancialOverviewProjectsDefinitive:t.totalFinancialOverviewProjectsDefinitive,financialOverviewProject:n,makeDefinitiveProject:function(){L(n.id,!0),x()},closeMakeDefinitiveItemModal:x}),N&&m.createElement(be,{financialOverviewProject:n,deleteProject:function(){fe.A.deleteFinancialOverviewProject(n.id).then((function(e){a(!1),V(),i()})).catch((function(e){var t="Er is iets misgegaan bij opslaan. Probeer het opnieuw.";500!==e.response.status&&(t=e.response.data.message),I(!0),z(t)}))},closeDeleteItemModal:V}),P&&m.createElement(ce.A,{closeModal:function(){I(!1),z("")},title:"Fout bij opslaan",errorMessage:M}))},Ce=function(e){var t=e.financialOverview,n=e.financialOverviewProjects,a=e.meta,i=e.isLoading,r=e.setShowNewFalse,l=e.refreshFinancialOverviewProjects,c=null,o=null;return t.totalFinancialOverviewProjectsInProgress>0&&(c="Totaal projecten die nu toegevoegd worden: "+t.totalFinancialOverviewProjectsInProgress,o="Gebruik blauwe refresh/vernieuwen knop of F5 (Command + R op Mac) om projecten overzicht te verversen."),m.createElement("div",null,m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-6"},m.createElement("div",{className:"btn-group btn-group-flex",role:"group"},m.createElement(d.A,{iconName:"refresh",onClickAction:l}))),m.createElement("div",{className:"col-md-6"},m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-12"},m.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0))))),t.totalFinancialOverviewProjectsInProgress>0?m.createElement("div",{className:"col-md-12"},m.createElement("div",{className:"alert alert-warning"},c,m.createElement("br",null),o)):null,m.createElement("div",{className:"margin-10-top"},m.createElement(ee.A,null,m.createElement(te.A,null,m.createElement("tr",{className:"thead-title"},m.createElement("th",{width:"25%"},"Projectcode"),m.createElement("th",{width:"40%"},"Project"),m.createElement("th",{width:"15%"},"Type project"),m.createElement("th",{width:"15%"},"Status"),m.createElement("th",{width:"5%"}))),m.createElement(ae.A,null,i?m.createElement("tr",null,m.createElement("td",{colSpan:5},"Bezig met gegevens laden")):n.length>0?n.map((function(e){return m.createElement(Ne,{key:e.id,financialOverview:t,financialOverviewProject:e,setShowNewFalse:r,refreshFinancialOverviewProjects:l})})):m.createElement("tr",null,m.createElement("td",{colSpan:5},"Geen resultaten!"))))))};var Se=n(23384);const ke=function(e){var t=e.financialOverview,n=e.callFetchFinancialOverviewDetails,a=(0,m.useState)(!1),i=(0,q.A)(a,2),r=i[0],l=i[1],c=(0,m.useState)([]),o=(0,q.A)(c,2),s=o[0],u=o[1],d=(0,m.useState)({total:0}),v=(0,q.A)(d,2),f=v[0],p=v[1],w=(0,m.useState)([]),h=(0,q.A)(w,2),E=(h[0],h[1]),g=(0,m.useState)(!0),O=(0,q.A)(g,2),A=O[0],b=O[1];function y(){l(!r)}function N(){b(!0),u([]),H().all([fe.A.fetchFinancialOverviewProjects(t.id),T.A.fetchTotalsInfoFinancialOverview(t)]).then(H().spread((function(e,t){u(e.data.data),p(e.data.meta),E(t.data),b(!1)}))).catch((function(e){b(!1),alert("Er is iets misgegaan met ophalen van de gegevens.")}))}function C(){N(),n()}return(0,m.useEffect)((function(){N(),n()}),[t.statusId,t.totalFinancialOverviewProjectsInProgress,t.totalFinancialOverviewProjectsConcept,t.totalFinancialOverviewProjectsDefinitive]),m.createElement(F.A,null,m.createElement(G.A,null,m.createElement("span",{className:"h5 text-bold"},"Projecten"),t&&!t.definitive&&m.createElement(m.Fragment,null,m.createElement("a",{role:"button",className:"pull-right",onClick:y},m.createElement(U.Ay,{size:14,icon:Se.t})),m.createElement("br",null),m.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Je kan per administratie per jaar slechts 1 keer waardestaten aanmaken. Verwijder alleen projecten waarvan je geen waardestaat wilt verzenden. Als een waardestaat eenmaal definitief is kan je geen projecten meer toevoegen voor betreffende administratie en jaar."))),m.createElement(j.A,null,m.createElement("div",{className:"col-md-12 margin-10-top"},r&&m.createElement(Ee,{financialOverview:t,toggleShowNew:y,refreshFinancialOverviewProjects:C})),m.createElement("div",{className:"col-md-12"},m.createElement(Ce,{financialOverview:t,financialOverviewProjects:s,meta:f,isLoading:A,setShowNewFalse:function(){l(!1)},refreshFinancialOverviewProjects:C}))))};n(60739);var Pe=n(61941),Ie="financial-overview-post";var De=n(5419),Te=n.n(De),Me=n(60597);const ze=function(e){var t=e.financialOverviewPost,n=(0,m.useState)(!1),a=(0,q.A)(n,2),i=a[0],r=a[1],l=(0,m.useState)(""),c=(0,q.A)(l,2),o=c[0],s=c[1],u=(0,m.useState)(!1),d=(0,q.A)(u,2),v=d[0],f=d[1],p=(0,m.useState)(!1),w=(0,q.A)(p,2),h=w[0],E=w[1];function g(e){(function(e){var t="".concat(Ie,"/").concat(e,"/download");return(0,Pe.A)().get(t,{responseType:"blob"})})(e).then((function(e){Te()(e.data,e.headers["x-filename"])}))}return m.createElement(m.Fragment,null,m.createElement("tr",{className:"".concat(o),onDoubleClick:function(){g(t.id)},onMouseEnter:function(){return r(!0),void s("highlight-row")},onMouseLeave:function(){return r(!1),void s("")}},m.createElement("td",null,t.id),m.createElement("td",null,t.name),m.createElement("td",null,t.createdAt?N()(t.createdAt).format("L"):""),m.createElement("td",null,i?m.createElement(m.Fragment,null,m.createElement("a",{role:"button",onClick:function(){return g(t.id)}},m.createElement(U.Ay,{className:"mybtn-success",size:14,icon:Me.a})," ")):"")),v&&m.createElement(ce.A,{closeModal:function(){f(!1),E("")},title:"Fout bij opslaan",errorMessage:h}))},Le=function(e){var t=e.financialOverviewPosts,n=e.meta,a=e.isLoading,i=e.refreshFinancialOverviewPosts;return m.createElement("div",null,m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-6"},m.createElement("div",{className:"btn-group btn-group-flex",role:"group"},m.createElement(d.A,{iconName:"refresh",onClickAction:i}))),m.createElement("div",{className:"col-md-6"},m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-12"},m.createElement("div",{className:"pull-right"},"Resultaten: ",n.total||0))))),m.createElement("div",{className:"margin-10-top"},m.createElement(ee.A,null,m.createElement(te.A,null,m.createElement("tr",{className:"thead-title"},m.createElement("th",{width:"10%"},"Id"),m.createElement("th",{width:"60%"},"Naam"),m.createElement("th",{width:"20%"},"Datum"),m.createElement("th",{width:"10%"}))),m.createElement(ae.A,null,a?m.createElement("tr",null,m.createElement("td",{colSpan:4},"Bezig met gegevens laden")):t.length>0?t.map((function(e){return m.createElement(ze,{key:e.id,financialOverviewPost:e})})):m.createElement("tr",null,m.createElement("td",{colSpan:4},"Geen resultaten!"))))))},Re=function(e){var t=e.financialOverview,n=(0,m.useState)([]),a=(0,q.A)(n,2),i=a[0],r=a[1],l=(0,m.useState)({total:0}),c=(0,q.A)(l,2),o=c[0],s=c[1],u=(0,m.useState)(!0),d=(0,q.A)(u,2),v=d[0],f=d[1];function p(){var e,n;f(!0),r([]),H().all([(e=t.id,n="".concat(Ie,"/grid"),(0,Pe.A)().get(n,{params:{financialOverviewId:JSON.stringify(e)}}))]).then(H().spread((function(e){r(e.data.data),s(e.data.meta),f(!1)}))).catch((function(e){f(!1),alert("Er is iets misgegaan met ophalen van de gegevens.")}))}return(0,m.useEffect)((function(){p()}),[t.id]),m.createElement(F.A,null,m.createElement(G.A,null,m.createElement("span",{className:"h5 text-bold"},"Bestanden waardestaten post")),m.createElement(j.A,null,m.createElement("div",{className:"col-md-12"},m.createElement(Le,{financialOverviewPosts:i,meta:o,isLoading:v,refreshFinancialOverviewPosts:function(){p()}}))))};function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}var Ve=function(e){function t(e){return(0,a.A)(this,t),n=this,i=t,c=[e],i=(0,l.A)(i),(0,r.A)(n,xe()?Reflect.construct(i,c||[],(0,l.A)(n).constructor):i.apply(n,c));var n,i,c}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.financialOverview,n=e.hasError,a=e.isLoading,i="",r=!0;return n?i="Fout bij het ophalen van waardestaat.":a?i="Gegevens aan het laden.":(0,O.isEmpty)(t)?i="Geen waardestaat gevonden!":r=!1,r?m.createElement("div",null,i):m.createElement("div",null,m.createElement(Y,{financialOverview:t,callFetchFinancialOverviewDetails:this.props.callFetchFinancialOverviewDetails}),m.createElement(ke,{financialOverview:t,callFetchFinancialOverviewDetails:this.props.callFetchFinancialOverviewDetails}),m.createElement(ve,{financialOverview:t}),m.createElement(Re,{financialOverview:t}))}}])}(m.Component);Ve.propTypes={financialOverview:v.any,hasError:v.any,isLoading:v.any};const Be=Ve;var Je=n(46749);function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}var Ge=function(e){function t(e){var n,i,c,s;return(0,a.A)(this,t),i=this,c=t,s=[e],c=(0,l.A)(c),n=(0,r.A)(i,Ye()?Reflect.construct(c,s||[],(0,l.A)(i).constructor):c.apply(i,s)),(0,o.A)(n,"callFetchFinancialOverviewDetails",(function(){T.A.fetchFinancialOverviewDetails(n.props.params.id).then((function(e){n.setState({isLoading:!1,financialOverview:e.data.data})})).catch((function(e){n.setState({isLoading:!1,hasError:!0})}))})),(0,o.A)(n,"deleteFinancialOverview",(function(e){T.A.deleteFinancialOverview(e).then((function(e){n.props.navigate("/waardestaten")})).catch((function(e){n.props.setError(e.response.status,e.response.data.message)}))})),n.state={financialOverview:{},isLoading:!0,hasError:!1},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){this.callFetchFinancialOverviewDetails()}},{key:"render",value:function(){var e=this.props.administrations.map((function(e){return e.id}));if(!this.state.isLoading)return e.indexOf(this.state.financialOverview.administrationId)>-1?m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-9"},m.createElement("div",{className:"col-md-12 margin-10-top"},m.createElement(F.A,null,m.createElement(j.A,{className:"panel-small"},m.createElement(g,{financialOverview:this.state.financialOverview,deleteFinancialOverview:this.deleteFinancialOverview})))),m.createElement("div",{className:"col-md-12 margin-10-top"},m.createElement(Be,{financialOverview:this.state.financialOverview,isLoading:this.state.isLoading,hasError:this.state.hasError,callFetchFinancialOverviewDetails:this.callFetchFinancialOverviewDetails}))),m.createElement("div",{className:"col-md-3"})):m.createElement("div",{className:"row"},m.createElement("div",{className:"col-md-9 margin-10-top text-center"},"Je hebt geen recht om deze administratie in te zien. Vraag je administrator/beheerder jou toe te voegen aan deze administratie via instellingen > administraties"))}}])}(m.Component);const We=(0,A.Ng)((function(e){return{administrations:e.meDetails.administrations}}),(function(e){return{setError:function(t,n){e((0,Je.N)(t,n))}}}))((function(e){var t=(0,u.Zp)(),n=(0,u.g)();return m.createElement(Ge,(0,s.A)({},e,{navigate:t,params:n}))}))},93913:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(96540);const i=function(e){return a.createElement("tbody",null,e.children)}}}]);