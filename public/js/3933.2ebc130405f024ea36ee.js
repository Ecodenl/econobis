"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[3933],{3740:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(69265);const o={fetchFreeFieldsFields:function(e,t,n){var o="".concat(URL_API,"/api/free-fields-field/grid");return a.Z.get(o,{params:{filters:JSON.stringify(e),sorts:JSON.stringify(t),limit:n.limit,offset:n.offset}})},deleteFreeFieldsField:function(e){var t="".concat(URL_API,"/api/free-fields-field/").concat(e,"/delete");return a.Z.post(t)},newFreeFieldsField:function(e){var t="".concat(URL_API,"/api/free-fields-field");return a.Z.post(t,e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},fetchFreeFieldDetails:function(e){var t="".concat(URL_API,"/api/free-fields-field/").concat(e);return a.Z.get(t).then((function(e){return e.data.data}))},updateFreeFieldsField:function(e){return a.Z.post("".concat(URL_API,"/api/free-fields-field/").concat(e.id,"/update"),e)},fetchFilterFreeFieldsFieldsContact:function(){var e="".concat(URL_API,"/api/free-fields-field/get-for-filter/contacts");return a.Z.get(e)},fetchFilterFreeFieldsFieldsAddress:function(){var e="".concat(URL_API,"/api/free-fields-field/get-for-filter/addresses");return a.Z.get(e)},peekFreeFieldsTables:function(){var e="".concat(URL_API,"/api/free-fields-field/free-fields-tables/peek");return a.Z.get(e)},peekFreeFieldsFieldFormats:function(){var e="".concat(URL_API,"/api/free-fields-field/free-fields-field-formats/peek");return a.Z.get(e)},fetchFreeFieldsFieldRecords:function(e,t){var n="".concat(URL_API,"/api/free-fields-field-records/get-values");return a.Z.get(n,{params:{table:e,recordId:t}}).then((function(e){return e.data}))},updateFreeFieldsFieldRecords:function(e,t){var n="".concat(URL_API,"/api/free-fields-field-records/update-values");return a.Z.post(n,{data:{records:e,recordId:t}})}}},13933:(e,t,n)=>{n.r(t),n.d(t,{default:()=>De});var a=n(15671),o=n(43144),r=n(97326),s=n(60136),i=n(82963),l=n(61120),c=n(4942),d=n(67294),u=n(86706),p=n(83920),m=n(96486),h=n(30381),f=n.n(h),g=function(e,t,n,a,o,r){return{type:"FETCH_CONTACTS",filters:e,extraFilters:t,sorts:n,pagination:a,filterType:o,dataControleType:r}},y=function(){return{type:"CLEAR_CONTACTS"}},C=function(e){return{type:"SET_CHECKED_CONTACT_ALL",checkedValue:e}},F=function(e){return{type:"SET_NUMBER_FILTER",number:e}},E=function(e){return{type:"SET_TYPE_FILTER",typeId:e}},b=function(e){return{type:"SET_FULL_NAME_FILTER",fullName:e}},v=function(e){return{type:"SET_STREET_AND_NUMBER_FILTER",streetAndNumber:e}},k=function(e){return{type:"SET_POSTAL_CODE_FILTER",postalCode:e}},w=function(e){return{type:"SET_CITY_FILTER",city:e}},S=function(e){return{type:"SET_EMAIL_ADDRESS_FILTER",emailAddress:e}},T=function(e){return{type:"SET_PHONE_NUMBER_FILTER",phoneNumber:e}},N=function(e){return{type:"SET_VAT_NUMBER_FILTER",vatNumber:e}},x=function(e){return{type:"SET_CHAMBER_OF_COMMERCE_NUMBER",chamberOfCommerceNumber:e}},A=function(e){return{type:"SET_STATUS_FILTER",statusId:e}},D=function(e){return{type:"SET_CREATED_AT_FILTER",createdAt:e}},Z=function(){return{type:"CLEAR_FILTER_CONTACTS"}},O=function(e){return{type:"SET_CONTACTS_PAGINATION",pagination:e}},I=n(72506),R=n(87462),M=n(96498),_=n(75286),P=n(24480),L=n(69025),j=(n(52822),n(97894)),G=n(75495);const V=(0,u.$j)(null,(function(e){return{setContactsSortsFilter:function(t,n){e(function(e,t){return{type:"SET_CONTACTS_SORTS_FILTER",field:e,order:t}}(t,n))}}}))((function(e){(0,d.useEffect)((function(){switch(e.dataControleType){case"zelfde-email-naam":t("fullName","ASC"),t("emailAddress","ASC");break;case"zelfde-email-adres":t("streetAndNumber","ASC"),t("postalCode","ASC"),t("emailAddress","ASC");break;case"zelfde-email":t("emailAddress","ASC");break;case"zelfde-adres":t("streetAndNumber","ASC"),t("postalCode","ASC");break;case"zelfde-iban":t("iban","ASC");break;case"zelfde-btwnummer":t("vatNumber","ASC");break;case"zelfde-kvknummer":t("chamberOfCommerceNumber","ASC")}}),[e.dataControleType]);var t=function(t,n){e.setContactsSortsFilter(t,n),setTimeout((function(){e.fetchContactsData()}),100)};return d.createElement("tr",{className:"thead-title"},e.showCheckbox||e.showCheckboxMerge?d.createElement("th",{width:"3%"}):null,d.createElement(L.Z,{RowClassName:"hidden-xs",sortColumn:"number",title:"#",width:"5%",setSorts:t}),d.createElement(L.Z,{RowClassName:"hidden-xs hidden-sm",sortColumn:"typeName",title:"Type",width:"7%",setSorts:t}),d.createElement(L.Z,{sortColumn:"fullName",title:"Naam",width:"11%",setSorts:t}),d.createElement(L.Z,{RowClassName:"hidden-xs",sortColumn:"streetAndNumber",title:"Adres",width:"12%",setSorts:t}),d.createElement(L.Z,{RowClassName:"hidden-xs",sortColumn:"postalCode",title:"Postcode",width:"7%",setSorts:t}),d.createElement(L.Z,{RowClassName:"hidden-xs",sortColumn:"city",title:"Plaats",width:"10%",setSorts:t}),d.createElement(L.Z,{RowClassName:"hidden-xs",sortColumn:"emailAddress",title:"E-mail",width:"12%",setSorts:t}),d.createElement(L.Z,{sortColumn:"phoneNumber",title:"Telefoon",width:"7%",setSorts:t}),"zelfde-iban"===e.dataControleType?d.createElement("th",{width:"7%"},"IBAN",d.createElement(j.ZP,{className:"pull-right small",size:14,icon:G.D,role:"button",onClick:t.bind(void 0,"iban","ASC")})):"","zelfde-btwnummer"===e.dataControleType?d.createElement(L.Z,{sortColumn:"vatNumber",title:"BTW Nummer",width:"7%",setSorts:t}):"","zelfde-kvknummer"===e.dataControleType?d.createElement(L.Z,{sortColumn:"chamberOfCommerceNumber",title:"KVK Nummer",width:"7%",setSorts:t}):"",d.createElement(L.Z,{RowClassName:"hidden-xs hidden-sm",sortColumn:"createdAt",title:"Gemaakt op",width:"8%",setSorts:t}),d.createElement("th",{width:"3%"}))}));var H=n(38404);const U=(0,u.$j)((function(e){return{filters:e.contacts.filters,contactStatuses:e.systemData.contactStatuses,contactTypes:e.systemData.contactTypes}}),(function(e){return(0,p.DE)({setNumberFilter:F,setTypeFilter:E,setFullNameFilter:b,setStreetAndNumberFilter:v,setPostalCodeFilter:k,setCityFilter:w,setEmailAddressFilter:S,setPhoneNumberFilter:T,setStatusFilter:A,setCreatedAtFilter:D,setVatNumberFilter:N,setChamberOfCommerceNumberFilter:x},e)}))((function(e){return d.createElement("tr",{className:"thead-filter"},e.showCheckbox&&d.createElement("td",null,d.createElement("input",{type:"checkbox",value:e.checkedAllCheckboxes,onChange:e.selectAllCheckboxes})),e.showCheckboxMerge&&d.createElement("td",null),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.number.data,onChange:function(t){e.setNumberFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs hidden-sm"},d.createElement("select",{className:"form-control input-sm",value:e.filters.typeId.data,onChange:function(t){e.setTypeFilter(t.target.value),setTimeout((function(){e.onSubmitFilter()}),100)}},d.createElement("option",null),e.contactTypes.map((function(e){return d.createElement("option",{key:e.id,value:e.id},e.name)})))),d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.fullName.data,onChange:function(t){e.setFullNameFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.streetAndNumber.data,onChange:function(t){e.setStreetAndNumberFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.postalCode.data,onChange:function(t){e.setPostalCodeFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.city.data,onChange:function(t){e.setCityFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.emailAddress.data,onChange:function(t){e.setEmailAddressFilter(t.target.value)}})),d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.phoneNumber.data,onChange:function(t){e.setPhoneNumberFilter(t.target.value)}})),"zelfde-btwnummer"===e.dataControleType?d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.vatNumber.data,onChange:function(t){e.setVatNumberFilter(t.target.value)}})):"","zelfde-iban"===e.dataControleType?d.createElement("th",null):"","zelfde-kvknummer"===e.dataControleType?d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.chamberOfCommerceNumber.data,onChange:function(t){e.setChamberOfCommerceNumberFilter(t.target.value)}})):"",d.createElement(H.Z,{value:e.filters.createdAt.data&&e.filters.createdAt.data,onChangeAction:function(t){void 0===t?e.setCreatedAtFilter(""):e.setCreatedAtFilter(f()(t).format("Y-MM-DD"))}}),d.createElement("th",null))}));var z=n(61409),q=n(77320),B=n(75502);var Y=function(e){(0,s.Z)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function c(e){var t;return(0,a.Z)(this,c),(t=r.call(this,e)).state={showActionButtons:!1,highlightRow:""},t}return(0,o.Z)(c,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"setCheckedContact",value:function(e){this.props.setCheckedContact(e)}},{key:"openItem",value:function(e){z.nA.push("/contact/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.showCheckbox,a=t.showCheckboxMerge,o=t.checked,r=t.keepSelected,s=t.removeSelected,i=t.blockSelecting,l=t.id,c=t.number,u=t.typeId,p=t.typeName,m=t.fullName,h=t.streetAndNumber,g=t.postalCode,y=t.city,C=t.areaName,F=t.emailAddress,E=t.phoneNumber,b=(t.statusName,t.createdAt),v=t.permissions,k=t.iban,w=t.vatNumber,S=t.chamberOfCommerceNumber;return d.createElement("tr",{className:r?"success-row":s?"error-row":this.state.highlightRow,onDoubleClick:function(){return n||a?void 0:e.openItem(l)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},n&&d.createElement("td",null,d.createElement("input",{type:"checkbox",checked:o,onChange:function(){return e.setCheckedContact(l)}})),a&&d.createElement("td",null,!i&&d.createElement("input",{type:"checkbox",checked:o,onChange:function(){return e.setCheckedContact(l)}})),d.createElement("td",{className:"hidden-xs"},c),d.createElement("td",{className:"hidden-xs hidden-sm"},p," "),d.createElement("td",null,m),d.createElement("td",{className:"hidden-xs"},h),d.createElement("td",{className:"hidden-xs"},g),d.createElement("td",{className:"hidden-xs",title:"Buurt: "+(C||"onbekend")},y),d.createElement("td",{className:"hidden-xs"},F),d.createElement("td",null," ",E),"zelfde-iban"===this.props.dataControleType?d.createElement("td",{className:"hidden-xs"},k):"","zelfde-btwnummer"===this.props.dataControleType?d.createElement("td",{className:"hidden-xs"},w):"","zelfde-kvknummer"===this.props.dataControleType?d.createElement("td",{className:"hidden-xs"},S):"",d.createElement("td",{className:"hidden-xs hidden-sm"},f()(b).format("DD-MM-Y")),d.createElement("td",null,this.state.showActionButtons?d.createElement("a",{role:"button",onClick:function(){return e.openItem(l)}},d.createElement(j.ZP,{className:"mybtn-success",size:14,icon:B.r})):"",this.state.showActionButtons?d.createElement(d.Fragment,null,"organisation"===u&&v&&v.deleteOrganisation&&d.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,l,m)},d.createElement(j.ZP,{className:"mybtn-danger",size:14,icon:q._})),"person"===u&&v&&v.deletePerson&&d.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,l,m)},d.createElement(j.ZP,{className:"mybtn-danger",size:14,icon:q._}))):""))}}]),c}(d.Component);const K=(0,u.$j)((function(e){return{statuses:e.statuses,types:e.types,permissions:e.meDetails.permissions}}),(function(e){return{setCheckedContact:function(t){e(function(e){return{type:"SET_CHECKED_CONTACT",id:e}}(t))}}}))(Y);var W=n(41355);const $=(0,u.$j)(null,(function(e){return{deleteContact:function(t){e(function(e){return{type:"DELETE_CONTACT",id:e}}(t))}}}))((function(e){return d.createElement(W.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteContact(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},d.createElement("p",null,"Verwijder contact: ",d.createElement("strong",null," ",e.fullName," ")))}));var J=n(51910);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=function(e){(0,s.Z)(p,e);var t,n,u=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,a.Z)(this,p),t=u.call(this,e),(0,c.Z)((0,r.Z)(t),"handleKeyUp",(function(e){13===e.keyCode&&t.props.onSubmitFilter()})),(0,c.Z)((0,r.Z)(t),"showDeleteItemModal",(function(e,n){t.setState(Q(Q({},t.state),{},{showDeleteItem:!0,deleteItem:Q(Q({},t.state.deleteItem),{},{id:e,fullName:n})}))})),(0,c.Z)((0,r.Z)(t),"closeDeleteItemModal",(function(){t.setState(Q(Q({},t.state),{},{showDeleteItem:!1,deleteItem:Q(Q({},t.state.deleteItem),{},{id:"",fullName:""})}))})),t.state={showDeleteItem:!1,deleteItem:{id:"",fullName:""}},t}return(0,o.Z)(p,[{key:"render",value:function(){var e=this,t=this.props.contacts,n=t.data,a=void 0===n?[]:n,o=t.meta,r=void 0===o?{}:o,s=null,i=null,l=0;if(this.props.showCheckboxListMerge){var c=a.filter((function(e){return e.checked})).sort((function(e,t){return e.checkedAt-t.checkedAt}));s=c[0]?Number(c[0].id):null,i=c[1]?Number(c[1].id):null,a.map((function(e){return!0===e.checked&&l++}))}var u="",p=!0;return this.props.hasError?u="Fout bij het ophalen van contacten.":this.props.isLoading?u="Gegevens aan het laden.":0===a.length?u="Geen contacten gevonden!":p=!1,d.createElement("div",null,d.createElement("form",{onKeyUp:this.handleKeyUp},d.createElement(M.Z,null,d.createElement(_.Z,null,d.createElement(V,{showCheckbox:this.props.showCheckboxList,showCheckboxMerge:this.props.showCheckboxListMerge,fetchContactsData:function(){return e.props.fetchContactsData()},dataControleType:this.props.dataControleType}),d.createElement(U,{showCheckbox:this.props.showCheckboxList,showCheckboxMerge:this.props.showCheckboxListMerge,selectAllCheckboxes:function(){return e.props.selectAllCheckboxes()},onSubmitFilter:this.props.onSubmitFilter,dataControleType:this.props.dataControleType})),d.createElement(P.Z,null,p?d.createElement("tr",null,d.createElement("td",{colSpan:10},u)):a.map((function(t){return d.createElement(K,(0,R.Z)({key:t.id},t,{showCheckbox:e.props.showCheckboxList,showCheckboxMerge:e.props.showCheckboxListMerge,checkedAllCheckboxes:e.props.checkedAllCheckboxes,dataControleType:e.props.dataControleType,showDeleteItemModal:e.showDeleteItemModal,keepSelected:t.id===s,removeSelected:t.id===i,blockSelecting:t.id!==s&&t.id!==i&&2===l}))})))),d.createElement("div",{className:"col-md-6 col-md-offset-3"},d.createElement(J.Z,{onPageChangeAction:this.props.handlePageClick,totalRecords:r.total,initialPage:this.props.contactsPagination.page}))),this.state.showDeleteItem&&d.createElement($,(0,R.Z)({closeDeleteItemModal:this.closeDeleteItemModal},this.state.deleteItem)))}}]),p}(d.Component);const te=(0,u.$j)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(ee);var ne=n(55451);const ae=(0,u.$j)((function(e){return{contacts:e.contacts.list.data}}),(function(e){return{deleteSelectedContacts:function(t){e(function(e){return{type:"DELETE_SELECTED_CONTACTS",contactIds:e}}(t))}}}))((function(e){var t=function(){var t=0;return e.contacts.map((function(e){return!0===e.checked&&t++})),t};return d.createElement(W.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.toggleShowDeleteSelectedItems,confirmAction:function(){return t=[],e.contacts.map((function(e){return!0===e.checked&&t.push(e.id)})),e.deleteSelectedContacts(t),void e.toggleShowDeleteSelectedItems();var t},title:"Verwijderen"},0!==t()?d.createElement("div",null,"Verwijder de geselecteerde ",d.createElement("strong",null,t())," contacten?"):d.createElement("div",null,"Geen contacten geselecteerd."))}));var oe=n(60813),re=n(71840);var se=function(e){(0,s.Z)(p,e);var t,n,u=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,a.Z)(this,p),t=u.call(this,e),(0,c.Z)((0,r.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,o=n.name;t.setState((0,c.Z)({},o,a))})),(0,c.Z)((0,r.Z)(t),"handleSubmit",(function(e){var n=[];t.props.contacts.map((function(e){return!0===e.checked&&n.push(e.id)})),oe.Z.addManyContactsToGroup(n,t.state.groupId).then((function(e){t.props.toggleAddGroup(),z.nA.push("/contacten-in-groep/".concat(t.state.groupId))}))})),t.state={contactGroups:[],groupId:"",contactCount:0,contactIds:"",errors:{groupId:!1}},t}return(0,o.Z)(p,[{key:"componentDidMount",value:function(){var e=this;oe.Z.peekStaticContactGroups().then((function(t){e.setState({contactGroups:t})}));var t=0;this.props.contacts.map((function(e){return!0===e.checked&&t++})),this.setState({contactCount:t})}},{key:"render",value:function(){return d.createElement(W.Z,{buttonConfirmText:"Toevoegen",closeModal:this.props.toggleAddGroup,confirmAction:this.handleSubmit,title:"Contacten toevoegen aan groep"},0!==this.state.contactCount?d.createElement("div",{className:"row"},d.createElement(re.Z,{size:"col-md-12",label:"Voeg ".concat(this.state.contactCount," contact(en) toe aan groep:"),name:"groupId",options:this.state.contactGroups,value:this.state.groupId,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.groupId})):d.createElement("div",null,"Geen contacten geselecteerd."))}}]),p}(d.Component);const ie=(0,u.$j)((function(e){return{contactDetails:e.contactDetails,contacts:e.contacts.list.data}}),null)(se);var le=n(91871),ce=n(10055),de=n(93358),ue=n(29439),pe=n(72898);const me=function(e){var t=e.contacts,n=e.fetchContactsData,a=e.toggleShowMergeSelectedItems,o=(0,d.useState)(""),r=(0,ue.Z)(o,2),s=r[0],i=r[1],l=(0,d.useState)([]),c=(0,ue.Z)(l,2),u=c[0],p=c[1],m=t.data.filter((function(e){return e.checked})).sort((function(e,t){return e.checkedAt-t.checkedAt})).map((function(e){return e.id})),h=t.data.find((function(e){return e.id===Number(m[0])})),f=t.data.find((function(e){return e.id===Number(m[1])})),g=function(){var e=0;return t.data.map((function(t){return!0===t.checked&&e++})),e};return d.createElement("div",null,u.length?d.createElement(W.Z,{buttonConfirmText:"Samenvoegen",buttonClassName:"btn-danger",closeModal:a,showConfirmAction:!1,title:"Contacten samenvoegen"},d.createElement("p",null,s),d.createElement("ul",null,u.map((function(e){return d.createElement("li",null,e)})))):d.createElement(W.Z,{buttonConfirmText:"Samenvoegen",buttonClassName:"btn-danger",closeModal:a,confirmAction:function(){pe.Z.mergeContacts(m[0],m[1]).then((function(){i("Contacten zijn succesvol samengevoegd"),n(),setTimeout(a,2e3)})).catch((function(e){if(e.response&&422===e.response.status){if(e.response.data&&e.response.data.errors)e.response.data.errors.econobis&&e.response.data.errors.econobis.length&&(i("Fout bij samenvoegen contacten:"),p(e.response.data.errors.econobis));else if(e.response.data&&e.response.data.message){i("Er is iets misgegaan bij het samenvoegen contacten ("+e.response.status+").");var t=[];if(Array.isArray(e.response.data.message))for(var n=0,a=Object.entries(JSON.parse(e.response.data.message));n<a.length;n++){var o=(0,ue.Z)(a[n],2),r=(o[0],o[1]);t.push("".concat(r))}else t.push(e.response.data.message);p(t)}}else i("Er is iets misgegaan bij het samenvoegen contacten."),p(["Onbekende fout"])}))},showConfirmAction:2===g(),title:"Contacten samenvoegen"},2===g()?d.createElement("div",null,"Weet je zeker dat je deze 2 contacten wilt samenvoegen? ",d.createElement("br",null),"Gegevens worden overgenomen naar het eerst geselecteerde contact"," ",d.createElement("strong",null,h.number),", het tweede geselecteerde contact"," ",d.createElement("strong",null,f.number)," wordt verwijderd."):d.createElement("div",null,"Selecteer exact 2 contacten om te kunnen samenvoegen.")))};var he=n(96168);var fe=function(e){(0,s.Z)(p,e);var t,n,u=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,a.Z)(this,p),t=u.call(this,e),(0,c.Z)((0,r.Z)(t),"toggleShowDeleteSelectedItems",(function(){t.setState({showDeleteSelectedItems:!t.state.showDeleteSelectedItems})})),(0,c.Z)((0,r.Z)(t),"toggleShowMergeSelectedItems",(function(){t.setState({showMergeSelectedItems:!t.state.showMergeSelectedItems})})),(0,c.Z)((0,r.Z)(t),"toggleAddContactsToGroup",(function(){t.setState({showAddContactsToGroup:!t.state.showAddContactsToGroup})})),(0,c.Z)((0,r.Z)(t),"newContact",(function(){z.nA.push("/contact/nieuw")})),(0,c.Z)((0,r.Z)(t),"importContacts",(function(){z.nA.push("/contact/import")})),t.state={showDeleteSelectedItems:!1,showMergeSelectedItems:!1,showAddContactsToGroup:!1},t}return(0,o.Z)(p,[{key:"render",value:function(){var e=this.props.meDetails.permissions,t=void 0===e?{}:e,n=this.props.contacts.meta,a=void 0===n?{}:n,o=this.props,r=o.dataControleType,s=void 0!==r&&r,i=o.showCheckboxList,l=void 0!==i&&i,c=o.showCheckboxListMerge,u=void 0!==c&&c;return d.createElement(d.Fragment,null,d.createElement("div",{className:"row"},d.createElement("div",{className:"col-md-4"},d.createElement("div",{className:"btn-group",role:"group"},d.createElement(ne.Z,{iconName:"refresh",onClickAction:this.props.resetContactFilters,title:"Vernieuwen scherm"}),s||u||!(t.createPerson||t.createOrganisation||t.manageGroup)?null:d.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},d.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown",title:"Toevoegen contact of groep"},d.createElement(j.ZP,{size:14,icon:ce.P})),d.createElement("ul",{className:"dropdown-menu"},t.createPerson&&d.createElement("li",null,d.createElement(z.rU,{to:"contact/nieuw/persoon"},"Persoon")),t.createOrganisation&&d.createElement("li",null,d.createElement(z.rU,{to:"contact/nieuw/organisatie"},"Organisatie")),t.manageGroup&&d.createElement("li",null,d.createElement(z.rU,{role:"button",onClick:this.props.toggleSaveAsGroup},"Groep")))),!s&&!u&&(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&d.createElement(ne.Z,{iconName:"check",onClickAction:this.props.toggleShowCheckboxList,title:"Contactselectie maken"}),!s&&l&&t.updatePerson&&t.updateOrganisation&&t.manageGroup&&d.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},d.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown",title:"Contactselectie toevoegen aan groep"},d.createElement(j.ZP,{size:14,icon:de.B})),d.createElement("ul",{className:"dropdown-menu"},d.createElement("li",null,d.createElement("a",{role:"button",onClick:this.toggleAddContactsToGroup},"Voeg toe aan groep")))),!s&&l&&(t.deletePerson||t.deleteOrganisation)&&d.createElement(ne.Z,{iconName:"trash",onClickAction:this.toggleShowDeleteSelectedItems,title:"Verwijderen geselecteerde contacten"}),!s&&!l&&!u&&d.createElement(ne.Z,{iconName:"filter",onClickAction:this.props.toggleShowExtraFilters,title:"Contactfilters"}),!l&&!u&&t.downloadContact&&d.createElement(ne.Z,{iconName:"download",onClickAction:this.props.getCSV,title:"Downloaden contacten naar CSV"}),!s&&!l&&!u&&t.downloadContact&&d.createElement(ne.Z,{iconName:"download",onClickAction:this.props.getFreeFieldsCSV,title:"Downloaden vrije velden van contacten naar CSV"}),!s&&!l&&!u&&t.downloadContact&&d.createElement(ne.Z,{iconName:"download",onClickAction:this.props.getEnergySuppliersCSV,title:"Downloaden contacten energieleveranciers gegevens naar CSV"}),!s&&!l&&!u&&t.import&&d.createElement(ne.Z,{iconName:"upload",onClickAction:this.importContacts,title:"Importeren contacten"}),!s&&!l&&!u&&t.downloadContactConsumption&&a.useExportAddressConsumption&&d.createElement(d.Fragment,null,d.createElement("a",{role:"button",className:"btn btn-success btn-sm",onClick:this.props.getExcelAddressEnergyConsumptionElectricity,title:"Downloaden elektriciteit verbruik"},d.createElement(le.UZO,{width:"13px",height:"12px"})),d.createElement("a",{role:"button",className:"btn btn-success btn-sm",onClick:this.props.getExcelAddressEnergyConsumptionGas,title:"Downloaden gas verbruik"},d.createElement(le.NcA,{width:"13px",height:"12px"}))),!l&&(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&d.createElement(ne.Z,{iconName:"check",onClickAction:this.props.toggleShowCheckboxListMerge,title:"Contacten samenvoegen selectie"}),u&&(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&d.createElement(ne.Z,{iconName:"compress",onClickAction:this.toggleShowMergeSelectedItems,title:"Contacten samenvoegen"}))),d.createElement("div",{className:"col-md-4"},d.createElement("h3",{className:"text-center table-title"},"Contacten ",function(){if(s)switch(s){case"zelfde-email-naam":return"(met zelfde email en naam)";case"zelfde-email-adres":return"(met zelfde email en adres)";case"zelfde-email":return"(met zelfde email)";case"zelfde-adres":return"(met zelfde adres)";case"zelfde-kvknummer":return"(met zelfde kvk nummer)";case"zelfde-btwnummer":return"(met zelfde btw nummer)";case"zelfde-iban":return"(met zelfde iban)"}return""}(),s&&d.createElement(d.Fragment,null," ",d.createElement(le.DAO,{color:"blue",size:"15px","data-tip":"Hier staan de contacten die op basis van het geselecteerde criterium als dubbel zijn gevonden.  Je kan deze ontdubbelen door op het de blauwe knop met het vinkje te klikken. (Contacten samenvoegen selectie) Als je twee contacten hebt geselecteerd kan je die samenvoegen door op de blauwe knop met twee pijltjes te klikken (Contacten samenvoegen) Hiermee worden de gegevens van het contact wat groen gemarkeerd is aangevuld. Het rood gemarkeerde contact wordt verwijderd.","data-for":"tooltip-note"}),d.createElement(he.Z,{id:"tooltip-note",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})))),d.createElement("div",{className:"col-md-4"},d.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)),this.state.showDeleteSelectedItems&&d.createElement(ae,{toggleShowDeleteSelectedItems:this.toggleShowDeleteSelectedItems}),this.state.showAddContactsToGroup&&d.createElement(ie,{toggleAddGroup:this.toggleAddContactsToGroup}),this.state.showMergeSelectedItems&&d.createElement(me,{toggleShowMergeSelectedItems:this.toggleShowMergeSelectedItems,contacts:this.props.contacts,fetchContactsData:this.props.fetchContactsData})),s||l||u||!this.props.cooperationExternalUrlContacts||!this.props.cooperationExternalUrlContacts.show_external_url_for_contacts?null:d.createElement("div",{className:"row"},d.createElement("div",{className:"col-md-12",style:{marginTop:"10px"}},d.createElement(d.Fragment,null," ",d.createElement("div",{className:"btn-group",role:"group"},d.createElement("a",{role:"button",className:"btn btn-success btn-sm",href:this.props.cooperationExternalUrlContacts.external_url_contacts?this.props.cooperationExternalUrlContacts.external_url_contacts:"",title:this.props.cooperationExternalUrlContacts.external_url_contacts_button_text?this.props.cooperationExternalUrlContacts.external_url_contacts_button_text:"EXterne link",target:this.props.cooperationExternalUrlContacts.external_url_contacts_on_new_page?"_blank":"_self"},this.props.cooperationExternalUrlContacts.external_url_contacts_button_text?this.props.cooperationExternalUrlContacts.external_url_contacts_button_text:"EXterne link"))))))}}]),p}(d.Component);const ge=(0,u.$j)((function(e){return{meDetails:e.meDetails,contacts:e.contacts.list,cooperationExternalUrlContacts:e.systemData.cooperationExternalUrlContacts}}),null)(fe);var ye=n(4257),Ce=n(35823),Fe=n.n(Ce);const Ee=function(e){return d.createElement(W.Z,{buttonConfirmText:"Aanmaken",buttonClassName:"btn-success",closeModal:e.closeDeleteItemModal,confirmAction:function(){e.saveAsGroup()},title:"Groep aanmaken"},"Wilt u een groep aanmaken op basis van de huidige filters?")};var be=n(45839),ve=n(49332),ke=n(3740);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e){(0,s.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),(t=c.call(this,e)).state={filterType:e.filterType,contactType:e.contactType,amountOfFilters:e.amountOfFilters,filters:e.extraFilters,contactFreeFieldsFields:null,addressFreeFieldsFields:null,measuresToSelect:e.measures.filter((function(e){return 1===e.visible})),yesNoOptions:[{id:0,name:"Nee"},{id:1,name:"Ja"}],allNoYesOptions:[{id:0,name:"--Willekeurige waarde--"},{id:1,name:"Nee"},{id:2,name:"Ja"}]},t.fetchFilterFreeFieldsFieldsContact(),t.fetchFilterFreeFieldsFieldsAddress(),t.closeModal=t.closeModal.bind((0,r.Z)(t)),t.confirmAction=t.confirmAction.bind((0,r.Z)(t)),t.handleFilterFieldChange=t.handleFilterFieldChange.bind((0,r.Z)(t)),t.handleFilterTypeChange=t.handleFilterTypeChange.bind((0,r.Z)(t)),t.handleFilterValueChange=t.handleFilterValueChange.bind((0,r.Z)(t)),t.addFilterRow=t.addFilterRow.bind((0,r.Z)(t)),t.deleteFilterRow=t.deleteFilterRow.bind((0,r.Z)(t)),t}return(0,o.Z)(u,[{key:"fetchFilterFreeFieldsFieldsContact",value:function(){var e=this;ke.Z.fetchFilterFreeFieldsFieldsContact().then((function(t){e.setState(Se(Se({},e.state),{},{contactFreeFieldsFields:t.data.data}))}))}},{key:"fetchFilterFreeFieldsFieldsAddress",value:function(){var e=this;ke.Z.fetchFilterFreeFieldsFieldsAddress().then((function(t){e.setState(Se(Se({},e.state),{},{addressFreeFieldsFields:t.data.data}))}))}},{key:"closeModal",value:function(){this.props.toggleShowExtraFilters()}},{key:"confirmAction",value:function(){this.props.handleExtraFiltersChange(this.state.filters,this.state.amountOfFilters,this.state.filterType)}},{key:"handleFilterFieldChange",value:function(e,t){var n=this.state.filters,a=this.state.amountOfFilters;"product"!==n[t].field&&"opportunityMeasureCategory"!==n[t].field&&"intakeMeasureCategory"!==n[t].field&&"housingFileFieldName"!==n[t].field&&"contactFreeFieldsFieldName"!==n[t].field&&"addressFreeFieldsFieldName"!==n[t].field&&"addressDongleTypeReadOut"!==n[t].field||(delete(n=n.filter((function(e){return e.connectedTo!==n[t].connectName})))[t].connectName,a=n.length),"product"===e?(n[t]={field:"product",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"dateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"dateFinish",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"orderStatus",type:"eq",data:"",connectedTo:e+t}),a=n.length):"opportunityMeasureCategory"===e?(n[t]={field:"opportunityMeasureCategory",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"opportunityStatus",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"opportunityMeasure",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"opportunityEvaluationRealised",type:"eq",data:"",connectedTo:e+t}),n.splice(t+4,0,{field:"opportunityCampaign",type:"eq",data:"",connectedTo:e+t}),a=n.length):"intakeMeasureCategory"===e?(n[t]={field:"intakeMeasureCategory",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"intakeDateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"intakeDateFinish",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"intakeStatus",type:"eq",data:"",connectedTo:e+t}),a=n.length):"housingFileFieldName"===e?(n[t]={field:"housingFileFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"housingFileFieldValue",type:"eq",data:"",connectedTo:e+t,housingFileField:""}),a=n.length):"contactFreeFieldsFieldName"===e?(n[t]={field:"contactFreeFieldsFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"contactFreeFieldsFieldValue",type:"eq",data:"",connectedTo:e+t,freeFieldFormatType:""}),a=n.length):"addressFreeFieldsFieldName"===e?(n[t]={field:"addressFreeFieldsFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"addressFreeFieldsFieldValue",type:"eq",data:"",connectedTo:e+t,freeFieldFormatType:""}),a=n.length):"addressDongleTypeReadOut"===e?(n[t]={field:"addressDongleTypeReadOut",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"addressDongleTypeDongle",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"addressDongleDateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"addressDongleDateEnd",type:"eq",data:"",connectedTo:e+t}),n.splice(t+4,0,{field:"addressDongleHasEnergyId",type:"eq",data:"",connectedTo:e+t}),a=n.length):(n[t].field=e,n[t].data=""),this.setState(Se(Se({},this.state),{},{filters:n,amountOfFilters:a}))}},{key:"handleFilterTypeChange",value:function(e){this.setState(Se(Se({},this.state),{},{filterType:e}))}},{key:"handleFilterValueChange",value:function(e,t,n){var a=this.state.filters;if(a[n][e]=t,"housingFileFieldName"===a[n].field&&a[n].data){var o=this.props.housingFileHoomLinks.find((function(e){return e.key===Number(a[n].data)}));if(o){var r=a[n].connectName;a.map((function(e){return e.connectedTo===r&&(e.data="",e.type="eq",e.housingFileField=o.externalHoomShortName),e}))}}if("contactFreeFieldsFieldName"===a[n].field){var s="";if(a[n].data){var i=this.state.contactFreeFieldsFields.find((function(e){return e.id===Number(a[n].data)}));i&&(s=i.formatType)}var l=a[n].connectName;a.map((function(e){return e.connectedTo===l&&(e.data="",e.type="eq",e.freeFieldFormatType=s),e}))}if("addressFreeFieldsFieldName"===a[n].field){var c="";if(a[n].data){var d=this.state.addressFreeFieldsFields.find((function(e){return e.id===Number(a[n].data)}));d&&(c=d.formatType)}var u=a[n].connectName;a.map((function(e){return e.connectedTo===u&&(e.data="",e.type="eq",e.freeFieldFormatType=c),e}))}var p=this.state.measuresToSelect;"opportunityMeasureCategory"===a[n].field&&(p=a[n].data?this.props.measures.filter((function(e){return 1===e.visible&&e.measureCategoryId==a[n].data})):this.props.measures.filter((function(e){return 1===e.visible}))),this.setState(Se(Se({},this.state),{},{filters:a,measuresToSelect:p}))}},{key:"addFilterRow",value:function(){var e=this,t=this.state.filters;t[this.state.amountOfFilters]={field:"name",type:"eq",data:""},setTimeout((function(){e.setState(Se(Se({},e.state),{},{filters:t}))}),300),setTimeout((function(){e.setState({amountOfFilters:e.state.amountOfFilters+1})}),300)}},{key:"deleteFilterRow",value:function(e){var t=this.state.filters;"product"!==t[e].field&&"opportunityMeasureCategory"!==t[e].field&&"intakeMeasureCategory"!==t[e].field&&"housingFileFieldName"!==t[e].field&&"contactFreeFieldsFieldName"!==t[e].field&&"addressFreeFieldsFieldName"!==t[e].field||(t=t.filter((function(n){return n.connectedTo!==t[e].connectName}))),t.splice(e,1),this.setState(Se(Se({},this.state),{},{filters:t,amountOfFilters:t.length}))}},{key:"render",value:function(){var e=this,t={name:{name:"Naam",type:"stringWithoutNull"},postalCode:{name:"Postcode",type:"numberOrString"},sharedArea:{name:"Buurt",type:"searchWithAsync"},city:{name:"Woonplaats",type:"stringWithoutNull"},country:{name:"Land",type:"dropdown",dropDownOptions:this.props.countries},hasEmailAddress:{name:"Heeft emailadres",type:"boolean",dropDownOptions:this.state.yesNoOptions},hasPhoneNumber:{name:"Heeft telefoonnummer",type:"boolean",dropDownOptions:this.state.yesNoOptions},dateOfBirth:{name:"Geboortedatum",type:"date"},createdAt:{name:"Gemaakt op",type:"date"},staticContactGroup:{name:"Statische groep",type:"dropdownHas",dropDownOptions:this.props.staticContactGroups},occupation:{name:"Verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},occupationPrimary:{name:"Primaire verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},campaign:{name:"Campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns},intakeMeasureCategory:{name:"Intake interesse",type:"dropdownHas",dropDownOptions:this.props.measureCategories},opportunityMeasureCategory:{name:"Kans maatregel categorie",type:"dropdownHas",dropDownOptions:this.props.measureCategories},quotationRequestStatusOrganisationOrCoach:{name:"Kansactie status (org/coach)",type:"dropdownHas",dropDownOptions:this.props.quotationRequestStatus},quotationRequestStatusOccupant:{name:"Kansactie status (bewoner)",type:"dropdownHas",dropDownOptions:this.props.quotationRequestStatus},housingFileExists:{name:"Woningdossier aanwezig",type:"boolean",dropDownOptions:this.state.yesNoOptions},housingFileFieldName:{name:"Woningdossier kenmerk",type:"dropdownHousingFileFields",dropDownOptions:this.props.housingFileHoomLinks},hoomdossierExists:{name:"Hoomdossier aangemaakt",type:"boolean",dropDownOptions:this.state.yesNoOptions},contactFreeFieldsFieldName:{name:"Vrij veld contact",type:"dropdownFreeFieldsFields",dropDownOptions:this.state.contactFreeFieldsFields?this.state.contactFreeFieldsFields:[]},addressFreeFieldsFieldName:{name:"Vrij veld adres",type:"dropdownFreeFieldsFields",dropDownOptions:this.state.addressFreeFieldsFields?this.state.addressFreeFieldsFields:[]},product:{name:"Product",type:"dropdownHas",dropDownOptions:this.props.products},energySupplier:{name:"Huidige Energie leverancier",type:"dropdown",dropDownOptions:this.props.energySuppliers},energySupplierType:{name:"Type huidige energie leverancier",type:"dropdownHas",dropDownOptions:this.props.energySupplierTypes},currentObligations:{name:"Huidig aantal obligaties",type:"number"},currentParticipations:{name:"Huidig aantal participaties",type:"number"},currentPostalcodeLinkCapital:{name:"Huidig aantal postcoderoos",type:"number"},currentLoan:{name:"Huidig bedrag lening",type:"number"},portalUser:{name:"Portal gebruiker actief",type:"boolean",dropDownOptions:this.state.yesNoOptions},inspectionPersonType:{name:"Rol in buurtaanpak",type:"dropdownHas",dropDownOptions:this.props.inspectionPersonTypes},didAgreeAvg:{name:"Akkoord privacybeleid",type:"boolean",dropDownOptions:this.state.yesNoOptions},addressDongleTypeReadOut:{name:"Dongel type uitlezing",type:"dropdownHas",dropDownOptions:this.props.typesReadOut}},n={dateStart:{name:"Begin datum",type:"date"},dateFinish:{name:"Eind datum",type:"date"},orderStatus:{name:"Order status",type:"dropdownHas",dropDownOptions:this.props.orderStatuses}},a={opportunityStatus:{name:"Kans status",type:"dropdownHas",dropDownOptions:this.props.opportunityStatus},opportunityMeasure:{name:"Kans maatregel specifiek",type:"dropdownHas",dropDownOptions:this.state.measuresToSelect},opportunityEvaluationRealised:{name:"Kans status evaluatie uitgevoerd",type:"dropdownHas",dropDownOptions:this.props.opportunityEvaluationStatuses},opportunityCampaign:{name:"Kans campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns}},o={intakeDateStart:{name:"Begin datum",type:"date"},intakeDateFinish:{name:"Eind datum",type:"date"},intakeStatus:{name:"Intake status",type:"dropdownHas",dropDownOptions:this.props.intakeStatuses}},r={housingFileFieldValue:{name:"Status/waarde",type:"housingFileFieldValue"}},s={contactFreeFieldsFieldValue:{name:"Status/waarde",type:"contactFreeFieldsFieldValue"}},i={addressFreeFieldsFieldValue:{name:"Status/waarde",type:"addressFreeFieldsFieldValue"}},l={addressDongleTypeDongle:{name:"Type dongel",type:"dropdownHas",dropDownOptions:this.props.typesDongle},addressDongleDateStart:{name:"Start datum",type:"date"},addressDongleDateEnd:{name:"Eind datum",type:"date"},addressDongleHasEnergyId:{name:"Heeft energie ID koppeling",type:"allNoYes",dropDownOptions:this.state.allNoYesOptions}};return d.createElement(W.Z,{title:"Extra filters",modalClassName:"modal-dialog-70vw",modalBodyClassName:"scrollable-modal-body",buttonConfirmText:"Toepassen",confirmAction:this.confirmAction,closeModal:this.closeModal,buttonCancelText:"Sluiten",extraButtonLabel:"Maak groep",extraButtonClass:"btn-success",extraButtonAction:this.props.saveAsGroup},d.createElement("div",{className:"row filter-row"},d.createElement("h5",null,d.createElement("div",{className:"col-xs-6"},d.createElement("input",{onChange:function(){return e.handleFilterTypeChange("and")},type:"radio",name:"type",value:"and",id:"and",checked:"and"===this.state.filterType}),d.createElement("label",{htmlFor:"and"},'Alle extra filters zijn "EN"')),d.createElement("div",{className:"col-xs-6"},d.createElement("input",{onChange:function(){return e.handleFilterTypeChange("or")},type:"radio",name:"type",value:"or",id:"or",checked:"or"===this.state.filterType}),d.createElement("label",{htmlFor:"or"},'Alle extra filters zijn "OF"')))),d.createElement("table",{className:"table"},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",{className:"col-md-4"},"Zoekveld"),d.createElement("th",{className:"col-md-3"}),d.createElement("th",{className:"col-md-4"},"Waarde"),d.createElement("th",{className:"col-md-1"}))),d.createElement("tbody",null,0===this.state.filters.length?d.createElement("tr",null,d.createElement("td",{colSpan:4},"Geen filters gezet.")):this.state.filters.map((function(c,u){return d.createElement(be.Z,{key:u,filter:c,filterNumber:u,fields:Se(Se(Se(Se(Se(Se(Se(Se({},t),n),a),o),r),s),i),l),handleFilterFieldChange:e.handleFilterFieldChange,deleteFilterRow:e.deleteFilterRow,handleFilterValueChange:e.handleFilterValueChange,contactType:e.state.contactType})})))),d.createElement("div",{className:"row"},d.createElement("div",{className:"col-xs-12 text-right"},d.createElement(ve.Z,{buttonText:"Extra filter",onClickAction:this.addFilterRow}))))}}]),u}(d.Component);const Ne=(0,u.$j)((function(e){return{contactStatuses:e.systemData.contactStatuses,staticContactGroups:e.systemData.staticContactGroups,primaryOccupations:e.systemData.primaryOccupations,measureCategories:e.systemData.measureCategories,measures:e.systemData.measures,opportunityStatus:e.systemData.opportunityStatus,opportunityEvaluationStatuses:e.systemData.opportunityEvaluationStatuses,intakeStatuses:e.systemData.intakeStatuses,products:e.systemData.products,energySuppliers:e.systemData.energySuppliers,energySupplierTypes:e.systemData.energySupplierTypes,countries:e.systemData.countries,orderStatuses:e.systemData.orderStatuses,quotationRequestStatus:e.systemData.quotationRequestStatus,inspectionPersonTypes:e.systemData.inspectionPersonTypes,housingFileHoomLinks:e.systemData.housingFileHoomLinks,typesReadOut:e.systemData.dongleTypeReadOuts,typesDongle:e.systemData.dongleTypeDongles}}))(Te);var xe=n(55359);f().locale("nl");var Ae=function(e){(0,s.Z)(p,e);var t,n,u=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,a.Z)(this,p),t=u.call(this,e),(0,c.Z)((0,r.Z)(t),"fetchContactsData",(function(){setTimeout((function(){var e=t.state,n=e.extraFilters,a=e.filterType,o=e.dataControleType,r=(0,ye.Z)(t.props.contactsFilters),s=t.props.contactsSorts,i={limit:20,offset:t.props.contactsPagination.offset};t.props.fetchContacts(r,n,s,i,a,o)}),100)})),(0,c.Z)((0,r.Z)(t),"saveAsGroup",(function(){var e=t.state,n=e.extraFilters,a=e.filterType,o=(0,ye.Z)(t.props.contactsFilters);pe.Z.saveAsGroup({filters:o,extraFilters:n,filterType:a}).then((function(e){z.nA.push("/contact-groep/".concat(e.data.data.id,"/edit"))}))})),(0,c.Z)((0,r.Z)(t),"toggleSaveAsGroup",(function(){t.setState((function(e){return{showSaveAsGroup:!e.showSaveAsGroup}}))})),(0,c.Z)((0,r.Z)(t),"getCSV",(function(){t.props.blockUI(),setTimeout((function(){var e=t.state,n=e.extraFilters,a=e.filterType,o=e.dataControleType,r=(0,ye.Z)(t.props.contactsFilters),s=t.props.contactsSorts;pe.Z.getCSV({filters:r,extraFilters:n,sorts:s,filterType:a,dataControleType:o}).then((function(e){Fe()(e.data,"Contacten-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".csv")),t.props.unblockUI()})).catch((function(){t.props.unblockUI()}))}),100)})),(0,c.Z)((0,r.Z)(t),"getFreeFieldsCSV",(function(){t.props.blockUI(),setTimeout((function(){var e=t.state,n=e.extraFilters,a=e.filterType,o=(0,ye.Z)(t.props.contactsFilters),r=t.props.contactsSorts;pe.Z.getFreeFieldsCSV({filters:o,extraFilters:n,sorts:r,filterType:a}).then((function(e){Fe()(e.data,"Contacten-Vrije-Velden-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".csv")),t.props.unblockUI()})).catch((function(){t.props.unblockUI()}))}),100)})),(0,c.Z)((0,r.Z)(t),"getEnergySuppliersCSV",(function(){t.props.blockUI(),setTimeout((function(){var e=t.state,n=e.extraFilters,a=e.filterType,o=(0,ye.Z)(t.props.contactsFilters),r=t.props.contactsSorts;pe.Z.getEnergySuppliersCSV({filters:o,extraFilters:n,sorts:r,filterType:a}).then((function(e){Fe()(e.data,"Contacten-energieleveranciers-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".csv")),t.props.unblockUI()})).catch((function(){t.props.unblockUI()}))}),100)})),(0,c.Z)((0,r.Z)(t),"getExcelAddressEnergyConsumptionGas",(function(){t.props.blockUI(),setTimeout((function(){for(var e=1e4,n=Math.ceil(t.props.contacts.meta.total/e),a=t.props.contacts.meta.total>e,o=1,r=1;r<=n;r++){var s={limit:e,offset:r*e-e},i=t.state.extraFilters,l=(0,ye.Z)(t.props.contactsFilters),c=t.props.contactsSorts;pe.Z.getExcelAddressEnergyConsumptionGas({filters:l,extraFilters:i,sorts:c,pagination:s}).then((function(e){var r=a?"Contacten-verbruik-gas-".concat(f()().format("YYYY-MM-DD HH:mm:ss")," (").concat(o," van ").concat(n,").xlsx"):"Contacten-verbruik-gas-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".xlsx");Fe()(e.data,r),o++,t.props.unblockUI()})).catch((function(){t.props.unblockUI()}))}}),100)})),(0,c.Z)((0,r.Z)(t),"getExcelAddressEnergyConsumptionElectricity",(function(){t.props.blockUI(),setTimeout((function(){for(var e=1e4,n=Math.ceil(t.props.contacts.meta.total/e),a=t.props.contacts.meta.total>e,o=1,r=1;r<=n;r++){var s={limit:e,offset:r*e-e},i=t.state.extraFilters,l=(0,ye.Z)(t.props.contactsFilters),c=t.props.contactsSorts;pe.Z.getExcelAddressEnergyConsumptionElectricity({filters:l,extraFilters:i,sorts:c,pagination:s}).then((function(e){var r=a?"Contacten-verbruik-elektriciteit-".concat(f()().format("YYYY-MM-DD HH:mm:ss")," (").concat(o," van ").concat(n,").xlsx"):"Contacten-verbruik-elektriciteit-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".xlsx");Fe()(e.data,r),o++,t.props.unblockUI()})).catch((function(){t.props.unblockUI()}))}}),100)})),(0,c.Z)((0,r.Z)(t),"resetContactFilters",(function(){t.props.clearFilterContacts(),t.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),t.fetchContactsData()})),(0,c.Z)((0,r.Z)(t),"onSubmitFilter",(function(){t.props.clearContacts(),t.props.setContactsPagination({page:0,offset:0}),t.fetchContactsData()})),(0,c.Z)((0,r.Z)(t),"toggleShowCheckboxList",(function(){t.setState((function(e){return{showCheckboxList:!e.showCheckboxList}}))})),(0,c.Z)((0,r.Z)(t),"toggleShowCheckboxListMerge",(function(){t.setState((function(e){return{showCheckboxListMerge:!e.showCheckboxListMerge}}))})),(0,c.Z)((0,r.Z)(t),"selectAllCheckboxes",(function(){t.setState((function(e){return{checkedAllCheckboxes:!e.checkedAllCheckboxes}})),t.props.setCheckedContactAll(!t.state.checkedAllCheckboxes)})),(0,c.Z)((0,r.Z)(t),"prefillExtraFilter",(function(){t.setState({filterType:"and",amountOfFilters:1,extraFilters:[{field:"name",type:"eq",data:""}]})})),(0,c.Z)((0,r.Z)(t),"toggleShowExtraFilters",(function(){0!==t.state.extraFilters.length||t.state.showExtraFilters||t.prefillExtraFilter(),t.setState((function(e){return{showExtraFilters:!e.showExtraFilters}}))})),t.state={campaigns:"",showCheckboxList:!1,showCheckboxListMerge:!1,checkedAllCheckboxes:!1,showSaveAsGroup:!1,showExtraFilters:!1,filterType:"and",dataControleType:"",amountOfFilters:0,extraFilters:[]},t.handlePageClick=t.handlePageClick.bind((0,r.Z)(t)),t.handleExtraFiltersChange=t.handleExtraFiltersChange.bind((0,r.Z)(t)),t.getCSV=t.getCSV.bind((0,r.Z)(t)),t.getFreeFieldsCSV=t.getFreeFieldsCSV.bind((0,r.Z)(t)),t.getEnergySuppliersCSV=t.getEnergySuppliersCSV.bind((0,r.Z)(t)),t.toggleShowExtraFilters=t.toggleShowExtraFilters.bind((0,r.Z)(t)),t.getDataControleType=t.getDataControleType.bind((0,r.Z)(t)),t}return(0,o.Z)(p,[{key:"getDataControleType",value:function(e){return e&&"data-controle"===e.filter?e.value:""}},{key:"componentDidMount",value:function(){var e=this;if((0,m.isEmpty)(this.props.params))this.props.clearFilterContacts(),this.setState({filterType:"and",dataControleType:""});else switch(this.props.params.filter){case"type":this.props.clearFilterContacts(),this.props.setTypeFilter(this.props.params.value);break;case"data-controle":this.setState({dataControleType:this.getDataControleType(this.props.params)})}this.fetchContactsData(),xe.Z.peekNotFinishedCampaigns().then((function(t){e.setState({campaigns:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.params.value!==e.params.value){if(this.props.clearFilterContacts(),this.setState({filterType:"and",dataControleType:""}),!(0,m.isEmpty)(this.props.params))switch(this.props.params.filter){case"type":this.props.setTypeFilter(this.props.params.value);break;case"data-controle":this.setState({dataControleType:this.getDataControleType(this.props.params)})}setTimeout((function(){t.fetchContactsData()}),100)}}},{key:"componentWillUnmount",value:function(){this.props.clearContacts()}},{key:"handlePageClick",value:function(e){var t=e.selected,n=Math.ceil(20*t);this.props.setContactsPagination({page:t,offset:n}),this.fetchContactsData()}},{key:"handleExtraFiltersChange",value:function(e,t,n){var a=this;this.setState({filterType:n,amountOfFilters:t,extraFilters:e}),this.props.setContactsPagination({page:0,offset:0}),setTimeout((function(){a.fetchContactsData()}),100)}},{key:"render",value:function(){return d.createElement("div",null,d.createElement("div",{className:"panel panel-default"},d.createElement("div",{className:"panel-body"},d.createElement("div",{className:"col-md-12 margin-10-top"},d.createElement(ge,{dataControleType:this.state.dataControleType,showCheckboxList:this.state.showCheckboxList,showCheckboxListMerge:this.state.showCheckboxListMerge,toggleShowCheckboxList:this.toggleShowCheckboxList,toggleShowCheckboxListMerge:this.toggleShowCheckboxListMerge,resetContactFilters:this.resetContactFilters,selectAllCheckboxes:this.selectAllCheckboxes,checkedAllCheckboxes:this.state.checkedAllCheckboxes,getCSV:this.getCSV,getFreeFieldsCSV:this.getFreeFieldsCSV,getEnergySuppliersCSV:this.getEnergySuppliersCSV,getExcelAddressEnergyConsumptionGas:this.getExcelAddressEnergyConsumptionGas,getExcelAddressEnergyConsumptionElectricity:this.getExcelAddressEnergyConsumptionElectricity,toggleSaveAsGroup:this.toggleSaveAsGroup,saveAsGroup:this.saveAsGroup,toggleShowExtraFilters:this.toggleShowExtraFilters,fetchContactsData:this.fetchContactsData})),d.createElement("div",{className:"col-md-12 margin-10-top"},d.createElement(te,{dataControleType:this.state.dataControleType,contacts:this.props.contacts,contactsPagination:this.props.contactsPagination,showCheckboxList:this.state.showCheckboxList,showCheckboxListMerge:this.state.showCheckboxListMerge,selectAllCheckboxes:this.selectAllCheckboxes,checkedAllCheckboxes:this.state.checkedAllCheckboxes,onSubmitFilter:this.onSubmitFilter,fetchContactsData:this.fetchContactsData,handlePageClick:this.handlePageClick})))),this.state.showSaveAsGroup&&d.createElement(Ee,{saveAsGroup:this.saveAsGroup,closeDeleteItemModal:this.toggleSaveAsGroup}),this.state.showExtraFilters&&d.createElement(Ne,{campaigns:this.state.campaigns,saveAsGroup:this.saveAsGroup,filterType:this.state.filterType,toggleShowExtraFilters:this.toggleShowExtraFilters,handleExtraFiltersChange:this.handleExtraFiltersChange,contactType:this.props.contactsFilters.typeId.data,extraFilters:this.state.extraFilters,amountOfFilters:this.state.amountOfFilters}))}}]),p}(d.Component);const De=(0,u.$j)((function(e){return{contacts:e.contacts.list,contactsFilters:e.contacts.filters,contactsSorts:e.contacts.sorts,contactsPagination:e.contacts.pagination}}),(function(e){return(0,p.DE)({fetchContacts:g,clearContacts:y,setCheckedContactAll:C,setTypeFilter:E,clearFilterContacts:Z,setContactsPagination:O,blockUI:I.Q,unblockUI:I.e},e)}))(Ae)}}]);