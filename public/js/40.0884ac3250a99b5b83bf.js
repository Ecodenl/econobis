(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1160:function(e,t,a){"use strict";var n=a(18),r=a.n(n),o=a(19),i=a.n(o),s=a(20),l=a.n(s),c=a(21),u=a.n(c),d=a(14),m=a.n(d),p=a(0),h=a.n(p),f=a(5),g=a.n(f),b=(a(935),a(936),a(937),a(938),a(939),a(940),a(941),a(942),a(943),a(944),a(945),a(946),a(961)),v=a(235);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}var O=function(e){l()(a,e);var t=y(a);function a(){return r()(this,a),t.apply(this,arguments)}return i()(a,[{key:"componentDidUpdate",value:function(e){if(this.props.value!==e.value){var t=window.tinymce.EditorManager.get("tinyMCEUpdateable");this.props.value&&!Object(v.isEqual)(t.getContent({format:"raw"}),this.props.value)&&(t.setContent(this.props.value),t.selection.select(t.getBody(),!0),t.selection.collapse(!1))}}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.value,n=e.onChangeAction;return h.a.createElement("div",null,h.a.createElement("div",{className:"col-sm-3"},h.a.createElement("label",{htmlFor:"quotationText",className:"col-sm-12"},t)),h.a.createElement("div",{className:"col-sm-9"},h.a.createElement(b.a,{id:"tinyMCEUpdateable",initialValue:a,init:{skin:!1,content_css:!1,branding:!1,language:"nl",menubar:!1,plugins:"paste lists advlist link image code table pagebreak",toolbar:"undo redo | formatselect fontselect | bold italic forecolor | alignleft aligncenter alignright | pagebreak | bullist numlist outdent indent | table | link image | code",contextmenu:!1,height:"300",browser_spellcheck:!0,font_formats:"Courier New=courier new;Tahoma=tahoma;Times New Roman=times new roman;Verdana=verdana;"},onChange:n})))}}]),a}(p.Component);O.defaultProps={value:"",errorMessage:""},O.propTypes={label:g.a.string.isRequired,type:g.a.string,id:g.a.string,placeholder:g.a.string,value:g.a.string,onChangeAction:g.a.func},t.a=O},1581:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a.n(n),o=a(18),i=a.n(o),s=a(19),l=a.n(s),c=a(12),u=a.n(c),d=a(20),m=a.n(d),p=a(21),h=a.n(p),f=a(14),g=a.n(f),b=a(6),v=a.n(b),y=a(0),O=a.n(y),E=a(3),w=a(31),A=a.n(w),N=a(16),S=Object(N.b)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.attachment.name;return O.a.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},O.a.createElement("div",{className:"col-sm-11"},t),O.a.createElement("div",{className:"col-sm-1"},e.showActionButtons?O.a.createElement("a",{role:"button",onClick:e.toggleDelete},O.a.createElement("span",{className:"glyphicon glyphicon-trash mybtn-danger"})," "):""))})),I=a(41),j=(a(879),function(e){return O.a.createElement(I.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.toggleDelete,confirmAction:function(){return e.deleteAttachment(e.attachment.name),void e.toggleDelete()},title:"Verwijderen"},O.a.createElement("p",null,"Wil je deze bijlage verwijderen?"))});function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=g()(e);if(t){var r=g()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var k=function(e){m()(a,e);var t=C(a);function a(e){var n;return i()(this,a),n=t.call(this,e),v()(u()(n),"onLineEnter",(function(){n.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),v()(u()(n),"onLineLeave",(function(){n.setState({showActionButtons:!1,highlightLine:""})})),v()(u()(n),"toggleDelete",(function(){n.setState({showDelete:!n.state.showDelete})})),n.state={showActionButtons:!1,highlightLine:"",showDelete:!1},n}return l()(a,[{key:"render",value:function(){return O.a.createElement("div",null,O.a.createElement(S,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,toggleDelete:this.toggleDelete,attachment:this.props.attachment}),this.state.showDelete&&O.a.createElement(j,{toggleDelete:this.toggleDelete,attachment:this.props.attachment,deleteAttachment:this.props.deleteAttachment}))}}]),a}(y.Component),D=function(e){var t=e.attachments,a=e.deleteAttachment;return O.a.createElement("div",null,O.a.createElement("div",{className:"row border header"},O.a.createElement("div",{className:"col-sm-11"},"Bestand"),O.a.createElement("div",{className:"col-sm-1"})),t.length>0?t.map((function(e){return O.a.createElement(k,{key:e.name,attachment:e,deleteAttachment:a})})):O.a.createElement("div",null,"Geen bijlagen bekend."))};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=g()(e);if(t){var r=g()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var L=a(884).default,P=function(e){m()(a,e);var t=T(a);function a(e){var n;return i()(this,a),(n=t.call(this,e)).state={error:!1,errorMaxSize:!1},n}return l()(a,[{key:"onDropAccepted",value:function(e){var t=this;this.props.addAttachment(e),setTimeout((function(){t.props.toggleShowNew()}),500)}},{key:"onDropRejected",value:function(){this.setState({errorMaxSize:!0})}},{key:"render",value:function(){return O.a.createElement(I.a,{closeModal:this.props.toggleShowNew,showConfirmAction:!1,title:"Upload bestand"},O.a.createElement("div",{className:"upload-file-content"},O.a.createElement(L,{className:"dropzone",onDropAccepted:this.onDropAccepted.bind(this),onDropRejected:this.onDropRejected.bind(this),maxSize:21495808},O.a.createElement("p",null,"Klik hier voor het uploaden van een bestand"),O.a.createElement("p",null,O.a.createElement("strong",null,"of")," sleep het bestand hierheen"))),this.state.error&&O.a.createElement("p",{className:"has-error-message"},"Uploaden mislukt. Probeer nogmaals een bestand te uploaden."),this.state.errorMaxSize&&O.a.createElement("p",{className:"has-error-message"},"Uploaden mislukt. Het bestand mag maximaal 20MB groot zijn."))}}]),a}(y.Component),R=a(33),B=a(46),x=a(30),M=a(815),q=a.n(M),V=a(459),z=a(843);var G=function(e){var t=Object(y.useState)([]),a=q()(t,2),n=a[0],r=a[1],o=Object(y.useState)([]),i=q()(o,2),s=i[0],l=i[1];return Object(y.useEffect)((function(){V.a.fetchDocumentsPeek().then((function(e){r(e)}))}),[]),O.a.createElement(I.a,{buttonConfirmText:"Toevoegen als bijlage",closeModal:e.toggleSelectDocument,confirmAction:function(){s&&(s.forEach((function(t){return e.addDocumentAsAttachment(t.id)})),e.toggleSelectDocument())},title:"Selecteer document(en)"},O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-sm-12"},O.a.createElement(z.a,{label:"Document(en)",name:"documentIds",value:s,onChangeAction:function(e){l(e)},options:n,optionId:"id",optionName:"filename",placeholder:"",size:"col-sm-9"}))))};function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=g()(e);if(t){var r=g()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var F=function(e){m()(a,e);var t=_(a);function a(e){var n;return i()(this,a),n=t.call(this,e),v()(u()(n),"toggleShowNew",(function(){n.setState({showNew:!n.state.showNew})})),v()(u()(n),"toggleSelectDocument",(function(){n.setState({selectDocument:!n.state.selectDocument})})),n.state={showNew:!1,selectDocument:!1},n}return l()(a,[{key:"render",value:function(){return O.a.createElement(x.a,null,O.a.createElement(B.a,null,O.a.createElement("span",{className:"h5 text-bold"},"Bijlagen"),O.a.createElement("div",{className:"nav navbar-nav btn-group pull-right",role:"group"},O.a.createElement("button",{className:"btn btn-link","data-toggle":"dropdown"},O.a.createElement("span",{className:"glyphicon glyphicon-plus"})),O.a.createElement("ul",{className:"dropdown-menu"},O.a.createElement("li",null,O.a.createElement("a",{className:"btn",onClick:this.toggleSelectDocument},"Kies een document")),O.a.createElement("li",null,O.a.createElement("a",{className:"btn",onClick:this.toggleShowNew},"Upload bijlage"))))),O.a.createElement(R.a,null,O.a.createElement("div",{className:"col-md-12"},O.a.createElement(D,{attachments:this.props.attachments,deleteAttachment:this.props.deleteAttachment})),O.a.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&O.a.createElement(P,{toggleShowNew:this.toggleShowNew,addAttachment:this.props.addAttachment}),this.state.selectDocument&&O.a.createElement(G,{toggleSelectDocument:this.toggleSelectDocument,addDocumentAsAttachment:this.props.addDocumentAsAttachment}))))}}]),a}(y.Component),U=Object(N.b)((function(e){return{permissions:e.meDetails.permissions}}))(F),W=a(848),X=a.n(W),H=a(4),J=a.n(H),K=a(1160),Q=a(37),Y=a(5),Z=a(247),$=a(903),ee=a(883);function te(e){var t=Object(y.useState)(""),a=q()(t,2),n=a[0],r=a[1],o=Object(y.useState)(!1),i=q()(o,2),s=i[0],l=i[1],c=Object(y.useState)([]),u=q()(c,2),d=u[0],m=u[1],p=Object(y.useState)([]),h=q()(p,2),f=h[0],g=h[1],b=Object(y.useState)([]),v=q()(b,2),E=v[0],w=v[1],A=Object(y.useState)(!1),N=q()(A,2),S=N[0],I=N[1],j=Object(y.useState)(!1),C=q()(j,2),k=C[0],D=C[1],T=e.email,L=e.contactGroupName,P=e.emailAddressesToSelected,B=e.emailAddressesCcSelected,M=e.emailAddressesBccSelected,V=e.mailboxAddresses,z=e.emailTemplates,G=e.errors,_=e.handleFromIds,F=e.handleToIds,U=e.handleEmailTemplates,W=e.handleCcIds,H=e.handleBccIds,Y=e.handleInputChange,te=e.handleTextChange,ae=T.from,ne=T.to,re=T.cc,oe=T.bcc,ie=T.subject,se=T.htmlBody,le=T.emailTemplateId,ce=T.contactGroupId;Object(y.useEffect)((function(){m(function(){var e=[];e=Array.isArray(ne)?ne:ne.split(",");var t=[],a=!1;e.map((function(e){if(e&&e.includes("@")&&(a=!0,t.push({id:e,name:e,email:e})),e&&!isNaN(e)){var n=P.find((function(t){return t.id===Number(e)}));t.push(n)}})),D(a),(t+"").split(",").length>1?I(!0):I(!1);return t}())}),[ne]),Object(y.useEffect)((function(){g(function(){var e=[];e=Array.isArray(re)?re:re.split(",");var t=[];return e.map((function(e){if(e&&e.includes("@")&&t.push({id:e,name:e,email:e}),e&&!isNaN(e)){var a=B.find((function(t){return t.id===Number(e)}));t.push(a)}})),t}())}),[re]),Object(y.useEffect)((function(){w(function(){var e=[];e=Array.isArray(oe)?oe:oe.split(",");var t=[];return e.map((function(e){if(e&&e.includes("@")&&t.push({id:e,name:e,email:e}),e&&!isNaN(e)){var a=M.find((function(t){return t.id===Number(e)}));t.push(a)}})),t}())}),[oe]);var ue=function(){var e=X()(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<=1)){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.prev=3,e.next=6,Z.a.fetchEmailAddressessSearch(n);case 6:return t=e.sent,l(!1),e.abrupt("return",t.data);case 11:e.prev=11,e.t0=e.catch(3),l(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();function de(e){r(e)}return O.a.createElement(x.a,null,O.a.createElement(R.a,null,O.a.createElement("div",{className:"row"},O.a.createElement(ee.a,{label:"Van selecteren",name:"from",value:ae,options:V,optionName:"email",onChangeAction:_,required:"required",error:G.from})),O.a.createElement("div",{className:"row"},ce?O.a.createElement(Q.a,{label:O.a.createElement("span",null,"Groep",O.a.createElement("br",null),O.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Contacten in groep en extra contacten krijgen elk een aparte mail en zien niet de e-mail adressen van anderen. Samenvoegvelden werken.")),name:"contactGroupName",value:L,readOnly:!0}):O.a.createElement($.a,{label:O.a.createElement("span",null,"Aan selecteren",S?O.a.createElement(O.a.Fragment,null,O.a.createElement("br",null),O.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Meer dan 1 geselecteerd."),O.a.createElement("br",null),O.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Samenvoegvelden contact niet mogelijk.")):k?O.a.createElement(O.a.Fragment,null,O.a.createElement("br",null),O.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},'Geen contact geselecteerd, maar "los" emailadres ingevuld.'),O.a.createElement("br",null),O.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Samenvoegvelden contact niet mogelijk.")):""),name:"to",value:d,loadOptions:ue,optionName:"name",onChangeAction:F,allowCreate:!0,required:"required",error:G.to,isLoading:s,handleInputChange:de})),O.a.createElement("div",{className:"row"},O.a.createElement($.a,{label:ce?"Extra contacten":"Cc selecteren",name:"cc",value:f,loadOptions:ue,optionName:"name",onChangeAction:W,allowCreate:!0,error:G.cc,isLoading:s,handleInputChange:de})),ce?null:O.a.createElement("div",{className:"row"},O.a.createElement($.a,{label:"Bcc selecteren",name:"bcc",value:E,loadOptions:ue,optionName:"name",onChangeAction:H,allowCreate:!0,error:G.bcc,isLoading:s,handleInputChange:de})),O.a.createElement("div",{className:"row"},O.a.createElement(ee.a,{label:"Template",name:"emailTemplateId",value:le,options:z,onChangeAction:U})),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"form-group col-sm-12"},O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-sm-3"},O.a.createElement("label",{className:"col-sm-12 required"},"Onderwerp")),O.a.createElement("div",{className:"col-sm-9"},O.a.createElement("input",{type:"text",className:"form-control input-sm ".concat(G.subject?"has-error":""),name:"subject",value:ie,onChange:Y}))))),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"form-group col-sm-12"},O.a.createElement("div",{className:"row"},O.a.createElement(K.a,{label:"Tekst",value:se,onChangeAction:te}))))))}te.propTypes={email:Y.any,contactGroupName:Y.any,emailAddressesToSelected:Y.any,emailAddressesCcSelected:Y.any,emailAddressesBccSelected:Y.any,mailboxAddresses:Y.any,emailTemplates:Y.any,errors:Y.any,handleFromIds:Y.any,handleToIds:Y.any,handleEmailTemplates:Y.any,handleCcIds:Y.any,handleBccIds:Y.any,handleInputChange:Y.any,handleTextChange:Y.any};var ae=te,ne=function(e){var t=e.email,a=e.contactGroupName,n=e.mailboxAddresses,r=e.emailAddressesToSelected,o=e.emailAddressesCcSelected,i=e.emailAddressesBccSelected,s=e.emailTemplates,l=e.errors,c=e.handleSubmit,u=e.handleFromIds,d=e.handleEmailTemplates,m=e.handleToIds,p=e.handleCcIds,h=e.handleBccIds,f=e.handleInputChange,g=e.handleTextChange,b=e.addAttachment,v=e.addDocumentAsAttachment,y=e.deleteAttachment;return O.a.createElement("form",{className:"form-horizontal",onSubmit:c},O.a.createElement(ae,{email:t,contactGroupName:a,emailAddressesToSelected:r,emailAddressesCcSelected:o,emailAddressesBccSelected:i,mailboxAddresses:n,emailTemplates:s,errors:l,handleSubmit:c,handleFromIds:u,handleEmailTemplates:d,handleToIds:m,handleCcIds:p,handleBccIds:h,handleInputChange:f,handleTextChange:g}),O.a.createElement(U,{attachments:t.attachments,addAttachment:b,addDocumentAsAttachment:v,deleteAttachment:y}))},re=a(48),oe=a(40),ie=function(e){var t=e.handleSubmit,a=e.loading,n=e.goBack;return O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-md-4"},O.a.createElement("div",{className:"btn-group margin-small margin-10-right",role:"group"},O.a.createElement(re.a,{iconName:"glyphicon-arrow-left",onClickAction:n})),O.a.createElement("div",{className:"btn-group margin-small",role:"group"},O.a.createElement(oe.a,{buttonText:"Opslaan als concept",onClickAction:function(e){t(e,!0)}}),O.a.createElement(oe.a,{buttonText:"Verstuur e-mail",onClickAction:t,loading:a,loadText:"E-mail verzenden"}))),O.a.createElement("div",{className:"col-md-4"},O.a.createElement("h4",{className:"text-center margin-small"},"Nieuwe e-mail")),O.a.createElement("div",{className:"col-md-4"}))},se=a(181),le=a(85),ce=a(64),ue=a(183);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){v()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=g()(e);if(t){var r=g()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var he=function(e){m()(a,e);var t=pe(a);function a(e){var n;return i()(this,a),n=t.call(this,e),v()(u()(n),"setButtonLoading",(function(){n.setState({buttonLoading:!0})})),v()(u()(n),"toggleButtonLoading",(function(){n.setState({buttonLoading:!n.state.buttonLoading})})),v()(u()(n),"goBack",(function(){""!==n.state.email.htmlBody||""!==n.state.email.subject?n.toggleShowModal():E.e.goBack()})),v()(u()(n),"toggleShowModal",(function(){n.setState({showModal:!n.state.showModal})})),n.state={showModal:!1,buttonLoading:!1,emailAddressesToSelected:[],emailAddressesCcSelected:[],emailAddressesBccSelected:[],mailboxAddresses:[],emailTemplates:[],email:{from:"",to:"",cc:"",bcc:"",templateId:"",subject:"",htmlBody:"",attachments:[],quotationRequestId:e.params.quotationRequestId?e.params.quotationRequestId:"",opportunityId:e.params.opportunityId?e.params.opportunityId:"",intakeId:e.params.intakeId?e.params.intakeId:"",taskId:e.params.taskId?e.params.taskId:"",replyTypeId:e.params.replyTypeId?e.params.replyTypeId:"",oldEmailId:"",contactGroupId:e.params.contactGroupId?e.params.contactGroupId:""},contactGroupName:"",errors:{from:!1,to:!1,subject:!1}},n.handleInputChange=n.handleInputChange.bind(u()(n)),n.handleFromIds=n.handleFromIds.bind(u()(n)),n.handleEmailTemplates=n.handleEmailTemplates.bind(u()(n)),n.handleToIds=n.handleToIds.bind(u()(n)),n.handleCcIds=n.handleCcIds.bind(u()(n)),n.handleBccIds=n.handleBccIds.bind(u()(n)),n.handleTextChange=n.handleTextChange.bind(u()(n)),n.addAttachment=n.addAttachment.bind(u()(n)),n.addDocumentAsAttachment=n.addDocumentAsAttachment.bind(u()(n)),n.deleteAttachment=n.deleteAttachment.bind(u()(n)),n.handleSubmit=n.handleSubmit.bind(u()(n)),n}return l()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.params.contactId&&Z.a.fetchPrimaryEmailAddressId(this.props.params.contactId).then((function(t){e.setState(me(me({},e.state),{},{email:me(me({},e.state.email),{},{to:t.emailIds.join(",")}),emailAddressesToSelected:t.emailAddressesToSelected}))})),this.props.params.contactGroupId&&se.a.fetchEmailGroup(this.props.params.contactGroupId).then((function(t){e.setState({contactGroupName:t})})),le.a.fetchMailboxesLoggedInUserPeek().then((function(t){e.setState({mailboxAddresses:t.data.data})})),ce.a.fetchEmailTemplatesPeek().then((function(t){e.setState({emailTemplates:t})})),"bulk"===this.props.params.type&&this.props.toIds&&Z.a.fetchPrimaryEmailAddressId(this.props.toIds).then((function(t){e.setState(me(me({},e.state),{},{email:me(me({},e.state.email),{},{to:t.emailIds.join(",")}),emailAddressesToSelected:t.emailAddressesToSelected}))})),this.props.params.documentId&&ue.a.fetchDocumentDetails(this.props.params.documentId).then((function(t){t.data.data.contact&&Z.a.fetchPrimaryEmailAddressId(t.data.data.contact.id).then((function(t){e.setState(me(me({},e.state),{},{email:me(me({},e.state.email),{},{to:t.emailIds.join(",")}),emailAddressesToSelected:t.emailAddressesToSelected}))}));var a=t.data.data.filename?t.data.data.filename:"bijlage.pdf";ue.a.download(e.props.params.documentId).then((function(t){e.addAttachment([new File([t.data],a)])}))}))}},{key:"handleEmailTemplates",value:function(e){var t=this;this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{emailTemplateId:e})})),ce.a.fetchEmailTemplateWithUser(e).then((function(e){t.setState(me(me({},t.state),{},{email:me(me({},t.state.email),{},{subject:e.subject?e.subject:t.state.email.subject,htmlBody:e.htmlBody?e.htmlBody:t.state.email.htmlBody})}))}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},v()({},n,a))}))}},{key:"handleFromIds",value:function(e){this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{from:e})}))}},{key:"handleToIds",value:function(e){var t=e?e.map((function(e){return e.id})).join(","):"";this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{to:t}),emailAddressesToSelected:e}))}},{key:"handleCcIds",value:function(e){var t=e?e.map((function(e){return e.id})).join(","):"";this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{cc:t}),emailAddressesCcSelected:e}))}},{key:"handleBccIds",value:function(e){var t=e?e.map((function(e){return e.id})).join(","):"";this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{bcc:t}),emailAddressesBccSelected:e}))}},{key:"handleTextChange",value:function(e){this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{htmlBody:e.target.getContent({format:"raw"})})}))}},{key:"addAttachment",value:function(e){this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{attachments:[].concat(r()(this.state.email.attachments),r()(e))})}))}},{key:"addDocumentAsAttachment",value:function(e){var t=this;e&&ue.a.fetchDocumentDetails(e).then((function(a){var n=a.data.data.filename?a.data.data.filename:"bijlage.pdf";ue.a.download(e).then((function(e){t.addAttachment([new File([e.data],n)])}))}))}},{key:"deleteAttachment",value:function(e){this.setState(me(me({},this.state),{},{email:me(me({},this.state.email),{},{attachments:this.state.email.attachments.filter((function(t){return t.name!==e}))})}))}},{key:"handleSubmit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.preventDefault();var a=this.state.email,n={},r=!1;function o(e,t,a){se.a.newConcept2(e,t,a).then((function(){E.f.push("/emails/concept")})).catch((function(e){}))}function i(e,t,a){se.a.newEmail(e,t,a).then((function(){E.e.goBack()})).catch((function(e){}))}if(A.a.isEmpty(""+a.contactGroupId)&&A.a.isEmpty(""+a.to)&&(n.to=!0,r=!0),A.a.isEmpty(""+a.from)&&(n.from=!0,r=!0),A.a.isEmpty(""+a.subject)&&(n.subject=!0,r=!0),this.setState(me(me({},this.state),{},{errors:n})),!r){a.to.length>0&&(a.to=a.to.split(",")),a.cc.length>0&&(a.cc=a.cc.split(",")),a.bcc.length>0&&(a.bcc=a.bcc.split(","));var s=new FormData;s.append("to",JSON.stringify(a.to)),s.append("cc",JSON.stringify(a.cc)),s.append("bcc",JSON.stringify(a.bcc)),s.append("quotationRequestId",a.quotationRequestId),s.append("opportunityId",a.opportunityId),s.append("intakeId",a.intakeId),s.append("taskId",a.taskId),s.append("contactGroupId",a.contactGroupId),a.attachments.map((function(e,t){s.append("attachments["+t+"]",e)})),t?se.a.newConcept(a,a.from).then((function(e){o(s,a.from,e.data)})).catch((function(e){console.log(e),this.toggleButtonLoading()})):(this.setButtonLoading(),se.a.newConcept(a,a.from).then((function(e){i(s,a.from,e.data)})).catch((function(e){console.log(e),this.toggleButtonLoading()})))}}},{key:"render",value:function(){return O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-md-9"},O.a.createElement("div",{className:"col-md-12"},O.a.createElement(x.a,null,O.a.createElement(R.a,{className:"panel-small"},O.a.createElement(ie,{loading:this.state.buttonLoading,handleSubmit:this.handleSubmit,goBack:this.goBack})))),O.a.createElement("div",{className:"col-md-12"},O.a.createElement(ne,{email:this.state.email,contactGroupName:this.state.contactGroupName,emailAddressesToSelected:this.state.emailAddressesToSelected,emailAddressesCcSelected:this.state.emailAddressesCcSelected,emailAddressesBccSelected:this.state.emailAddressesBccSelected,mailboxAddresses:this.state.mailboxAddresses,emailTemplates:this.state.emailTemplates,errors:this.state.errors,handleSubmit:this.handleSubmit,handleFromIds:this.handleFromIds,handleEmailTemplates:this.handleEmailTemplates,handleToIds:this.handleToIds,handleCcIds:this.handleCcIds,handleBccIds:this.handleBccIds,handleInputChange:this.handleInputChange,handleTextChange:this.handleTextChange,addAttachment:this.addAttachment,addDocumentAsAttachment:this.addDocumentAsAttachment,deleteAttachment:this.deleteAttachment}))),O.a.createElement("div",{className:"col-md-3"}),this.state.showModal&&O.a.createElement(I.a,{buttonConfirmText:"Verlaten",closeModal:this.toggleShowModal,confirmAction:E.e.goBack,title:"Bevestigen"},O.a.createElement("p",null,"Weet u zeker dat u deze pagina wilt verlaten zonder deze e-mail op te slaan als concept?")))}}]),a}(y.Component);t.default=Object(N.b)((function(e){return{toIds:e.bulkMailTo.toIds}}))(he)},826:function(e,t,a){"use strict";a(836),a(234),a(815),a(13),a(6);var n=a(831),r=a(829),o=(a(12),a(834)),i=a(832),s=a(833),l=a(0),c=a.n(l),u=a(828),d=a(821),m=(a(128),a(83),a(814)),p=(a(825),a(820),a(827),a(830)),h=a(841);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}l.Component;var g=Object(p.a)(m.a);t.a=g},840:function(e,t,a){"use strict";a.d(t,"b",(function(){return O}));a(836);var n=a(84),r=(a(815),a(856)),o=a(845),i=a(831),s=a(829),l=(a(12),a(834)),c=a(832),u=a(833),d=a(0),m=a.n(d),p=(a(821),a(128),a(83),a(817)),h=a(814),f=(a(825),a(820),a(827),a(830));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(c.a)(this,a)}}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=String(e).toLowerCase(),n=String(t.value).toLowerCase(),r=String(t.label).toLowerCase();return n===a||r===a},y=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,a){return!(!e||t.some((function(t){return v(e,t)}))||a.some((function(t){return v(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),O=function(e){var t,a;return a=t=function(t){Object(l.a)(o,t);var a=g(o);function o(e){var t;Object(i.a)(this,o),(t=a.call(this,e)).select=void 0,t.onChange=function(e,a){var n=t.props,o=n.getNewOptionData,i=n.inputValue,s=n.isMulti,l=n.onChange,c=n.onCreateOption,u=n.value,d=n.name;if("select-option"!==a.action)return l(e,a);var m=t.state.newOption,h=Array.isArray(e)?e:[e];if(h[h.length-1]!==m)l(e,a);else if(c)c(i);else{var f=o(i,i),g={action:"create-option",name:d};l(s?[].concat(Object(r.a)(Object(p.c)(u)),[f]):f,g)}};var n=e.options||[];return t.state={newOption:void 0,options:n},t}return Object(s.a)(o,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,a=e.createOptionPosition,n=e.formatCreateLabel,o=e.getNewOptionData,i=e.inputValue,s=e.isLoading,l=e.isValidNewOption,c=e.value,u=e.options||[],d=this.state.newOption;d=l(i,Object(p.c)(c),u)?o(i,n(i)):void 0,this.setState({newOption:d,options:!t&&s||!d?u:"first"===a?[d].concat(Object(r.a)(u)):[].concat(Object(r.a)(u),[d])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,a=this.state.options;return m.a.createElement(e,Object(n.a)({},this.props,{ref:function(e){t.select=e},options:a,onChange:this.onChange}))}}]),o}(d.Component),t.defaultProps=y,a},E=O(h.a),w=Object(f.a)(E);t.a=w},843:function(e,t,a){"use strict";var n=a(6),r=a.n(n),o=a(0),i=a.n(o),s=a(5),l=a.n(s),c=a(840);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=function(e){var t=e.label,a=e.size,n=e.id,r=e.name,o=e.value,s=e.options,l=e.optionId,u=e.optionName,m=e.onChangeAction,p=e.required,h=e.multi,f=e.error,g=e.errorMessage,b=e.isLoading,v=e.disabled,y=e.placeholder,O=e.clearable,E={option:function(e){return d(d({},e),{},{fontSize:"12px"})},singleValue:function(e){return d(d({},e),{},{fontSize:"12px"})},menu:function(e){return d(d({},e),{},{zIndex:20})}};return i.a.createElement("div",{className:"form-group col-sm-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",{htmlFor:n,className:"col-sm-12 ".concat(p)},t)),i.a.createElement("div",{className:"".concat(a)},i.a.createElement(c.a,{id:n,name:r,onChange:function(e){return m(e)},value:o,options:s,getOptionLabel:function(e){return e[u]},getOptionValue:function(e){return e[l]},placeholder:y,noOptionsMessage:function(){return"Geen opties gevonden"},loadingMessage:function(){return"Laden"},isMulti:h,simpleValue:!0,removeSelected:!0,className:f?" has-error":"",isLoading:b,isDisabled:v,styles:E,isClearable:O,theme:function(e){return d(d({},e),{},{colors:d({},e.colors),spacing:d(d({},e.spacing),{},{baseUnit:2,controlHeight:24,menuGutter:4})})}})),f&&i.a.createElement("div",{className:"col-sm-offset-3 col-sm-8"},i.a.createElement("span",{className:"has-error-message"}," ",g))))};m.defaultProps={allowCreate:!1,size:"col-sm-6",optionId:"id",optionName:"name",disabled:!1,required:"",error:!1,errorMessage:"",value:"",multi:!0,isLoading:!1,placeholder:"",clearable:!1},m.propTypes={label:l.a.string.isRequired,size:l.a.string,id:l.a.string,name:l.a.string.isRequired,options:l.a.array,optionId:l.a.string,optionName:l.a.string,value:l.a.oneOfType([l.a.string,l.a.number]),onChangeAction:l.a.func,onBlurAction:l.a.func,required:l.a.string,disabled:l.a.bool,error:l.a.bool,errorMessage:l.a.string,multi:l.a.bool,isLoading:l.a.bool,placeholder:l.a.string,clearable:l.a.bool},t.a=m},848:function(e,t){function a(e,t,a,n,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,l,"next",e)}function l(e){a(i,r,o,s,l,"throw",e)}s(void 0)}))}}},879:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return l}));var n=function(e){return{type:"FETCH_MAILBOX_DETAILS",id:e}},r=function(e){return{type:"UPDATE_MAILBOX_DETAILS",mailbox:e}},o=function(e){return{type:"NEW_MAILBOX_USER",mailboxUser:e}},i=function(e,t){return{type:"DELETE_MAILBOX_USER",mailboxId:e,userId:t}},s=function(e){return{type:"NEW_MAILBOX_IGNORE",ignore:e}},l=function(e){return{type:"DELETE_MAILBOX_IGNORE",ignoreId:e}}},883:function(e,t,a){"use strict";var n=a(6),r=a.n(n),o=a(0),i=a.n(o),s=a(5),l=a.n(s),c=a(826);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=function(e){var t=e.label,a=e.id,n=e.name,r=e.value,o=e.options,s=e.optionId,l=e.optionName,u=e.onChangeAction,m=e.required,p=e.error,h=e.errorMessage,f=e.isLoading,g=e.disabled,b=e.placeholder,v=e.clearable,y={option:function(e){return d(d({},e),{},{fontSize:"12px"})},singleValue:function(e){return d(d({},e),{},{fontSize:"12px"})},menu:function(e){return d(d({},e),{},{zIndex:20})}};return i.a.createElement("div",{className:"form-group col-sm-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",{htmlFor:a,className:"col-sm-12 ".concat(m)},t)),i.a.createElement("div",{className:"col-sm-8"},i.a.createElement(c.a,{id:a,name:n,value:o&&r?o.find((function(e){return e[s]===r})):"",onChange:function(e){return u(e?e[s]:"",n)},options:o,getOptionLabel:function(e){return e[l]},getOptionValue:function(e){return e[s]},placeholder:b,noOptionsMessage:function(){return"Geen opties gevonden"},loadingMessage:function(){return"Laden"},isMulti:!1,simpleValue:!0,removeSelected:!0,className:p?" has-error":"",isLoading:f,isDisabled:g,styles:y,isClearable:v,theme:function(e){return d(d({},e),{},{colors:d({},e.colors),spacing:d(d({},e.spacing),{},{baseUnit:2,controlHeight:24,menuGutter:4})})}})),p&&i.a.createElement("div",{className:"col-sm-offset-3 col-sm-8"},i.a.createElement("span",{className:"has-error-message"}," ",h))))};m.defaultProps={optionId:"id",optionName:"name",disabled:!1,required:"",error:!1,errorMessage:"",value:"",isLoading:!1,placeholder:"",clearable:!1},m.propTypes={label:l.a.string.isRequired,id:l.a.string,name:l.a.string.isRequired,options:l.a.array,optionId:l.a.string,optionName:l.a.string,value:l.a.oneOfType([l.a.string,l.a.number]),onChangeAction:l.a.func,onBlurAction:l.a.func,required:l.a.string,disabled:l.a.bool,error:l.a.bool,errorMessage:l.a.string,isLoading:l.a.bool,placeholder:l.a.string,clearable:l.a.bool},t.a=m},903:function(e,t,a){"use strict";var n=a(6),r=a.n(n),o=a(0),i=a.n(o),s=a(5),l=a.n(s),c=a(913);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=function(e){var t=e.label,a=e.size,n=e.id,r=e.name,o=e.value,s=e.loadOptions,l=e.optionId,u=e.optionName,m=e.onChangeAction,p=e.handleInputChange,h=e.required,f=e.allowCreate,g=e.multi,b=e.error,v=e.errorMessage,y=e.isLoading,O=e.disabled,E=e.placeholder,w=e.clearable,A={option:function(e){return d(d({},e),{},{fontSize:"12px"})},singleValue:function(e){return d(d({},e),{},{fontSize:"12px"})},menu:function(e){return d(d({},e),{},{zIndex:20})}};return i.a.createElement("div",{className:"form-group col-sm-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",{htmlFor:n,className:"col-sm-12 ".concat(h)},t)),i.a.createElement("div",{className:"".concat(a)},i.a.createElement(c.a,{id:n,name:r,onChange:function(e){return m(e)},value:o,loadOptions:s,onInputChange:p,getOptionLabel:function(e){return e[u]},getOptionValue:function(e){return e[l]},placeholder:E,noOptionsMessage:function(){return"Geen opties gevonden (tik om te zoeken minimaal 2 tekens)"},loadingMessage:function(){return"Laden"},isMulti:g,simpleValue:!0,removeSelected:!0,className:b?" has-error":"",isLoading:y,isDisabled:O,styles:A,isClearable:w,formatCreateLabel:function(e){return'Maak optie "'.concat(e,'" aan')},getNewOptionData:function(e,t){return f?{id:t,name:t,__isNew__:!0}:{}},theme:function(e){return d(d({},e),{},{colors:d({},e.colors),spacing:d(d({},e.spacing),{},{baseUnit:2,controlHeight:24,menuGutter:4})})}})),b&&i.a.createElement("div",{className:"col-sm-offset-3 col-sm-8"},i.a.createElement("span",{className:"has-error-message"}," ",v))))};m.defaultProps={allowCreate:!1,className:"",size:"col-sm-8",optionId:"id",optionName:"name",disabled:!1,required:"",error:!1,errorMessage:"",value:"",multi:!0,isLoading:!1,placeholder:"",clearable:!1},m.propTypes={allowCreate:l.a.bool,label:l.a.string.isRequired,className:l.a.string,size:l.a.string,id:l.a.string,name:l.a.string.isRequired,loadOptions:l.a.array,optionId:l.a.string,optionName:l.a.string,value:l.a.oneOfType([l.a.email,l.a.number]),onChangeAction:l.a.func,handleInputChange:l.a.func,required:l.a.string,disabled:l.a.bool,error:l.a.bool,errorMessage:l.a.string,multi:l.a.bool,isLoading:l.a.bool,placeholder:l.a.string,clearable:l.a.bool},t.a=m},913:function(e,t,a){"use strict";a(836),a(234),a(815),a(13),a(6),a(18),a(19),a(12),a(20),a(21),a(14);var n=a(0),r=a.n(n),o=(a(821),a(128),a(83),a(814)),i=(a(825),a(820),a(827),a(830)),s=a(914),l=a(84),c=a(831),u=a(829),d=a(834),m=a(832),p=a(833),h=a(817);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var g={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},b=function(e){var t,a;return a=t=function(t){Object(d.a)(n,t);var a=f(n);function n(e){var t;return Object(c.a)(this,n),(t=a.call(this)).select=void 0,t.lastRequest=void 0,t.mounted=!1,t.optionsCache={},t.handleInputChange=function(e,a){var n=t.props,r=n.cacheOptions,o=n.onInputChange,i=Object(h.f)(e,a,o);if(!i)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(r&&t.optionsCache[i])t.setState({inputValue:i,loadedInputValue:i,loadedOptions:t.optionsCache[i],isLoading:!1,passEmptyOptions:!1});else{var s=t.lastRequest={};t.setState({inputValue:i,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},(function(){t.loadOptions(i,(function(e){t.mounted&&(e&&(t.optionsCache[i]=e),s===t.lastRequest&&(delete t.lastRequest,t.setState({isLoading:!1,loadedInputValue:i,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return i},t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:void 0!==e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,a=this.state.inputValue;!0===t&&this.loadOptions(a,(function(t){if(e.mounted){var a=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:a})}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var a=this.props.loadOptions;if(!a)return t();var n=a(e,t);n&&"function"==typeof n.then&&n.then(t,(function(){return t()}))}},{key:"render",value:function(){var t=this,a=this.props,n=(a.loadOptions,a.isLoading),o=Object(s.a)(a,["loadOptions","isLoading"]),i=this.state,c=i.defaultOptions,u=i.inputValue,d=i.isLoading,m=i.loadedInputValue,p=i.loadedOptions,h=i.passEmptyOptions?[]:u&&m?p:c||[];return r.a.createElement(e,Object(l.a)({},o,{ref:function(e){t.select=e},options:h,isLoading:d||n,onInputChange:this.handleInputChange}))}}]),n}(n.Component),t.defaultProps=g,a},v=(b(Object(i.a)(o.a)),a(840)),y=Object(v.b)(o.a),O=b(Object(i.a)(y));t.a=O}}]);