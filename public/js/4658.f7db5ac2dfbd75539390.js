"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[4658],{64708:(e,t,n)=>{n.d(t,{Ir:()=>i,kH:()=>a,t2:()=>r});var r=function(e,t){return{type:"FETCH_PRODUCTS",filters:e,filterType:t}},a=function(){return{type:"CLEAR_PRODUCTS"}},i=function(e){return{type:"DELETE_PRODUCT",id:e}}},64872:(e,t,n)=>{n.d(t,{Go:()=>l,Tu:()=>i,Wl:()=>s,eM:()=>r,fs:()=>a,nj:()=>o,o8:()=>u,vA:()=>c});var r=function(e){return{type:"FETCH_TEAM_DETAILS",id:e}},a=function(e,t){return{type:"UPDATE_TEAM",team:e,switchToView:t}},i=function(e){return{type:"NEW_TEAM_USER",teamUser:e}},c=function(e,t){return{type:"DELETE_TEAM_USER",teamId:e,userId:t}},o=function(e){return{type:"NEW_TEAM_CONTACT_GROUP",teamContactGroup:e}},l=function(e,t){return{type:"DELETE_TEAM_CONTACT_GROUP",teamId:e,contactGroupId:t}},s=function(e){return{type:"NEW_TEAM_DOCUMENT_CREATED_FROM",teamDocumentCreatedFrom:e}},u=function(e,t){return{type:"DELETE_TEAM_DOCUMENT_CREATED_FROM",teamId:e,documentCreatedFromId:t}}},54658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var r=n(15671),a=n(43144),i=n(60136),c=n(82963),o=n(61120),l=n(67294),s=n(37974),u=n(97326),m=n(4942),d=n(61409),p=n(55451),h=n(41355),f=n(64708);const v=(0,s.$j)(null,(function(e){return{deleteProduct:function(t){e((0,f.Ir)(t))}}}))((function(e){return l.createElement(h.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteProduct(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder product: ",l.createElement("strong",null,e.name),"?")}));var y=function(e){(0,i.Z)(h,e);var t,n,s=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function h(e){var t;return(0,r.Z)(this,h),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"toggleDelete",(function(){t.setState({showDelete:!t.state.showDelete})})),t.state={showDelete:!1},t}return(0,a.Z)(h,[{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},l.createElement(p.Z,{iconName:"glyphicon-arrow-left",onClickAction:d.mW.goBack}),l.createElement(p.Z,{iconName:"glyphicon-trash",onClickAction:this.toggleDelete}))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Product: ",this.props.name)),l.createElement("div",{className:"col-md-4"}),this.state.showDelete&&l.createElement(v,{closeDeleteItemModal:this.toggleDelete,name:this.props.name,id:this.props.id}))}}]),h}(l.Component);const E=(0,s.$j)((function(e){return{name:e.productDetails.name,id:e.productDetails.id}}),null)(y);var g=n(96486),b=n(64872),Z=n(48966),w=n.n(Z),D=n(9181),C=n(49332),N=n(14309),P=n(98688),I=n(71840);var T=function(e){(0,i.Z)(d,e);var t,n,s=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"confirmAction",(function(e){t.props.updateProduct(t.props.product,t.props.switchToView),t.props.closeModal()})),t}return(0,a.Z)(d,[{key:"render",value:function(){return l.createElement(h.Z,{modalClassName:"modal-lg",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Product wijzigen",buttonConfirmText:"Opslaan"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Let op. Een wijziging in een product kan grote gevolgen hebben op je lopende facturering. Dus bedenk goed wat je wilt voordat je een wijziging doorvoert."))))}}]),d}(l.Component);const O=(0,s.$j)(null,(function(e){return{updateProduct:function(t,n){e(function(e,t){return{type:"UPDATE_PRODUCT",product:e,switchToView:t}}(t,n))}}}))(T);var j=n(82084),S=n(21606);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){(0,i.Z)(d,e);var t,n,s=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;(0,r.Z)(this,d),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChangeDuration",(function(e){var n,r=e.target,a="checkbox"===r.type?r.checked:r.value,i=r.name,c=t.state.product.invoiceFrequencyId,o=t.state.invoiceFrequencies;switch(a){case"none":o=[{id:"once",name:"Eenmalig"}],c="once";break;case"month":o=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==c&&"yearly"!==c&&"half-year"!==c||(c="monthly");break;case"quarter":o=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==c&&"half-year"!==c||(c="quarterly");break;case"half_year":o=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===c&&(c="half-year");break;default:o=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}t.setState(k(k({},t.state),{},{invoiceFrequencies:o,product:k(k({},t.state.product),{},(n={},(0,m.Z)(n,i,a),(0,m.Z)(n,"invoiceFrequencyId",c),n))}))})),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var n=e.target,r="checkbox"===n.type?n.checked:n.value,a=n.name;t.setState(k(k({},t.state),{},{product:k(k({},t.state.product),{},(0,m.Z)({},a,r))}))})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n=t.state.product,r={},a=!1,i=!1,c=!1;t.props.products.map((function(e){return e.code==n.code&&(c=!0)})),c&&n.code!==t.state.oldCode&&(a="Productcode moet uniek zijn.",r.code=!0,i=!0),w().isEmpty(n.code+"")&&(r.code=!0,i=!0);var o=!1;t.props.products.map((function(e){return e.name==n.name&&(o=!0)})),o&&n.name!==t.state.oldName&&(a="Productnaam moet uniek zijn.",r.name=!0,i=!0),c&&o&&n.code!==t.state.oldCode&&n.name!==t.state.oldName&&(a="Productcode en productnaam moeten uniek zijn."),w().isEmpty(n.name+"")&&(r.name=!0,i=!0),w().isEmpty(n.administrationId+"")&&(r.administrationId=!0,i=!0),t.setState(k(k({},t.state),{},{errors:r,errorMessage:a})),i||t.toggleShowConfirm()})),(0,m.Z)((0,u.Z)(t),"toggleShowConfirm",(function(){t.setState({showConfirm:!t.state.showConfirm})}));var n=e.productDetails,a=n.id,i=n.code,c=n.name,o=n.invoiceText,l=n.durationId,p=n.invoiceFrequencyId,h=n.paymentTypeId,f=n.administrationId,v=n.ledgerId,y=n.costCenterId,E=n.active;return t.state={invoiceFrequencies:[{id:"once",name:"Eenmalig"}],showConfirm:!1,errorMessage:!1,oldCode:i||"",oldName:c||"",product:{id:a,code:i||"",name:c||"",invoiceText:o||"",durationId:l||"none",invoiceFrequencyId:p||"once",paymentTypeId:h||"",administrationId:f||"",ledgerId:v||"",costCenterId:y||"",active:E},errors:{code:!1,name:!1,administrationId:!1}},t.handleReactSelectChange=t.handleReactSelectChange.bind((0,u.Z)(t)),t}return(0,a.Z)(d,[{key:"componentDidMount",value:function(){var e=this.state.invoiceFrequencies,t=this.state.product.invoiceFrequencyId;switch(this.state.product.durationId){case"none":e=[{id:"once",name:"Eenmalig"}],t="once";break;case"month":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==t&&"yearly"!==t&&"half-year"!==t||(t="monthly");break;case"quarter":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==t&&"half-year"!==t||(t="quarterly");break;case"half_year":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===t&&(t="half-year");break;default:e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}this.setState(k(k({},this.state),{},{invoiceFrequencies:e,product:k(k({},this.state.product),{},{invoiceFrequencyId:t})}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(k(k({},this.state),{},{product:k(k({},this.state.product),{},(0,m.Z)({},t,e))}))}},{key:"render",value:function(){var e=this,t=this.state.product,n=t.code,r=t.name,a=t.invoiceText,i=t.durationId,c=t.invoiceFrequencyId,o=t.paymentTypeId,s=t.administrationId,u=t.ledgerId,m=t.costCenterId,d=t.active,p=this.props.ledgers,h=this.props.productDetails.currentPrice;return this.props.usesTwinfield&&h&&(p=this.props.ledgers.filter((function(e){return e.vatCode?e.vatCode.percentage===h.vatPercentage:e.vatCode===h.vatPercentage}))),l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(N.Z,null,l.createElement(P.Z,null,l.createElement("div",{className:"row"},l.createElement(D.Z,{label:"Productcode",name:"code",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.code}),l.createElement(D.Z,{label:"Naam",name:"name",value:r,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.name})),l.createElement("div",{className:"row"},l.createElement("div",{className:"form-group col-sm-12"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),l.createElement("div",{className:"col-sm-8"},l.createElement("textarea",{name:"invoiceText",value:a,onChange:this.handleInputChange,className:"form-control input-sm",maxLength:"1000"}))))),l.createElement("div",{className:"row"},l.createElement(I.Z,{label:"Looptijd",id:"durationId",name:"durationId",options:this.props.productDurations,value:i,onChangeAction:this.handleInputChangeDuration,emptyOption:!1}),l.createElement(I.Z,{label:"Prijs per",id:"invoiceFrequencyId",name:"invoiceFrequencyId",options:this.state.invoiceFrequencies,value:c,onChangeAction:this.handleInputChange,emptyOption:!1})),l.createElement("div",{className:"row"},l.createElement(I.Z,{label:"Betaalwijze",id:"paymentTypeId",name:"paymentTypeId",options:this.props.productPaymentTypes,value:o,onChangeAction:this.handleInputChange}),l.createElement(I.Z,{label:"Administratie",id:"administrationId",name:"administrationId",options:this.props.administrations,value:s,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.administrationId})),this.props.usesTwinfield?l.createElement("div",{className:"row"},l.createElement(j.Z,{label:"Grootboek",name:"ledgerId",options:p,optionName:"description",value:Number(u),onChangeAction:this.handleReactSelectChange}),l.createElement(j.Z,{label:"Kostenplaats",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:Number(m),onChangeAction:this.handleReactSelectChange})):null,l.createElement("div",{className:"row"},l.createElement(S.Z,{label:"Actief",name:"active",value:d,onChangeAction:function(t){t.persist(),e.handleInputChange(t)}})),this.state.errorMessage&&l.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage)),l.createElement(P.Z,null,l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(C.Z,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),l.createElement(C.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))),this.state.showConfirm&&l.createElement(O,{product:this.state.product,closeModal:this.toggleShowConfirm,switchToView:this.props.switchToView}))}}]),d}(l.Component);const V=(0,s.$j)((function(e){return{productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,productDetails:e.productDetails,administrations:e.meDetails.administrations,products:e.systemData.products,ledgers:e.systemData.ledgers,costCenters:e.systemData.costCenters,usesTwinfield:e.systemData.usesTwinfield}}),null)(A);var F=n(7250);const q=(0,s.$j)((function(e){return{productDetails:e.productDetails,usesTwinfield:e.systemData.usesTwinfield}}))((function(e){var t=e.productDetails,n=t.code,r=t.name,a=t.invoiceText,i=t.duration,c=t.invoiceFrequency,o=t.paymentType,s=t.administration,u=t.ledger,m=t.costCenter,d=t.active;return l.createElement("div",{onClick:e.switchToEdit},l.createElement(N.Z,null,l.createElement(P.Z,null,l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Productcode",value:n}),l.createElement(F.Z,{label:"Product",value:r})),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),l.createElement("div",{className:"col-sm-9",id:"invoiceText"},a)),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Looptijd",value:i?i.name:""}),l.createElement(F.Z,{label:"Prijs per",value:c?c.name:""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Betaalwijze",value:o?o.name:""}),l.createElement(F.Z,{label:"Administratie",value:s?s.name:""})),e.usesTwinfield?l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Grootboek",value:u?u.description:""}),l.createElement(F.Z,{label:"Kostenplaats",value:m?m.description:""})):null,l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Actief",value:d?"Ja":"Nee"})))))}));var x=function(e){(0,i.Z)(d,e);var t,n,s=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"switchToEdit",(function(){t.setState({showEdit:!0})})),(0,m.Z)((0,u.Z)(t),"switchToView",(function(){t.setState({showEdit:!1,activeDiv:""})})),t.state={showEdit:!1,activeDiv:""},t}return(0,a.Z)(d,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.meDetails.permissions,n=void 0===t?{}:t;return l.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&n.manageFinancial?l.createElement(V,{switchToView:this.switchToView}):l.createElement(q,{switchToEdit:this.switchToEdit}))}}]),d}(l.Component);const H=(0,s.$j)((function(e){return{productDetails:e.productDetails,meDetails:e.meDetails}}))(x);var B=n(30381),L=n.n(B);const M=(0,s.$j)((function(e){return{currentPrice:e.productDetails.currentPrice,productHasVariablePrice:e.productDetails.hasVariablePrice}}))((function(e){var t=e.price,n=t.id,r=t.dateStart,a=t.priceNumberOfDecimals,i=t.price,c=t.vatPercentage,o=t.priceInclVat;return l.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},l.createElement("div",{className:"col-sm-3"}," ",r?L()(r).format("L"):""),"variable"===e.productHasVariablePrice?l.createElement("div",{className:"col-sm-3"},"Variabel"):l.createElement("div",{className:"col-sm-3"},i?"€"+i.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:a}):""),l.createElement("div",{className:"col-sm-2"},null!==c?c:"Geen"),"variable"===e.productHasVariablePrice?l.createElement("div",{className:"col-sm-2"},"Variabel"):l.createElement("div",{className:"col-sm-2"},o?"€"+o.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:a}):""),l.createElement("div",{className:"col-sm-2"},e.currentPrice&&n===e.currentPrice.id?"Ja":""))}));var _=function(e){(0,i.Z)(d,e);var t,n,s=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"onLineEnter",(function(){t.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,m.Z)((0,u.Z)(t),"onLineLeave",(function(){t.setState({showActionButtons:!1,highlightLine:""})})),t.state={showActionButtons:!1,highlightLine:"",showDelete:!1,price:e.price},t}return(0,a.Z)(d,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(M,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,toggleDelete:this.toggleDelete,price:this.state.price}))}}]),d}(l.Component);const W=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions}}))(_),U=(0,s.$j)((function(e){return{priceHistory:e.productDetails.priceHistory}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-3"},"Startdatum"),l.createElement("div",{className:"col-sm-3"},"Prijs excl. BTW"),l.createElement("div",{className:"col-sm-2"},"BTW percentage"),l.createElement("div",{className:"col-sm-2"},"Prijs incl. BTW"),l.createElement("div",{className:"col-sm-2"},"Actief")),e.priceHistory.length>0?e.priceHistory.map((function(e){return l.createElement(W,{key:e.id,price:e})})):l.createElement("div",null,"Geen prijshistorie bekend."))}));var G=n(54138);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){(0,i.Z)(d,e);var t,n,s=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var n=e.target,r="checkbox"===n.type?n.checked:n.value,a=n.name;t.setState(z(z({},t.state),{},{priceHistory:z(z({},t.state.priceHistory),{},(0,m.Z)({},a,r))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleInputChangeDate",(function(e,n){t.setState(z(z({},t.state),{},{priceHistory:z(z({},t.state.priceHistory),{},(0,m.Z)({},n,e))}))})),(0,m.Z)((0,u.Z)(t),"handleBlurProductPrice",(function(e){var n=e.target,r="checkbox"===n.type?n.checked:n.value,a=n.name;t.setState(z(z({},t.state),{},{priceHistory:z(z({},t.state.priceHistory),{},(0,m.Z)({},a,parseFloat(r).toFixed(t.state.priceHistory.priceNumberOfDecimals)))}))})),(0,m.Z)((0,u.Z)(t),"handleBlurDecimals",(function(e){var n=e.target,r="checkbox"===n.type?n.checked:n.value,a=(n.name,r);a<2&&(a=2),a>6&&(a=6),t.setState(z(z({},t.state),{},{priceHistory:z(z({},t.state.priceHistory),{},{priceNumberOfDecimals:a,price:parseFloat(t.state.priceHistory.price).toFixed(a),priceInclVat:parseFloat(t.state.priceHistory.priceInclVat).toFixed(a)})}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"updatePrice",(function(){var e=!!t.state.priceHistory.inputInclVat&&t.state.priceHistory.inputInclVat,n=w().isFloat(t.state.priceHistory.price+"")?t.state.priceHistory.price:0,r=w().isFloat(t.state.priceHistory.priceInclVat+"")?t.state.priceHistory.priceInclVat:0,a=w().isFloat(t.state.priceHistory.vatPercentage+"")?t.state.priceHistory.vatPercentage:0,i=(parseFloat(100)+parseFloat(a))/100;e?(n=r/i,t.setState(z(z({},t.state),{},{priceHistory:z(z({},t.state.priceHistory),{},{price:parseFloat(n).toFixed(t.state.priceHistory.priceNumberOfDecimals)})}))):(r=n*i,t.setState(z(z({},t.state),{},{priceHistory:z(z({},t.state.priceHistory),{},{priceInclVat:parseFloat(r).toFixed(t.state.priceHistory.priceNumberOfDecimals)})})))})),t.state={priceHistory:{productId:e.productId,dateStart:"",inputInclVat:!1,priceNumberOfDecimals:2,price:"",priceInclVat:"",vatPercentage:e.ledger?e.ledger.vatCode&&e.ledger.vatCode.percentage:null,hasVariablePrice:"variable"===e.hasVariablePrice},errors:{dateStart:!1,priceNumberOfDecimals:!1,price:!1,priceInclVat:!1}},t.handleInputChange=t.handleInputChange.bind((0,u.Z)(t)),t.handleSubmit=t.handleSubmit.bind((0,u.Z)(t)),t}return(0,a.Z)(d,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.priceHistory,n={},r=!1;w().isEmpty(t.dateStart)&&(n.dateStart=!0,r=!0),t.hasVariablePrice||(t.inputInclVat?w().isEmpty(t.priceInclVat)&&(n.priceInclVat=!0,r=!0):w().isEmpty(t.price)&&(n.price=!0,r=!0)),this.setState(z(z({},this.state),{},{errors:n})),r||(this.props.addProductPriceHistory(t),this.props.toggleShowNew())}},{key:"render",value:function(){var e=this.state.priceHistory,t=e.dateStart,n=e.inputInclVat,r=e.priceNumberOfDecimals,a=e.price,i=e.priceInclVat,c=e.vatPercentage,o=e.hasVariablePrice;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(N.Z,{className:"panel-grey"},l.createElement(P.Z,null,"none"===this.props.hasVariablePrice&&l.createElement("div",{className:"row"},l.createElement(S.Z,{label:"Variabele prijs",name:"hasVariablePrice",value:o,onChangeAction:this.handleInputChange})),l.createElement("div",{className:"row"},l.createElement(D.Z,{label:"Productcode",id:"code",name:"code",value:this.props.productCode,readOnly:!0}),l.createElement(D.Z,{label:"Product",id:"name",name:"name",value:this.props.productName,readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(G.Z,{label:"Startdatum",name:"dateStart",value:t,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateStart}),l.createElement(I.Z,{label:"BTW percentage",name:"vatPercentage",options:this.props.vatCodes,optionValue:"percentage",optionName:"description",value:c,onChangeAction:this.props.usesTwinfield?null:this.handleInputChange,placeholder:"Geen",readOnly:this.props.usesTwinfield})),l.createElement("div",{className:"row"},l.createElement(S.Z,{label:"Invoer inclusief BTW",name:"inputInclVat",value:n,onChangeAction:this.handleInputChange}),l.createElement(D.Z,{label:"Aantal decimalen",type:"number",min:"2",max:"6",name:"priceNumberOfDecimals",value:r,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurDecimals,required:"required",error:this.state.errors.priceNumberOfDecimals})),l.createElement("div",{className:"row"},"variable"===this.props.hasVariablePrice||o?l.createElement(l.Fragment,null,l.createElement(D.Z,{label:"Prijs excl. BTW",id:"price",name:"price",value:"Variabel",readOnly:!0,required:"required"}),l.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:"Variabel",readOnly:!0,required:"required"})):l.createElement(l.Fragment,null,n?l.createElement(l.Fragment,null,l.createElement(D.Z,{label:"Prijs excl. BTW",id:"price",name:"price",value:a,readOnly:!0,required:"required"}),l.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",type:"number",min:"0",max:"1000000",value:i,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.priceInclVat})):l.createElement(l.Fragment,null,l.createElement(D.Z,{label:"Prijs excl. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:a,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.price}),l.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:i,readOnly:!0,required:"required"})))),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(C.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),l.createElement(C.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),d}(l.Component);const J=(0,s.$j)((function(e){return{productId:e.productDetails.id,productName:e.productDetails.name,productCode:e.productDetails.code,hasVariablePrice:e.productDetails.hasVariablePrice,ledger:e.productDetails.ledger,vatCodes:e.systemData.vatCodes,usesTwinfield:e.systemData.usesTwinfield}}),(function(e){return{addProductPriceHistory:function(t){e(function(e){return{type:"ADD_PRODUCT_PRICE_HISTORY",priceHistory:e}}(t))}}}))(K);var Y=n(80720);var Q=function(e){(0,i.Z)(d,e);var t,n,s=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=s.call(this,e),(0,m.Z)((0,u.Z)(t),"toggleShowNew",(function(){t.setState({showNew:!t.state.showNew})})),t.state={showNew:!1},t}return(0,a.Z)(d,[{key:"render",value:function(){return l.createElement(N.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Prijshistorie"),this.props.permissions.manageFinancial&&l.createElement("a",{role:"button",className:"pull-right",onClick:this.toggleShowNew},l.createElement("span",{className:"glyphicon glyphicon-plus"}))),l.createElement(P.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(U,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&l.createElement(J,{toggleShowNew:this.toggleShowNew}))))}}]),d}(l.Component);const X=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions}}))(Q);L().locale("nl");const ee=(0,s.$j)((function(e){return{productDetails:e.productDetails}}))((function(e){var t=e.productDetails,n=t.createdAt,r=t.createdBy;return l.createElement("div",null,l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Gemaakt door",value:r?r.fullName:"Onbekend",link:r?"gebruiker/"+r.id:""}),l.createElement(F.Z,{label:"Gemaakt op",value:n?L()(n).format("L"):"Onbekend"})))})),te=function(e){return l.createElement(N.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),l.createElement(P.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(ee,null))))};L().locale("nl");var ne=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function u(e){return(0,r.Z)(this,u),s.call(this,e)}return(0,a.Z)(u,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van product.":this.props.isLoading?e="Gegevens aan het laden.":(0,g.isEmpty)(this.props.productDetails)?e="Geen product gevonden!":t=!1,t?l.createElement("div",null,e):l.createElement("div",null,l.createElement(H,null),l.createElement(X,null),l.createElement(te,null))}}]),u}(l.Component);const re=(0,s.$j)((function(e){return{productDetails:e.productDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}),(function(e){return{fetchTeamDetails:function(t){e((0,b.eM)(t))}}}))(ne);var ae=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);if(n){var a=(0,o.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function u(e){return(0,r.Z)(this,u),s.call(this,e)}return(0,a.Z)(u,[{key:"componentDidMount",value:function(){this.props.fetchProductDetails(this.props.params.id)}},{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(N.Z,null,l.createElement(P.Z,{className:"panel-small"},l.createElement(E,null)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(re,null))),l.createElement("div",{className:"col-md-3"}))}}]),u}(l.Component);const ie=(0,s.$j)((function(e){return{productDetails:e.productDetails}}),(function(e){return{fetchProductDetails:function(t){e(function(e){return{type:"FETCH_PRODUCT_DETAILS",id:e}}(t))}}}))(ae)}}]);