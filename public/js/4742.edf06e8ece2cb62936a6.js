"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[4742],{11392:(e,t,n)=>{var i,a=n(46518),s=n(27476),r=n(77347).f,o=n(18014),l=n(655),c=n(60511),u=n(67750),m=n(41436),d=n(96395),p=s("".slice),v=Math.min,h=m("startsWith");a({target:"String",proto:!0,forced:!(!d&&!h&&(i=r(String.prototype,"startsWith"),i&&!i.writable)||h)},{startsWith:function(e){var t=l(u(this));c(e);var n=o(v(arguments.length>1?arguments[1]:void 0,t.length)),i=l(e);return p(t,n,n+i.length)===i}})},34742:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B}),n(60825);var i=n(23029),a=n(92901),s=n(50388),r=n(53954),o=n(85501),l=n(64467),c=n(58168),u=n(96540),m=n(47767),d=n(62493),p=n(55849),v=n(44758),h=n(69733),b=n(61191),g=n(63750),f=n(32949),E=n(91858),w=n(55956);const A=function(e){var t=e.amountOfDistributions,n=e.createRevenueReport,i=e.showOnPortal,a=(0,m.Zp)();return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-4"},u.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},u.createElement(E.A,{iconName:"arrowLeft",onClickAction:function(){return a(-1)}}),t>0&&u.createElement(w.A,{buttonText:"Rapportage versturen",onClickAction:function(){return n()}}))),u.createElement("div",{className:"col-md-4"},u.createElement("h4",{className:"text-center"},"Rapportage aanmaken (",t,")"),i?u.createElement("div",{className:"text-center text-success"},"Deze rapportage zal ook beschikbaar/zichtbaar worden op de Portal"):u.createElement("div",{className:"text-center text-danger"},"Deze rapportage zal NIET beschikbaar/zichtbaar worden op de Portal")),u.createElement("div",{className:"col-md-4"}))};n(62062),n(2892),n(26099),n(11392);var N=n(9995),y=n.n(N);function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}const I=function(e){function t(){return(0,i.A)(this,t),e=this,n=t,a=arguments,n=(0,r.A)(n),(0,s.A)(e,k()?Reflect.construct(n,a||[],(0,r.A)(e).constructor):n.apply(e,a));var e,n,a}return(0,o.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.distributions,n=void 0===t?[]:t,i=e.isLoading,a=e.changeDistribution;return u.createElement("nav",{className:"payment-invoices-list open sticky"},u.createElement("div",{className:"send-payment-invoices-sidebar-menu",style:{color:"$brand-primary"}},u.createElement(y(),{className:"eco-sidenav",defaultSelected:n.length>0?"distribution-".concat(n[0].id):"order",onSelect:function(e){if(null!=e&&e.startsWith("distribution-")){var t=e.split("distribution-")[1];t&&a(Number(t))}}},u.createElement(y().Nav,null,n.length>0?n.map(function(e,t){return u.createElement(N.NavItem,{key:t,eventKey:"distribution-".concat(e.id)},u.createElement(N.NavText,null,u.createElement("span",{className:"send-payment-invoices-list-link"},e.id," - ",e.contactName)))}):u.createElement(N.NavItem,{eventKey:"order"},u.createElement(N.NavText,null,i?u.createElement("span",{className:"send-payment-invoices-list-link"},"Gegevens aan het laden."):u.createElement("span",{className:"send-payment-invoices-list-link"},"Geen opbrengstverdeling beschikbaar.")))))))}}])}(u.Component);n(76031);var R=n(41919);function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}const T=function(e){function t(e){var n,a,o,l;return(0,i.A)(this,t),a=this,o=t,l=[e],o=(0,r.A)(o),(n=(0,s.A)(a,P()?Reflect.construct(o,l||[],(0,r.A)(a).constructor):o.apply(a,l))).state={file:null},n}return(0,o.A)(t,e),(0,a.A)(t,[{key:"componentDidUpdate",value:function(e){e.distributionId!==this.props.distributionId&&this.props.distributionId&&this.downloadFile(this.props.distributionId)}},{key:"downloadFile",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f.A.previewPDF(e,this.props.subject,this.props.documentTemplateId).then(function(e){t.setState({file:e.data})}).catch(function(){n<2&&setTimeout(function(){t.downloadFile(e,n)},500),n++})}},{key:"render",value:function(){return this.props.isLoading?u.createElement("div",null,"Gegevens aan het laden."):this.state.file?u.createElement("div",null,u.createElement(R.A,{file:this.state.file})):this.props.amountOfDistributions>0?u.createElement("div",null,"Selecteer links in het scherm een contact om een preview te zien."):u.createElement("div",null,"Geen gegevens gevonden.")}}])}(u.Component);var S=n(53530);function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(D=function(){return!!e})()}const O=function(e){function t(e){var n,a,o,l;return(0,i.A)(this,t),a=this,o=t,l=[e],o=(0,r.A)(o),(n=(0,s.A)(a,D()?Reflect.construct(o,l||[],(0,r.A)(a).constructor):o.apply(a,l))).state={email:null},n}return(0,o.A)(t,e),(0,a.A)(t,[{key:"componentDidUpdate",value:function(e){e.distributionId!==this.props.distributionId&&this.props.distributionId&&this.downloadEmail(this.props.distributionId)}},{key:"downloadEmail",value:function(e){var t=this;f.A.previewEmail(e,this.props.subject,this.props.emailTemplateId).then(function(e){t.setState({email:e.data})})}},{key:"render",value:function(){return this.props.isLoading?u.createElement("div",null,"Gegevens aan het laden."):this.state.email?u.createElement("div",null,u.createElement("div",{className:"row margin-10-top"},u.createElement("div",{className:"col-sm-12"},u.createElement("div",{className:"row"},u.createElement("div",{className:"col-sm-3"},u.createElement("label",{className:"col-sm-12"},"Aan")),u.createElement("div",{className:"col-sm-9"},this.state.email.to)))),u.createElement("div",{className:"row margin-10-top"},u.createElement("div",{className:"col-sm-12"},u.createElement("div",{className:"row"},u.createElement("div",{className:"col-sm-3"},u.createElement("label",{className:"col-sm-12"},"Onderwerp")),u.createElement("div",{className:"col-sm-9"},this.state.email.subject)))),u.createElement("div",{className:"row"},u.createElement(S.A,{label:"Tekst",value:this.state.email.htmlBody}))):this.props.amountOfDistributions>0?u.createElement("div",null,"Selecteer links in het scherm een contact om een preview te zien."):u.createElement("div",null,"Geen gegevens gevonden.")}}])}(u.Component);function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(z=function(){return!!e})()}var L=function(e){function t(e){var n,a,o,c;return(0,i.A)(this,t),a=this,o=t,c=[e],o=(0,r.A)(o),n=(0,s.A)(a,z()?Reflect.construct(o,c||[],(0,r.A)(a).constructor):o.apply(a,c)),(0,l.A)(n,"changeDistribution",function(e){n.setState({distributionId:e})}),(0,l.A)(n,"createRevenueReport",function(){document.body.style.cursor="wait",n.setState({isBusy:!0}),f.A.createRevenuesKwhReport(n.props.reportPreview.templateId,n.props.reportPreview.emailTemplateId,n.props.reportPreview.subject,n.props.reportPreview.distributionKwhIds,n.props.reportPreview.showOnPortal).then(function(e){document.body.style.cursor="default",e.data?n.setState({errorMessage:"Fouten bij verzenden rapporten",isBusy:!1,isSubmitted:!0}):n.setState({successMessage:"De rapporten zijn aangeboden voor verzenden.",isBusy:!1,isSubmitted:!0})})}),(0,l.A)(n,"redirect",function(){n.state.redirect?n.props.navigate(n.state.redirect):n.props.navigate(-1)}),n.state={distributions:[],distribution:{},successMessage:"",errorMessage:"",redirect:"",isBusy:!1,isSubmitted:!1,isLoading:!1},n}return(0,o.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),f.A.fetchRevenuesKwh(this.props.params.id).then(function(t){e.setState({distribution:t,isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})}),v.A.peekDistributionsKwhById(this.props.reportPreview.distributionKwhIds).then(function(t){e.setState({distributions:t.data})})}},{key:"componentWillUnmount",value:function(){this.props.clearPreviewReportKwh()}},{key:"render",value:function(){var e="",t=!0;this.state.isBusy?e="Bezig met versturen rapportage. Dit kan enige tijd duren.":t=!1;var n="",i=!1;return this.state.isSubmitted&&(n="Rapportage procedure aangevraagd.",i=!0),t?u.createElement("div",null,e):i?u.createElement("div",null,u.createElement("div",null,n),this.state.successMessage&&u.createElement(g.A,{closeModal:this.redirect,buttonCancelText:"Ok",showConfirmAction:!1,title:"Succes"},this.state.successMessage),this.state.errorMessage&&u.createElement(g.A,{closeModal:this.redirect,buttonCancelText:"Ok",showConfirmAction:!1,title:"Waarschuwing"},u.createElement("h4",null,this.state.errorMessage))):u.createElement("div",null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(d.A,null,u.createElement(p.A,{className:"panel-small"},u.createElement(A,{createRevenueReport:this.createRevenueReport,amountOfDistributions:this.state.distributions?this.state.distributions.length:0,distributionTypeId:this.state.distribution&&this.state.distribution.distributionTypeId,distributionCategoryCodeRef:this.state.distribution&&this.state.distribution.category&&this.state.distribution.category.codeRef,showOnPortal:this.props.reportPreview.showOnPortal})))))),u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-2"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(d.A,null,u.createElement(p.A,{className:"panel-invoice-payments-list"},u.createElement(I,{distributions:this.state.distributions,isLoading:this.state.isLoading,changeDistribution:this.changeDistribution}))))),u.createElement("div",{className:"col-md-5"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(d.A,null,u.createElement(p.A,null,this.state.isLoading?u.createElement("div",null,"Gegevens aan het laden."):this.props.reportPreview.templateId?u.createElement(T,{subject:this.props.reportPreview.subject,documentTemplateId:this.props.reportPreview.templateId,emailTemplateId:this.props.reportPreview.emailTemplateId,distributionId:this.state.distributionId,isLoading:this.state.isLoading,amountOfDistributions:this.state.distributions?this.state.distributions.length:-1}):u.createElement("div",{className:"text-center text-danger"},"Er is geen document template gekozen, er zal alleen een e-mail worden verstuurd zonder PDF bijlage"))))),u.createElement("div",{className:"col-md-5"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(d.A,null,u.createElement(p.A,null,this.state.isLoading?u.createElement("div",null,"Gegevens aan het laden."):u.createElement(O,{subject:this.props.reportPreview.subject,documentTemplateId:this.props.reportPreview.templateId,emailTemplateId:this.props.reportPreview.emailTemplateId,distributionId:this.state.distributionId,isLoading:this.state.isLoading,amountOfDistributions:this.state.distributions?this.state.distributions.length:-1})))))))}}])}(u.Component);const B=(0,h.Ng)(function(e){return{reportPreview:e.revenuesKwhReportPreview}},function(e){return{clearPreviewReportKwh:function(){e((0,b.yz)())}}})(function(e){var t=(0,m.Zp)(),n=(0,m.g)();return u.createElement(L,(0,c.A)({},e,{navigate:t,params:n}))})},53530:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(96540),a=n(96522),s=n(5556),r=n.n(s),o=n(62493),l=n(55956),c=function(e){var t=e.label,n=e.className,s=e.id,r=e.value,c=e.switchToEdit;return i.createElement("div",{className:n},i.createElement("label",{htmlFor:s,className:"col-sm-3"},t,c?i.createElement("span",null,i.createElement("br",null),i.createElement(l.A,{buttonClassName:"btn-success btn-padding-small",buttonText:"Wijzig",onClickAction:c})):""),i.createElement(o.A,{className:"col-sm-9"},i.createElement(a.Ay,null,i.createElement("div",{id:s,dangerouslySetInnerHTML:{__html:r}}))))};c.defaultProps={className:"col-sm-12",value:""},c.propTypes={label:r().string.isRequired,className:r().string,id:r().string,value:r().oneOfType([r().string,r().number])};const u=c}}]);