"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[4813],{95912:(e,t,n)=>{n.d(t,{Ef:()=>o,QQ:()=>c,QX:()=>p,Um:()=>i,WX:()=>r,Xn:()=>u,oo:()=>a,ps:()=>l,zm:()=>s});var o=function(e){return{type:"FETCH_CONTACT_GROUP_DETAILS",id:e}},r=function(e){return{type:"UPDATE_CONTACT_GROUP_DETAILS",contactGroupDetails:e}},a=function(){return{type:"CLEAR_CONTACT_GROUP_DETAILS"}},c=function(e,t){return{type:"DELETE_COMPOSED_GROUP",contactGroupId:e,contactGroupToDetachId:t}},s=function(e,t){return{type:"ATTACH_COMPOSED_GROUP",contactGroupId:e,contactGroupToAttachId:t}},i=function(e,t){return{type:"DELETE_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToDetachId:t}},l=function(e,t){return{type:"ATTACH_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToAttachId:t}},u=function(e){return{type:"UPDATE_LAPOSTA_LIST_ID",lapostaListId:e}},p=function(e){return{type:"DEACTIVATE_LAPOSTA_LIST_ID",lapostaListId:e}}},4813:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var o=n(15671),r=n(43144),a=n(97326),c=n(60136),s=n(82963),i=n(61120),l=n(4942),u=n(67294),p=n(37974),d=n(83920),m=function(e){return{type:"FETCH_CONTACTS_IN_GROUP",contactGroup:e}},h=function(){return{type:"CLEAR_CONTACTS_IN_GROUP"}},f=n(95912),g=n(87462),E=n(96498),v=n(75286),I=n(24480),y=n(52822);const b=function(e){return u.createElement("tr",{className:"thead-title-quaternary"},e.isUsedInLaposta?u.createElement(u.Fragment,null,u.createElement(y.Z,{RowClassName:"hidden-xs",title:"#",width:"10%"}),u.createElement(y.Z,{RowClassName:"hidden-xs hidden-sm",title:"Type",width:"10%"}),u.createElement(y.Z,{sortColumn:"fullName",title:"Naam",width:"25%"}),u.createElement(y.Z,{RowClassName:"hidden-xs",title:"E-mail",width:"25%"}),u.createElement(y.Z,{RowClassName:"hidden-xs",title:"Laposta status",width:"10%"}),u.createElement(y.Z,{RowClassName:"hidden-xs hidden-sm",title:"Toegevoegd aan groep op",width:"10%"}),u.createElement("th",{width:"10%"})):u.createElement(u.Fragment,null,u.createElement(y.Z,{RowClassName:"hidden-xs",title:"#",width:"15%"}),u.createElement(y.Z,{RowClassName:"hidden-xs hidden-sm",title:"Type",width:"15%"}),u.createElement(y.Z,{sortColumn:"fullName",title:"Naam",width:"30%"}),u.createElement(y.Z,{RowClassName:"hidden-xs",title:"E-mail",width:"30%"}),u.createElement(y.Z,{RowClassName:"hidden-xs hidden-sm",title:"Toegevoegd aan groep op",width:"10%"}),u.createElement("th",{width:"10%"})))};var G=n(61409),C=n(30381),w=n.n(C);var Z=function(e){(0,c.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).state={showActionButtons:!1,highlightRow:""},t}return(0,r.Z)(l,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(e){G.nA.push("/contact/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.number,r=t.typeName,a=t.fullName,c=t.emailAddress,s=t.lapostaMemberId,i=t.lapostaMemberState,l=t.memberToGroupSince,p=t.permissions,d=t.isUsedInLaposta,m="";switch(i){case"active":m="Actief";break;case"unsubscribed":m="Uitgeschreven";break;case"unconfirmed":m="Niet bevestigd";break;case"cleaned":m="Opgeschoond";break;case"unknown":m="Niet bekend in Laposta";break;case"inprogress":m="Wordt bijgewerkt";break;default:m=""}var h=!d||null!==s&&"unknown"!==i?null:"missing-data-row",f=!d||null!==s&&"unknown"!==i?"":"Koppeling niet gevonden in Laposta";return u.createElement("tr",{title:f,className:this.state.highlightRow+" "+h?h:"",onDoubleClick:function(){return e.openItem(n)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},u.createElement("td",{className:"hidden-xs"},o),u.createElement("td",{className:"hidden-xs hidden-sm"},r," "),u.createElement("td",null,a),u.createElement("td",{className:"hidden-xs"},c),d&&u.createElement("td",{className:"hidden-xs"},m),u.createElement("td",{className:"hidden-xs hidden-sm"},l?w()(l).format("DD-MM-Y"):""),u.createElement("td",null,this.state.showActionButtons&&p.updatePerson&&p.updateOrganisation&&(d&&null!==s||this.props.contactGroupType&&"static"===this.props.contactGroupType.id)?u.createElement("a",{role:"button",onClick:this.props.showEditItemModal.bind(this,n,c,l)},u.createElement("span",{className:"glyphicon glyphicon-pencil mybtn-success"})," "):"",this.state.showActionButtons&&(p.updateContactGroupMembers||p.updatePerson&&p.updateOrganisation)&&this.props.contactGroupType&&"static"===this.props.contactGroupType.id?u.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,n,a)},u.createElement("span",{className:"glyphicon glyphicon-trash mybtn-danger"})," "):""))}}]),l}(u.Component);const O=(0,p.$j)((function(e){return{permissions:e.meDetails.permissions,contactGroupType:e.contactGroupDetails.type}}))(Z);var D=n(41355);const T=(0,p.$j)(null,(function(e){return{deleteContactInGroup:function(t,n){e(function(e,t){return{type:"DELETE_CONTACT_IN_GROUP",contactGroup:e,id:t}}(t,n))}}}))((function(e){return u.createElement(D.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteContactInGroup(e.groupId,e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder contact uit groep: ",u.createElement("strong",null," ",e.fullName," "))}));var N=n(54138),P=n(9181);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"handleChangeDate",(function(e){var n=e?w()(e).format("Y-MM-DD"):"";t.setState(A(A({},t.state),{},{memberToGroupSince:n}))})),t.state={memberToGroupSince:e.memberToGroupSince},t}return(0,r.Z)(d,[{key:"render",value:function(){var e=this;return u.createElement(D.Z,{buttonConfirmText:"Opslaan",buttonClassName:"btn-danger",closeModal:this.props.closeEditItemModal,confirmAction:function(){return e.props.updateContactInGroup(e.props.groupId,e.props.id,{memberToGroupSince:e.state.memberToGroupSince}),void e.props.closeEditItemModal()},title:"Wijzigen"},u.createElement("div",{className:"row"},u.createElement(P.Z,{label:"Contact email",divSize:"col-xs-12",name:"emailAddress",value:this.props.emailAddress,readOnly:!0})),u.createElement("div",{className:"row"},u.createElement(N.Z,{label:"Wijzig datum toegevoegd aan groep op",divSize:"col-xs-12",name:"memberToGroupSince",value:this.props.memberToGroupSince,onChangeAction:this.handleChangeDate})),u.createElement("br",null))}}]),d}(u.Component);const k=(0,p.$j)(null,(function(e){return{updateContactInGroup:function(t,n,o){e(function(e,t,n){return{type:"UPDATE_CONTACT_IN_GROUP",contactGroup:e,id:t,memberToGroupSince:n}}(t,n,o))}}}))(S);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"showDeleteItemModal",(function(e,n){t.setState(j(j({},t.state),{},{showDeleteItem:!0,deleteItem:j(j({},t.state.deleteItem),{},{id:e,fullName:n})}))})),(0,l.Z)((0,a.Z)(t),"closeDeleteItemModal",(function(){t.setState(j(j({},t.state),{},{showDeleteItem:!1,deleteItem:j(j({},t.state.deleteItem),{},{id:"",fullName:""})}))})),(0,l.Z)((0,a.Z)(t),"showEditItemModal",(function(e,n,o){t.setState(j(j({},t.state),{},{showEditItem:!0,editItem:j(j({},t.state.editItem),{},{id:e,emailAddress:n,memberToGroupSince:o})}))})),(0,l.Z)((0,a.Z)(t),"closeEditItemModal",(function(){t.setState(j(j({},t.state),{},{showEditItem:!1,editItem:j(j({},t.state.editItem),{},{id:"",emailAddress:"",memberToGroupSince:""})}))})),t.state={showDeleteItem:!1,showEditItem:!1,deleteItem:{id:"",fullName:""},editItem:{id:"",emailAddress:"",memberToGroupSince:""}},t}return(0,r.Z)(d,[{key:"render",value:function(){var e=this,t="",n=!0;return this.props.hasError?t="Fout bij het ophalen van contact in groep.":this.props.isLoading?t="Gegevens aan het laden.":0===this.props.contactsInGroup.length?t="Geen contact in groep gevonden!":n=!1,u.createElement("div",null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-xs-12"},u.createElement("span",null,"Totaal leden in groep: ",u.createElement("strong",null,this.props.contactsInGroup.length)))),u.createElement("form",{onKeyUp:this.handleKeyUp},u.createElement(E.Z,null,u.createElement(v.Z,null,u.createElement(b,{showCheckbox:this.props.showCheckboxList,refreshContactsInGroupData:this.props.refreshContactsInGroupData,isUsedInLaposta:this.props.contactGroupDetails.isUsedInLaposta})),u.createElement(I.Z,null,n?u.createElement("tr",null,u.createElement("td",{colSpan:10},t)):this.props.contactsInGroup.map((function(t){return console.log(t),u.createElement(O,(0,g.Z)({key:t.id},t,{showDeleteItemModal:e.showDeleteItemModal,showEditItemModal:e.showEditItemModal,groupId:e.props.groupId,isUsedInLaposta:e.props.contactGroupDetails.isUsedInLaposta}))}))))),this.state.showDeleteItem&&u.createElement(T,(0,g.Z)({closeDeleteItemModal:this.closeDeleteItemModal,groupId:this.props.groupId},this.state.deleteItem)),this.state.showEditItem&&u.createElement(k,(0,g.Z)({closeEditItemModal:this.closeEditItemModal,groupId:this.props.groupId},this.state.editItem,{refreshContactsInGroupData:this.props.refreshContactsInGroupData})))}}]),d}(u.Component);const _=(0,p.$j)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError,contactGroupDetails:e.contactGroupDetails}}))(L);var x=n(72898),U=n(82084);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){(0,c.Z)(p,e);var t,n,l=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function p(e){var t;return(0,o.Z)(this,p),(t=l.call(this,e)).state={people:[],personId:"",peekLoading:{people:!0}},t.handleReactSelectChange=t.handleReactSelectChange.bind((0,a.Z)(t)),t}return(0,r.Z)(p,[{key:"componentDidMount",value:function(){var e=this;x.Z.getPerson().then((function(t){e.setState(z(z({},e.state),{},{people:t,peekLoading:z(z({},e.state.peekLoading),{},{people:!1})}))}))}},{key:"handleReactSelectChange",value:function(e){this.setState(z(z({},this.state),{},{personId:e}))}},{key:"render",value:function(){var e=this;return u.createElement(D.Z,{buttonConfirmText:"Toevoegen",closeModal:this.props.closeModalAddToGroup,confirmAction:function(){return e.props.addPersonToGroup(e.state.personId)},title:"Contact toevoegen aan groep: ".concat(this.props.groupName)},this.props.sendEmailNewContactLink?u.createElement("div",{className:"alert alert-danger",role:"alert"},"Na toevoegen zal er automatisch een email verzonden worden naar dit contact."):null,"coach"==this.props.inspectionPersonTypeId?u.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is coach".'):null,"projectmanager"==this.props.inspectionPersonTypeId?u.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is projectleider".'):null,"externalparty"==this.props.inspectionPersonTypeId?u.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is externe partij".'):null,u.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},u.createElement("div",{className:"row"},u.createElement(U.Z,{label:"Voeg bestaand contact toe",divSize:"col-sm-12",size:"col-sm-6",id:"personId",name:"personId",value:this.state.personId,onChangeAction:this.handleReactSelectChange,options:this.state.people,optionId:"id",optionName:"fullName",isLoading:this.state.peekLoading.people}))))}}]),p}(u.Component);const $=(0,p.$j)((function(e){return{id:e.contactDetails.id}}),(function(e){return{fetchContactDetails:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){e(fetchContactDetails(t))}))}}))(V);var H=n(60813),Y=n(55451),F=n(35823),W=n.n(F),X=n(72506);var Q=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"closeModalAddToGroup",(function(){t.setState({showModalAddToGroup:!1})})),(0,l.Z)((0,a.Z)(t),"addPersonToGroup",(function(e){var n={groupId:t.props.groupId,contactId:e};H.Z.addContactToGroup(n).then((function(e){t.setState({showModalAddToGroup:!1}),t.props.refreshContactsInGroupData()}))})),(0,l.Z)((0,a.Z)(t),"toggleModalAddToGroup",(function(){t.setState({showModalAddToGroup:!t.state.showModalAddToGroup})})),(0,l.Z)((0,a.Z)(t),"sendEmail",(function(){G.nA.push("/email/nieuw/groep/".concat(t.props.groupId,"/to"))})),(0,l.Z)((0,a.Z)(t),"newContact",(function(){G.nA.push("/contact/nieuw")})),(0,l.Z)((0,a.Z)(t),"getCSV",(function(){t.props.blockUI(),H.Z.getCsv(t.props.groupId).then((function(e){W()(e.data,"Groep-"+t.props.contactGroupDetails.name.substring(0,20)+"-"+w()().format("YYYY-MM-DD HH:mm:ss")+".csv"),t.props.unblockUI()})).catch((function(e){t.props.unblockUI()}))})),t.state={showModalAddToGroup:!1,showModalEmail:!1},t}return(0,r.Z)(d,[{key:"openGroupDetails",value:function(){G.nA.push("/contact-groep/".concat(this.props.groupId))}},{key:"render",value:function(){var e=this,t=this.props,n=t.permissions,o=t.contactGroupDetails;return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-4"},u.createElement("div",{className:"btn-group",role:"group"},u.createElement(Y.Z,{iconName:"glyphicon-refresh",onClickAction:this.props.refreshContactsInGroupData}),(n.updateContactGroupMembers||n.updatePerson&&n.updateOrganisation)&&o.type&&"static"===o.type.id&&u.createElement("div",{className:"nav navbar-nav btn-group"},u.createElement("button",{onClick:this.toggleModalAddToGroup,className:"btn btn-success btn-sm"},u.createElement("span",{className:"glyphicon glyphicon-plus"}))),u.createElement(Y.Z,{iconName:"glyphicon-download-alt",onClickAction:this.getCSV}),u.createElement(Y.Z,{iconName:"glyphicon-envelope",onClickAction:this.sendEmail}))),u.createElement("div",{className:"col-md-4"},u.createElement("h3",{className:"text-center table-title",onClick:function(){return e.openGroupDetails()},role:"button"},"Contacten in groep: ",o.name)),u.createElement("div",{className:"col-md-4"}),this.state.showModalAddToGroup&&u.createElement($,{closeModalAddToGroup:this.closeModalAddToGroup,addPersonToGroup:this.addPersonToGroup,groupName:o.name,sendEmailNewContactLink:o.sendEmailNewContactLink,inspectionPersonTypeId:o.inspectionPersonTypeId}))}}]),d}(u.Component);const K=(0,p.$j)((function(e){return{permissions:e.meDetails.permissions,contactGroupDetails:e.contactGroupDetails}}),(function(e){return(0,d.DE)({blockUI:X.Q,unblockUI:X.e},e)}))(Q);var q=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"refreshContactsInGroupData",(function(){t.props.clearContactsInGroup(),t.props.fetchContactsInGroup(t.props.params.contactGroup)})),t}return(0,r.Z)(d,[{key:"componentDidMount",value:function(){this.props.fetchContactsInGroup(this.props.params.contactGroup),this.props.fetchContactGroupDetails(this.props.params.contactGroup)}},{key:"componentWillUnmount",value:function(){this.props.clearContactsInGroup(),this.props.clearContactGroupDetails()}},{key:"render",value:function(){return u.createElement("div",null,u.createElement("div",{className:"panel panel-default"},u.createElement("div",{className:"panel-body"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(K,{refreshContactsInGroupData:this.refreshContactsInGroupData,groupId:this.props.params.contactGroup})),u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(_,{contactsInGroup:this.props.contactsInGroup,groupId:this.props.params.contactGroup,refreshContactsInGroupData:this.refreshContactsInGroupData})))))}}]),d}(u.Component);const J=(0,p.$j)((function(e){return{contactsInGroup:e.contactsInGroup}}),(function(e){return(0,d.DE)({fetchContactsInGroup:m,clearContactsInGroup:h,fetchContactGroupDetails:f.Ef,clearContactGroupDetails:f.oo},e)}))(q)}}]);