"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[4813],{95912:(e,t,n)=>{n.d(t,{Ef:()=>o,QQ:()=>c,QX:()=>p,Um:()=>i,WX:()=>r,Xn:()=>u,oo:()=>a,ps:()=>l,zm:()=>s});var o=function(e){return{type:"FETCH_CONTACT_GROUP_DETAILS",id:e}},r=function(e){return{type:"UPDATE_CONTACT_GROUP_DETAILS",contactGroupDetails:e}},a=function(){return{type:"CLEAR_CONTACT_GROUP_DETAILS"}},c=function(e,t){return{type:"DELETE_COMPOSED_GROUP",contactGroupId:e,contactGroupToDetachId:t}},s=function(e,t){return{type:"ATTACH_COMPOSED_GROUP",contactGroupId:e,contactGroupToAttachId:t}},i=function(e,t){return{type:"DELETE_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToDetachId:t}},l=function(e,t){return{type:"ATTACH_COMPOSED_EXCEPT_GROUP",contactGroupId:e,contactGroupToAttachId:t}},u=function(e){return{type:"UPDATE_LAPOSTA_LIST_ID",lapostaListId:e}},p=function(e){return{type:"DEACTIVATE_LAPOSTA_LIST_ID",lapostaListId:e}}},4813:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var o=n(15671),r=n(43144),a=n(97326),c=n(60136),s=n(82963),i=n(61120),l=n(4942),u=n(67294),p=n(86706),d=n(83920),m=function(e){return{type:"FETCH_CONTACTS_IN_GROUP",contactGroup:e}},h=function(){return{type:"CLEAR_CONTACTS_IN_GROUP"}},f=n(95912),E=n(87462),I=n(96498),v=n(75286),g=n(24480),C=n(52822);const b=function(e){return u.createElement("tr",{className:"thead-title-quaternary"},e.isUsedInLaposta?u.createElement(u.Fragment,null,u.createElement(C.Z,{RowClassName:"hidden-xs",title:"#",width:"10%"}),u.createElement(C.Z,{RowClassName:"hidden-xs hidden-sm",title:"Type",width:"10%"}),u.createElement(C.Z,{sortColumn:"fullName",title:"Naam",width:"25%"}),u.createElement(C.Z,{RowClassName:"hidden-xs",title:"E-mail",width:"25%"}),u.createElement(C.Z,{RowClassName:"hidden-xs",title:"Laposta status",width:"10%"}),u.createElement(C.Z,{RowClassName:"hidden-xs hidden-sm",title:"Toegevoegd aan groep op",width:"10%"}),u.createElement("th",{width:"10%"})):u.createElement(u.Fragment,null,u.createElement(C.Z,{RowClassName:"hidden-xs",title:"#",width:"15%"}),u.createElement(C.Z,{RowClassName:"hidden-xs hidden-sm",title:"Type",width:"15%"}),u.createElement(C.Z,{sortColumn:"fullName",title:"Naam",width:"30%"}),u.createElement(C.Z,{RowClassName:"hidden-xs",title:"E-mail",width:"30%"}),u.createElement(C.Z,{RowClassName:"hidden-xs hidden-sm",title:"Toegevoegd aan groep op",width:"10%"}),u.createElement("th",{width:"10%"})))};var G=n(61409),w=n(30381),y=n.n(w),N=n(97894),D=n(75502),Z=n(77320);var T=function(e){(0,c.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).state={showActionButtons:!1,highlightRow:""},t}return(0,r.Z)(l,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(e){G.nA.push("/contact/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.number,r=t.typeName,a=t.fullName,c=t.emailAddress,s=t.lapostaMemberId,i=t.lapostaMemberState,l=t.memberToGroupSince,p=t.permissions,d=t.isUsedInLaposta,m="";switch(i){case"active":m="Actief";break;case"unsubscribed":m="Uitgeschreven";break;case"unconfirmed":m="Niet bevestigd";break;case"cleaned":m="Opgeschoond";break;case"unknown":m="Niet bekend in Laposta";break;case"inprogress":m="Wordt bijgewerkt";break;default:m=""}var h=!d||null!==s&&"unknown"!==i?null:"missing-data-row",f=!d||null!==s&&"unknown"!==i?"":"Koppeling niet gevonden in Laposta";return u.createElement("tr",{title:f,className:this.state.highlightRow+" "+h?h:"",onDoubleClick:function(){return e.openItem(n)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},u.createElement("td",{className:"hidden-xs"},o),u.createElement("td",{className:"hidden-xs hidden-sm"},r," "),u.createElement("td",null,a),u.createElement("td",{className:"hidden-xs"},c),d&&u.createElement("td",{className:"hidden-xs"},m),u.createElement("td",{className:"hidden-xs hidden-sm"},l?y()(l).format("DD-MM-Y"):""),u.createElement("td",null,this.state.showActionButtons&&p.updatePerson&&p.updateOrganisation&&(d&&null!==s||this.props.contactGroupType&&"static"===this.props.contactGroupType.id)?u.createElement("a",{role:"button",onClick:this.props.showEditItemModal.bind(this,n,c,l)},u.createElement(N.ZP,{className:"mybtn-success",size:14,icon:D.r})):"","Â ",this.state.showActionButtons&&(p.updateContactGroupMembers||p.updatePerson&&p.updateOrganisation)&&this.props.contactGroupType&&"static"===this.props.contactGroupType.id?u.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,n,a)},u.createElement(N.ZP,{className:"mybtn-danger",size:14,icon:Z._})):""))}}]),l}(u.Component);const O=(0,p.$j)((function(e){return{permissions:e.meDetails.permissions,contactGroupType:e.contactGroupDetails.type}}))(T);var P=n(41355);const A=(0,p.$j)(null,(function(e){return{deleteContactInGroup:function(t,n){e(function(e,t){return{type:"DELETE_CONTACT_IN_GROUP",contactGroup:e,id:t}}(t,n))}}}))((function(e){return u.createElement(P.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteContactInGroup(e.groupId,e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder contact uit groep: ",u.createElement("strong",null," ",e.fullName," "))}));var R=n(54138),S=n(9181);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"handleChangeDate",(function(e){var n=e?y()(e).format("Y-MM-DD"):"";t.setState(M(M({},t.state),{},{memberToGroupSince:n}))})),t.state={memberToGroupSince:e.memberToGroupSince},t}return(0,r.Z)(d,[{key:"render",value:function(){var e=this;return u.createElement(P.Z,{buttonConfirmText:"Opslaan",buttonClassName:"btn-danger",closeModal:this.props.closeEditItemModal,confirmAction:function(){return e.props.updateContactInGroup(e.props.groupId,e.props.id,{memberToGroupSince:e.state.memberToGroupSince}),void e.props.closeEditItemModal()},title:"Wijzigen"},u.createElement("div",{className:"row"},u.createElement(S.Z,{label:"Contact email",divSize:"col-xs-12",name:"emailAddress",value:this.props.emailAddress,readOnly:!0})),u.createElement("div",{className:"row"},u.createElement(R.Z,{label:"Wijzig datum toegevoegd aan groep op",divSize:"col-xs-12",name:"memberToGroupSince",value:this.props.memberToGroupSince,onChangeAction:this.handleChangeDate})),u.createElement("br",null))}}]),d}(u.Component);const _=(0,p.$j)(null,(function(e){return{updateContactInGroup:function(t,n,o){e(function(e,t,n){return{type:"UPDATE_CONTACT_IN_GROUP",contactGroup:e,id:t,memberToGroupSince:n}}(t,n,o))}}}))(j);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"showDeleteItemModal",(function(e,n){t.setState(x(x({},t.state),{},{showDeleteItem:!0,deleteItem:x(x({},t.state.deleteItem),{},{id:e,fullName:n})}))})),(0,l.Z)((0,a.Z)(t),"closeDeleteItemModal",(function(){t.setState(x(x({},t.state),{},{showDeleteItem:!1,deleteItem:x(x({},t.state.deleteItem),{},{id:"",fullName:""})}))})),(0,l.Z)((0,a.Z)(t),"showEditItemModal",(function(e,n,o){t.setState(x(x({},t.state),{},{showEditItem:!0,editItem:x(x({},t.state.editItem),{},{id:e,emailAddress:n,memberToGroupSince:o})}))})),(0,l.Z)((0,a.Z)(t),"closeEditItemModal",(function(){t.setState(x(x({},t.state),{},{showEditItem:!1,editItem:x(x({},t.state.editItem),{},{id:"",emailAddress:"",memberToGroupSince:""})}))})),t.state={showDeleteItem:!1,showEditItem:!1,deleteItem:{id:"",fullName:""},editItem:{id:"",emailAddress:"",memberToGroupSince:""}},t}return(0,r.Z)(d,[{key:"render",value:function(){var e=this,t="",n=!0;return this.props.hasError?t="Fout bij het ophalen van contact in groep.":this.props.isLoading?t="Gegevens aan het laden.":0===this.props.contactsInGroup.length?t="Geen contact in groep gevonden!":n=!1,u.createElement("div",null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-xs-12"},u.createElement("span",null,"Totaal leden in groep: ",u.createElement("strong",null,this.props.contactsInGroup.length)))),u.createElement("form",{onKeyUp:this.handleKeyUp},u.createElement(I.Z,null,u.createElement(v.Z,null,u.createElement(b,{showCheckbox:this.props.showCheckboxList,refreshContactsInGroupData:this.props.refreshContactsInGroupData,isUsedInLaposta:this.props.contactGroupDetails.isUsedInLaposta})),u.createElement(g.Z,null,n?u.createElement("tr",null,u.createElement("td",{colSpan:10},t)):this.props.contactsInGroup.map((function(t){return u.createElement(O,(0,E.Z)({key:t.id},t,{showDeleteItemModal:e.showDeleteItemModal,showEditItemModal:e.showEditItemModal,groupId:e.props.groupId,isUsedInLaposta:e.props.contactGroupDetails.isUsedInLaposta}))}))))),this.state.showDeleteItem&&u.createElement(A,(0,E.Z)({closeDeleteItemModal:this.closeDeleteItemModal,groupId:this.props.groupId},this.state.deleteItem)),this.state.showEditItem&&u.createElement(_,(0,E.Z)({closeEditItemModal:this.closeEditItemModal,groupId:this.props.groupId},this.state.editItem,{refreshContactsInGroupData:this.props.refreshContactsInGroupData})))}}]),d}(u.Component);const z=(0,p.$j)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError,contactGroupDetails:e.contactGroupDetails}}))(U);var B=n(29439),H=n(15861),Y=n(64687),$=n.n(Y),F=n(72898),V=n(71515);const W=function(e){var t=(0,u.useState)({}),n=(0,B.Z)(t,2),o=n[0],r=n[1],a=(0,u.useState)(""),c=(0,B.Z)(a,2),s=c[0],i=c[1],l=(0,u.useState)(!1),p=(0,B.Z)(l,2),d=p[0],m=p[1],h=e.inspectionPersonTypeId,f=e.groupName,E=e.addPersonToGroup,I=e.sendEmailNewContactLink,v=e.closeModalAddToGroup,g=function(){var e=(0,H.Z)($().mark((function e(){var t;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.length<=1)){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,F.Z.fetchContactSearch(s,h);case 6:return t=e.sent,m(!1),e.abrupt("return",t.data.data);case 11:e.prev=11,e.t0=e.catch(3),m(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return u.createElement(P.Z,{buttonConfirmText:"Toevoegen",closeModal:v,confirmAction:function(){return E(o.id)},title:"Contact toevoegen aan groep: ".concat(f)},I?u.createElement("div",{className:"alert alert-danger",role:"alert"},"Na toevoegen zal er automatisch een email verzonden worden naar dit contact."):null,"coach"==h?u.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is coach".'):null,"projectmanager"==h?u.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is projectleider".'):null,"externalparty"==h?u.createElement("div",{className:"alert alert-danger",role:"alert"},'Na toevoegen wordt dit contact automatisch "Is externe partij".'):null,u.createElement("form",{className:"form-horizontal"},u.createElement("div",{className:"row"},u.createElement(V.Z,{label:"Voeg bestaand contact toe",divSize:"col-sm-12",size:"col-sm-8",name:"personId",id:"personId",loadOptions:g,optionName:"fullName",value:o,onChangeAction:function(e){e&&r(e)},required:"required",isLoading:d,handleInputChange:function(e){i(e)},multi:!1}))))};var X=n(60813),Q=n(55451),q=n(35823),K=n.n(q),J=n(72506),ee=n(10055),te=n(16589),ne=n(18274);const oe=(0,p.$j)((function(e){return{permissions:e.meDetails.permissions,contactGroupDetails:e.contactGroupDetails}}),(function(e){return(0,d.DE)({blockUI:J.Q,unblockUI:J.e},e)}))((function(e){var t=e.permissions,n=e.contactGroupDetails,o=e.blockUI,r=e.unblockUI,a=e.refreshContactsInGroupData,c=(0,u.useState)(!1),s=(0,B.Z)(c,2),i=s[0],l=s[1],p=(0,u.useContext)(ne.v).openEmailSendModal;return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-4"},u.createElement("div",{className:"btn-group",role:"group"},u.createElement(Q.Z,{iconName:"refresh",onClickAction:a}),(t.updateContactGroupMembers||t.updatePerson&&t.updateOrganisation)&&n.type&&"static"===n.type.id&&u.createElement("div",{className:"nav navbar-nav btn-group"},u.createElement("button",{onClick:function(){l(!i)},className:"btn btn-success btn-sm"},u.createElement(N.ZP,{size:14,icon:ee.P}))),u.createElement(Q.Z,{iconName:"download",onClickAction:function(){o(),X.Z.getCsv(n.id).then((function(e){K()(e.data,"Groep-"+n.name.substring(0,20)+"-"+y()().format("YYYY-MM-DD HH:mm:ss")+".csv"),r()})).catch((function(e){r()}))}}),u.createElement(Q.Z,{iconName:"envelopeO",onClickAction:function(){te.Z.storeGroupMail(n.id).then((function(e){p(e.data.id)}))}}))),u.createElement("div",{className:"col-md-4"},u.createElement("h3",{className:"text-center table-title",onClick:function(){G.nA.push("/contact-groep/".concat(n.id))},role:"button"},"Contacten in groep: ",n.name)),u.createElement("div",{className:"col-md-4"}),i&&u.createElement(W,{closeModalAddToGroup:function(){l(!1)},addPersonToGroup:function(e){var t={groupId:n.id,contactId:e};X.Z.addContactToGroup(t).then((function(){l(!1),a()}))},groupName:n.name,sendEmailNewContactLink:n.sendEmailNewContactLink,inspectionPersonTypeId:n.inspectionPersonTypeId}))}));var re=function(e){(0,c.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=p.call(this,e),(0,l.Z)((0,a.Z)(t),"refreshContactsInGroupData",(function(){t.props.clearContactsInGroup(),t.props.fetchContactsInGroup(t.props.params.contactGroup)})),t}return(0,r.Z)(d,[{key:"componentDidMount",value:function(){this.props.fetchContactsInGroup(this.props.params.contactGroup),this.props.fetchContactGroupDetails(this.props.params.contactGroup)}},{key:"componentWillUnmount",value:function(){this.props.clearContactsInGroup(),this.props.clearContactGroupDetails()}},{key:"render",value:function(){return u.createElement("div",null,u.createElement("div",{className:"panel panel-default"},u.createElement("div",{className:"panel-body"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(oe,{refreshContactsInGroupData:this.refreshContactsInGroupData,groupId:this.props.params.contactGroup})),u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(z,{contactsInGroup:this.props.contactsInGroup,groupId:this.props.params.contactGroup,refreshContactsInGroupData:this.refreshContactsInGroupData})))))}}]),d}(u.Component);const ae=(0,p.$j)((function(e){return{contactsInGroup:e.contactsInGroup}}),(function(e){return(0,d.DE)({fetchContactsInGroup:m,clearContactsInGroup:h,fetchContactGroupDetails:f.Ef,clearContactGroupDetails:f.oo},e)}))(re)}}]);