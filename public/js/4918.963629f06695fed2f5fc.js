"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[4918],{59024:(e,t,n)=>{n.d(t,{K:()=>a,d:()=>r});var a="".concat(window.URL_API,"/oauth/gmail/callback"),r="".concat(window.URL_API,"/api/oauth/ms-azure/callback")},89191:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(29439),r=n(67294),l=n(86706),i=n(9181),o=n(71840),m=n(21606),c=n(49332),s=n(98688),u=n(80720),d=n(14309),g=n(62265),p=n(19501),v=p.Ry().shape({name:p.Z_().required("Verplicht"),email:p.Z_().email("Ongeldige e-mail").required("Verplicht")}),E=p.Ry().shape({imapHost:p.Z_().required("Verplicht"),imapPort:p.Z_().required("Verplicht"),username:p.Z_().required("Verplicht")}),S=p.Ry().shape({smtpHost:p.Z_().required("Verplicht"),smtpPort:p.Z_().required("Verplicht"),username:p.Z_().required("Verplicht")}),h=p.Ry().shape({password:p.Z_().required("Verplicht")}),A=p.Ry().shape({mailgunDomainId:p.Z_().required("Verplicht").typeError("Verplicht")}),b=p.Ry().shape({gmailApiSettings:p.Ry().shape({projectId:p.Z_().trim().required("Verplicht"),clientId:p.Z_().trim().required("Verplicht")})}),Z=p.Ry().shape({gmailApiSettings:p.Ry().shape({clientId:p.Z_().trim().required("Verplicht"),projectId:p.Z_().trim().required("Verplicht"),tenantId:p.Z_().trim().required("Verplicht")})}),y=p.Ry().shape({gmailApiSettings:p.Ry().shape({clientSecret:p.Z_().trim().required("Verplicht")})}),I=n(59024),q=n(7250);const T=function(e){var t,n,a,l,o,m,c,d,g,p,v,E,S=e.values,h=e.errors,A=e.touched,b=e.handleChange,Z=e.handleBlur;return r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Gmail api instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Project id",name:"gmailApiSettings.projectId",value:null===(t=S.gmailApiSettings)||void 0===t?void 0:t.projectId,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(n=h.gmailApiSettings)||void 0===n?void 0:n.projectId)&&(null===(a=A.gmailApiSettings)||void 0===a?void 0:a.projectId),errorMessage:null===(l=h.gmailApiSettings)||void 0===l?void 0:l.projectId}),r.createElement(q.Z,{className:"form-group col-sm-6",label:"Redirect url",value:I.K})),r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(o=S.gmailApiSettings)||void 0===o?void 0:o.clientId,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(m=h.gmailApiSettings)||void 0===m?void 0:m.clientId)&&(null===(c=A.gmailApiSettings)||void 0===c?void 0:c.clientId),errorMessage:null===(d=h.gmailApiSettings)||void 0===d?void 0:d.clientId}),r.createElement(i.Z,{label:"Client secret",name:"gmailApiSettings.clientSecret",value:null===(g=S.gmailApiSettings)||void 0===g?void 0:g.clientSecret,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(p=h.gmailApiSettings)||void 0===p?void 0:p.clientSecret)&&(null===(v=A.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(E=h.gmailApiSettings)||void 0===E?void 0:E.clientSecret}))))};var C=n(30381),N=n.n(C);const w=function(e){var t,n,a,l,o,m,c,d,g,p,v,E,S,h,A,b,Z=e.values,y=e.errors,T=e.touched,C=e.handleChange,N=e.handleBlur;return r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Microsoft Azure api instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(t=Z.gmailApiSettings)||void 0===t?void 0:t.clientId,onChangeAction:C,onBlurAction:N,required:"required",error:(null===(n=y.gmailApiSettings)||void 0===n?void 0:n.clientId)&&(null===(a=T.gmailApiSettings)||void 0===a?void 0:a.clientId),errorMessage:null===(l=y.gmailApiSettings)||void 0===l?void 0:l.clientId}),r.createElement(i.Z,{label:"Object ID",name:"gmailApiSettings.projectId",value:null===(o=Z.gmailApiSettings)||void 0===o?void 0:o.projectId,onChangeAction:C,onBlurAction:N,required:"required",error:(null===(m=y.gmailApiSettings)||void 0===m?void 0:m.projectId)&&(null===(c=T.gmailApiSettings)||void 0===c?void 0:c.projectId),errorMessage:null===(d=y.gmailApiSettings)||void 0===d?void 0:d.projectId})),r.createElement("div",{className:"row"},r.createElement(q.Z,{className:"form-group col-sm-6",label:"Redirect url",value:I.d}),r.createElement(i.Z,{type:"text",label:"Client secret waarde",name:"gmailApiSettings.clientSecret",value:null===(g=Z.gmailApiSettings)||void 0===g?void 0:g.clientSecret,className:"numeric-password",placeholder:"**********",onChangeAction:C,onBlurAction:N,required:"required",error:(null===(p=y.gmailApiSettings)||void 0===p?void 0:p.clientSecret)&&(null===(v=T.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(E=y.gmailApiSettings)||void 0===E?void 0:E.clientSecret})),r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Tenant ID",name:"gmailApiSettings.tenantId",value:null===(S=Z.gmailApiSettings)||void 0===S?void 0:S.tenantId,onChangeAction:C,onBlurAction:N,required:"required",error:(null===(h=y.gmailApiSettings)||void 0===h?void 0:h.tenantId)&&(null===(A=T.gmailApiSettings)||void 0===A?void 0:A.tenantId),errorMessage:null===(b=y.gmailApiSettings)||void 0===b?void 0:b.tenantId}))))},f=(0,l.$j)((function(e){return{mailboxServerTypes:e.systemData.mailboxServerTypes,mailgunDomain:e.systemData.mailgunDomain}}))((function(e){var t,n=e.initialValues,l=e.processSubmit,p=e.mailgunDomain,I=e.mailboxServerTypes,C=e.switchToView,f=e.isNew,M=(0,r.useState)(n.incomingServerType),P=(0,a.Z)(M,2),B=P[0],x=P[1],V=(0,r.useState)(n.outgoingServerType),k=(0,a.Z)(V,2),_=k[0],j=k[1],D=(0,g.TA)({initialValues:n,validationSchema:(t=v,"imap"===B&&(t=t.concat(E),f&&(t=t.concat(h))),"smtp"===_&&(t=t.concat(S),f&&(t=t.concat(h))),"mailgun"===_&&(t=t.concat(A)),"gmail"!==B&&"gmail"!==_||(t=t.concat(b),f&&(t=t.concat(y))),"ms-oauth"!==B&&"ms-oauth"!==_||(t=t.concat(Z),f&&(t=t.concat(y))),t),onSubmit:function(e,t){var n=t.setSubmitting;l(e,n)}}),F=D.values,R=D.errors,H=D.touched,L=D.handleChange,z=D.handleSubmit,O=D.setFieldValue,U=D.handleBlur,K=D.isSubmitting;return(0,r.useEffect)((function(){F.incomingServerType&&x(F.incomingServerType),F.outgoingServerType&&j(F.outgoingServerType)}),[F.incomingServerType,F.outgoingServerType]),r.createElement("form",{className:"form-horizontal",onSubmit:z},r.createElement(d.Z,null,r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Weergave Naam",name:"name",value:F.name,onChangeAction:L,onBlurAction:U,required:"required",error:R.name&&H.name,errorMessage:R.name}),r.createElement(i.Z,{label:"E-mail",name:"email",value:F.email,onChangeAction:L,onBlurAction:U,required:"required",error:R.email&&H.email,errorMessage:R.email})),r.createElement("div",{className:"row"},r.createElement(m.Z,{label:"Actief",name:"isActive",value:F.isActive,onChangeAction:function(e){e.persist(),O(e.target.name,e.target.checked)},disabled:F.primary}),r.createElement(m.Z,{label:"Primair (verzend wachtwoord mails)",name:"primary",value:F.primary,onChangeAction:function(e){e.persist(),O(e.target.name,e.target.checked)},disabled:!F.isActive})),r.createElement("div",{className:"row"},r.createElement(m.Z,{label:r.createElement("span",null,"Koppel contact op email ",r.createElement("u",null,"aan")," adres",r.createElement("br",null),r.createElement("small",{style:{color:"#ccc",fontWeight:"normal"}},"Koppeling contact standaard op email ",r.createElement("u",null,"afzender")," adres")),name:"linkContactFromEmailToAddress",value:F.linkContactFromEmailToAddress,onChangeAction:function(e){e.persist(),O(e.target.name,e.target.checked)}}))),r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Servergegevens"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(o.Z,{label:"Inkomende mail type",name:"incomingServerType",value:F.incomingServerType,options:I.incomingServerTypes,onChangeAction:L,emptyOption:!1,required:"required"}),r.createElement(o.Z,{label:"Uitgaande mail type",name:"outgoingServerType",value:F.outgoingServerType,options:I.outgoingServerTypes,onChangeAction:L,emptyOption:!1,required:"required"})),r.createElement("div",{className:"row"},"imap"===F.incomingServerType?r.createElement(i.Z,{label:"Inkomende IMAP host",name:"imapHost",value:F.imapHost,onChangeAction:L,onBlurAction:U,required:"required",error:R.imapHost&&H.imapHost,errorMessage:R.imapHost}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===F.outgoingServerType?r.createElement(i.Z,{label:"Uitgaande SMTP host",name:"smtpHost",value:F.smtpHost,onChangeAction:L,onBlurAction:U,required:"required",error:R.smtpHost&&H.smtpHost,errorMessage:R.smtpHost}):null,"mailgun"===F.outgoingServerType?r.createElement(o.Z,{label:"Uitgaand Mailgun domein",name:"mailgunDomainId",value:F.mailgunDomainId,options:p,optionName:"domain",onChangeAction:L,required:"required",error:R.mailgunDomainId&&H.mailgunDomainId,errorMessage:R.mailgunDomainId}):null)),("imap"===F.incomingServerType||"smtp"===F.outgoingServerType)&&r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Gebruikersnaam",name:"username",value:F.username,onChangeAction:L,onBlurAction:U,required:"required",error:R.username&&H.username,errorMessage:R.username}),r.createElement(i.Z,{type:"text",label:"Wachtwoord",name:"password",value:F.password,className:"numeric-password",placeholder:"**********",onChangeAction:L,onBlurAction:U,required:"required",error:R.password&&H.password,errorMessage:R.password})),r.createElement("div",{className:"row"},"imap"===F.incomingServerType?r.createElement(i.Z,{label:"Imap poort",name:"imapPort",value:F.imapPort,onChangeAction:L,onBlurAction:U,required:"required",error:R.imapPort&&H.imapPort,errorMessage:R.imapPort}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===F.outgoingServerType&&r.createElement(i.Z,{label:"Smtp poort",name:"smtpPort",value:F.smtpPort,onChangeAction:L,onBlurAction:U,required:"required",error:R.smtpPort&&H.smtpPort,errorMessage:R.smtpPort})),r.createElement("div",{className:"row"},"imap"===F.incomingServerType?r.createElement(o.Z,{label:"Imap versleutelde verbinding",name:"imapEncryption",value:F.imapEncryption,options:[{id:"ssl",name:"SSL"},{id:"ssl/novalidate-cert",name:"SSL - self-signed certificate"},{id:"tls",name:"TLS"}],onChangeAction:L}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===F.outgoingServerType&&r.createElement(o.Z,{label:"Smtp versleutelde verbinding",name:"smtpEncryption",value:F.smtpEncryption,options:[{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"}],onChangeAction:L})),"imap"===F.incomingServerType&&r.createElement(r.Fragment,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Inbox prefix",name:"imapInboxPrefix",value:F.imapInboxPrefix,onChangeAction:L,onBlurAction:U,error:R.imapInboxPrefix&&H.imapInboxPrefix,errorMessage:R.imapInboxPrefix})),r.createElement("div",{className:"row"},r.createElement(m.Z,{label:"Zet email als gelezen op server",name:"emailMarkAsSeen",value:F.emailMarkAsSeen,onChangeAction:L,onBlurAction:U}))))),("gmail"===F.incomingServerType||"gmail"===F.outgoingServerType)&&r.createElement(T,{values:F,errors:R,touched:H,handleChange:L,handleBlur:U}),("ms-oauth"===F.incomingServerType||"ms-oauth"===F.outgoingServerType)&&r.createElement(w,{values:F,errors:R,touched:H,handleChange:L,handleBlur:U}),"mailgun"===F.incomingServerType&&r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Mailgun instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(q.Z,{className:"form-group col-sm-12",labelSize:"col-sm-3",valueSize:"col-sm-9",label:"Forward email",value:F.inboundMailgunEmail?F.inboundMailgunEmail:"Nog niet bepaald",textToolTip:"Forward email "+F.email+" naar "+(F.inboundMailgunEmail?F.inboundMailgunEmail:"Nog niet bepaald")+" om deze in Econobis te ontvangen."})))),F.id&&r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Log"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(q.Z,{label:"Datum email laatst opgehaald",value:F.dateLastFetched?N()(F.dateLastFetched).format("L HH:mm:ss"):"Nog niet bepaald",className:"form-group col-sm-6"}),r.createElement(q.Z,{label:"UID email laatst opgehaald",value:F.imapIdLastFetched,className:"form-group col-sm-6"})))),r.createElement(s.Z,null,r.createElement("div",{className:"pull-right btn-group",role:"group"},F.id?r.createElement(r.Fragment,null,r.createElement(c.Z,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:C}),r.createElement(c.Z,{buttonText:"Opslaan",onClickAction:z,type:"submit",value:"Submit",loading:K})):r.createElement(c.Z,{buttonText:"Opslaan",onClickAction:z,type:"submit",value:"Submit",loading:K})))))}))}}]);