"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[4918],{59024:(e,t,r)=>{r.d(t,{K:()=>a,d:()=>n});var a="".concat(window.URL_API,"/oauth/gmail/callback"),n="".concat(window.URL_API,"/api/oauth/ms-azure/callback")},4918:(e,t,r)=>{r.d(t,{Z:()=>w});var a=r(29439),n=r(67294),i=r(37974),l=r(9181),o=r(71840),m=r(21606),c=r(49332),s=r(98688),u=r(80720),d=r(14309),p=r(82178),g=r(19501),v=g.Ry().shape({name:g.Z_().required("Verplicht"),email:g.Z_().email("Ongeldige e-mail").required("Verplicht")}),h=g.Ry().shape({imapHost:g.Z_().required("Verplicht"),imapPort:g.Z_().required("Verplicht"),username:g.Z_().required("Verplicht")}),S=g.Ry().shape({smtpHost:g.Z_().required("Verplicht"),smtpPort:g.Z_().required("Verplicht"),username:g.Z_().required("Verplicht")}),E=g.Ry().shape({password:g.Z_().required("Verplicht")}),A=g.Ry().shape({mailgunDomainId:g.Z_().required("Verplicht").typeError("Verplicht")}),b=g.Ry().shape({gmailApiSettings:g.Ry().shape({projectId:g.Z_().trim().required("Verplicht"),clientId:g.Z_().trim().required("Verplicht"),clientSecret:g.Z_().trim().required("Verplicht")})}),Z=g.Ry().shape({gmailApiSettings:g.Ry().shape({clientId:g.Z_().trim().required("Verplicht"),clientSecret:g.Z_().trim().required("Verplicht"),projectId:g.Z_().trim().required("Verplicht")})}),y=r(59024),q=r(7250);const I=function(e){var t,r,a,i,o,m,c,d,p,g,v,h,S=e.values,E=e.errors,A=e.touched,b=e.handleChange,Z=e.handleBlur;return n.createElement(n.Fragment,null,n.createElement(u.Z,null,n.createElement("span",{className:"h5"},n.createElement("strong",null,"Gmail api instellingen"))),n.createElement(s.Z,null,n.createElement("div",{className:"row"},n.createElement(l.Z,{label:"Project id",name:"gmailApiSettings.projectId",value:null===(t=S.gmailApiSettings)||void 0===t?void 0:t.projectId,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(r=E.gmailApiSettings)||void 0===r?void 0:r.projectId)&&(null===(a=A.gmailApiSettings)||void 0===a?void 0:a.projectId),errorMessage:null===(i=E.gmailApiSettings)||void 0===i?void 0:i.projectId}),n.createElement(q.Z,{className:"form-group col-sm-6",label:"Redirect url",value:y.K})),n.createElement("div",{className:"row"},n.createElement(l.Z,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(o=S.gmailApiSettings)||void 0===o?void 0:o.clientId,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(m=E.gmailApiSettings)||void 0===m?void 0:m.clientId)&&(null===(c=A.gmailApiSettings)||void 0===c?void 0:c.clientId),errorMessage:null===(d=E.gmailApiSettings)||void 0===d?void 0:d.clientId}),n.createElement(l.Z,{label:"Client secret",name:"gmailApiSettings.clientSecret",value:null===(p=S.gmailApiSettings)||void 0===p?void 0:p.clientSecret,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(g=E.gmailApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=A.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(h=E.gmailApiSettings)||void 0===h?void 0:h.clientSecret}))))};var C=r(30381),T=r.n(C);const f=function(e){var t,r,a,i,o,m,c,d,p,g,v,h,S=e.values,E=e.errors,A=e.touched,b=e.handleChange,Z=e.handleBlur;return n.createElement(n.Fragment,null,n.createElement(u.Z,null,n.createElement("span",{className:"h5"},n.createElement("strong",null,"Microsoft Azure api instellingen"))),n.createElement(s.Z,null,n.createElement("div",{className:"row"},n.createElement(l.Z,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(t=S.gmailApiSettings)||void 0===t?void 0:t.clientId,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(r=E.gmailApiSettings)||void 0===r?void 0:r.clientId)&&(null===(a=A.gmailApiSettings)||void 0===a?void 0:a.clientId),errorMessage:null===(i=E.gmailApiSettings)||void 0===i?void 0:i.clientId}),n.createElement(l.Z,{label:"Object ID",name:"gmailApiSettings.projectId",value:null===(o=S.gmailApiSettings)||void 0===o?void 0:o.projectId,onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(m=E.gmailApiSettings)||void 0===m?void 0:m.projectId)&&(null===(c=A.gmailApiSettings)||void 0===c?void 0:c.projectId),errorMessage:null===(d=E.gmailApiSettings)||void 0===d?void 0:d.projectId})),n.createElement("div",{className:"row"},n.createElement(q.Z,{className:"form-group col-sm-6",label:"Redirect url",value:y.d}),n.createElement(l.Z,{type:"text",label:"Client secret waarde",name:"gmailApiSettings.clientSecret",value:null===(p=S.gmailApiSettings)||void 0===p?void 0:p.clientSecret,className:"numeric-password",placeholder:"**********",onChangeAction:b,onBlurAction:Z,required:"required",error:(null===(g=E.gmailApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=A.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(h=E.gmailApiSettings)||void 0===h?void 0:h.clientSecret}))))},w=(0,i.$j)((function(e){return{mailboxServerTypes:e.systemData.mailboxServerTypes,mailgunDomain:e.systemData.mailgunDomain}}))((function(e){var t,r=e.initialValues,i=e.processSubmit,g=e.mailgunDomain,y=e.mailboxServerTypes,C=e.switchToView,w=e.isNew,N=(0,n.useState)(r.incomingServerType),P=(0,a.Z)(N,2),M=P[0],B=P[1],V=(0,n.useState)(r.outgoingServerType),x=(0,a.Z)(V,2),k=x[0],_=x[1],j=(0,p.TA)({initialValues:r,validationSchema:(t=v,"imap"===M&&(t=t.concat(h),w&&(t=t.concat(E))),"smtp"===k&&(t=t.concat(S),w&&(t=t.concat(E))),"mailgun"===k&&(t=t.concat(A)),"gmail"!==M&&"gmail"!==k||(t=t.concat(b)),"ms-oauth"!==M&&"ms-oauth"!==k||(t=t.concat(Z)),t),onSubmit:function(e,t){var r=t.setSubmitting;i(e,r)}}),D=j.values,H=j.errors,R=j.touched,F=j.handleChange,L=j.handleSubmit,z=j.setFieldValue,O=j.handleBlur,U=j.isSubmitting;return(0,n.useEffect)((function(){D.incomingServerType&&B(D.incomingServerType),D.outgoingServerType&&_(D.outgoingServerType)}),[D.incomingServerType,D.outgoingServerType]),n.createElement("form",{className:"form-horizontal",onSubmit:L},n.createElement(d.Z,null,n.createElement(s.Z,null,n.createElement("div",{className:"row"},n.createElement(l.Z,{label:"Weergave Naam",name:"name",value:D.name,onChangeAction:F,onBlurAction:O,required:"required",error:H.name&&R.name,errorMessage:H.name}),n.createElement(l.Z,{label:"E-mail",name:"email",value:D.email,onChangeAction:F,onBlurAction:O,required:"required",error:H.email&&R.email,errorMessage:H.email})),n.createElement("div",{className:"row"},n.createElement(m.Z,{label:"Actief",name:"isActive",value:D.isActive,onChangeAction:function(e){e.persist(),z(e.target.name,e.target.checked)},disabled:D.primary}),n.createElement(m.Z,{label:"Primair (verzend wachtwoord mails)",name:"primary",value:D.primary,onChangeAction:function(e){e.persist(),z(e.target.name,e.target.checked)},disabled:!D.isActive})),n.createElement("div",{className:"row"},n.createElement(m.Z,{label:n.createElement("span",null,"Koppel contact op email ",n.createElement("u",null,"aan")," adres",n.createElement("br",null),n.createElement("small",{style:{color:"#ccc",fontWeight:"normal"}},"Koppeling contact standaard op email ",n.createElement("u",null,"afzender")," adres")),name:"linkContactFromEmailToAddress",value:D.linkContactFromEmailToAddress,onChangeAction:function(e){e.persist(),z(e.target.name,e.target.checked)}}))),n.createElement(u.Z,null,n.createElement("span",{className:"h5"},n.createElement("strong",null,"Servergegevens"))),n.createElement(s.Z,null,n.createElement("div",{className:"row"},n.createElement(o.Z,{label:"Inkomende mail type",name:"incomingServerType",value:D.incomingServerType,options:y.incomingServerTypes,onChangeAction:F,emptyOption:!1,required:"required"}),n.createElement(o.Z,{label:"Uitgaande mail type",name:"outgoingServerType",value:D.outgoingServerType,options:y.outgoingServerTypes,onChangeAction:F,emptyOption:!1,required:"required"})),n.createElement("div",{className:"row"},"imap"===D.incomingServerType?n.createElement(l.Z,{label:"Inkomende IMAP host",name:"imapHost",value:D.imapHost,onChangeAction:F,onBlurAction:O,required:"required",error:H.imapHost&&R.imapHost,errorMessage:H.imapHost}):n.createElement("div",{className:"form-group col-sm-6"}),"smtp"===D.outgoingServerType?n.createElement(l.Z,{label:"Uitgaande SMTP host",name:"smtpHost",value:D.smtpHost,onChangeAction:F,onBlurAction:O,required:"required",error:H.smtpHost&&R.smtpHost,errorMessage:H.smtpHost}):null,"mailgun"===D.outgoingServerType?n.createElement(o.Z,{label:"Uitgaand Mailgun domein",name:"mailgunDomainId",value:D.mailgunDomainId,options:g,optionName:"domain",onChangeAction:F,required:"required",error:H.mailgunDomainId&&R.mailgunDomainId,errorMessage:H.mailgunDomainId}):null)),("imap"===D.incomingServerType||"smtp"===D.outgoingServerType)&&n.createElement(n.Fragment,null,n.createElement(u.Z,null,n.createElement("span",{className:"h5"},n.createElement("strong",null,"Instellingen"))),n.createElement(s.Z,null,n.createElement("div",{className:"row"},n.createElement(l.Z,{label:"Gebruikersnaam",name:"username",value:D.username,onChangeAction:F,onBlurAction:O,required:"required",error:H.username&&R.username,errorMessage:H.username}),n.createElement(l.Z,{type:"text",label:"Wachtwoord",name:"password",value:D.password,className:"numeric-password",placeholder:"**********",onChangeAction:F,onBlurAction:O,required:"required",error:H.password&&R.password,errorMessage:H.password})),n.createElement("div",{className:"row"},"imap"===D.incomingServerType?n.createElement(l.Z,{label:"Imap poort",name:"imapPort",value:D.imapPort,onChangeAction:F,onBlurAction:O,required:"required",error:H.imapPort&&R.imapPort,errorMessage:H.imapPort}):n.createElement("div",{className:"form-group col-sm-6"}),"smtp"===D.outgoingServerType&&n.createElement(l.Z,{label:"Smtp poort",name:"smtpPort",value:D.smtpPort,onChangeAction:F,onBlurAction:O,required:"required",error:H.smtpPort&&R.smtpPort,errorMessage:H.smtpPort})),n.createElement("div",{className:"row"},"imap"===D.incomingServerType?n.createElement(o.Z,{label:"Imap versleutelde verbinding",name:"imapEncryption",value:D.imapEncryption,options:[{id:"ssl",name:"SSL"},{id:"ssl/novalidate-cert",name:"SSL - self-signed certificate"},{id:"tls",name:"TLS"}],onChangeAction:F}):n.createElement("div",{className:"form-group col-sm-6"}),"smtp"===D.outgoingServerType&&n.createElement(o.Z,{label:"Smtp versleutelde verbinding",name:"smtpEncryption",value:D.smtpEncryption,options:[{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"}],onChangeAction:F})),"imap"===D.incomingServerType&&n.createElement(n.Fragment,null,n.createElement("div",{className:"row"},n.createElement(l.Z,{label:"Inbox prefix",name:"imapInboxPrefix",value:D.imapInboxPrefix,onChangeAction:F,onBlurAction:O,error:H.imapInboxPrefix&&R.imapInboxPrefix,errorMessage:H.imapInboxPrefix})),n.createElement("div",{className:"row"},n.createElement(m.Z,{label:"Zet email als gelezen op server",name:"emailMarkAsSeen",value:D.emailMarkAsSeen,onChangeAction:F,onBlurAction:O}))))),("gmail"===D.incomingServerType||"gmail"===D.outgoingServerType)&&n.createElement(I,{values:D,errors:H,touched:R,handleChange:F,handleBlur:O}),("ms-oauth"===D.incomingServerType||"ms-oauth"===D.outgoingServerType)&&n.createElement(f,{values:D,errors:H,touched:R,handleChange:F,handleBlur:O}),D.id&&n.createElement(n.Fragment,null,n.createElement(u.Z,null,n.createElement("span",{className:"h5"},n.createElement("strong",null,"Log"))),n.createElement(s.Z,null,n.createElement("div",{className:"row"},n.createElement(q.Z,{label:"Datum email laatst opgehaald",value:D.dateLastFetched?T()(D.dateLastFetched).format("L HH:mm:ss"):"Nog niet bepaald",className:"form-group col-sm-6"}),n.createElement(q.Z,{label:"UID email laatst opgehaald",value:D.imapIdLastFetched,className:"form-group col-sm-6"})))),n.createElement(s.Z,null,n.createElement("div",{className:"pull-right btn-group",role:"group"},D.id?n.createElement(n.Fragment,null,n.createElement(c.Z,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:C}),n.createElement(c.Z,{buttonText:"Opslaan",onClickAction:L,type:"submit",value:"Submit",loading:U})):n.createElement(c.Z,{buttonText:"Opslaan",onClickAction:L,type:"submit",value:"Submit",loading:U})))))}))}}]);