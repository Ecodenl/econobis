"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[5216],{25216:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var n=a(67294),r=a(15671),o=a(43144),c=a(97326),i=a(60136),s=a(82963),l=a(61120),m=a(4942),d=a(61409),u=a(48966),p=a.n(u),h=a(9181),y=a(49332),g=a(98688),f=a(14309),v=a(84650),E=a(86706),b=a(71840),I=(a(58404),a(82084));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,m.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=function(e){(0,i.Z)(E,e);var t,a,u=(t=E,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,s.Z)(this,e)});function E(e){var t;return(0,r.Z)(this,E),t=u.call(this,e),(0,m.Z)((0,c.Z)(t),"handleInputChange",(function(e){var a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;t.setState(Z(Z({},t.state),{},{product:Z(Z({},t.state.product),{},(0,m.Z)({},r,n))}))})),(0,m.Z)((0,c.Z)(t),"handleInputChangeDuration",(function(e){var a,n=e.target,r="checkbox"===n.type?n.checked:n.value,o=n.name,c=t.state.product.invoiceFrequencyId,i=t.state.invoiceFrequencies;switch(r){case"none":i=[{id:"once",name:"Eenmalig"}],c="once";break;case"month":i=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==c&&"yearly"!==c&&"half-year"!==c||(c="monthly");break;case"quarter":i=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==c&&"half-year"!==c||(c="quarterly");break;case"half_year":i=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===c&&(c="half-year");break;default:i=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}t.setState(Z(Z({},t.state),{},{invoiceFrequencies:i,product:Z(Z({},t.state.product),{},(a={},(0,m.Z)(a,o,r),(0,m.Z)(a,"invoiceFrequencyId",c),a))}))})),(0,m.Z)((0,c.Z)(t),"handleSubmit",(function(e){e.preventDefault();var a=t.state.product,n={},r=!1,o=!1,c=!1;t.props.products.map((function(e){return e.code==a.code&&(c=!0)})),c&&(r="Productcode moet uniek zijn.",n.code=!0,o=!0),p().isEmpty(a.code+"")&&(n.code=!0,o=!0),t.props.usesTwinfield&&p().isEmpty(String(a.ledgerId))&&(n.ledgerId=!0,o=!0);var i=!1;t.props.products.map((function(e){return e.name==a.name&&(i=!0)})),i&&(r="Productnaam moet uniek zijn.",n.name=!0,o=!0),c&&i&&(r="Productcode en productnaam moeten uniek zijn."),p().isEmpty(a.name+"")&&(n.name=!0,o=!0),p().isEmpty(a.administrationId+"")&&(n.administrationId=!0,o=!0),t.setState(Z(Z({},t.state),{},{errors:n,errorMessage:r})),o||v.Z.newProduct(a).then((function(e){d.nA.push("/product/".concat(e.data.id))})).catch((function(e){console.log(e)}))})),t.state={errorMessage:!1,invoiceFrequencies:[{id:"once",name:"Eenmalig"}],product:{code:"",name:"",invoiceText:"",durationId:"none",invoiceFrequencyId:"once",paymentTypeId:"",administrationId:"",ledgerId:"",costCenterId:""},errors:{code:!1,name:!1,administrationId:!1,ledgerId:!1,costCenterId:!1}},t.handleReactSelectChange=t.handleReactSelectChange.bind((0,c.Z)(t)),t}return(0,o.Z)(E,[{key:"handleReactSelectChange",value:function(e,t){this.setState(Z(Z({},this.state),{},{product:Z(Z({},this.state.product),{},(0,m.Z)({},t,e))}))}},{key:"render",value:function(){var e=this.state.product,t=e.code,a=e.name,r=e.invoiceText,o=e.durationId,c=e.invoiceFrequencyId,i=e.paymentTypeId,s=e.administrationId,l=e.ledgerId,m=e.costCenterId;return n.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},n.createElement(f.Z,null,n.createElement(g.Z,null,n.createElement("div",{className:"row"},n.createElement(h.Z,{label:"Productcode",name:"code",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.code}),n.createElement(h.Z,{label:"Naam",name:"name",value:a,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.name})),n.createElement("div",{className:"row"},n.createElement("div",{className:"form-group col-sm-12"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-3"},n.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),n.createElement("div",{className:"col-sm-8"},n.createElement("textarea",{name:"invoiceText",value:r,onChange:this.handleInputChange,className:"form-control input-sm",maxLength:"1000"}))))),n.createElement("div",{className:"row"},n.createElement(b.Z,{label:"Looptijd",id:"durationId",name:"durationId",options:this.props.productDurations,value:o,onChangeAction:this.handleInputChangeDuration,emptyOption:!1}),n.createElement(b.Z,{label:"Prijs per",id:"invoiceFrequencyId",name:"invoiceFrequencyId",options:this.state.invoiceFrequencies,value:c,onChangeAction:this.handleInputChange,emptyOption:!1})),n.createElement("div",{className:"row"},n.createElement(b.Z,{label:"Betaalwijze",id:"paymentTypeId",name:"paymentTypeId",options:this.props.productPaymentTypes,value:i,onChangeAction:this.handleInputChange}),n.createElement(b.Z,{label:"Administratie",id:"administrationId",name:"administrationId",options:this.props.administrations,value:s,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.administrationId})),n.createElement("div",{className:"row"},n.createElement(I.Z,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:l,onChangeAction:this.handleReactSelectChange,required:this.props.usesTwinfield?"required":"",error:this.state.errors.ledgerId}),n.createElement(I.Z,{label:"Kostenplaats",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:m,onChangeAction:this.handleReactSelectChange})),this.state.errorMessage&&n.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage)),n.createElement(g.Z,null,n.createElement("div",{className:"pull-right btn-group",role:"group"},n.createElement(y.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),E}(n.Component);const w=(0,E.$j)((function(e){return{productDurations:e.systemData.productDurations,productPaymentTypes:e.systemData.productPaymentTypes,administrations:e.meDetails.administrations,products:e.systemData.products,ledgers:e.systemData.ledgers,costCenters:e.systemData.costCenters,usesTwinfield:e.systemData.usesTwinfield}}))(N);var q=a(55451);const k=function(){return n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},n.createElement(q.Z,{iconName:"arrowLeft",onClickAction:d.mW.goBack}))),n.createElement("div",{className:"col-md-4"},n.createElement("h4",{className:"text-center margin-small"},"Nieuw product")),n.createElement("div",{className:"col-md-4"}))},O=function(){return n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-9"},n.createElement("div",{className:"col-md-12 margin-10-top"},n.createElement(f.Z,null,n.createElement(g.Z,{className:"panel-small"},n.createElement(k,null)))),n.createElement("div",{className:"col-md-12 margin-10-top"},n.createElement(w,null))),n.createElement("div",{className:"col-md-3"}))}}}]);