"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[5723],{3470:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},5746:(e,t,n)=>{var a=n(69565),l=n(89228),r=n(28551),o=n(64117),c=n(67750),s=n(3470),i=n(655),m=n(55966),u=n(56682);l("search",(function(e,t,n){return[function(t){var n=c(this),l=o(t)?void 0:m(t,e);return l?a(l,t,n):new RegExp(t)[e](i(n))},function(e){var a=r(this),l=i(e),o=n(t,a,l);if(o.done)return o.value;var c=a.lastIndex;s(c,0)||(a.lastIndex=0);var m=u(a,l);return s(a.lastIndex,c)||(a.lastIndex=c),null===m?-1:m.index}]}))},25795:(e,t)=>{t.u=void 0,t.u={viewBox:"0 0 1792 1792",children:[{name:"path",attribs:{d:"M1408 928v320q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h704q14 0 23 9t9 23v64q0 14-9 23t-23 9h-704q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-320q0-14 9-23t23-9h64q14 0 23 9t9 23zM1792 64v512q0 26-19 45t-45 19-45-19l-176-176-652 652q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l652-652-176-176q-19-19-19-45t19-45 45-19h512q26 0 45 19t19 45z"}}]}},42285:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},45298:(e,t)=>{t.t=void 0,t.t={viewBox:"0 0 1536 1792",children:[{name:"path",attribs:{d:"M1536 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z"}}]}},45403:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("thead",null,e.children)}},48980:(e,t,n)=>{var a=n(46518),l=n(59213).findIndex,r=n(6469),o="findIndex",c=!0;o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},52703:(e,t,n)=>{var a=n(44576),l=n(79039),r=n(79504),o=n(655),c=n(43802).trim,s=n(47452),i=a.parseInt,m=a.Symbol,u=m&&m.iterator,d=/^[+-]?0x/i,p=r(d.exec),f=8!==i(s+"08")||22!==i(s+"0x16")||u&&!l((function(){i(Object(u))}));e.exports=f?function(e,t){var n=c(o(e));return i(n,t>>>0||(p(d,n)?16:10))}:i},53921:(e,t,n)=>{var a=n(46518),l=n(72652),r=n(97040);a({target:"Object",stat:!0},{fromEntries:function(e){var t={};return l(e,(function(e,n){r(t,e,n)}),{AS_ENTRIES:!0}),t}})},58940:(e,t,n)=>{var a=n(46518),l=n(52703);a({global:!0,forced:parseInt!==l},{parseInt:l})},73158:(e,t)=>{t.$=void 0,t.$={viewBox:"0 0 1408 1792",children:[{name:"path",attribs:{d:"M1404 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"}}]}},93913:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("tbody",null,e.children)}},95723:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var a=n(60436),l=n(64467),r=n(5544),o=(n(28706),n(23792),n(62062),n(15086),n(52675),n(2008),n(51629),n(67945),n(84185),n(53921),n(79432),n(83851),n(81278),n(26099),n(27495),n(47764),n(5746),n(23500),n(62953),n(76031),n(48408),n(96540)),c=n(61941),s=n(61643);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const m={fetchSelectList:function(e){var t=e.filter,n=e.sorts,a=e.limit,l=e.offset;return(0,c.A)().get("".concat((0,s.e)(),"/api/email-splitview/select-list"),{params:{jory:{fld:[],flt:t,srt:n,lmt:a,ofs:l}}})},fetchEmail:function(e){return(0,c.A)().get("".concat((0,s.e)(),"/api/email-splitview/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return(0,c.A)().post("".concat((0,s.e)(),"/api/email-splitview/").concat(e),t)},updateMultiple:function(e,t){return(0,c.A)().post("".concat((0,s.e)(),"/api/email-splitview/update-multiple"),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ids:e},t))},storeReply:function(e){return(0,c.A)().post("".concat((0,s.e)(),"/api/email-splitview/").concat(e,"/store-reply"))},storeReplyAll:function(e){return(0,c.A)().post("".concat((0,s.e)(),"/api/email-splitview/").concat(e,"/store-reply-all"))},storeForward:function(e){return(0,c.A)().post("".concat((0,s.e)(),"/api/email-splitview/").concat(e,"/store-forward"))},deleteMultiple:function(e){return(0,c.A)().post("".concat((0,s.e)(),"/api/email-splitview/delete-multiple"),{ids:e})}};n(62010);var u=n(87722),d=n(93755),p=n(81524),f=n(82606),b=n(87696),E=n(25795),h=n(88505),v=n(84976),g=n(69733),y=n(14809),A=n(44926),N=n(20349),w=n(8373),O=n(9293),x=n(64476);function j(e){var t,n=e.email,l=e.updateEmailAttributes,r=e.deletedHandler,c=(0,o.useContext)(O.t),s=c.openEmailDetailsModal,i=c.openEmailSendModal,m=(0,g.d4)((function(e){return(0,x.o)(e.systemData.emailStatuses)}));return o.createElement("div",{className:"panel panel-default"},o.createElement("div",{className:"panel-body panel-small"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-6",style:{paddingLeft:"25px"}},"concept"!==n.folder&&o.createElement("div",{className:"btn-group margin-small margin-10-right",role:"group"},o.createElement("button",{type:"button",title:"Beantwoorden",className:"btn btn-success btn-sm",onClick:function(){A.A.storeReply(n.id).then((function(e){i(e.data.id)}))}},o.createElement(u.Ay,{icon:d.E,size:13})),o.createElement("button",{type:"button",title:"Allen beantwoorden",className:"btn btn-success btn-sm",onClick:function(){A.A.storeReplyAll(n.id).then((function(e){i(e.data.id)}))}},o.createElement(u.Ay,{icon:p.d,size:13})),o.createElement("button",{type:"button",title:"Doorsturen",className:"btn btn-success btn-sm",onClick:function(){A.A.storeForward(n.id).then((function(e){i(e.data.id)}))}},o.createElement(u.Ay,{icon:f.H,size:13}))),"concept"===n.folder&&o.createElement("div",{className:"btn-group margin-small margin-10-right",role:"group"},o.createElement("button",{type:"button",title:"Openen",className:"btn btn-success btn-sm",onClick:function(){return i(n.id)}},o.createElement(u.Ay,{icon:h.w,size:13}))),o.createElement("div",{className:"btn-group margin-small",role:"group"},o.createElement("button",{type:"button",title:"Verwijderen",className:"btn btn-sm "+("removed"===n.folder?"btn-danger":" btn-success"),onClick:function(){return"removed"===n.folder?void(confirm("Weet je zeker dat je dit e-mailbericht permanent wilt verwijderen?")&&A.A.deleteMultiple([n.id]).then((function(){r()}))):l({folder:"removed"})}},o.createElement(u.Ay,{icon:b.d,size:13})),"concept"!==n.folder&&o.createElement("button",{type:"button",title:"Openen",className:"btn btn-success btn-sm",onClick:function(){return s(n.id)}},o.createElement(u.Ay,{icon:E.u,size:13})))),o.createElement("div",{className:"col-sm-6"},o.createElement("label",{className:"col-sm-6"},"Aan"),o.createElement("div",{className:"col-sm-6"},o.createElement(N.A,{emailAddresses:(t=(0,a.A)(n.toAddresses),n.contactGroup&&t.push({email:null,name:n.contactGroup.name}),t)})))),o.createElement("div",{className:"row",style:{marginTop:"12px"}},o.createElement("div",{className:"col-sm-6"},o.createElement("label",{className:"col-sm-6"},"Gekoppeld contact"),o.createElement("div",{className:"col-sm-6"},n&&[].concat((0,a.A)(n.contacts),(0,a.A)(n.manualContacts)).map((function(e){return o.createElement("span",{key:e.id},o.createElement(v.N_,{to:"/contact/".concat(e.id),className:"link-underline"},e.fullName)," ",o.createElement("br",null))})))),o.createElement(y.A,{label:"Status",size:"col-sm-6",name:"status",options:m,value:n.status,onChangeAction:function(e){return l({status:e.target.value})},emptyOption:!1})),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-6"},o.createElement("label",{className:"col-sm-6"},"CC"),o.createElement("div",{className:"col-sm-6"},o.createElement(N.A,{emailAddresses:n.ccAddresses}))),o.createElement(w.A,{values:{responsibleUserId:n.responsibleUserId,responsibleTeamId:n.responsibleTeamId},onChangeAction:l})),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-3"},o.createElement("label",{className:"col-sm-12"},"Opmerking")),o.createElement("div",{className:"col-sm-9"},n.note))))}var S=n(84161),k=n(96522);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){var t=e.emailId,n=(e.folder,e.updatedEmailHandler),a=e.revertFromRemovedHandler,l=e.deletedHandler,c=(0,o.useContext)(O.t),s=c.isEmailDetailsModalOpen,i=c.isEmailSendModalOpen,u=c.modalEmailId,d=(0,o.useState)({attachments:[],toAddresses:[],contacts:[],manualContacts:[]}),p=(0,r.A)(d,2),f=p[0],b=p[1];(0,o.useContext)(O.t).openEmailSendModal,(0,o.useEffect)((function(){s||f.id!==u||E()}),[s]),(0,o.useEffect)((function(){i||E()}),[i]),(0,o.useEffect)((function(){E()}),[t]);var E=function(){t&&m.fetchEmail(t).then((function(e){b(e)}))};return f?o.createElement("div",null,"removed"===f.folder&&o.createElement("div",{className:"panel panel-default"},o.createElement("div",{className:"panel-body panel-small"},o.createElement("div",{className:"row",style:{marginLeft:"-5px"}},o.createElement("div",{className:"col-md-12"},o.createElement("span",{className:"h5",style:{color:"#e64a4a"}},"Deze e-mail is verwijderd. ",o.createElement("a",{style:{color:"#e64a4a",cursor:"pointer"},onClick:function(){return e={folder:f.originalFolder},b(C(C({},f),e)),void A.A.update(t,e).then((function(){a()}));var e}},o.createElement("strong",null,"Klik hier om verwijderen ongedaan te maken."))))))),o.createElement(j,{email:f,updateEmailAttributes:function(e){b(C(C({},f),e)),A.A.update(t,e).then((function(){n()}))},deletedHandler:l}),o.createElement("div",{className:"panel panel-default"},o.createElement("div",{className:"panel-body panel-small",style:{padding:"20px"},id:"split-view-email-html"},o.createElement(k.A,{style:{height:"calc(100vh - 550px)"}},o.createElement("div",{dangerouslySetInnerHTML:{__html:f.htmlBodyWithEmbeddedImages}})))),o.createElement(S.A,{email:f})):o.createElement(o.Fragment,null)}n(48980),n(74423),n(58940),n(21699);var M=n(95093),P=n.n(M),D=n(73158),z=(n(25276),n(25440),n(63750)),T=n(8426);function U(e){var t=e.emailIds,n=e.onSaved,l=(0,g.d4)((function(e){return e.systemData.emailStatuses})),c=(0,g.d4)((function(e){return e.systemData.teams})),s=(0,g.d4)((function(e){return e.systemData.users})),i=(0,o.useState)(!1),m=(0,r.A)(i,2),d=m[0],p=m[1],f=(0,o.useState)(-1),b=(0,r.A)(f,2),E=b[0],v=b[1],N=(0,o.useState)(-1),w=(0,r.A)(N,2),O=w[0],x=w[1],j=(0,o.useState)(-1),S=(0,r.A)(j,2),k=S[0],I=S[1];return o.createElement(o.Fragment,null,o.createElement("button",{type:"button",title:"Bewerken",className:"btn btn-success btn-sm",onClick:function(){p(!0)}},o.createElement(u.Ay,{icon:h.w,size:13})),d&&o.createElement(z.A,{buttonConfirmText:"Opslaan",closeModal:function(){return p(!1)},confirmAction:function(){var e={};-1!==parseInt(E)&&(e.status=E),-1!==O&&(e.responsibleUserId=O),-1!==k&&(e.responsibleTeamId=k),A.A.updateMultiple(t,e).then((function(){p(!1),n()}))},title:"Bulk bewerken",modalClassName:"modal-lg"},o.createElement("div",{className:"row",style:{marginTop:"12px"}},o.createElement(y.A,{label:"Status",size:"col-sm-6",name:"status",options:[{id:-1,name:"--- niet wijzigen ---"}].concat((0,a.A)(l)),value:E,onChangeAction:function(e){return v(e.target.value)},emptyOption:!1}),o.createElement(T.A,{label:"Verantwoordelijke",size:"col-sm-6",name:"responsible",optionsInGroups:[{name:"general",label:"Algemeen",options:[{id:"-1",name:"--- niet wijzigen ---"},{id:"0",name:"--- geen ---"}]},{name:"user",label:"Gebruikers",options:s,optionName:"fullName"},{name:"team",label:"Teams",options:c}],value:-1===O&&-1===k?"general-1":O?"user"+O:k?"team"+k:"general0",onChangeAction:function(e){return function(e){if("general-1"===e)return x(-1),void I(-1);x(null),I(null),0===e.indexOf("user")&&x(e.replace("user","")),0===e.indexOf("team")&&I(e.replace("team",""))}(e.target.value)},emptyOption:!1}))))}function R(e){var t=e.emails,n=e.folder,l=e.emailCount,c=e.fetchMoreEmails,s=e.selectedEmailId,i=e.setSelectedEmailId,m=e.onUpdated,d=e.multiselectEnabled,p=e.setMultiselectEnabled,f=(0,o.useState)([]),E=(0,r.A)(f,2),h=E[0],v=E[1],g=function(e){localStorage.setItem("lastOpenedEmailId",e.id),i(e.id)};return(0,o.useEffect)((function(){if(!s&&0!==t.length){var e=t.findIndex((function(e){return e.id===parseInt(localStorage.getItem("lastOpenedEmailId"))}));g(t[-1===e?0:e])}}),[t]),(0,o.useEffect)((function(){v([]),p(!1)}),[n]),o.createElement("div",{className:"panel panel-default"},o.createElement("div",{className:"panel-body panel-small",style:{height:"calc(100vh - 190px)",overflow:"auto"},onScroll:function(e){e.target.scrollHeight-e.target.scrollTop-e.target.clientHeight<10&&(t.length>=l||c())}},d&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-xs-12",style:{display:"flex",justifyContent:"space-between"}},o.createElement("div",{style:{flex:"none",display:"flex",marginLeft:"6px",alignItems:"center"},onClick:function(){h.length===t.length?v([]):v(t.map((function(e){return e.id})))}},o.createElement("input",{type:"checkbox",checked:h.length===t.length,style:{marginRight:"5px"}}),"Selecteer alles"),o.createElement("div",{className:"btn-group margin-small",role:"group"},o.createElement(U,{emailIds:h,onSaved:function(){v([]),p(!1),m()}}),o.createElement("button",{type:"button",title:"Verwijderen",className:"btn btn-sm "+("removed"===n?"btn-danger":"btn-success"),onClick:function(){"removed"===n?confirm("Weet je zeker dat je deze e-mails permanent wilt verwijderen?")&&A.A.deleteMultiple(h).then((function(){v([]),m()})):A.A.updateMultiple(h,{folder:"removed"}).then((function(){v([]),m()}))}},o.createElement(u.Ay,{icon:b.d,size:13}))))),o.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},o.createElement("thead",null,o.createElement("tr",{className:"thead-title"},o.createElement("th",null,o.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.createElement("div",null,function(){switch(n){case"inbox":return"Inbox";case"sent":return"Verzonden";case"concept":return"Concepten";case"removed":return"Verwijderd";default:return"Onbekend"}}()," (",l,")"))))),o.createElement("tbody",null,0===t.length?o.createElement("tr",null,o.createElement("td",null,"Geen e-mails gevonden!")):t.map((function(e){return o.createElement("tr",{key:e.id,style:{cursor:"pointer"}},o.createElement("td",{style:{borderRadius:"5px",backgroundColor:e.id===s?"#d6e1f3":"#fff",fontWeight:"unread"===e.status?"bold":"normal"}},o.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d&&o.createElement("div",{style:{flex:"none",display:"flex",marginRight:"10px"},onClick:function(){return function(e){h.includes(e.id)?v(h.filter((function(t){return t!==e.id}))):v([].concat((0,a.A)(h),[e.id]))}(e)}},o.createElement("input",{type:"checkbox",checked:h.includes(e.id)})),o.createElement("div",{style:{flex:1},onClick:function(){return g(e)}},o.createElement("span",{style:{fontSize:"15px"}},(0,x.c)(e.status)," ",function(e){return"sent"===e.folder?0===e.to.length?"Geen ontvanger":1===e.to.length?e.to[0]:e.to[0]+" (+"+(e.to.length-1)+")":e.from}(e))," ",o.createElement("span",{style:{fontSize:"12px"}},"(",e.mailbox.name,")"),o.createElement("br",null),o.createElement("span",null,e.subject)),o.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"end"},onClick:function(){return g(e)}},o.createElement("span",{style:{fontSize:"12px"}},function(e){return"concept"===e.folder?e.createdAt&&P()(e.createdAt).format("DD-MM-YYYY HH:mm"):e.date&&P()(e.date).format("DD-MM-YYYY HH:mm")}(e)),o.createElement("div",null,o.createElement("span",{style:{color:"#999"}},function(e){return"sent"===e.folder?e.sentByUserName:e.responsibleName}(e)),e.hasAttachments&&o.createElement(u.Ay,{icon:D.$,size:18}))))))})),t.length<l&&o.createElement("tr",null,o.createElement("td",null,o.createElement("button",{className:"btn btn-link pull-right",onClick:function(){return c()}},"meer laden...")))))))}var F=n(1612),H=n(26819);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=e.filters,n=e.setFilters,a=e.activeMailboxes,l=e.eigenOpenstaand,c=(0,g.d4)((function(e){return e.systemData.emailStatuses})),s=(0,g.d4)((function(e){return e.systemData.teams})),i=(0,g.d4)((function(e){return e.systemData.users})),m=(0,o.useState)(t.responsibleUserId?t.responsibleUserId:""),u=(0,r.A)(m,2),d=(u[0],u[1]),p=(0,o.useState)(t.responsibleTeamId?t.responsibleTeamId:""),f=(0,r.A)(p,2),b=(f[0],f[1]);return o.createElement("div",{className:"panel panel-default"},o.createElement("div",{className:"panel-body panel-small"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12",style:{marginBottom:"0px"}},o.createElement("thead",null,o.createElement("tr",{className:"thead-title"},o.createElement("th",{className:"",width:"10%"},"Van e-mail"),o.createElement("th",{className:"",width:"10%"},"Gekoppeld contact"),o.createElement("th",{className:"",width:"15%"},"Onderwerp"," ",o.createElement("span",null,o.createElement(F.__w,{color:"white",size:"15px","data-tip":"Er wordt hier alleen gezocht in de eerste 150 tekens van het onderwerp.","data-for":"tooltip-subject-filter"}),o.createElement(H.A,{id:"tooltip-subject-filter",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"}))),o.createElement("th",{className:"",width:"7%"},"Van"),o.createElement("th",{className:"",width:"7%"},"T/m"),o.createElement("th",{className:"",width:"10%"},"Status"),o.createElement("th",{className:"",width:"10%"},"Verantwoordelijke"),o.createElement("th",{className:"",width:"11%"},"Mailbox"),o.createElement("th",{className:"",width:"10%"},"Aan"," ",o.createElement("span",null,o.createElement(F.__w,{color:"white",size:"15px","data-tip":"Bij veel emails kan deze filter lang duren.","data-for":"tooltip-to-filter"}),o.createElement(H.A,{id:"tooltip-to-filter",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"}))),o.createElement("th",{className:"",width:"5%"},"Bijlage")),o.createElement("tr",{className:"thead-filter"},o.createElement("th",null,o.createElement("input",{type:"text",className:"form-control input-sm",value:t.from,onChange:function(e){n(L(L({},t),{},{from:e.target.value}))}})),o.createElement("th",null,o.createElement("input",{type:"text",className:"form-control input-sm",value:t.contact,onChange:function(e){n(L(L({},t),{},{contact:e.target.value}))}})),o.createElement("th",null,o.createElement("input",{type:"text",className:"form-control input-sm",value:t.subject,onChange:function(e){n(L(L({},t),{},{subject:e.target.value}))}})),o.createElement("th",null,o.createElement("input",{type:"date",className:"form-control input-sm",value:t.dateSentStart,onChange:function(e){n(L(L({},t),{},{dateSentStart:e.target.value,fetch:!0}))}})),o.createElement("th",null,o.createElement("input",{type:"date",className:"form-control input-sm",value:t.dateSentEnd,onChange:function(e){n(L(L({},t),{},{dateSentEnd:e.target.value,fetch:!0}))}})),o.createElement("th",null,o.createElement("select",{className:"form-control input-sm",value:t.status,onChange:function(e){n(L(L({},t),{},{status:e.target.value,fetch:!0}))}},o.createElement("option",null),c.filter((function(e){if(!l||"closed"!==e.id)return!0})).map((function(e){return o.createElement("option",{key:e.id,value:e.id},e.name)})))),l?o.createElement("th",{style:{color:"red",verticalAlign:"middle"}},o.createElement("span",null,"Eigen ",o.createElement(F.__w,{color:"blue",size:"15px","data-tip":'Je ziet hier alle mailtjes gekoppeld aan jou als verantwoordelijke die niet status “afgehandeld” hebben.\nAls je afgehandelde mailtjes wil zien of mailtjes niet specifiek gekoppeld aan jou moet je de "Filter wissen" knop aanklikken.',"data-for":"tooltip-".concat(name)}),o.createElement(H.A,{id:"tooltip-".concat(name),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"}))):o.createElement("th",null,o.createElement("select",{className:"form-control input-sm",name:"responsible",value:"noResponsible"===t.responsibleUserId?"noResponsible":t.responsibleUserId?"user"+t.responsibleUserId:t.responsibleTeamId?"team"+t.responsibleTeamId:"",onChange:function(e){return a=e.target.value,d(""),b(""),"noResponsible"===a&&n(L(L({},t),{},{responsibleUserId:"noResponsible",responsibleTeamId:"",fetch:!0})),"noResponsible"!==a&&0!==a.indexOf("user")&&0!==a.indexOf("team")&&n(L(L({},t),{},{responsibleUserId:"",responsibleTeamId:"",fetch:!0})),"noResponsible"!==a&&0===a.indexOf("user")&&(d(a.replace("user","")),n(L(L({},t),{},{responsibleUserId:a.replace("user",""),responsibleTeamId:"",fetch:!0}))),void("noResponsible"!==a&&0===a.indexOf("team")&&(b(a.replace("team","")),n(L(L({},t),{},{responsibleUserId:"",responsibleTeamId:a.replace("team",""),fetch:!0}))));var a}},o.createElement("option",{value:""}),o.createElement("option",{style:{fontWeight:"normal"},value:"noResponsible"},"Zonder verantwoordelijke"),o.createElement("optgroup",{label:"Gebruikers"},i.map((function(e){return o.createElement("option",{value:"user"+e.id},e.fullName)}))),o.createElement("optgroup",{label:"Teams"},s.map((function(e){return o.createElement("option",{value:"team"+e.id},e.name)}))))),o.createElement("th",null,o.createElement("select",{className:"form-control input-sm",value:t.mailbox,onChange:function(e){n(L(L({},t),{},{mailbox:e.target.value,fetch:!0}))}},o.createElement("option",null),a.map((function(e){return o.createElement("option",{key:e.id,value:e.id},e.name)})))),o.createElement("th",null,o.createElement("input",{type:"text",className:"form-control input-sm",value:t.to,onChange:function(e){n(L(L({},t),{},{to:e.target.value}))}})),o.createElement("th",null,o.createElement("select",{className:"form-control input-sm",value:t.attachment,onChange:function(e){n(L(L({},t),{},{attachment:e.target.value,fetch:!0}))}},o.createElement("option",null),o.createElement("option",{value:1},"Ja"))))))))))}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){localStorage.setItem("emailFilters",JSON.stringify(e))}function V(){var e=localStorage.getItem("emailFilters");return e?G(G({},J),JSON.parse(e)):G({},J)}n(60739);var J={from:"",contact:"",subject:"",mailboxId:"",status:"",responsibleUserId:"",responsibleTeamId:"",to:"",attachment:"",dateSentStart:"",dateSentEnd:""},$=n(83873),K=n(91858),Z=n(47767),Q=n(45298),X=n(42285),ee=n(45403),te=n(93913),ne=n(55956);function ae(e){var t=e.activeMailboxes,n=(0,o.useState)(!0),a=(0,r.A)(n,2),l=a[0],c=a[1],s=(0,o.useState)(!1),i=(0,r.A)(s,2),m=i[0],u=i[1];return l?o.createElement("div",{className:"row"},o.createElement("div",{className:"col-xs-12"},o.createElement("div",{className:"alert alert-info",style:{display:"flex",justifyContent:"space-between"},role:"alert"},m?o.createElement("div",null,o.createElement("div",{style:{flex:"1 1 auto"}},o.createElement(ne.A,{buttonText:"Status mailboxen (verbergen)",onClickAction:function(){return u(!1)}})),o.createElement("div",null," "),o.createElement("div",{style:{flex:"1 1 auto"}},o.createElement(X.A,null,o.createElement(ee.A,null,o.createElement("th",null,"Mailbox"),o.createElement("th",null,"Email laatst opgehaald"),o.createElement("th",null,"Meldingen")),o.createElement(te.A,null,t.map((function(e){return o.createElement("tr",{key:e.id},o.createElement("td",null,e.name),o.createElement("td",null,e.date_last_fetched?P()(e.date_last_fetched).format("DD-MM-YYYY HH:mm:ss"):""),o.createElement("td",null,e.valid?"":o.createElement("span",{style:{color:"red",fontWeight:"bold"}},"Fout in configuratie")))})))," "))):o.createElement("div",{style:{flex:"1 1 auto"}},o.createElement(ne.A,{buttonText:"Status mailboxen (tonen)",onClickAction:function(){return u(!0)}})),o.createElement("div",null,o.createElement("a",{onClick:function(){return c(!1)},className:"btn btn-sm"},"x"))))):null}var le=n(72505),re=n.n(le);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(){var e=(0,Z.Zp)(),t=(0,Z.g)(),n=(0,Z.zy)(),l=Object.fromEntries(new URLSearchParams(n.search)),c=(0,o.useState)([]),s=(0,r.A)(c,2),i=s[0],d=s[1],p=(0,o.useState)(!1),f=(0,r.A)(p,2),b=f[0],E=f[1],h=(0,o.useState)([]),v=(0,r.A)(h,2),g=v[0],y=v[1],N=(0,o.useState)(0),w=(0,r.A)(N,2),x=w[0],j=w[1],S=(0,o.useState)(null),k=(0,r.A)(S,2),I=k[0],C=k[1],M=(0,o.useState)(!1),P=(0,r.A)(M,2),D=P[0],T=P[1],U=(0,o.useState)(!1),F=(0,r.A)(U,2),H=F[0],B=F[1],L=(0,o.useState)(null),Y=(0,r.A)(L,2),G=Y[0],X=Y[1],ee=(0,o.useState)(ce({},J)),te=(0,r.A)(ee,2),ne=te[0],le=te[1],oe=(0,o.useState)(!1),se=(0,r.A)(oe,2),me=se[0],ue=se[1],de=(0,o.useContext)(O.t),pe=de.isEmailDetailsModalOpen,fe=de.isEmailSendModalOpen,be=de.openEmailSendModal,Ee=g.length>0,he=(0,o.useState)(!1),ve=(0,r.A)(he,2),ge=ve[0],ye=ve[1],Ae=(0,o.useState)("Nieuwe e-mails worden opgehaald ..."),Ne=(0,r.A)(Ae,2),we=Ne[0],Oe=Ne[1];(0,o.useEffect)((function(){je(!0)}),[]),(0,o.useEffect)((function(){!pe&&x>0&&xe()}),[pe]),(0,o.useEffect)((function(){!fe&&x>0&&xe()}),[fe]),(0,o.useEffect)((function(){le(ce(ce({},V()),{},{fetch:!0})),C(null)}),[t.folder]),(0,o.useEffect)((function(){le(ce(ce({},V()),{},{fetch:!0})),l.contact?ie(l.contact).then((function(e){X(e.data.data)})):X(null)}),[l.contact]),(0,o.useEffect)((function(){le(ce(ce({},V()),{},{fetch:!0})),ue("1"===l.eigen)}),[l.eigen]),(0,o.useEffect)((function(){ne.fetch&&(le(ce(ce({},ne),{},{fetch:!1})),W(ne),B(!0),m.fetchSelectList({filter:Se(),limit:50,offset:0,sorts:ke()}).then((function(e){d(e.data.items),j(e.data.total),B(!1)})))}),[ne.fetch]);var xe=function(){if(!H)return B(!0),m.fetchSelectList({filter:Se(),limit:Math.max(i.length,50),offset:0,sorts:ke()}).then((function(e){d(e.data.items),j(e.data.total),B(!1)}))},je=function(e){E(!0),re().all([$.A.fetchMailboxesLoggedInUser()]).then(re().spread((function(t){y(t.data.data),e&&t.data.meta.activateAutomaticRefreshEmailData&&Ce(),E(!1)}))).catch((function(e){console.log(e),E(!1)}))},Se=function(){return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l={and:[{f:"folder",d:t}]};return e.subject&&l.and.push({f:"subjectForFilter",o:"like",d:"%".concat(e.subject,"%")}),e.from&&l.and.push({f:"from",o:"like",d:"%".concat(e.from,"%")}),e.contact&&l.and.push({or:[{f:"contacts.fullName",o:"like",d:"%".concat(e.contact,"%")},{f:"manualContacts.fullName",o:"like",d:"%".concat(e.contact,"%")}]}),e.mailbox&&l.and.push({f:"mailboxId",d:e.mailbox}),e.status&&l.and.push({f:"status",d:e.status}),"noResponsible"===e.responsibleUserId&&(l.and.push({f:"responsibleUserId",d:null}),l.and.push({f:"responsibleTeamId",d:null})),"noResponsible"!==e.responsibleUserId&&e.responsibleUserId&&1!==e.responsibleUserId&&l.and.push({f:"responsibleUserId",d:e.responsibleUserId}),"noResponsible"!==e.responsibleUserId&&e.responsibleTeamId&&1!==e.responsibleTeamId&&l.and.push({f:"responsibleTeamId",d:e.responsibleTeamId}),e.to&&l.and.push({f:"to",o:"like",d:"%".concat(e.to,"%")}),e.attachment&&l.and.push({f:"attachmentsWithoutCids.id",o:">",d:0}),e.attachment&&l.and.push({f:"attachmentsWithoutCids.id",o:">",d:0}),e.dateSentStart&&l.and.push({f:"dateSent",o:">=",d:e.dateSentStart}),e.dateSentEnd&&l.and.push({f:"dateSent",o:"<=",d:e.dateSentEnd+" 23:59:59"}),n&&l.and.push({or:[{f:"contacts.contactId",d:n},{f:"manualContacts.contactId",d:n}]}),a&&l.and.push({f:"eigenOpenstaand"}),l}(ne,t.folder,l.contact,"1"===l.eigen)},ke=function(){return"concept"===t.folder?["-createdAt"]:["-dateSent"]},Ie=function(){if(l.contact||l.eigen)return W(J),void e(n.pathname);le(ce(ce({},J),{},{fetch:!0}))},Ce=function(){D||(T(!0),$.A.receiveMailFromMailboxesUser().then((function(){Oe("Ophalen nieuwe e-mails is voltooid."),xe(),je(!1),setTimeout(qe,5e3)})).catch((function(e){Oe("Er ging iets mis bij ophalen nieuwe e-mails.")})))};function qe(){T(!1)}var Me=function(){return me||Object.keys(ne).some((function(e){return!!ne[e]&&"fetch"!==e}))};return o.createElement("div",null,b?o.createElement("div",{className:"row"},o.createElement("div",{className:"col-xs-12"},o.createElement("div",{className:"alert alert-info",role:"alert"},"Bezig met ophalen mailbox statussen ..."))):Ee?o.createElement(o.Fragment,null,o.createElement(ae,{activeMailboxes:g}),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-4",style:{paddingLeft:"17px",marginTop:"-10px",marginBottom:"5px"}},o.createElement("div",{className:"btn-group",role:"group"},o.createElement(K.A,{iconName:"refresh",onClickAction:Ce,title:"Alle mappen ontvangen"}),o.createElement(K.A,{iconName:"plus",onClickAction:function(){A.A.storeNew().then((function(e){be(e.data.id)}))},title:"Nieuwe e-mail"}),o.createElement(K.A,{iconName:"check",onClickAction:function(){return ye(!ge)},title:"Contactselectie maken"}))),o.createElement("div",{className:"col-md-4",style:{marginTop:"-10px",marginBottom:"5px"}},(G||me)&&o.createElement("span",{style:{marginLeft:"6px"}},me?o.createElement("strong",null,"Eigen openstaande e-mails"):"E-mails"," ",G&&o.createElement("span",null,"voor contact ",o.createElement("strong",null,null==G?void 0:G.fullName)),o.createElement("a",{role:"button",style:{marginLeft:"10px"},className:"btn btn-success btn-sm",onClick:function(){return e(n.pathname)}},"Filter wissen"))),o.createElement("div",{className:"col-md-4",style:{marginTop:"-10px",marginBottom:"5px"}},Me()&&o.createElement("button",{type:"button",className:"btn btn-success pull-right btn-sm",style:{marginRight:"4px"},onClick:Ie},"Wis alle filters")),D&&o.createElement(z.A,{buttonClassName:"btn-danger",closeModal:qe,buttonCancelText:"Sluiten",showConfirmAction:!1,title:"Alle mappen ontvangen"},o.createElement("p",null,we)))):o.createElement("div",{className:"row"},o.createElement("div",{className:"col-xs-12"},o.createElement("div",{className:"alert alert-info",role:"alert"},"U heeft nog geen toegang tot een mailbox toegekend gekregen."))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("form",{onKeyUp:function(e){13===e.keyCode&&le(ce(ce({},ne),{},{fetch:!0}))}},o.createElement(_,{filters:ne,setFilters:le,activeMailboxes:g,eigenOpenstaand:me})))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-4 margin-10-top",style:{paddingRight:"0px"}},H?o.createElement("div",{className:"alert alert-info",role:"alert"},"Let op: bezig met ophalen/bijwerken lijst met emails..."):Me()&&o.createElement("div",{className:"alert alert-info",role:"alert"},"Let op: filters actief  ",o.createElement("a",{role:"button",onClick:Ie},o.createElement(u.Ay,{size:16,icon:Q.t}))),o.createElement(R,{emails:i,folder:t.folder,emailCount:x,fetchMoreEmails:function(){if(!H)return B(!0),m.fetchSelectList({filter:Se(),limit:50,offset:i.length,sorts:ke()}).then((function(e){d([].concat((0,a.A)(i),(0,a.A)(e.data.items))),B(!1)}))},selectedEmailId:I,setSelectedEmailId:C,updateEmailAttributes:function(e,t){var n=i.map((function(n){return n.id===e?ce(ce({},n),t):n}));d(n)},onUpdated:xe,multiselectEnabled:ge,setMultiselectEnabled:ye})),o.createElement("div",{className:"col-md-8 margin-10-top"},o.createElement(q,{emailId:I,folder:t.folder,updatedEmailHandler:xe,revertFromRemovedHandler:function(){localStorage.setItem("lastOpenedEmailId",null),C(null),xe()},deletedHandler:function(){localStorage.setItem("lastOpenedEmailId",null),C(null),xe()}}))))}var ie=function(e){return(0,c.A)().get("/jory/contact/"+e,{params:{jory:{fld:["fullName"]}}})}}}]);