(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1087:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var n="".concat(window.URL_API,"/oauth/gmail/callback")},1162:function(e,a,t){"use strict";var n=t(546),r=t.n(n),i=t(0),l=t.n(i),o=t(20),m=t(36),c=t(122),s=t(89),u=t(39),p=t(31),d=t(54),g=t(28),v=t(1159),E=t(1160),b=E.a().shape({name:E.b().required("Verplicht"),email:E.b().email("Ongeldige e-mail").required("Verplicht")}),h=E.a().shape({imapHost:E.b().required("Verplicht"),imapPort:E.b().required("Verplicht"),username:E.b().required("Verplicht")}),S=E.a().shape({smtpHost:E.b().required("Verplicht"),smtpPort:E.b().required("Verplicht"),username:E.b().required("Verplicht")}),A=E.a().shape({password:E.b().required("Verplicht")}),f=E.a().shape({mailgunDomainId:E.b().required("Verplicht").typeError("Verplicht")}),y=E.a().shape({gmailApiSettings:E.a().shape({projectId:E.b().trim().required("Verplicht"),clientId:E.b().trim().required("Verplicht"),clientSecret:E.b().trim().required("Verplicht")})}),I=t(1087),N=t(22);var T=function(e){var a,t,n,r,i,o,c,s,u,g,v,E,b=e.values,h=e.errors,S=e.touched,A=e.handleChange,f=e.handleBlur;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Gmail api instellingen"))),l.a.createElement(p.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Project id",name:"gmailApiSettings.projectId",value:null===(a=b.gmailApiSettings)||void 0===a?void 0:a.projectId,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(t=h.gmailApiSettings)||void 0===t?void 0:t.projectId)&&(null===(n=S.gmailApiSettings)||void 0===n?void 0:n.projectId),errorMessage:null===(r=h.gmailApiSettings)||void 0===r?void 0:r.projectId}),l.a.createElement(N.a,{className:"form-group col-sm-6",label:"Redirect url",value:I.a})),l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(i=b.gmailApiSettings)||void 0===i?void 0:i.clientId,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(o=h.gmailApiSettings)||void 0===o?void 0:o.clientId)&&(null===(c=S.gmailApiSettings)||void 0===c?void 0:c.clientId),errorMessage:null===(s=h.gmailApiSettings)||void 0===s?void 0:s.clientId}),l.a.createElement(m.a,{label:"Client secret",name:"gmailApiSettings.clientSecret",value:null===(u=b.gmailApiSettings)||void 0===u?void 0:u.clientSecret,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(g=h.gmailApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=S.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(E=h.gmailApiSettings)||void 0===E?void 0:E.clientSecret}))))},w=t(7),q=t.n(w);a.a=Object(o.b)((function(e){return{mailboxServerTypes:e.systemData.mailboxServerTypes,mailgunDomain:e.systemData.mailgunDomain}}))((function(e){var a=e.initialValues,t=e.processSubmit,n=e.mailgunDomain,o=e.mailboxServerTypes,E=e.switchToView,I=e.isNew,w=Object(i.useState)(a.incomingServerType),C=r()(w,2),x=C[0],P=C[1],M=Object(i.useState)(a.outgoingServerType),B=r()(M,2),D=B[0],L=B[1],k=Object(v.a)({initialValues:a,validationSchema:function(){var e=b;"imap"===x&&(e=e.concat(h),I&&(e=e.concat(A)));"smtp"===D&&(e=e.concat(S),I&&(e=e.concat(A)));"mailgun"===D&&(e=e.concat(f));"gmail"!==x&&"gmail"!==D||(e=e.concat(y));return e}(),onSubmit:function(e,a){var n=a.setSubmitting;t(e,n)}}),O=k.values,V=k.errors,H=k.touched,j=k.handleChange,_=k.handleSubmit,F=k.setFieldValue,U=k.handleBlur,R=k.isSubmitting;return Object(i.useEffect)((function(){O.incomingServerType&&P(O.incomingServerType),O.outgoingServerType&&L(O.outgoingServerType)}),[O.incomingServerType,O.outgoingServerType]),l.a.createElement("form",{className:"form-horizontal",onSubmit:_},l.a.createElement(g.a,null,l.a.createElement(p.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Weergave Naam",name:"name",value:O.name,onChangeAction:j,onBlurAction:U,required:"required",error:V.name&&H.name,errorMessage:V.name}),l.a.createElement(m.a,{label:"E-mail",name:"email",value:O.email,onChangeAction:j,onBlurAction:U,required:"required",error:V.email&&H.email,errorMessage:V.email})),l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:"Actief",name:"isActive",value:O.isActive,onChangeAction:function(e){e.persist(),F(e.target.name,e.target.checked)},disabled:O.primary}),l.a.createElement(s.a,{label:"Primair (verzend wachtwoord mails)",name:"primary",value:O.primary,onChangeAction:function(e){e.persist(),F(e.target.name,e.target.checked)},disabled:!O.isActive})),l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:l.a.createElement("span",null,"Koppel contact op email ",l.a.createElement("u",null,"aan")," adres",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#ccc",fontWeight:"normal"}},"Koppeling contact standaard op email ",l.a.createElement("u",null,"afzender")," adres")),name:"linkContactFromEmailToAddress",value:O.linkContactFromEmailToAddress,onChangeAction:function(e){e.persist(),F(e.target.name,e.target.checked)}}))),l.a.createElement(d.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Servergegevens"))),l.a.createElement(p.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(c.a,{label:"Inkomende mail type",name:"incomingServerType",value:O.incomingServerType,options:o.incomingServerTypes,onChangeAction:j,emptyOption:!1,required:"required"}),l.a.createElement(c.a,{label:"Uitgaande mail type",name:"outgoingServerType",value:O.outgoingServerType,options:o.outgoingServerTypes,onChangeAction:j,emptyOption:!1,required:"required"})),l.a.createElement("div",{className:"row"},"imap"===O.incomingServerType?l.a.createElement(m.a,{label:"Inkomende IMAP host",name:"imapHost",value:O.imapHost,onChangeAction:j,onBlurAction:U,required:"required",error:V.imapHost&&H.imapHost,errorMessage:V.imapHost}):l.a.createElement("div",{className:"form-group col-sm-6"}),"smtp"===O.outgoingServerType?l.a.createElement(m.a,{label:"Uitgaande SMTP host",name:"smtpHost",value:O.smtpHost,onChangeAction:j,onBlurAction:U,required:"required",error:V.smtpHost&&H.smtpHost,errorMessage:V.smtpHost}):null,"mailgun"===O.outgoingServerType?l.a.createElement(c.a,{label:"Uitgaand Mailgun domein",name:"mailgunDomainId",value:O.mailgunDomainId,options:n,optionName:"domain",onChangeAction:j,required:"required",error:V.mailgunDomainId&&H.mailgunDomainId,errorMessage:V.mailgunDomainId}):null)),("imap"===O.incomingServerType||"smtp"===O.outgoingServerType)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Instellingen"))),l.a.createElement(p.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Gebruikersnaam",name:"username",value:O.username,onChangeAction:j,onBlurAction:U,required:"required",error:V.username&&H.username,errorMessage:V.username}),l.a.createElement(m.a,{type:"text",label:"Wachtwoord",name:"password",value:O.password,className:"numeric-password",placeholder:"**********",onChangeAction:j,onBlurAction:U,required:"required",error:V.password&&H.password,errorMessage:V.password})),l.a.createElement("div",{className:"row"},"imap"===O.incomingServerType?l.a.createElement(m.a,{label:"Imap poort",name:"imapPort",value:O.imapPort,onChangeAction:j,onBlurAction:U,required:"required",error:V.imapPort&&H.imapPort,errorMessage:V.imapPort}):l.a.createElement("div",{className:"form-group col-sm-6"}),"smtp"===O.outgoingServerType&&l.a.createElement(m.a,{label:"Smtp poort",name:"smtpPort",value:O.smtpPort,onChangeAction:j,onBlurAction:U,required:"required",error:V.smtpPort&&H.smtpPort,errorMessage:V.smtpPort})),l.a.createElement("div",{className:"row"},"imap"===O.incomingServerType?l.a.createElement(c.a,{label:"Imap versleutelde verbinding",name:"imapEncryption",value:O.imapEncryption,options:[{id:"ssl",name:"SSL"},{id:"ssl/novalidate-cert",name:"SSL - self-signed certificate"},{id:"tls",name:"TLS"}],onChangeAction:j}):l.a.createElement("div",{className:"form-group col-sm-6"}),"smtp"===O.outgoingServerType&&l.a.createElement(c.a,{label:"Smtp versleutelde verbinding",name:"smtpEncryption",value:O.smtpEncryption,options:[{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"}],onChangeAction:j})),"imap"===O.incomingServerType&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Inbox prefix",name:"imapInboxPrefix",value:O.imapInboxPrefix,onChangeAction:j,onBlurAction:U,error:V.imapInboxPrefix&&H.imapInboxPrefix,errorMessage:V.imapInboxPrefix})),l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:"Zet email als gelezen op server",name:"emailMarkAsSeen",value:O.emailMarkAsSeen,onChangeAction:j,onBlurAction:U}))))),("gmail"===O.incomingServerType||"gmail"===O.outgoingServerType)&&l.a.createElement(T,{values:O,errors:V,touched:H,handleChange:j,handleBlur:U}),O.id&&l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Log"))),l.a.createElement(p.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(N.a,{label:"Datum email laatst opgehaald",value:O.dateLastFetched?q()(O.dateLastFetched).format("L HH:mm:ss"):"Nog niet bepaald",className:"form-group col-sm-6"}),l.a.createElement(N.a,{label:"UID email laatst opgehaald",value:O.imapIdLastFetched,className:"form-group col-sm-6"})))),l.a.createElement(p.a,null,l.a.createElement("div",{className:"pull-right btn-group",role:"group"},O.id?l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:E}),l.a.createElement(u.a,{buttonText:"Opslaan",onClickAction:_,type:"submit",value:"Submit",loading:R})):l.a.createElement(u.a,{buttonText:"Opslaan",onClickAction:_,type:"submit",value:"Submit",loading:R})))))}))},1666:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(4),l=t(1162),o=t(102),m=t(25),c=(t(964),t(288)),s=t(20);var u=Object(s.b)(null,(function(e){return Object(m.b)({fetchSystemData:c.a},e)}))((function(e){var a=e.fetchSystemData;return r.a.createElement(l.a,{initialValues:{id:"",name:"",email:"",username:"",password:"",smtpHost:"",smtpPort:"",smtpEncryption:"",imapHost:"",imapPort:"",imapEncryption:"",imapInboxPrefix:"",incomingServerType:"imap",outgoingServerType:"smtp",mailgunDomainId:"",primary:!1,isActive:!0,linkContactFromEmailToAddress:!1,emailMarkAsSeen:!0,gmailApiSettings:{projectId:"",clientId:"",clientSecret:""}},processSubmit:function(e,t){o.a.newMailbox(e).then((function(e){a(),i.f.push("/mailbox/".concat(e.data.data.id))})).catch((function(e){401===e.response.status&&"gmail_unauthorised"===e.response.data.message&&(window.location=e.response.data.authUrl),t(!1),alert("Er is iets misgegaan met opslaan. Probeer het nogmaals")}))},isNew:!0})})),p=t(51),d=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},r.a.createElement(p.a,{iconName:"glyphicon-arrow-left",onClickAction:i.e.goBack}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",{className:"text-center margin-small"},"Nieuw mailbox")),r.a.createElement("div",{className:"col-md-4"}))},g=t(28),v=t(31);a.default=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"col-md-12 margin-10-top"},r.a.createElement(g.a,null,r.a.createElement(v.a,{className:"panel-small"},r.a.createElement(d,null)))),r.a.createElement("div",{className:"col-md-12 margin-10-top"},r.a.createElement(u,null))),r.a.createElement("div",{className:"col-md-3"}))}},964:function(e,a,t){"use strict";t.d(a,"c",(function(){return n})),t.d(a,"f",(function(){return r})),t.d(a,"e",(function(){return i})),t.d(a,"b",(function(){return l})),t.d(a,"d",(function(){return o})),t.d(a,"a",(function(){return m}));var n=function(e){return{type:"FETCH_MAILBOX_DETAILS",id:e}},r=function(e){return{type:"UPDATE_MAILBOX_DETAILS",mailbox:e}},i=function(e){return{type:"NEW_MAILBOX_USER",mailboxUser:e}},l=function(e,a){return{type:"DELETE_MAILBOX_USER",mailboxId:e,userId:a}},o=function(e){return{type:"NEW_MAILBOX_IGNORE",ignore:e}},m=function(e){return{type:"DELETE_MAILBOX_IGNORE",ignoreId:e}}}}]);