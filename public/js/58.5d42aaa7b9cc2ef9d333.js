(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1e3:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var n="".concat(window.URL_API,"/oauth/gmail/callback"),r="".concat(window.URL_API,"/api/oauth/ms-azure/callback")},1158:function(e,a,t){"use strict";var n=t(545),r=t.n(n),i=t(0),l=t.n(i),o=t(20),m=t(36),c=t(122),s=t(89),u=t(39),d=t(31),p=t(54),g=t(28),v=t(1155),E=t(1156),h=E.a().shape({name:E.b().required("Verplicht"),email:E.b().email("Ongeldige e-mail").required("Verplicht")}),S=E.a().shape({imapHost:E.b().required("Verplicht"),imapPort:E.b().required("Verplicht"),username:E.b().required("Verplicht")}),b=E.a().shape({smtpHost:E.b().required("Verplicht"),smtpPort:E.b().required("Verplicht"),username:E.b().required("Verplicht")}),A=E.a().shape({password:E.b().required("Verplicht")}),f=E.a().shape({mailgunDomainId:E.b().required("Verplicht").typeError("Verplicht")}),y=E.a().shape({gmailApiSettings:E.a().shape({projectId:E.b().trim().required("Verplicht"),clientId:E.b().trim().required("Verplicht"),clientSecret:E.b().trim().required("Verplicht")})}),I=(E.a().shape({gmailApiSettings:E.a().shape({clientId:E.b().trim().required("Verplicht"),clientSecret:E.b().trim().required("Verplicht"),projectId:E.b().trim().required("Verplicht")})}),t(1e3)),N=t(22);var q=function(e){var a,t,n,r,i,o,c,s,u,g,v,E,h=e.values,S=e.errors,b=e.touched,A=e.handleChange,f=e.handleBlur;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Gmail api instellingen"))),l.a.createElement(d.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Project id",name:"gmailApiSettings.projectId",value:null===(a=h.gmailApiSettings)||void 0===a?void 0:a.projectId,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(t=S.gmailApiSettings)||void 0===t?void 0:t.projectId)&&(null===(n=b.gmailApiSettings)||void 0===n?void 0:n.projectId),errorMessage:null===(r=S.gmailApiSettings)||void 0===r?void 0:r.projectId}),l.a.createElement(N.a,{className:"form-group col-sm-6",label:"Redirect url",value:I.a})),l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(i=h.gmailApiSettings)||void 0===i?void 0:i.clientId,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(o=S.gmailApiSettings)||void 0===o?void 0:o.clientId)&&(null===(c=b.gmailApiSettings)||void 0===c?void 0:c.clientId),errorMessage:null===(s=S.gmailApiSettings)||void 0===s?void 0:s.clientId}),l.a.createElement(m.a,{label:"Client secret",name:"gmailApiSettings.clientSecret",value:null===(u=h.gmailApiSettings)||void 0===u?void 0:u.clientSecret,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(g=S.gmailApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=b.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(E=S.gmailApiSettings)||void 0===E?void 0:E.clientSecret}))))},T=t(7),w=t.n(T);var C=function(e){var a,t,n,r,i,o,c,s,u,g,v,E,h=e.values,S=e.errors,b=e.touched,A=e.handleChange,f=e.handleBlur;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Microsoft Azure api instellingen"))),l.a.createElement(d.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Client id",name:"gmailApiSettings.clientId",value:null===(a=h.gmailApiSettings)||void 0===a?void 0:a.clientId,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(t=S.gmailApiSettings)||void 0===t?void 0:t.clientId)&&(null===(n=b.gmailApiSettings)||void 0===n?void 0:n.clientId),errorMessage:null===(r=S.gmailApiSettings)||void 0===r?void 0:r.clientId}),l.a.createElement(m.a,{label:"Client secret id",name:"gmailApiSettings.projectId",value:null===(i=h.gmailApiSettings)||void 0===i?void 0:i.projectId,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(o=S.gmailApiSettings)||void 0===o?void 0:o.projectId)&&(null===(c=b.gmailApiSettings)||void 0===c?void 0:c.projectId),errorMessage:null===(s=S.gmailApiSettings)||void 0===s?void 0:s.projectId})),l.a.createElement("div",{className:"row"},l.a.createElement(N.a,{className:"form-group col-sm-6",label:"Redirect url",value:I.b}),l.a.createElement(m.a,{type:"text",label:"Client secret waarde",name:"gmailApiSettings.clientSecret",value:null===(u=h.gmailApiSettings)||void 0===u?void 0:u.clientSecret,onChangeAction:A,onBlurAction:f,required:"required",error:(null===(g=S.gmailApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=b.gmailApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(E=S.gmailApiSettings)||void 0===E?void 0:E.clientSecret}))))};a.a=Object(o.b)((function(e){return{mailboxServerTypes:e.systemData.mailboxServerTypes,mailgunDomain:e.systemData.mailgunDomain}}))((function(e){var a=e.initialValues,t=e.processSubmit,n=e.mailgunDomain,o=e.mailboxServerTypes,E=e.switchToView,I=e.isNew,T=Object(i.useState)(a.incomingServerType),x=r()(T,2),M=x[0],B=x[1],P=Object(i.useState)(a.outgoingServerType),L=r()(P,2),V=L[0],j=L[1],k=Object(v.a)({initialValues:a,validationSchema:function(){var e=h;"imap"===M&&(e=e.concat(S),I&&(e=e.concat(A)));"smtp"===V&&(e=e.concat(b),I&&(e=e.concat(A)));"mailgun"===V&&(e=e.concat(f));"gmail"!==M&&"gmail"!==V||(e=e.concat(y));"ms-oauth"!==M&&"ms-oauth"!==V||(e=e.concat(void 0));return e}(),onSubmit:function(e,a){var n=a.setSubmitting;t(e,n)}}),D=k.values,O=k.errors,H=k.touched,_=k.handleChange,F=k.handleSubmit,U=k.setFieldValue,R=k.handleBlur,z=k.isSubmitting;return Object(i.useEffect)((function(){D.incomingServerType&&B(D.incomingServerType),D.outgoingServerType&&j(D.outgoingServerType)}),[D.incomingServerType,D.outgoingServerType]),l.a.createElement("form",{className:"form-horizontal",onSubmit:F},l.a.createElement(g.a,null,l.a.createElement(d.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Weergave Naam",name:"name",value:D.name,onChangeAction:_,onBlurAction:R,required:"required",error:O.name&&H.name,errorMessage:O.name}),l.a.createElement(m.a,{label:"E-mail",name:"email",value:D.email,onChangeAction:_,onBlurAction:R,required:"required",error:O.email&&H.email,errorMessage:O.email})),l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:"Actief",name:"isActive",value:D.isActive,onChangeAction:function(e){e.persist(),U(e.target.name,e.target.checked)},disabled:D.primary}),l.a.createElement(s.a,{label:"Primair (verzend wachtwoord mails)",name:"primary",value:D.primary,onChangeAction:function(e){e.persist(),U(e.target.name,e.target.checked)},disabled:!D.isActive})),l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:l.a.createElement("span",null,"Koppel contact op email ",l.a.createElement("u",null,"aan")," adres",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#ccc",fontWeight:"normal"}},"Koppeling contact standaard op email ",l.a.createElement("u",null,"afzender")," adres")),name:"linkContactFromEmailToAddress",value:D.linkContactFromEmailToAddress,onChangeAction:function(e){e.persist(),U(e.target.name,e.target.checked)}}))),l.a.createElement(p.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Servergegevens"))),l.a.createElement(d.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(c.a,{label:"Inkomende mail type",name:"incomingServerType",value:D.incomingServerType,options:o.incomingServerTypes,onChangeAction:_,emptyOption:!1,required:"required"}),l.a.createElement(c.a,{label:"Uitgaande mail type",name:"outgoingServerType",value:D.outgoingServerType,options:o.outgoingServerTypes,onChangeAction:_,emptyOption:!1,required:"required"})),l.a.createElement("div",{className:"row"},"imap"===D.incomingServerType?l.a.createElement(m.a,{label:"Inkomende IMAP host",name:"imapHost",value:D.imapHost,onChangeAction:_,onBlurAction:R,required:"required",error:O.imapHost&&H.imapHost,errorMessage:O.imapHost}):l.a.createElement("div",{className:"form-group col-sm-6"}),"smtp"===D.outgoingServerType?l.a.createElement(m.a,{label:"Uitgaande SMTP host",name:"smtpHost",value:D.smtpHost,onChangeAction:_,onBlurAction:R,required:"required",error:O.smtpHost&&H.smtpHost,errorMessage:O.smtpHost}):null,"mailgun"===D.outgoingServerType?l.a.createElement(c.a,{label:"Uitgaand Mailgun domein",name:"mailgunDomainId",value:D.mailgunDomainId,options:n,optionName:"domain",onChangeAction:_,required:"required",error:O.mailgunDomainId&&H.mailgunDomainId,errorMessage:O.mailgunDomainId}):null)),("imap"===D.incomingServerType||"smtp"===D.outgoingServerType)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Instellingen"))),l.a.createElement(d.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Gebruikersnaam",name:"username",value:D.username,onChangeAction:_,onBlurAction:R,required:"required",error:O.username&&H.username,errorMessage:O.username}),l.a.createElement(m.a,{type:"text",label:"Wachtwoord",name:"password",value:D.password,className:"numeric-password",placeholder:"**********",onChangeAction:_,onBlurAction:R,required:"required",error:O.password&&H.password,errorMessage:O.password})),l.a.createElement("div",{className:"row"},"imap"===D.incomingServerType?l.a.createElement(m.a,{label:"Imap poort",name:"imapPort",value:D.imapPort,onChangeAction:_,onBlurAction:R,required:"required",error:O.imapPort&&H.imapPort,errorMessage:O.imapPort}):l.a.createElement("div",{className:"form-group col-sm-6"}),"smtp"===D.outgoingServerType&&l.a.createElement(m.a,{label:"Smtp poort",name:"smtpPort",value:D.smtpPort,onChangeAction:_,onBlurAction:R,required:"required",error:O.smtpPort&&H.smtpPort,errorMessage:O.smtpPort})),l.a.createElement("div",{className:"row"},"imap"===D.incomingServerType?l.a.createElement(c.a,{label:"Imap versleutelde verbinding",name:"imapEncryption",value:D.imapEncryption,options:[{id:"ssl",name:"SSL"},{id:"ssl/novalidate-cert",name:"SSL - self-signed certificate"},{id:"tls",name:"TLS"}],onChangeAction:_}):l.a.createElement("div",{className:"form-group col-sm-6"}),"smtp"===D.outgoingServerType&&l.a.createElement(c.a,{label:"Smtp versleutelde verbinding",name:"smtpEncryption",value:D.smtpEncryption,options:[{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"}],onChangeAction:_})),"imap"===D.incomingServerType&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement(m.a,{label:"Inbox prefix",name:"imapInboxPrefix",value:D.imapInboxPrefix,onChangeAction:_,onBlurAction:R,error:O.imapInboxPrefix&&H.imapInboxPrefix,errorMessage:O.imapInboxPrefix})),l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:"Zet email als gelezen op server",name:"emailMarkAsSeen",value:D.emailMarkAsSeen,onChangeAction:_,onBlurAction:R}))))),("gmail"===D.incomingServerType||"gmail"===D.outgoingServerType)&&l.a.createElement(q,{values:D,errors:O,touched:H,handleChange:_,handleBlur:R}),("ms-oauth"===D.incomingServerType||"ms-oauth"===D.outgoingServerType)&&l.a.createElement(C,{values:D,errors:O,touched:H,handleChange:_,handleBlur:R}),D.id&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement("span",{className:"h5"},l.a.createElement("strong",null,"Log"))),l.a.createElement(d.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(N.a,{label:"Datum email laatst opgehaald",value:D.dateLastFetched?w()(D.dateLastFetched).format("L HH:mm:ss"):"Nog niet bepaald",className:"form-group col-sm-6"}),l.a.createElement(N.a,{label:"UID email laatst opgehaald",value:D.imapIdLastFetched,className:"form-group col-sm-6"})))),l.a.createElement(d.a,null,l.a.createElement("div",{className:"pull-right btn-group",role:"group"},D.id?l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:E}),l.a.createElement(u.a,{buttonText:"Opslaan",onClickAction:F,type:"submit",value:"Submit",loading:z})):l.a.createElement(u.a,{buttonText:"Opslaan",onClickAction:F,type:"submit",value:"Submit",loading:z})))))}))},1663:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(4),l=t(1158),o=t(102),m=t(25),c=(t(961),t(287)),s=t(20);var u=Object(s.b)(null,(function(e){return Object(m.b)({fetchSystemData:c.a},e)}))((function(e){var a=e.fetchSystemData;return r.a.createElement(l.a,{initialValues:{id:"",name:"",email:"",username:"",password:"",smtpHost:"",smtpPort:"",smtpEncryption:"",imapHost:"",imapPort:"",imapEncryption:"",imapInboxPrefix:"",incomingServerType:"imap",outgoingServerType:"smtp",mailgunDomainId:"",primary:!1,isActive:!0,linkContactFromEmailToAddress:!1,emailMarkAsSeen:!0,gmailApiSettings:{projectId:"",clientId:"",clientSecret:""}},processSubmit:function(e,t){o.a.newMailbox(e).then((function(e){a(),i.f.push("/mailbox/".concat(e.data.data.id))})).catch((function(e){401!==e.response.status||"gmail_unauthorised"!==e.response.data.message&&"ms_oauth_unauthorised"!==e.response.data.message||(window.location=e.response.data.authUrl),t(!1),alert("Er is iets misgegaan met opslaan. Probeer het nogmaals")}))},isNew:!0})})),d=t(51),p=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},r.a.createElement(d.a,{iconName:"glyphicon-arrow-left",onClickAction:i.e.goBack}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",{className:"text-center margin-small"},"Nieuw mailbox")),r.a.createElement("div",{className:"col-md-4"}))},g=t(28),v=t(31);a.default=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"col-md-12 margin-10-top"},r.a.createElement(g.a,null,r.a.createElement(v.a,{className:"panel-small"},r.a.createElement(p,null)))),r.a.createElement("div",{className:"col-md-12 margin-10-top"},r.a.createElement(u,null))),r.a.createElement("div",{className:"col-md-3"}))}},961:function(e,a,t){"use strict";t.d(a,"c",(function(){return n})),t.d(a,"f",(function(){return r})),t.d(a,"e",(function(){return i})),t.d(a,"b",(function(){return l})),t.d(a,"d",(function(){return o})),t.d(a,"a",(function(){return m}));var n=function(e){return{type:"FETCH_MAILBOX_DETAILS",id:e}},r=function(e){return{type:"UPDATE_MAILBOX_DETAILS",mailbox:e}},i=function(e){return{type:"NEW_MAILBOX_USER",mailboxUser:e}},l=function(e,a){return{type:"DELETE_MAILBOX_USER",mailboxId:e,userId:a}},o=function(e){return{type:"NEW_MAILBOX_IGNORE",ignore:e}},m=function(e){return{type:"DELETE_MAILBOX_IGNORE",ignoreId:e}}}}]);