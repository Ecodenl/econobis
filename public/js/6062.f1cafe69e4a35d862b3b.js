"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6062],{52964:(e,t,r)=>{r.d(t,{C:()=>n,g:()=>a});var a=function(e){return{type:"FETCH_ORDER_DETAILS",id:e}},n=function(e,t){return{type:"UPDATE_ORDER",order:e,switchToView:t}}},89481:(e,t,r)=>{r.d(t,{AU:()=>a,Yx:()=>i,f_:()=>c,oh:()=>n,wH:()=>o});var a=function(e,t,r,a){return{type:"FETCH_ORDERS",filters:e,sorts:t,pagination:r,administrationId:a}},n=function(){return{type:"CLEAR_ORDERS"}},o=function(e){return{type:"DELETE_ORDER",id:e}},c=function(e){return{type:"ORDER_PREVIEW_CREATE",data:e}},i=function(){return{type:"CLEAR_ORDER_PREVIEW_CREATE"}}},93627:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Qe});var a=r(15671),n=r(43144),o=r(60136),c=r(82963),i=r(61120),s=r(67294),l=r(86706),d=r(52964),u=r(97326),m=r(4942),p=r(61409),h=r(55451),f=r(41355),v=r(89481);const g=(0,l.$j)(null,(function(e){return{deleteOrder:function(t){e((0,v.wH)(t))}}}))((function(e){return s.createElement(f.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteOrder(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder Order: ",s.createElement("strong",null," ",e.subject," "),"?")}));var E=r(49332);var P=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"toggleDelete",(function(){t.setState({showDelete:!t.state.showDelete})})),(0,m.Z)((0,u.Z)(t),"preview",(function(){p.nA.push("/order/inzien/".concat(t.props.orderDetails.id))})),(0,m.Z)((0,u.Z)(t),"newInvoice",(function(){t.props.previewCreate([t.props.orderDetails.id]),p.nA.push("/financieel/".concat(t.props.orderDetails.administrationId,"/orders/aanmaken"))})),t.state={showDelete:!1,showNewInvoice:!1},t}return(0,n.Z)(d,[{key:"render",value:function(){return s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-4"},s.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},s.createElement(h.Z,{iconName:"arrowLeft",onClickAction:p.mW.goBack}),!this.props.orderDetails.canCreateInvoice&&s.createElement(h.Z,{iconName:"eye",onClickAction:this.preview}),this.props.orderDetails.canCreateInvoice&&s.createElement(E.Z,{buttonText:"Preview concept nota",onClickAction:this.newInvoice}),s.createElement(h.Z,{iconName:"trash",onClickAction:this.toggleDelete}))),!this.props.isLoading&&s.createElement("div",{className:"col-md-4"},s.createElement("h4",{className:"text-center"},"Order: ",this.props.orderDetails.subject," / ",this.props.orderDetails.number)),s.createElement("div",{className:"col-md-4"}),this.state.showDelete&&s.createElement(g,{closeDeleteItemModal:this.toggleDelete,subject:this.props.orderDetails.subject,id:this.props.orderDetails.id,administrationId:this.props.administrationId}))}}]),d}(s.Component);const b=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,administrationId:e.orderDetails.administrationId,isLoading:e.loadingData.isLoading}}),(function(e){return{previewCreate:function(t){e((0,v.f_)(t))}}}))(P);var y=r(96486),Z=r(48966),I=r.n(Z),D=r(9181),C=r(14309),O=r(98688),w=(r(59687),r(71840)),N=r(19789),S=r(54138),k=r(82084),R=r(30381),T=r.n(R),F=r(27649);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState({order:x(x({},t.state.order),{},(0,m.Z)({},n,a))})})),(0,m.Z)((0,u.Z)(t),"handleInputChangeParticipation",(function(e){var r,a=e.target,n="checkbox"===a.type?a.checked:a.value;r=(r=t.state.participations.filter((function(e){return e.id==n})))[0],t.setState({order:x(x({},t.state.order),{},{participationId:r.id})})})),(0,m.Z)((0,u.Z)(t),"handleInputChangeDate",(function(e,r){t.setState({order:x(x({},t.state.order),{},(0,m.Z)({},r,e))})})),(0,m.Z)((0,u.Z)(t),"handleInputChangeInvoiceDate",(function(e,r){t.setState({order:x(x({},t.state.order),{},(0,m.Z)({},r,e))},t.checkContactCollectMandate)})),(0,m.Z)((0,u.Z)(t),"checkContactCollectMandate",(function(){var e=t.state.order.paymentTypeId,r=t.state.order.dateNextInvoice;r||(r=T()().format("YYYY-MM-DD"));var a=t.props.contactCollectMandateFirstRun,n=t.props.contactCollectMandate,o=1==n;n&&a>r&&(o=!1),o||(e="transfer"),t.setState({collectMandateActive:o,order:x(x({},t.state.order),{},{paymentTypeId:e})})})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var r=t.state.order,a={},n=!1;I().isEmpty(r.paymentTypeId+"")&&(a.paymentTypeId=!0,n=!0),I().isEmpty(r.statusId+"")&&(a.statusId=!0,n=!0),I().isEmpty(r.subject+"")&&(a.subject=!0,n=!0),t.setState(x(x({},t.state),{},{errors:a})),n||t.props.updateOrder(r,t.props.switchToView)}));var r=e.orderDetails,n=r.id,o=r.contactId,c=r.statusId,i=r.subject,s=r.participationId,p=r.emailTemplateIdCollection,h=r.emailTemplateIdTransfer,f=r.emailTemplateReminderId,v=r.emailTemplateExhortationId,g=r.paymentTypeId,E=r.collectionFrequencyId,P=r.IBAN,b=r.ibanAttn,y=r.numberOfInvoiceReminders,Z=r.poNumber,D=r.projectNumber,C=r.invoiceText,O=r.dateRequested,w=r.administrationId,N=r.dateNextInvoice;return t.state={emailTemplates:[],showExtraContactInfo:!1,collectMandateActive:!1,participations:[],order:{id:n,contactId:o||"",statusId:c||"",administrationId:w||"",subject:i||"",participationId:s||"",emailTemplateIdCollection:p||"",emailTemplateIdTransfer:h||"",emailTemplateReminderId:f||"",emailTemplateExhortationId:v||"",paymentTypeId:g||"",collectionFrequencyId:E||"once",IBAN:P||"",ibanAttn:b||"",numberOfInvoiceReminders:y||"",poNumber:Z||"",projectNumber:D||"",invoiceText:C||"",dateRequested:O||"",dateNextInvoice:N||""},errors:{statusId:!1,subject:!1,IBAN:!1},peekLoading:{emailTemplates:!0}},t.handleReactSelectChange=t.handleReactSelectChange.bind((0,u.Z)(t)),t}return(0,n.Z)(d,[{key:"componentDidMount",value:function(){var e=this;this.state.order.contactId&&F.Z.fetchContactInfoForOrder(this.state.order.contactId).then((function(t){e.setState({participations:t.data.participations})})),N.Z.fetchEmailTemplatesPeek().then((function(t){e.setState({emailTemplates:t,peekLoading:x(x({},e.state.peekLoading),{},{emailTemplates:!1})},e.checkContactCollectMandate)}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState({order:x(x({},this.state.order),{},(0,m.Z)({},t,e))})}},{key:"render",value:function(){var e=this.state.order,t=e.statusId,r=e.subject,a=e.participationId,n=e.emailTemplateIdCollection,o=e.emailTemplateIdTransfer,c=e.emailTemplateReminderId,i=e.emailTemplateExhortationId,l=e.paymentTypeId,d=e.collectionFrequencyId,u=(e.IBAN,e.ibanAttn,e.numberOfInvoiceReminders),m=e.poNumber,p=e.projectNumber,h=e.invoiceText,f=e.dateRequested,v=e.administrationId,g=e.dateNextInvoice,P=this.props.orderDetails.invoiceCount;return s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(C.Z,null,s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Order op naam van",value:this.props.orderDetails.contact?this.props.orderDetails.contact.fullName:"",name:"contact",readOnly:!0}),P>0?s.createElement(D.Z,{label:"Administratie",value:this.props.orderDetails.administration?this.props.orderDetails.administration.name:"",name:"administration",readOnly:!0}):s.createElement(w.Z,{label:"Administratie",name:"administrationId",options:this.props.administrations,value:v,onChangeAction:this.handleInputChange})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Contact persoon",value:this.props.contactPerson,name:"contactPerson",readOnly:!0}),s.createElement(D.Z,{label:"Nota wordt gemaild naar",value:this.props.contactEmail,name:"contactEmail",readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(w.Z,{label:"Deelname",id:"ParticipationId",name:"ParticipationId",options:this.state.participations,value:a,onChangeAction:this.handleInputChangeParticipation,optionValue:"id",optionName:"project_name"}),s.createElement(D.Z,{label:"Betreft",name:"subject",value:r,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.subject})),s.createElement("div",{className:"row"},s.createElement(k.Z,{label:"E-mail template nota incasso",name:"emailTemplateIdCollection",options:this.state.emailTemplates,value:n,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates}),s.createElement(w.Z,{label:"Betaalwijze",id:"paymentTypeId",name:"paymentTypeId",options:this.state.collectMandateActive?this.props.orderPaymentTypes:this.props.orderPaymentTypes.filter((function(e){return"transfer"===e.id})),emptyOption:!1,value:l,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.paymentTypeId})),s.createElement("div",{className:"row"},s.createElement(k.Z,{label:"E-mail template nota overboeken",name:"emailTemplateIdTransfer",options:this.state.emailTemplates,value:o,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates}),s.createElement(w.Z,{label:"Nota frequentie",id:"collectionFrequencyId",name:"collectionFrequencyId",options:this.props.orderCollectionFrequencies,value:d,onChangeAction:this.handleInputChange,emptyOption:!1})),s.createElement("div",{className:"row"},s.createElement(k.Z,{label:"E-mail template herinnering",name:"emailTemplateReminderId",options:this.state.emailTemplates,value:c,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates}),s.createElement(w.Z,{label:"Status",id:"statusId",name:"statusId",options:this.props.orderStatuses,value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.statusId})),s.createElement("div",{className:"row"},s.createElement(k.Z,{label:"E-mail template aanmaning",name:"emailTemplateExhortationId",options:this.state.emailTemplates,value:i,onChangeAction:this.handleReactSelectChange,isLoading:this.state.peekLoading.emailTemplates}),s.createElement(w.Z,{label:"Aantal keer herinneringen nota",id:"numberOfInvoiceReminders",size:"col-sm-6",name:"numberOfInvoiceReminders",options:[{id:"1",name:"1x"},{id:"2",name:"2x"},{id:"3",name:"3x"}],value:u,onChangeAction:this.handleInputChange})),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6 form-group"}),s.createElement(D.Z,{label:"Opdracht nummer klant",name:"poNumber",value:m,onChangeAction:this.handleInputChange})),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6 form-group"}),s.createElement(D.Z,{label:"Projectnummer",name:"projectNumber",value:p,maxLength:"25",onChangeAction:this.handleInputChange})),s.createElement("div",{className:"row"},s.createElement("div",{className:"form-group col-sm-12"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-3"},s.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Opmerking")),s.createElement("div",{className:"col-sm-8"},s.createElement("textarea",{name:"invoiceText",value:h,onChange:this.handleInputChange,className:"form-control input-sm",maxLength:"1000"}))))),s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"Aanvraag datum",name:"dateRequested",value:f,onChangeAction:this.handleInputChangeDate}),s.createElement(S.Z,{label:"Volgende nota datum",value:g,name:"dateNextInvoice",onChangeAction:this.handleInputChangeInvoiceDate})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Totaal bedrag incl. BTW",value:"€"+this.props.orderDetails.totalInclVatInclReductionPerYear.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),name:"totalInclVatInclReduction",readOnly:!0}))),s.createElement(O.Z,null,s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(E.Z,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),s.createElement(E.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),d}(s.Component);const V=(0,l.$j)((function(e){return{orderStatuses:e.systemData.orderStatuses,orderPaymentTypes:e.systemData.orderPaymentTypes,orderCollectionFrequencies:e.systemData.orderCollectionFrequencies,orderDetails:e.orderDetails,administrations:e.meDetails.administrations}}),(function(e){return{updateOrder:function(t,r){e((0,d.C)(t,r))}}}))(A);var L=r(7250);const M=(0,l.$j)((function(e){return{orderDetails:e.orderDetails}}))((function(e){var t,r=e.orderDetails,a=r.contact,n=r.project,o=r.administration,c=r.status,i=r.subject,l=r.emailTemplateCollection,d=r.emailTemplateTransfer,u=r.emailTemplateReminder,m=r.emailTemplateExhortation,p=r.paymentType,h=r.collectionFrequency,f=(r.IBAN,r.ibanAttn,r.numberOfInvoiceReminders),v=r.poNumber,g=r.projectNumber,E=r.invoiceText,P=r.dateRequested,b=r.totalInclVatInclReductionPerYear,y=r.dateNextInvoice;return t="in-progress"==c.id?null:e.switchToEdit,s.createElement("div",{onClick:t},s.createElement(C.Z,null,s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"Order op naam van",value:a?a.fullName:"",link:a?"contact/"+a.id:""}),s.createElement(L.Z,{label:"Administratie",value:o.name,link:o?"administratie/"+o.id:""})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"Contact persoon",value:e.contactPerson}),s.createElement(L.Z,{label:"Nota wordt gemaild naar",value:e.contactEmail})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"Deelname",value:n?n.name:""}),s.createElement(L.Z,{label:"Betreft",value:i||""})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"E-mail template nota incasso",value:l?l.name:""}),s.createElement(L.Z,{label:"Betaalwijze",value:p?p.name:""})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"E-mail template nota overboeken",value:d?d.name:""}),s.createElement(L.Z,{label:"Nota frequentie",value:h?h.name:""})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"E-mail template herinnering",value:u?u.name:""}),s.createElement(L.Z,{label:"Status",value:c?c.name:""})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"E-mail template aanmaning",value:m?m.name:""}),s.createElement(L.Z,{label:"Aantal keer herinneringen nota",value:1===f?"1x":2===f?"2x":3===f?"3x":""})),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6"}),s.createElement(L.Z,{label:"Opdracht nummer klant",value:v})),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6"}),s.createElement(L.Z,{label:"Projectnummer",value:g})),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-3"},s.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Opmerking")),s.createElement("div",{className:"col-sm-9",id:"invoiceText"},E)),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"Aanvraag datum",value:P?T()(P).format("DD-MM-Y"):""}),s.createElement(L.Z,{label:"Volgende nota datum",value:y?T()(y).format("DD-MM-Y"):""})),s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"Totaal bedrag incl. BTW",value:"€"+b.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2})})))))}));var q=r(11776);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"switchToEdit",(function(){t.props.orderDetails.canEdit?t.setState({showEdit:!0}):t.props.setError(405,"Een order met daar aan gekoppeld een nota met de status “Te verzenden” kan niet worden aangepast(de order zit in de map “Order – Te verzenden”). Wil je deze order toch aanpassen? Verwijder dan eerst de “Te verzenden” nota. Dan kom deze order weer in de “Order – te factureren”.  Pas de order aan en maak vervolgens opnieuw de nota.")})),(0,m.Z)((0,u.Z)(t),"switchToView",(function(){t.setState({showEdit:!1,activeDiv:""})})),t.state={contactPerson:"",contactEmail:"",contactCollectMandate:!1,contactCollectMandateFirstRun:"0000-00-00",showEdit:!1,activeDiv:""},t}return(0,n.Z)(d,[{key:"componentDidMount",value:function(){var e=this;this.props.orderDetails.contactId&&F.Z.fetchContactInfoForOrder(this.props.orderDetails.contactId).then((function(t){e.setState(B(B({},e.state),{},{contactPerson:t.data.contactPerson,contactEmail:t.data.email,contactCollectMandate:t.data.collectMandate,contactCollectMandateFirstRun:t.data.collectMandateFirstRun}))}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.orderDetails.id!==e.orderDetails.id&&this.props.orderDetails.contactId&&F.Z.fetchContactInfoForOrder(nextProps.orderDetails.contactId).then((function(e){t.setState(B(B({},t.state),{},{contactPerson:e.data.contactPerson,contactEmail:e.data.email,contactCollectMandate:e.data.collectMandate,contactCollectMandateFirstRun:e.data.collectMandateFirstRun}))}))}},{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.meDetails.permissions,r=void 0===t?{}:t;return s.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&this.props.orderDetails.canEdit&&r.manageFinancial?s.createElement(V,{switchToView:this.switchToView,contactPerson:this.state.contactPerson,contactEmail:this.state.contactEmail,contactCollectMandate:this.state.contactCollectMandate,contactCollectMandateFirstRun:this.state.contactCollectMandateFirstRun}):s.createElement(M,{switchToEdit:this.switchToEdit,contactPerson:this.state.contactPerson,contactEmail:this.state.contactEmail}))}}]),d}(s.Component);const W=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,meDetails:e.meDetails}}),(function(e){return{setError:function(t,r){e((0,q.s)(t,r))}}}))(z);T().locale("nl");const _=(0,l.$j)((function(e){return{orderDetails:e.orderDetails}}))((function(e){var t=e.orderDetails,r=t.createdAt,a=t.createdBy;return s.createElement("div",null,s.createElement("div",{className:"row"},s.createElement(L.Z,{label:"Gemaakt door",value:a?a.fullName:"Onbekend",link:a?"gebruiker/"+a.id:""}),s.createElement(L.Z,{label:"Gemaakt op",value:r?T()(r).format("L"):"Onbekend"})))}));var $=r(80720);const G=function(e){return s.createElement(C.Z,null,s.createElement($.Z,null,s.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),s.createElement(O.Z,null,s.createElement("div",{className:"col-md-12"},s.createElement(_,null))))};var K=r(97894),H=r(77320),U=r(75502);T().locale("nl");const Q=(0,l.$j)((function(e){return{permissions:e.meDetails.permissions,orderDetails:e.orderDetails}}))((function(e){var t=e.orderProduct,r=t.product,a=t.amount,n=t.amountInclReductionInclVat,o=t.dateStart,c=t.dateEnd,i=t.amountInclReductionInclVatPerYear,l=t.isOneTimeAndPaidProduct,d=t.period,u=T()(T()().format("YYYY-MM-DD")).isAfter(T()(c).format("YYYY-MM-DD")),m=l?"paid-order-product-row":"",p=u?"not-active-anymore-row":"",h=u?"not-active-anymore-text":"";return s.createElement("div",{className:"row border ".concat(e.highlightLine," ").concat(m," ").concat(p),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},s.createElement("div",{onClick:e.openEdit},s.createElement("div",{className:"col-sm-1"},r&&r.code),s.createElement("div",{className:"col-sm-2"},r?r.invoiceText:""),s.createElement("div",{className:"col-sm-1"},a||""),s.createElement("div",{className:"col-sm-2"},n?"€"+n.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"),s.createElement("div",{className:"col-sm-2"},r.invoiceFrequency?r.invoiceFrequency.name:""),s.createElement("div",{className:"col-sm-1"},i?"€"+i.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"),s.createElement("div",{className:"col-sm-1"},o?T()(o).format("L"):""),s.createElement("div",{className:"col-sm-1 ".concat(h)},c?T()(c).format("L"):"")),s.createElement("div",{className:"col-sm-1"},e.showActionButtons&&e.permissions.manageFinancial?s.createElement("a",{role:"button",onClick:e.openEdit},s.createElement(K.ZP,{className:"mybtn-success",size:14,icon:U.r})," "):"",e.showActionButtons&&e.permissions.manageFinancial?s.createElement("a",{role:"button",onClick:e.toggleDelete},s.createElement(K.ZP,{className:"mybtn-danger",size:14,icon:H._})," "):""),d&&s.createElement("div",{className:"col-sm-12"},"Periode ",d))}));T().locale("nl");const J=(0,l.$j)((function(e){return{costCenters:e.systemData.costCenters}}))((function(e){var t=e.orderProduct,r=t.product,a=t.costCenterId,n=t.amount,o=t.amountReduction,c=t.percentageReduction,i=t.dateStart,l=t.dateEnd,d=t.dateLastInvoice,u=t.datePeriodStartFirstInvoice,m=t.variablePrice;return s.createElement("div",null,s.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},s.createElement(C.Z,{className:"panel-grey"},s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Ordernummer",name:"order",value:e.orderDetails?e.orderDetails.number:"",readOnly:!0}),s.createElement(D.Z,{label:"Product",name:"product",value:r?r.name:"",readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(w.Z,{label:"Kostenplaats",id:"costCenterId",name:"costCenterId",options:e.costCenters,optionName:"description",value:a,onChangeAction:e.handleInputChange})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Omschrijving",id:"description",name:"description",value:r.invoiceText,readOnly:!0}),s.createElement(D.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:c,onChangeAction:e.handleInputChange}),null!==m?s.createElement(D.Z,{label:"Prijs excl. BTW",name:"variablePrice",type:"number",value:m,onChangeAction:e.handleInputChangeVariablePrice,error:e.errors.variablePrice,required:null!==m&&"required"}):s.createElement(D.Z,{label:e.orderProduct.product.currentPrice.inputInclVat?"Prijs incl. BTW":"Prijs excl. BTW",name:"price",value:e.orderProduct.product.currentPrice.inputInclVat?"€"+e.orderProduct.product.currentPrice.priceInclVat.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:e.orderProduct.product.currentPrice.priceNumberOfDecimals}):"€"+e.orderProduct.product.currentPrice.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:e.orderProduct.product.currentPrice.priceNumberOfDecimals}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:o,onChangeAction:e.handleInputChange}),s.createElement(D.Z,{label:"Totaalbedrag incl. BTW",name:"totalPrice",value:"€"+e.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"Begin datum",name:"dateStart",value:i,onChangeAction:e.handleInputChangeStartDate,required:"required",error:e.errors.dateStart}),s.createElement(S.Z,{label:"Eind datum",name:"dateEnd",readOnly:"none"===r.durationId,value:l,onChangeAction:e.handleInputChangeDate,error:e.errors.dateEnd})),!d&&"none"!==r.durationId&&s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"1ste notaperiode start op",name:"datePeriodStartFirstInvoice",value:u,onChangeAction:e.handleInputChangeDate})),s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(E.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),s.createElement(E.Z,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))})),X=(0,l.$j)(null,(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))}}}))((function(e){return s.createElement(f.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){F.Z.deleteOrderProduct(e.id).then((function(t){e.fetchOrderDetails(e.orderId),e.closeDeleteItemModal()}))},title:"Verwijderen"},s.createElement("p",null,"Verwijder orderregel?"))}));function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(te(te({},t.state),{},{orderProduct:te(te({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updateOrderPrice)})),(0,m.Z)((0,u.Z)(t),"handleLedgerChange",(function(e){t.setState(te(te({},t.state),{},{product:te(te({},t.state.product),{},{ledgerId:e})}),t.updateOrderPrice)})),(0,m.Z)((0,u.Z)(t),"handleCostCenterChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(te(te({},t.state),{},{product:te(te({},t.state.product),{},(0,m.Z)({},n,a))}))})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProduct",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(te(te({},t.state),{},{product:te(te({},t.state.product),{},(0,m.Z)({},n,a))}))})),(0,m.Z)((0,u.Z)(t),"updateOrderPrice",(function(){var e,r=!!t.state.product.currentPrice.inputInclVat&&t.state.product.currentPrice.inputInclVat;e=r?I().isFloat(t.state.product.currentPrice.priceInclVat+"")?t.state.product.currentPrice.priceInclVat:0:I().isFloat(t.state.product.currentPrice.price+"")?t.state.product.currentPrice.price:0;var a=I().isFloat(t.state.orderProduct.amount+"")?t.state.orderProduct.amount:0,n=I().isFloat(t.state.orderProduct.percentageReduction+"")?t.state.orderProduct.percentageReduction:0,o=I().isFloat(t.state.orderProduct.amountReduction+"")?t.state.orderProduct.amountReduction:0,c=0;if(c=e<0?e*a*((parseFloat(100)+parseFloat(n))/100)-o:e*a*((100-n)/100)-o,!r){var i=I().isFloat(t.state.product.currentPrice.vatPercentage+"")?t.state.product.currentPrice.vatPercentage:0;c*=(parseFloat(100)+parseFloat(i))/100}t.setState(te(te({},t.state),{},{totalPrice:parseFloat(c).toFixed(2)}))})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var r=t.state.orderProduct,a={},n=!1;I().isEmpty(r.amount+"")&&(a.amount=!0,n=!0);var o=t.state.product;I().isEmpty(o.description)&&(a.description=!0,n=!0),t.props.usesTwinfield&&I().isEmpty(String(o.ledgerId))&&(a.ledgerId=!0,n=!0),t.setState(te(te({},t.state),{},{errors:a,errorMessage:!1})),!n&&F.Z.updateOrderProductOneTime(r,o).then((function(e){t.props.fetchOrderDetails(t.props.orderProduct.orderId),t.props.cancelEdit()}))})),t.state={errorMessage:!1,orderPrice:e.product.currentPrice.inputInclVat?e.product.currentPrice.priceInclVat:e.product.currentPrice.price,totalPrice:"",orderProduct:{id:e.orderProduct.id,amount:e.orderProduct.amount,amountReduction:e.orderProduct.amountReduction,percentageReduction:e.orderProduct.percentageReduction,dateStart:e.orderProduct.dateStart,dateEnd:e.orderProduct.dateEnd,datePeriodStartFirstInvoice:e.orderProduct.datePeriodStartFirstInvoice},product:{id:e.product.id,description:e.product.invoiceText,ledgerId:e.product.ledgerId?e.product.ledgerId:"",costCenterId:e.product.costCenterId?e.product.costCenterId:"",currentPrice:e.product.currentPrice?e.product.currentPrice:""},errors:{amount:!1,ledgerId:!1,description:!1}},t}return(0,n.Z)(d,[{key:"componentDidMount",value:function(){this.updateOrderPrice()}},{key:"render",value:function(){var e=this,t=this.state.orderProduct,r=t.amount,a=t.amountReduction,n=t.percentageReduction,o=this.state.product,c=o.description,i=o.costCenterId,l=o.ledgerId,d=this.props.ledgers.filter((function(t){return t.vatCode?t.vatCode.percentage===e.state.product.currentPrice.vatPercentage:t.vatCode===e.state.product.currentPrice.vatPercentage}));return s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(C.Z,{className:"panel-grey"},s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement("div",{className:"panel-heading"},s.createElement("span",{className:"h5 text-bold"},"Product"))),this.props.usesTwinfield?s.createElement("div",{className:"row"},s.createElement(k.Z,{label:"Grootboek",name:"ledgerId",id:"ledgerId",options:d,optionName:"description",value:l,onChangeAction:this.handleLedgerChange,required:"required",error:this.state.errors.ledgerId}),s.createElement(w.Z,{label:"Kostenplaats",id:"costCenterId",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:i,onChangeAction:this.handleCostCenterChange})):null,s.createElement("div",{className:"row"},s.createElement("div",{className:"panel-part panel-heading"},s.createElement("span",{className:"h5 text-bold"},"Orderregel"))),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Omschrijving",id:"description",name:"description",value:c,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.description}),s.createElement(D.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:r,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:n,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:this.state.product.currentPrice.inputInclVat?"Prijs incl. BTW":"Prijs excl. BTW",name:"orderPrice",value:"€"+this.state.orderPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:this.state.product.currentPrice.priceNumberOfDecimals}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:"Totaalbedrag incl. BTW",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),this.state.errorMessage&&s.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(E.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.cancelEdit}),s.createElement(E.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),d}(s.Component);const ae=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,costCenters:e.systemData.costCenters,ledgers:e.systemData.ledgers,usesTwinfield:e.systemData.usesTwinfield}}),(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))}}}))(re);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"toggleDelete",(function(){t.props.orderDetails.canEdit?t.setState({showDelete:!t.state.showDelete}):t.props.setError(405,"Een order met daar aan gekoppeld een nota met de status “Te verzenden” kan niet worden aangepast(de order zit in de map “Order – Te verzenden”). Wil je deze order toch aanpassen? Verwijder dan eerst de “Te verzenden” nota. Dan kom deze order weer in de “Order – te factureren”.  Pas de order aan en maak vervolgens opnieuw de nota.")})),(0,m.Z)((0,u.Z)(t),"onLineEnter",(function(){t.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,m.Z)((0,u.Z)(t),"onLineLeave",(function(){t.setState({showActionButtons:!1,highlightLine:""})})),(0,m.Z)((0,u.Z)(t),"openEdit",(function(){t.props.orderDetails.canEdit?t.setState({showEdit:!0}):t.props.setError(405,"Een order met daar aan gekoppeld een nota met de status “Te verzenden” kan niet worden aangepast(de order zit in de map “Order – Te verzenden”). Wil je deze order toch aanpassen? Verwijder dan eerst de “Te verzenden” nota. Dan kom deze order weer in de “Order – te factureren”.  Pas de order aan en maak vervolgens opnieuw de nota.")})),(0,m.Z)((0,u.Z)(t),"closeEdit",(function(){t.setState({showEdit:!1})})),(0,m.Z)((0,u.Z)(t),"cancelEdit",(function(){t.setState(oe(oe({},t.state),{},{orderProduct:oe({},t.props.orderProduct)})),t.closeEdit()})),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(oe(oe({},t.state),{},{orderProduct:oe(oe({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"updatePrice",(function(){var e=!1,r=0;t.state.orderProduct.product.currentPrice&&(e=t.state.orderProduct.product.currentPrice.inputInclVat,r=I().isFloat(t.state.orderProduct.product.currentPrice.vatPercentage+"")?t.state.orderProduct.product.currentPrice.vatPercentage:0);var a=(parseFloat(100)+parseFloat(r))/100,n=0,o=0,c=I().isFloat(t.state.orderProduct.variablePrice+"")?t.state.orderProduct.variablePrice:0;c?e?(n=c,o=c/a):(n=c*a,o=c):t.state.orderProduct.product.currentPrice&&(n=I().isFloat(t.state.orderProduct.product.currentPrice.priceInclVat+"")?t.state.orderProduct.product.currentPrice.priceInclVat:0,o=I().isFloat(t.state.orderProduct.product.currentPrice.price+"")?t.state.orderProduct.product.currentPrice.price:0);var i=I().isFloat(t.state.orderProduct.amount+"")?t.state.orderProduct.amount:0,s=parseFloat(n*i).toFixed(2),l=parseFloat(o*i).toFixed(2),d=I().isFloat(t.state.orderProduct.amountReduction+"")?t.state.orderProduct.amountReduction:0;e||(d*=a),d=parseFloat(d).toFixed(2);var u=(I().isFloat(t.state.orderProduct.percentageReduction+"")?t.state.orderProduct.percentageReduction:0)/100,m=0;e?m=s*u:(m=l*u,m*=a);var p=s-d-(m=parseFloat(m).toFixed(2));t.setState(oe(oe({},t.state),{},{totalPrice:p}))})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var r={},a=!1,n=t.state.orderProduct;I().isEmpty(n.amount+"")&&(r.amount=!0,a=!0),I().isEmpty(n.dateStart+"")&&(r.dateStart=!0,a=!0),!I().isEmpty(n.dateStart+"")&&T()(n.dateEnd).isSameOrBefore(T()(n.dateStart))&&(r.dateEnd=!0,a=!0),!I().isEmpty(n.dateEnd+"")&&T()(n.dateStart).isSameOrAfter(T()(n.dateEnd))&&(r.dateStart=!0,a=!0),null!==t.props.orderProduct.variablePrice&&(I().isEmpty(n.variablePrice+"")||null===n.variablePrice)&&(r.variablePrice=!0,a=!0),t.setState(oe(oe({},t.state),{},{errors:r})),!a&&F.Z.updateOrderProduct(n).then((function(e){t.props.fetchOrderDetails(t.state.orderProduct.orderId),t.closeEdit()}))})),(0,m.Z)((0,u.Z)(t),"handleInputChangeVariablePrice",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(oe(oe({},t.state),{},{price:a,orderProduct:oe(oe({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updatePrice)})),t.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,totalPrice:e.orderProduct.amountInclReductionInclVat,orderProduct:oe({},e.orderProduct),errors:{amount:!1,dateStart:!1,dateEnd:!1,variablePrice:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,u.Z)(t)),t.handleInputChangeStartDate=t.handleInputChangeStartDate.bind((0,u.Z)(t)),t}return(0,n.Z)(d,[{key:"componentWillReceiveProps",value:function(e){(0,y.isEqual)(this.state.orderProduct,e.orderProduct)||this.setState(oe(oe({},this.state),{},{orderProduct:oe({},e.orderProduct)}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(oe(oe({},this.state),{},{orderProduct:oe(oe({},this.state.orderProduct),{},(0,m.Z)({},t,e))}))}},{key:"handleInputChangeStartDate",value:function(e,t){var r,a="";if(e)switch(this.state.orderProduct.product.durationId){case"none":case"until_cancellation":default:a="";break;case"month":a=T()(e).add(1,"M").format("YYYY-MM-DD");break;case"quarter":a=T()(e).add(1,"Q").format("YYYY-MM-DD");break;case"half_year":a=T()(e).add(6,"M").format("YYYY-MM-DD");break;case"year":a=T()(e).add(1,"y").format("YYYY-MM-DD")}this.setState(oe(oe({},this.state),{},{orderProduct:oe(oe({},this.state.orderProduct),{},(r={},(0,m.Z)(r,t,e),(0,m.Z)(r,"dateEnd",a),r))}))}},{key:"render",value:function(){return s.createElement("div",null,s.createElement(Q,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,openEdit:this.openEdit,toggleDelete:this.toggleDelete,orderProduct:this.state.orderProduct}),this.state.showEdit&&this.props.orderDetails.canEdit&&this.props.permissions.manageFinancial&&!this.state.orderProduct.product.isOneTime&&s.createElement(J,{orderDetails:this.props.orderDetails,errors:this.state.errors,totalPrice:this.state.totalPrice,orderProduct:this.state.orderProduct,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleInputChangeStartDate:this.handleInputChangeStartDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit,handleInputChangeVariablePrice:this.handleInputChangeVariablePrice}),this.state.showEdit&&this.props.orderDetails.canEdit&&this.props.permissions.manageFinancial&&1==this.state.orderProduct.product.isOneTime&&s.createElement(ae,{orderProduct:this.state.orderProduct,product:this.state.orderProduct.product,cancelEdit:this.cancelEdit}),this.state.showDelete&&this.props.orderDetails.canEdit&&this.props.permissions.manageFinancial&&s.createElement(X,{closeDeleteItemModal:this.toggleDelete,id:this.state.orderProduct.id,orderId:this.state.orderProduct.orderId}))}}]),d}(s.Component);const ie=(0,l.$j)((function(e){return{permissions:e.meDetails.permissions,orderDetails:e.orderDetails}}),(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))},setError:function(t,r){e((0,q.s)(t,r))}}}))(ce),se=(0,l.$j)((function(e){return{orderProducts:e.orderDetails.orderProducts}}))((function(e){return s.createElement("div",null,s.createElement("div",{className:"row border header"},s.createElement("div",{className:"col-sm-1"},"Productcode"),s.createElement("div",{className:"col-sm-2"},"Omschrijving"),s.createElement("div",{className:"col-sm-1"},"Aantal"),s.createElement("div",{className:"col-sm-2"},"Prijs incl. BTW"),s.createElement("div",{className:"col-sm-2"},"Prijs per"),s.createElement("div",{className:"col-sm-1"},"Prijs incl. BTW/jaar"),s.createElement("div",{className:"col-sm-1"},"Begin datum"),s.createElement("div",{className:"col-sm-1"},"Eind datum"),s.createElement("div",{className:"col-sm-1"})),e.orderProducts.length>0?e.orderProducts.map((function(e){return s.createElement(ie,{key:e.id,orderProduct:e})})):s.createElement("div",null,"Geen orderregels bekend."))}));function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(de(de({},t.state),{},{orderProduct:de(de({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleInputChangeVariablePrice",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(de(de({},t.state),{},{price:a,orderProduct:de(de({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleBlurVariablePrice",(function(e){var r=e.target,a=r.value;r.name,t.setState(de(de({},t.state),{},{orderProduct:de(de({},t.state.orderProduct),{},{variablePrice:parseFloat(a).toFixed(t.state.priceNumberOfDecimals)})}))})),(0,m.Z)((0,u.Z)(t),"updatePrice",(function(){var e,r;e=t.state.productInputInclVat,r=I().isFloat(t.state.vatPercentage+"")?t.state.vatPercentage:0;var a=(parseFloat(100)+parseFloat(r))/100,n=0,o=0,c=I().isFloat(t.state.orderProduct.variablePrice+"")?t.state.orderProduct.variablePrice:0;c?e?(n=c,o=c/a):(n=c*a,o=c):(n=I().isFloat(t.state.priceInclVat+"")?t.state.priceInclVat:0,o=I().isFloat(t.state.price+"")?t.state.price:0);var i=I().isFloat(t.state.orderProduct.amount+"")?t.state.orderProduct.amount:0,s=parseFloat(n*i).toFixed(2),l=parseFloat(o*i).toFixed(2),d=I().isFloat(t.state.orderProduct.amountReduction+"")?t.state.orderProduct.amountReduction:0;e||(d*=a),d=parseFloat(d).toFixed(2);var u=(I().isFloat(t.state.orderProduct.percentageReduction+"")?t.state.orderProduct.percentageReduction:0)/100,m=0;e?m=s*u:(m=l*u,m*=a);var p=s-d-(m=parseFloat(m).toFixed(2));t.setState(de(de({},t.state),{},{totalPrice:p}))})),(0,m.Z)((0,u.Z)(t),"handleChangeProduct",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name,o=2,c=0,i=0,s=0,l="",d="",u=!1,p="",h="",f=!1;if(a){var v=t.props.products.find((function(e){return e.id==a}));o=v.currentPrice.priceNumberOfDecimals,c=v.currentPrice.price,i=v.currentPrice.priceInclVat,s=v.currentPrice.vatPercentage,f=v.currentPrice.inputInclVat,(l=v.costCenterId)||(l=""),d=v.invoiceText,u=v.durationId,h=v.hasVariablePrice}if(u&&t.state.orderProduct.dateStart)switch(u){case"none":case"until_cancellation":default:p="";break;case"month":p=T()(t.state.orderProduct.dateStart).add(1,"M").format("YYYY-MM-DD");break;case"quarter":p=T()(t.state.orderProduct.dateStart).add(1,"Q").format("YYYY-MM-DD");break;case"half_year":p=T()(t.state.orderProduct.dateStart).add(6,"M").format("YYYY-MM-DD");break;case"year":p=T()(t.state.orderProduct.dateStart).add(1,"y").format("YYYY-MM-DD")}t.setState(de(de({},t.state),{},{priceNumberOfDecimals:o,price:c,priceInclVat:i,vatPercentage:s,durationId:u,productHasVariablePrice:"variable"===h,productInputInclVat:f,orderProduct:de(de({},t.state.orderProduct),{},(0,m.Z)({costCenterId:l,description:d,dateEnd:p},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var r=t.state.orderProduct,a={},n=!1;I().isEmpty(r.productId+"")&&(a.productId=!0,n=!0),I().isEmpty(r.amount+"")&&(a.amount=!0,n=!0),I().isEmpty(r.dateStart+"")&&(a.dateStart=!0,n=!0),I().isEmpty(r.datePeriodStartFirstInvoice+"")&&(a.datePeriodStartFirstInvoice=!0,n=!0),!I().isEmpty(r.dateStart+"")&&T()(r.dateEnd).isSameOrBefore(T()(r.dateStart))&&(a.dateEnd=!0,n=!0),!I().isEmpty(r.dateEnd+"")&&T()(r.dateStart).isSameOrAfter(T()(r.dateEnd))&&(a.dateStart=!0,n=!0),t.state.productHasVariablePrice&&(I().isEmpty(r.variablePrice+"")||null===r.variablePrice)&&(a.variablePrice=!0,n=!0),t.setState(de(de({},t.state),{},{errors:a})),!n&&F.Z.newOrderProduct(r).then((function(e){t.props.fetchOrderDetails(r.orderId),t.props.toggleShowNew()}))})),t.state={priceNumberOfDecimals:"2",price:"0",priceInclVat:"0",vatPercentage:"0",totalPrice:"0",durationId:"none",productHasVariablePrice:!1,productInputInclVat:!1,orderProduct:{orderId:t.props.orderDetails.id,productId:"",description:"",costCenterId:"",amount:1,amountReduction:0,percentageReduction:0,dateStart:T()().format("YYYY-MM-DD"),dateEnd:"",datePeriodStartFirstInvoice:T()().format("YYYY-MM-DD"),variablePrice:null},errors:{productId:!1,amount:!1,dateStart:!1,dateEnd:!1,datePeriodStartFirstInvoice:!1,variablePrice:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,u.Z)(t)),t.handleInputChangeStartDate=t.handleInputChangeStartDate.bind((0,u.Z)(t)),t}return(0,n.Z)(d,[{key:"handleInputChangeDate",value:function(e,t){this.setState(de(de({},this.state),{},{orderProduct:de(de({},this.state.orderProduct),{},(0,m.Z)({},t,e))}))}},{key:"handleInputChangeStartDate",value:function(e,t){var r,a,n=this,o="";if(this.state.orderProduct.dateStart&&this.state.orderProduct.productId)switch(e&&(a=this.props.products.filter((function(e){return e.id==n.state.orderProduct.productId}))[0].durationId),a){case"none":case"until_cancellation":default:o="";break;case"month":o=T()(e).add(1,"M").format("YYYY-MM-DD");break;case"quarter":o=T()(e).add(1,"Q").format("YYYY-MM-DD");break;case"half_year":o=T()(e).add(6,"M").format("YYYY-MM-DD");break;case"year":o=T()(e).add(1,"y").format("YYYY-MM-DD")}this.setState(de(de({},this.state),{},{orderProduct:de(de({},this.state.orderProduct),{},(r={},(0,m.Z)(r,t,e),(0,m.Z)(r,"dateEnd",o),r))}))}},{key:"render",value:function(){var e=this.state.orderProduct,t=e.productId,r=e.description,a=e.costCenterId,n=e.amount,o=e.amountReduction,c=e.percentageReduction,i=e.dateStart,l=e.dateEnd,d=e.datePeriodStartFirstInvoice;return s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(C.Z,{className:"panel-grey"},s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Order nummer",name:"orderId",value:this.props.orderDetails.number,readOnly:!0}),s.createElement(w.Z,{label:"Product",id:"productId",name:"productId",options:this.props.products.filter((function(e){return e.active})).sort((function(e,t){return e.name.localeCompare(t.name)})),value:t,onChangeAction:this.handleChangeProduct,required:"required",error:this.state.errors.productId})),s.createElement("div",{className:"row"},s.createElement(w.Z,{label:"Kostenplaats",id:"costCenterId",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:a,onChangeAction:this.handleInputChange})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Omschrijving",id:"description",name:"description",value:r,readOnly:!0}),s.createElement(D.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:c,onChangeAction:this.handleInputChange}),this.state.productHasVariablePrice?s.createElement(D.Z,{label:"Prijs excl. BTW",name:"variablePrice",type:"number",value:this.state.price,onChangeAction:this.handleInputChangeVariablePrice,onBlurAction:this.handleBlurVariablePrice,error:this.state.errors.variablePrice,required:this.state.productHasVariablePrice&&"required"}):s.createElement(D.Z,{label:this.state.productInputInclVat?"Prijs incl. BTW":"Prijs excl. BTW",name:"price",value:this.state.productInputInclVat?"€"+this.state.priceInclVat.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:this.state.priceNumberOfDecimals}):"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:this.state.priceNumberOfDecimals}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:o,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:"Totaalbedrag incl. BTW",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"Begin datum",name:"dateStart",value:i,onChangeAction:this.handleInputChangeStartDate,required:"required",error:this.state.errors.dateStart}),s.createElement(S.Z,{label:"Eind datum",name:"dateEnd",value:l,onChangeAction:this.handleInputChangeDate,error:this.state.errors.dateEnd,readOnly:"none"===this.state.durationId})),"none"!==this.state.durationId&&s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"1ste notaperiode start op",name:"datePeriodStartFirstInvoice",value:d,onChangeAction:this.handleInputChangeDate,error:this.state.errors.datePeriodStartFirstInvoice,required:"required"})),s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(E.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),s.createElement(E.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),d}(s.Component);const me=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,products:e.systemData.products,costCenters:e.systemData.costCenters}}),(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))}}}))(ue);var pe=r(21606);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(fe(fe({},t.state),{},{orderProduct:fe(fe({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updateOrderPrice)})),(0,m.Z)((0,u.Z)(t),"handleLedgerChange",(function(e){var r=t.props.ledgers.find((function(t){return t.id===e})),a=r.vatCode&&r.vatCode.percentage;t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},{ledgerId:e,vatPercentage:a})}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleCostCenterChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},(0,m.Z)({},n,a))}))})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProduct",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProductDuration",(function(e){var r,a=e.target,n="checkbox"===a.type?a.checked:a.value,o=a.name;if(t.state.orderProduct.dateStart)switch(n){case"none":case"until_cancellation":default:r="";break;case"month":r=T()(t.state.orderProduct.dateStart).add(1,"M").format("YYYY-MM-DD");break;case"quarter":r=T()(t.state.orderProduct.dateStart).add(1,"Q").format("YYYY-MM-DD");break;case"half_year":r=T()(t.state.orderProduct.dateStart).add(6,"M").format("YYYY-MM-DD");break;case"year":r=T()(t.state.orderProduct.dateStart).add(1,"y").format("YYYY-MM-DD")}t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},(0,m.Z)({},o,n)),orderProduct:fe(fe({},t.state.orderProduct),{},{dateEnd:r})}))})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProductVat",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProductPrice",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleBlurProductPrice",(function(e){var r=e.target,a=r.value,n=r.name;t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},(0,m.Z)({},n,parseFloat(a).toFixed(t.state.product.priceNumberOfDecimals)))}))})),(0,m.Z)((0,u.Z)(t),"handleBlurDecimals",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=(r.name,a);n<2&&(n=2),n>6&&(n=6),t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},{priceNumberOfDecimals:n,price:parseFloat(t.state.product.price).toFixed(n),priceInclVat:parseFloat(t.state.product.priceInclVat).toFixed(n)})}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"updatePrice",(function(){var e=!!t.state.product.inputInclVat&&t.state.product.inputInclVat,r=I().isFloat(t.state.product.price+"")?t.state.product.price:0,a=I().isFloat(t.state.product.priceInclVat+"")?t.state.product.priceInclVat:0,n=I().isFloat(t.state.product.vatPercentage+"")?t.state.product.vatPercentage:0,o=(parseFloat(100)+parseFloat(n))/100;e?(r=a/o,t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},{price:parseFloat(r).toFixed(t.state.product.priceNumberOfDecimals)})}),t.updateOrderPrice)):(a=r*o,t.setState(fe(fe({},t.state),{},{product:fe(fe({},t.state.product),{},{priceInclVat:parseFloat(a).toFixed(t.state.product.priceNumberOfDecimals)})}),t.updateOrderPrice))})),(0,m.Z)((0,u.Z)(t),"updateOrderPrice",(function(){var e,r;e=t.state.product.inputInclVat,r=I().isFloat(t.state.product.vatPercentage+"")?t.state.product.vatPercentage:0;var a,n=(parseFloat(100)+parseFloat(r))/100,o=I().isFloat(t.state.product.priceInclVat+"")?t.state.product.priceInclVat:0,c=I().isFloat(t.state.product.price+"")?t.state.product.price:0,i=I().isFloat(t.state.orderProduct.amount+"")?t.state.orderProduct.amount:0,s=parseFloat(o*i).toFixed(2),l=parseFloat(c*i).toFixed(2);a=e?o:c;var d=I().isFloat(t.state.orderProduct.amountReduction+"")?t.state.orderProduct.amountReduction:0;e||(d*=n),d=parseFloat(d).toFixed(2);var u=(I().isFloat(t.state.orderProduct.percentageReduction+"")?t.state.orderProduct.percentageReduction:0)/100,m=0;e?m=s*u:(m=l*u,m*=n);var p=s-d-(m=parseFloat(m).toFixed(2));t.setState(fe(fe({},t.state),{},{orderPrice:parseFloat(a).toFixed(t.state.product.priceNumberOfDecimals),totalPrice:parseFloat(p).toFixed(2)}))})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var r=t.state.orderProduct,a={},n=!1,o=!1;I().isEmpty(r.amount+"")&&(a.amount=!0,n=!0),I().isEmpty(r.dateStart+"")&&(a.dateStart=!0,n=!0),!I().isEmpty(r.dateStart+"")&&T()(r.dateEnd).isSameOrBefore(T()(r.dateStart))&&(a.dateEnd=!0,n=!0),!I().isEmpty(r.dateEnd+"")&&T()(r.dateStart).isSameOrAfter(T()(r.dateEnd))&&(a.dateStart=!0,n=!0),I().isEmpty(r.datePeriodStartFirstInvoice+"")&&(a.datePeriodStartFirstInvoice=!0,n=!0);var c=t.state.product,i=!1;t.props.products.map((function(e){return e.code==c.code&&(i=!0)})),i&&(o="Productcode moet uniek zijn.",a.code=!0,n=!0),I().isEmpty(c.code+"")&&(a.code=!0,n=!0);var s=!1;t.props.products.map((function(e){return e.name==c.name&&(s=!0)})),s&&(o="Productnaam moet uniek zijn.",a.name=!0,n=!0),i&&s&&(o="Productcode en productnaam moeten uniek zijn."),I().isEmpty(c.name+"")&&(a.name=!0,n=!0),I().isEmpty(c.administrationId+"")&&(a.administrationId=!0,n=!0),c.inputInclVat?I().isEmpty(c.priceInclVat+"")&&(a.priceInclVat=!0,n=!0):I().isEmpty(c.price+"")&&(a.price=!0,n=!0),t.props.usesTwinfield&&I().isEmpty(String(c.ledgerId))&&(a.ledgerId=!0,n=!0),I().isEmpty(c.description)&&(a.description=!0,n=!0),t.setState(fe(fe({},t.state),{},{errors:a,errorMessage:o})),!n&&F.Z.newProductAndOrderProduct(r,c).then((function(e){t.props.fetchOrderDetails(r.orderId),t.props.toggleShowNewProduct()}))})),t.state={errorMessage:!1,orderPrice:"",totalPrice:"",orderProduct:{orderId:t.props.orderDetails.id,amount:1,amountReduction:0,percentageReduction:0,dateStart:T()().format("YYYY-MM-DD"),dateEnd:"",datePeriodStartFirstInvoice:T()().format("YYYY-MM-DD")},product:{code:"",name:"",durationId:"none",description:"",administrationId:t.props.orderDetails.administrationId,invoiceFrequencyId:t.props.orderDetails.collectionFrequencyId?t.props.orderDetails.collectionFrequencyId:"once",vatPercentage:"",inputInclVat:!1,priceNumberOfDecimals:2,price:"",priceInclVat:"",ledgerId:"",costCenterId:"",isOneTime:!1},errors:{amount:!1,dateStart:!1,dateEnd:!1,code:!1,name:!1,priceNumberOfDecimals:!1,price:!1,priceInclVat:!1,datePeriodStartFirstInvoice:!1,ledgerId:!1,description:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,u.Z)(t)),t.handleInputChangeStartDate=t.handleInputChangeStartDate.bind((0,u.Z)(t)),t}return(0,n.Z)(d,[{key:"handleInputChangeDate",value:function(e,t){this.setState(fe(fe({},this.state),{},{orderProduct:fe(fe({},this.state.orderProduct),{},(0,m.Z)({},t,e))}))}},{key:"handleInputChangeStartDate",value:function(e,t){var r,a="";if(this.state.orderProduct.dateStart)switch(this.state.product.durationId){case"none":case"until_cancellation":default:a="";break;case"month":a=T()(e).add(1,"M").format("YYYY-MM-DD");break;case"quarter":a=T()(e).add(1,"Q").format("YYYY-MM-DD");break;case"half_year":a=T()(e).add(6,"M").format("YYYY-MM-DD");break;case"year":a=T()(e).add(1,"y").format("YYYY-MM-DD")}this.setState(fe(fe({},this.state),{},{orderProduct:fe(fe({},this.state.orderProduct),{},(r={},(0,m.Z)(r,t,e),(0,m.Z)(r,"dateEnd",a),r))}))}},{key:"render",value:function(){var e=this.state.orderProduct,t=e.amount,r=e.amountReduction,a=e.percentageReduction,n=e.dateStart,o=e.dateEnd,c=e.datePeriodStartFirstInvoice,i=this.state.product,l=i.description,d=i.code,u=i.name,m=i.durationId,p=i.vatPercentage,h=i.inputInclVat,f=i.priceNumberOfDecimals,v=i.price,g=i.priceInclVat,P=i.ledgerId,b=i.costCenterId;return s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(C.Z,{className:"panel-grey"},s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement("div",{className:"panel-heading"},s.createElement("span",{className:"h5 text-bold"},"Product"))),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Productcode",name:"code",value:d,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.code}),s.createElement(D.Z,{label:"Naam",name:"name",value:u,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.name})),s.createElement("div",{className:"row"},this.props.usesTwinfield?s.createElement(s.Fragment,null,s.createElement(k.Z,{label:"Grootboek",name:"ledgerId",id:"ledgerId",options:this.props.ledgers,optionName:"description",value:P,onChangeAction:this.handleLedgerChange,required:"required",error:this.state.errors.ledgerId}),s.createElement(w.Z,{label:"Kostenplaats",id:"costCenterId",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:b,onChangeAction:this.handleCostCenterChange})):null),s.createElement("div",{className:"row"},s.createElement(w.Z,{label:"Looptijd",id:"durationId",name:"durationId",options:this.props.productDurations,value:m,onChangeAction:this.handleInputChangeProductDuration,emptyOption:!1}),s.createElement(w.Z,{label:"BTW percentage",name:"vatPercentage",options:this.props.vatCodes,optionValue:"percentage",optionName:"description",value:p,onChangeAction:this.props.usesTwinfield?null:this.handleInputChangeProductVat,placeholder:"Geen",readOnly:this.props.usesTwinfield})),s.createElement("div",{className:"row"},s.createElement(pe.Z,{label:"Invoer inclusief BTW",name:"inputInclVat",value:h,onChangeAction:this.handleInputChangeProduct}),s.createElement(D.Z,{label:"Aantal decimalen",type:"number",min:"2",max:"6",name:"priceNumberOfDecimals",value:f,onChangeAction:this.handleInputChangeProduct,onBlurAction:this.handleBlurDecimals,required:"required",error:this.state.errors.priceNumberOfDecimals})),s.createElement("div",{className:"row"},h?s.createElement(s.Fragment,null,s.createElement(D.Z,{label:"Prijs excl. BTW",id:"price",name:"price",value:v,readOnly:!0,required:"required"}),s.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",type:"number",min:"0",max:"1000000",value:g,onChangeAction:this.handleInputChangeProductPrice,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.priceInclVat})):s.createElement(s.Fragment,null,s.createElement(D.Z,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:v,onChangeAction:this.handleInputChangeProductPrice,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.price}),s.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:g,readOnly:!0,required:"required"}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"panel-part panel-heading"},s.createElement("span",{className:"h5 text-bold"},"Orderregel"))),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Omschrijving",id:"description",name:"description",value:l,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.description}),s.createElement(D.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:a,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:this.state.product.inputInclVat?"Prijs incl. BTW":"Prijs excl. BTW",name:"orderPrice",value:"€"+this.state.orderPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:this.state.product.priceNumberOfDecimals}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:r,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:"Totaalbedrag incl. BTW",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"Begin datum",name:"dateStart",value:n,onChangeAction:this.handleInputChangeStartDate,required:"required",error:this.state.errors.dateStart}),s.createElement(S.Z,{label:"Eind datum",name:"dateEnd",value:o,onChangeAction:this.handleInputChangeDate,error:this.state.errors.dateEnd,readOnly:"none"===m})),"none"!==m&&s.createElement("div",{className:"row"},s.createElement(S.Z,{label:"1ste notaperiode start op",name:"datePeriodStartFirstInvoice",value:c,onChangeAction:this.handleInputChangeDate,error:this.state.errors.datePeriodStartFirstInvoice,required:"required"})),this.state.errorMessage&&s.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(E.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProduct}),s.createElement(E.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),d}(s.Component);const ge=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,costCenters:e.systemData.costCenters,ledgers:e.systemData.ledgers,vatCodes:e.systemData.vatCodes,usesTwinfield:e.systemData.usesTwinfield}}),(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))}}}))(ve);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"handleInputChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(Pe(Pe({},t.state),{},{orderProduct:Pe(Pe({},t.state.orderProduct),{},(0,m.Z)({},n,a))}),t.updateOrderPrice)})),(0,m.Z)((0,u.Z)(t),"handleLedgerChange",(function(e){var r=t.props.ledgers.find((function(t){return t.id===e})),a=r.vatCode&&r.vatCode.percentage;t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},{ledgerId:e,vatPercentage:a})}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleCostCenterChange",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},(0,m.Z)({},n,a))}))})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProduct",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProductVat",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleInputChangeProductPrice",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=r.name;t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},(0,m.Z)({},n,a))}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"handleBlurProductPrice",(function(e){var r=e.target,a=r.value,n=r.name;t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},(0,m.Z)({},n,parseFloat(a).toFixed(t.state.product.priceNumberOfDecimals)))}))})),(0,m.Z)((0,u.Z)(t),"handleBlurDecimals",(function(e){var r=e.target,a="checkbox"===r.type?r.checked:r.value,n=(r.name,a);n<2&&(n=2),n>6&&(n=6),t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},{priceNumberOfDecimals:n,price:parseFloat(t.state.product.price).toFixed(n),priceInclVat:parseFloat(t.state.product.priceInclVat).toFixed(n)})}),t.updatePrice)})),(0,m.Z)((0,u.Z)(t),"updatePrice",(function(){var e=!!t.state.product.inputInclVat&&t.state.product.inputInclVat,r=I().isFloat(t.state.product.price+"")?t.state.product.price:0,a=I().isFloat(t.state.product.priceInclVat+"")?t.state.product.priceInclVat:0,n=I().isFloat(t.state.product.vatPercentage+"")?t.state.product.vatPercentage:0,o=(parseFloat(100)+parseFloat(n))/100;e?(r=a/o,t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},{price:parseFloat(r).toFixed(t.state.product.priceNumberOfDecimals)})}),t.updateOrderPrice)):(a=r*o,t.setState(Pe(Pe({},t.state),{},{product:Pe(Pe({},t.state.product),{},{priceInclVat:parseFloat(a).toFixed(t.state.product.priceNumberOfDecimals)})}),t.updateOrderPrice))})),(0,m.Z)((0,u.Z)(t),"updateOrderPrice",(function(){var e,r;e=t.state.product.inputInclVat,r=I().isFloat(t.state.product.vatPercentage+"")?t.state.product.vatPercentage:0;var a,n=(parseFloat(100)+parseFloat(r))/100,o=I().isFloat(t.state.product.priceInclVat+"")?t.state.product.priceInclVat:0,c=I().isFloat(t.state.product.price+"")?t.state.product.price:0,i=I().isFloat(t.state.orderProduct.amount+"")?t.state.orderProduct.amount:0,s=parseFloat(o*i).toFixed(2),l=parseFloat(c*i).toFixed(2);a=e?o:c;var d=I().isFloat(t.state.orderProduct.amountReduction+"")?t.state.orderProduct.amountReduction:0;e||(d*=n),d=parseFloat(d).toFixed(2);var u=(I().isFloat(t.state.orderProduct.percentageReduction+"")?t.state.orderProduct.percentageReduction:0)/100,m=0;e?m=s*u:(m=l*u,m*=n);var p=s-d-(m=parseFloat(m).toFixed(2));t.setState(Pe(Pe({},t.state),{},{orderPrice:parseFloat(a).toFixed(t.state.product.priceNumberOfDecimals),totalPrice:parseFloat(p).toFixed(2)}))})),(0,m.Z)((0,u.Z)(t),"handleSubmit",(function(e){e.preventDefault();var r=t.state.orderProduct,a={},n=!1;I().isEmpty(r.amount+"")&&(a.amount=!0,n=!0);var o=t.state.product;o.inputInclVat?I().isEmpty(o.priceInclVat+"")&&(a.priceInclVat=!0,n=!0):I().isEmpty(o.price+"")&&(a.price=!0,n=!0),t.props.usesTwinfield&&I().isEmpty(String(o.ledgerId))&&(a.ledgerId=!0,n=!0),I().isEmpty(o.description)&&(a.description=!0,n=!0),t.setState(Pe(Pe({},t.state),{},{errors:a,errorMessage:!1})),!n&&F.Z.newProductAndOrderProduct(r,o).then((function(e){t.props.fetchOrderDetails(r.orderId),t.props.toggleShowNewProductOneTime()}))})),t.state={errorMessage:!1,orderPrice:"",totalPrice:"",orderProduct:{orderId:t.props.orderDetails.id,amount:1,amountReduction:0,percentageReduction:0,dateStart:T()().format("YYYY-MM-DD"),dateEnd:"",datePeriodStartFirstInvoice:T()().format("YYYY-MM-DD")},product:{code:"EMP",name:"Eenmalig product",durationId:"none",description:"",administrationId:t.props.orderDetails.administrationId,invoiceFrequencyId:t.props.orderDetails.collectionFrequencyId?t.props.orderDetails.collectionFrequencyId:"once",vatPercentage:"",inputInclVat:!1,priceNumberOfDecimals:2,price:"",priceInclVat:"",ledgerId:"",costCenterId:"",isOneTime:!0},errors:{amount:!1,priceNumberOfDecimals:!1,price:!1,priceInclVat:!1,ledgerId:!1,description:!1}},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this.state.orderProduct,t=e.amount,r=e.amountReduction,a=e.percentageReduction,n=this.state.product,o=n.description,c=n.vatPercentage,i=n.inputInclVat,l=n.priceNumberOfDecimals,d=n.price,u=n.priceInclVat,m=n.ledgerId,p=n.costCenterId;return s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(C.Z,{className:"panel-grey"},s.createElement(O.Z,null,s.createElement("div",{className:"row"},s.createElement("div",{className:"panel-heading"},s.createElement("span",{className:"h5 text-bold"},"Product"))),this.props.usesTwinfield?s.createElement("div",{className:"row"},s.createElement(k.Z,{label:"Grootboek",name:"ledgerId",id:"ledgerId",options:this.props.ledgers,optionName:"description",value:m,onChangeAction:this.handleLedgerChange,required:"required",error:this.state.errors.ledgerId}),s.createElement(w.Z,{label:"Kostenplaats",id:"costCenterId",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:p,onChangeAction:this.handleCostCenterChange})):null,s.createElement("div",{className:"row"},s.createElement("div",{className:"form-group col-sm-6"}," "),s.createElement(w.Z,{label:"BTW percentage",name:"vatPercentage",options:this.props.vatCodes,optionValue:"percentage",optionName:"description",value:c,onChangeAction:this.props.usesTwinfield?null:this.handleInputChangeProductVat,placeholder:"Geen",readOnly:this.props.usesTwinfield})),s.createElement("div",{className:"row"},s.createElement(pe.Z,{label:"Invoer inclusief BTW",name:"inputInclVat",value:i,onChangeAction:this.handleInputChangeProduct}),s.createElement(D.Z,{label:"Aantal decimalen",type:"number",min:"2",max:"6",name:"priceNumberOfDecimals",value:l,onChangeAction:this.handleInputChangeProduct,onBlurAction:this.handleBlurDecimals,required:"required",error:this.state.errors.priceNumberOfDecimals})),s.createElement("div",{className:"row"},i?s.createElement(s.Fragment,null,s.createElement(D.Z,{label:"Prijs excl. BTW",id:"price",name:"price",value:d,readOnly:!0,required:"required"}),s.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",type:"number",min:"0",max:"1000000",value:u,onChangeAction:this.handleInputChangeProductPrice,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.priceInclVat})):s.createElement(s.Fragment,null,s.createElement(D.Z,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:d,onChangeAction:this.handleInputChangeProductPrice,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.price}),s.createElement(D.Z,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:u,readOnly:!0,required:"required"}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"panel-part panel-heading"},s.createElement("span",{className:"h5 text-bold"},"Orderregel"))),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Omschrijving",id:"description",name:"description",value:o,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.description}),s.createElement(D.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:a,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:this.state.product.inputInclVat?"Prijs incl. BTW":"Prijs excl. BTW",name:"orderPrice",value:"€"+this.state.orderPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:this.state.product.priceNumberOfDecimals}),readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(D.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:r,onChangeAction:this.handleInputChange}),s.createElement(D.Z,{label:"Totaalbedrag incl. BTW",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),this.state.errorMessage&&s.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(E.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProductOneTime}),s.createElement(E.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),d}(s.Component);const ye=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,costCenters:e.systemData.costCenters,ledgers:e.systemData.ledgers,vatCodes:e.systemData.vatCodes,usesTwinfield:e.systemData.usesTwinfield}}),(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))}}}))(be);var Ze=r(10055);var Ie=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"toggleShowNew",(function(){t.props.orderDetails.canEdit?t.setState({showNew:!t.state.showNew}):t.props.setError(405,"Een order met daar aan gekoppeld een nota met de status “Te verzenden” kan niet worden aangepast(de order zit in de map “Order – Te verzenden”). Wil je deze order toch aanpassen? Verwijder dan eerst de “Te verzenden” nota. Dan kom deze order weer in de “Order – te factureren”.  Pas de order aan en maak vervolgens opnieuw de nota.")})),(0,m.Z)((0,u.Z)(t),"toggleShowNewProduct",(function(){t.props.orderDetails.canEdit?t.setState({showNewProduct:!t.state.showNewProduct}):t.props.setError(405,"Een order met daar aan gekoppeld een nota met de status “Te verzenden” kan niet worden aangepast(de order zit in de map “Order – Te verzenden”). Wil je deze order toch aanpassen? Verwijder dan eerst de “Te verzenden” nota. Dan kom deze order weer in de “Order – te factureren”.  Pas de order aan en maak vervolgens opnieuw de nota.")})),(0,m.Z)((0,u.Z)(t),"toggleShowNewProductOneTime",(function(){t.props.orderDetails.canEdit?t.setState({showNewProductOneTime:!t.state.showNewProductOneTime}):t.props.setError(405,"Een order met daar aan gekoppeld een nota met de status “Te verzenden” kan niet worden aangepast(de order zit in de map “Order – Te verzenden”). Wil je deze order toch aanpassen? Verwijder dan eerst de “Te verzenden” nota. Dan kom deze order weer in de “Order – te factureren”.  Pas de order aan en maak vervolgens opnieuw de nota.")})),t.state={showNew:!1,showNewProduct:!1,showNewProductOneTime:!1},t}return(0,n.Z)(d,[{key:"render",value:function(){return s.createElement(C.Z,null,s.createElement($.Z,null,s.createElement("div",{className:"row"},s.createElement("div",{className:"col-xs-10"},s.createElement("span",{className:"h5 text-bold"},"Orderregels")),this.props.permissions.manageFinancial&&s.createElement("div",{className:"col-xs-2"},s.createElement("div",{className:"pull-right"},s.createElement(K.ZP,{size:14,icon:Ze.P,"data-toggle":"dropdown",role:"button"}),s.createElement("ul",{className:"dropdown-menu"},s.createElement("li",null,s.createElement("a",{className:"btn",onClick:this.toggleShowNew},"Bestaand product")),s.createElement("li",null,s.createElement("a",{className:"btn",onClick:this.toggleShowNewProduct},"Nieuw product")),s.createElement("li",null,s.createElement("a",{className:"btn",onClick:this.toggleShowNewProductOneTime},"Nieuw eenmalig product"))))))),s.createElement(O.Z,null,s.createElement("div",{className:"col-md-12"},s.createElement(se,null)),s.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&s.createElement(me,{toggleShowNew:this.toggleShowNew}),this.state.showNewProduct&&s.createElement(ge,{toggleShowNewProduct:this.toggleShowNewProduct}),this.state.showNewProductOneTime&&s.createElement(ye,{toggleShowNewProductOneTime:this.toggleShowNewProductOneTime}))))}}]),d}(s.Component);const De=(0,l.$j)((function(e){return{permissions:e.meDetails.permissions,orderDetails:e.orderDetails}}),(function(e){return{setError:function(t,r){e((0,q.s)(t,r))}}}))(Ie);T().locale("nl");var Ce=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){return(0,a.Z)(this,d),l.call(this,e)}return(0,n.Z)(d,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van order.":this.props.isLoading?e="Gegevens aan het laden.":(0,y.isEmpty)(this.props.orderDetails)?e="Geen order gevonden!":t=!1,t?s.createElement("div",null,e):s.createElement("div",null,s.createElement(W,null),s.createElement(De,null),s.createElement(G,null))}}]),d}(s.Component);const Oe=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(Ce);var we=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"openItem",(function(e){p.nA.push("/taak/".concat(e))})),t.state={relatedTasks:""},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this,t=this.props.relatedTasks;return s.createElement("div",null,""==t&&s.createElement("div",null,"Geen taken of notities gevonden."),""!=t&&s.createElement("table",{className:"table harmonica-table"},s.createElement("tbody",null,t.map((function(t,r){return s.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:r},s.createElement("td",{className:"col-xs-12 clickable"},T()(t.createdAt).format("L")," - ",t.noteSummary))})))))}}]),d}(s.Component);const Ne=(0,l.$j)((function(e){return{relatedTasks:e.orderDetails.relatedTasks}}))(we),Se=(0,l.$j)((function(e){return{permissions:e.meDetails.permissions}}),null)((function(e){var t=e.toggleShowList,r=e.showTasksList,a=e.newTask,n=e.taskCount,o=e.permissions;return s.createElement(C.Z,{className:"harmonica-button"},s.createElement(O.Z,null,s.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},s.createElement("span",null,"TAKEN/NOTITIES ",s.createElement("span",{className:"badge"},n))),s.createElement("div",{className:"col-sm-2"},o.manageTask&&s.createElement("div",{className:"pull-right"},s.createElement(K.ZP,{className:"harmonica-button",size:14,icon:Ze.P,"data-toggle":"dropdown",role:"button"}),s.createElement("ul",{className:"dropdown-menu"},s.createElement("li",null,s.createElement("a",{className:"btn",onClick:function(){return a("open")}},"Maak taak")),s.createElement("li",null,s.createElement("a",{className:"btn",onClick:function(){return a("afgehandeld")}},"Maak notitie"))))),s.createElement("div",{className:"col-sm-12"},r&&s.createElement(Ne,null))))}));var ke=r(41415);var Re=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"openItem",(function(e){t.setState({showDetailsModal:!0,activeEmailId:e})})),t.state={showDetailsModal:!1,activeEmailId:null},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this,t=this.props.relatedEmails;return s.createElement("div",null,""==t&&s.createElement("div",null,"Geen e-mails gevonden."),""!=t&&s.createElement("table",{className:"table harmonica-table"},s.createElement("tbody",null,t.map((function(t,r){return s.createElement("tr",{key:r},s.createElement("td",{className:"col-xs-4 clickable",onClick:function(){return e.openItem(t.id)}},T()(t.date_sent).format("L")),s.createElement("td",{className:"col-xs-8 clickable",onClick:function(){return e.openItem(t.id)}},t.subject))})))),s.createElement(ke.Z,{showModal:this.state.showDetailsModal,emailId:this.state.activeEmailId,setShowModal:function(t){return e.setState({showDetailsModal:t})}}))}}]),d}(s.Component);const Te=(0,l.$j)((function(e){return{relatedEmails:e.orderDetails.relatedEmails}}))(Re),Fe=function(e){var t=e.toggleShowList,r=e.showEmailsList,a=e.newEmail,n=e.emailCount;return s.createElement(C.Z,{className:"harmonica-button"},s.createElement(O.Z,null,s.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},s.createElement("span",{onClick:t,className:""},"E-MAILS ",s.createElement("span",{className:"badge"},n))),s.createElement("div",{className:"col-sm-2"},s.createElement("a",{role:"button",className:"pull-right",onClick:a},s.createElement(K.ZP,{className:"harmonica-button",size:14,icon:Ze.P}))),s.createElement("div",{className:"col-sm-12"},r&&s.createElement(Te,null))))};var je=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"openItem",(function(e){p.nA.push("/document/".concat(e))})),t.state={relatedDocuments:""},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this,t=this.props.relatedDocuments;return s.createElement("div",null,""==t&&s.createElement("div",null,"Geen documenten gevonden."),""!=t&&s.createElement("table",{className:"table harmonica-table"},s.createElement("tbody",null,t.map((function(t,r){return s.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:r},s.createElement("td",{className:"col-xs-5 clickable"},T()(t.createdAt).format("L")),s.createElement("td",{className:"col-xs-6 clickable"},t.filename))})))))}}]),d}(s.Component);const xe=(0,l.$j)((function(e){return{relatedDocuments:e.orderDetails.relatedDocuments}}))(je),Ae=(0,l.$j)((function(e){return{permissions:e.meDetails.permissions}}),null)((function(e){var t=e.toggleShowList,r=e.showDocumentsList,a=e.newDocument,n=e.documentCount,o=e.permissions;return s.createElement(C.Z,{className:"harmonica-button"},s.createElement(O.Z,null,s.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},s.createElement("span",null,"DOCUMENTEN ",s.createElement("span",{className:"badge"},n))),s.createElement("div",{className:"col-sm-2"},o.createDocument&&s.createElement("div",{className:"pull-right"},s.createElement(K.ZP,{className:"harmonica-button",size:14,icon:Ze.P,"data-toggle":"dropdown",role:"button"}),s.createElement("ul",{className:"dropdown-menu"},s.createElement("li",null,s.createElement("a",{className:"btn",onClick:function(){return a("internal")}},"Maak document")),s.createElement("li",null,s.createElement("a",{className:"btn",onClick:function(){return a("upload")}},"Upload document"))))),s.createElement("div",{className:"col-sm-12"},r&&s.createElement(xe,null))))}));var Ve=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"openItem",(function(e){p.nA.push("/nota/".concat(e))})),t.state={relatedInvoices:""},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this,t=this.props.relatedInvoices;return s.createElement("div",null,""==t&&s.createElement("div",null,"Geen nota's gevonden."),""!=t&&s.createElement("table",{className:"table harmonica-table"},s.createElement("tbody",null,t.map((function(t,r){return s.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:r},s.createElement("td",{className:"col-xs-12 clickable"},T()(t.createdAt).format("L")," - ",t.number))})))))}}]),d}(s.Component);const Le=(0,l.$j)((function(e){return{relatedInvoices:e.orderDetails.relatedInvoices}}))(Ve),Me=function(e){var t=e.toggleShowList,r=e.showInvoicesList,a=e.invoiceCount;return s.createElement(C.Z,{className:"harmonica-button"},s.createElement(O.Z,null,s.createElement("div",{className:"col-sm-12",onClick:t,role:"button"},s.createElement("span",null,"NOTA'S ",s.createElement("span",{className:"badge"},a))),s.createElement("div",{className:"col-sm-12"},r&&s.createElement(Le,null))))};var qe=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"openItem",(function(e){p.nA.push("/nota/".concat(e))})),t.state={relatedInvoicesPaidCollection:""},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this,t=this.props.relatedInvoicesPaidCollection;return s.createElement("div",null,""==t&&s.createElement("div",null,"Geen geïncasseerde incasso's gevonden."),""!=t&&s.createElement("table",{className:"table harmonica-table"},s.createElement("tbody",null,t.map((function(t,r){return s.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:r},s.createElement("td",{className:"col-xs-12 clickable"},T()(t.createdAt).format("L")," - ",t.number))})))))}}]),d}(s.Component);const Ye=(0,l.$j)((function(e){return{relatedInvoicesPaidCollection:e.orderDetails.relatedInvoicesPaidCollection}}))(qe),Be=function(e){var t=e.toggleShowList,r=e.showInvoicesPaidCollectionList,a=e.invoicePaidCollectionCount;return s.createElement(C.Z,{className:"harmonica-button"},s.createElement(O.Z,null,s.createElement("div",{className:"col-sm-12",onClick:t,role:"button"},s.createElement("span",null,"GEÏNCASSEERDE INCASSO'S ",s.createElement("span",{className:"badge"},a))),s.createElement("div",{className:"col-sm-12"},r&&s.createElement(Ye,null))))};var ze=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"openItem",(function(e){p.nA.push("/nota/".concat(e))})),t.state={relatedInvoicesPaidTransfer:""},t}return(0,n.Z)(d,[{key:"render",value:function(){var e=this,t=this.props.relatedInvoicesPaidTransfer;return s.createElement("div",null,""==t&&s.createElement("div",null,"Geen overboekingen gevonden."),""!=t&&s.createElement("table",{className:"table harmonica-table"},s.createElement("tbody",null,t.map((function(t,r){return s.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:r},s.createElement("td",{className:"col-xs-12 clickable"},T()(t.createdAt).format("L")," - ",t.number))})))))}}]),d}(s.Component);const We=(0,l.$j)((function(e){return{relatedInvoicesPaidTransfer:e.orderDetails.relatedInvoicesPaidTransfer}}))(ze),_e=function(e){var t=e.toggleShowList,r=e.showInvoicesPaidTransferList,a=e.invoicePaidTransferCount;return s.createElement(C.Z,{className:"harmonica-button"},s.createElement(O.Z,null,s.createElement("div",{className:"col-sm-12",onClick:t,role:"button"},s.createElement("span",null,"OVERBOEKINGEN ",s.createElement("span",{className:"badge"},a))),s.createElement("div",{className:"col-sm-12"},r&&s.createElement(We,null))))};function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ke=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,a.Z)(this,d),t=l.call(this,e),(0,m.Z)((0,u.Z)(t),"newTask",(function(e){p.nA.push("/taak/nieuw/".concat(e,"/order/").concat(t.props.orderDetails.id))})),(0,m.Z)((0,u.Z)(t),"newEmail",(function(){p.nA.push("/email/nieuw")})),(0,m.Z)((0,u.Z)(t),"newDocument",(function(e){p.nA.push("/document/nieuw/".concat(e,"/order/").concat(t.props.orderDetails.id))})),t.state={toggleShowList:{tasks:!1,emails:!1,documents:!1,invoices:!1,invoicesPaidCollection:!1,invoicesPaidTransfer:!1}},t.toggleShowList=t.toggleShowList.bind((0,u.Z)(t)),t}return(0,n.Z)(d,[{key:"componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.setState({toggleShowList:{tasks:!1,emails:!1,documents:!1,invoices:!1,invoicesPaidCollection:!1,invoicesPaidTransfer:!1}})}},{key:"toggleShowList",value:function(e){this.setState(Ge(Ge({},this.state),{},{toggleShowList:Ge(Ge({},this.state.toggleShowList),{},(0,m.Z)({},e,!this.state.toggleShowList[e]))}))}},{key:"render",value:function(){var e=this;return s.createElement("div",{className:"margin-10-top"},s.createElement(Se,{toggleShowList:function(){return e.toggleShowList("tasks")},showTasksList:this.state.toggleShowList.tasks,taskCount:this.props.orderDetails.taskCount,newTask:this.newTask}),s.createElement(Fe,{toggleShowList:function(){return e.toggleShowList("emails")},showEmailsList:this.state.toggleShowList.emails,newEmail:this.newEmail,emailCount:this.props.orderDetails.emailCount}),s.createElement(Ae,{toggleShowList:function(){return e.toggleShowList("documents")},showDocumentsList:this.state.toggleShowList.documents,newDocument:this.newDocument,documentCount:this.props.orderDetails.documentCount}),s.createElement(Me,{toggleShowList:function(){return e.toggleShowList("invoices")},showInvoicesList:this.state.toggleShowList.invoices,invoiceCount:this.props.orderDetails.invoiceCount}),"collection"===this.props.orderDetails.paymentTypeId?s.createElement(Be,{toggleShowList:function(){return e.toggleShowList("invoicesPaidCollection")},showInvoicesPaidCollectionList:this.state.toggleShowList.invoicesPaidCollection,invoicePaidCollectionCount:this.props.orderDetails.invoicePaidCollectionCount}):s.createElement(_e,{toggleShowList:function(){return e.toggleShowList("invoicesPaidTransfer")},showInvoicesPaidTransferList:this.state.toggleShowList.invoicesPaidTransfer,invoicePaidTransferCount:this.props.orderDetails.invoicePaidTransferCount}))}}]),d}(s.Component);const He=(0,l.$j)((function(e){return{orderDetails:e.orderDetails,permissions:e.meDetails.permissions}}),null)(Ke);var Ue=function(e){(0,o.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.Z)(t);if(r){var n=(0,i.Z)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){return(0,a.Z)(this,d),l.call(this,e)}return(0,n.Z)(d,[{key:"componentDidMount",value:function(){this.props.fetchOrderDetails(this.props.params.id)}},{key:"render",value:function(){return s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-9"},s.createElement("div",{className:"col-md-12 margin-10-top"},s.createElement(C.Z,null,s.createElement(O.Z,{className:"panel-small"},s.createElement(b,null)))),s.createElement("div",{className:"col-md-12 margin-10-top"},s.createElement(Oe,null))),s.createElement(C.Z,{className:"col-md-3 harmonica"},s.createElement(O.Z,null,s.createElement(He,null))))}}]),d}(s.Component);const Qe=(0,l.$j)((function(e){return{orderDetails:e.orderDetails}}),(function(e){return{fetchOrderDetails:function(t){e((0,d.g)(t))}}}))(Ue)},57511:(e,t)=>{t.x=void 0,t.x={viewBox:"0 0 1536 1792",children:[{name:"path",attribs:{d:"M1468 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zM1024 136v376h376q-10-29-22-41l-313-313q-12-12-41-22zM1408 1664v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"}}]}},93358:(e,t)=>{t.B=void 0,t.B={viewBox:"0 0 1792 1792",children:[{name:"path",attribs:{d:"M1792 640q0 26-19 45l-512 512q-19 19-45 19t-45-19-19-45v-256h-224q-98 0-175.5 6t-154 21.5-133 42.5-105.5 69.5-80 101-48.5 138.5-17.5 181q0 55 5 123 0 6 2.5 23.5t2.5 26.5q0 15-8.5 25t-23.5 10q-16 0-28-17-7-9-13-22t-13.5-30-10.5-24q-127-285-127-451 0-199 53-333 162-403 875-403h224v-256q0-26 19-45t45-19 45 19l512 512q19 19 19 45z"}}]}},320:(e,t,r)=>{r.d(t,{Z:()=>g});var a=r(67294),n=(r(88389),r(73935),r(75912)),o=(r(93998),r(35639),r(61085)),c=r(45987),i=r(87462),s=r(15671),l=r(43144),d=r(60136),u=r(82963),m=r(61120),p=r(53569);var h={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},f=function(e){var t,r;return r=t=function(t){(0,d.Z)(h,t);var r,n,o=(r=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,m.Z)(r);if(n){var a=(0,m.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function h(e){var t;return(0,s.Z)(this,h),(t=o.call(this)).select=void 0,t.lastRequest=void 0,t.mounted=!1,t.optionsCache={},t.handleInputChange=function(e,r){var a=t.props,n=a.cacheOptions,o=a.onInputChange,c=(0,p.G)(e,r,o);if(!c)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(n&&t.optionsCache[c])t.setState({inputValue:c,loadedInputValue:c,loadedOptions:t.optionsCache[c],isLoading:!1,passEmptyOptions:!1});else{var i=t.lastRequest={};t.setState({inputValue:c,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},(function(){t.loadOptions(c,(function(e){t.mounted&&(e&&(t.optionsCache[c]=e),i===t.lastRequest&&(delete t.lastRequest,t.setState({isLoading:!1,loadedInputValue:c,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return c},t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:void 0!==e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},t}return(0,l.Z)(h,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,r=this.state.inputValue;!0===t&&this.loadOptions(r,(function(t){if(e.mounted){var r=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:r})}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var r=this.props.loadOptions;if(!r)return t();var a=r(e,t);a&&"function"==typeof a.then&&a.then(t,(function(){return t()}))}},{key:"render",value:function(){var t=this,r=this.props,n=(r.loadOptions,r.isLoading),o=(0,c.Z)(r,["loadOptions","isLoading"]),s=this.state,l=s.defaultOptions,d=s.inputValue,u=s.isLoading,m=s.loadedInputValue,p=s.loadedOptions,h=s.passEmptyOptions?[]:d&&m?p:l||[];return a.createElement(e,(0,i.Z)({},o,{ref:function(e){t.select=e},options:h,isLoading:u||n,onInputChange:this.handleInputChange}))}}]),h}(a.Component),t.defaultProps=h,r};f((0,o.m)(n.S));var v=(0,r(12766).Vn)(n.S);const g=f((0,o.m)(v))},12766:(e,t,r)=>{r.d(t,{Vn:()=>E,ZP:()=>b});var a=r(87462),n=r(93433),o=r(4942),c=r(15671),i=r(43144),s=r(60136),l=r(82963),d=r(61120),u=r(67294),m=(r(88389),r(73935),r(53569)),p=r(75912),h=(r(93998),r(35639),r(61085));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var v=function(){var e=arguments.length>1?arguments[1]:void 0,t=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),r=String(e.value).toLowerCase(),a=String(e.label).toLowerCase();return r===t||a===t},g=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,r){return!(!e||t.some((function(t){return v(e,t)}))||r.some((function(t){return v(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),E=function(e){var t,r;return r=t=function(t){(0,s.Z)(h,t);var r,o,p=(r=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(r);if(o){var a=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function h(e){var t;(0,c.Z)(this,h),(t=p.call(this,e)).select=void 0,t.onChange=function(e,r){var a=t.props,o=a.getNewOptionData,c=a.inputValue,i=a.isMulti,s=a.onChange,l=a.onCreateOption,d=a.value,u=a.name;if("select-option"!==r.action)return s(e,r);var p=t.state.newOption,h=Array.isArray(e)?e:[e];if(h[h.length-1]!==p)s(e,r);else if(l)l(c);else{var f=o(c,c),v={action:"create-option",name:u};s(i?[].concat((0,n.Z)((0,m.C)(d)),[f]):f,v)}};var r=e.options||[];return t.state={newOption:void 0,options:r},t}return(0,i.Z)(h,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,r=e.createOptionPosition,a=e.formatCreateLabel,o=e.getNewOptionData,c=e.inputValue,i=e.isLoading,s=e.isValidNewOption,l=e.value,d=e.options||[],u=this.state.newOption;u=s(c,(0,m.C)(l),d)?o(c,a(c)):void 0,this.setState({newOption:u,options:!t&&i||!u?d:"first"===r?[u].concat((0,n.Z)(d)):[].concat((0,n.Z)(d),[u])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,r=this.state.options;return u.createElement(e,(0,a.Z)({},this.props,{ref:function(e){t.select=e},options:r,onChange:this.onChange}))}}]),h}(u.Component),t.defaultProps=g,r},P=E(p.S);const b=(0,h.m)(P)}}]);