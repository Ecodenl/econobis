"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6262],{14050:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(69265),r="".concat(URL_API,"/api/contact");const o={fetchContactAvailabilitiesByWeek:function(e,t){return a.Z.get("".concat(r,"/").concat(e,"/availability/by-week"),{params:{startOfWeek:t}}).then((function(e){return e.data}))},updateContactAvailabilities:function(e,t){return a.Z.post("".concat(r,"/").concat(e,"/availability"),t)},copyAvailabilities:function(e,t){return a.Z.post("".concat(r,"/").concat(e,"/availability/copy-weeks"),t)},fetchDistrictAvailabilitiesByWeek:function(e){var t=e.districtId,n=e.startOfWeek;return a.Z.get("".concat(URL_API,"/api/district/").concat(t,"/availability/by-week"),{params:{startOfWeek:n}}).then((function(e){return e.data}))}}},86262:(e,t,n)=>{n.r(t),n.d(t,{default:()=>re});var a=n(29439),r=n(67294),o=n(14309),l=n(98688),c=n(55451),i=n(61409),u=n(93379),s=n.n(u),d=n(7795),m=n.n(d),f=n(90569),p=n.n(f),h=n(3565),v=n.n(h),b=n(19216),g=n.n(b),w=n(44589),E=n.n(w),Z=n(36443),y={};y.styleTagTransform=E(),y.setAttributes=v(),y.insert=p().bind(null,"head"),y.domAPI=m(),y.insertStyleElement=g(),s()(Z.Z,y),Z.Z&&Z.Z.locals&&Z.Z.locals;var M=n(80720),k=n(45987),C=n(93433),A=n(87462),S=n(43144),x=n(15671),N=n(97326),T=n(60136),W=n(82963),R=n(61120),B=n(4942),I=n(45697),D=n.n(I),P=["className","disabled","beingSelected","selected","onTouchStart","onTouchMove"];function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,R.Z)(e);if(t){var r=(0,R.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,W.Z)(this,n)}}var z=function(e){(0,T.Z)(n,e);var t=Y(n);function n(){var e;(0,x.Z)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),(0,B.Z)((0,N.Z)(e),"state",{selectionStarted:!1,startRow:null,startColumn:null,endRow:null,endColumn:null,addMode:null}),(0,B.Z)((0,N.Z)(e),"componentDidMount",(function(){window.addEventListener("mouseup",e.handleTouchEndWindow),window.addEventListener("touchend",e.handleTouchEndWindow)})),(0,B.Z)((0,N.Z)(e),"componentWillUnmount",(function(){window.removeEventListener("mouseup",e.handleTouchEndWindow),window.removeEventListener("touchend",e.handleTouchEndWindow)})),(0,B.Z)((0,N.Z)(e),"render",(function(){return r.createElement("tbody",null,e.renderRows())})),(0,B.Z)((0,N.Z)(e),"renderRows",(function(){return r.Children.map(e.props.children,(function(t,n){return r.createElement("tr",(0,A.Z)({key:n},t.props),r.Children.map(t.props.children,(function(t,a){return r.createElement(V,(0,A.Z)({key:a,onTouchStart:e.handleTouchStartCell,onTouchMove:e.handleTouchMoveCell,selected:e.props.value[n][a],beingSelected:e.isCellBeingSelected(n,a)},t.props),t.props.children)})))}))})),(0,B.Z)((0,N.Z)(e),"handleTouchStartCell",(function(t){var n=0===t.button,a="mousedown"!==t.type;if(!e.state.selectionStarted&&(n||a)){t.preventDefault();var r=q(t),o=r.row,l=r.column;e.props.onSelectionStart({row:o,column:l}),e.setState({selectionStarted:!0,startRow:o,startColumn:l,endRow:o,endColumn:l,addMode:!e.props.value[o][l]})}})),(0,B.Z)((0,N.Z)(e),"handleTouchMoveCell",(function(t){if(e.state.selectionStarted){t.preventDefault();var n=q(t),a=n.row,r=n.column,o=e.state,l=o.startRow,c=o.startColumn,i=o.endRow,u=o.endColumn;if(i!==a||u!==r){var s=null===l&&null===i?0:Math.abs(a-l)+1,d=null===c&&null===u?0:Math.abs(r-c)+1;s<=e.props.maxRows&&e.setState({endRow:a}),d<=e.props.maxColumns&&e.setState({endColumn:r})}}})),(0,B.Z)((0,N.Z)(e),"handleTouchEndWindow",(function(t){var n=0===t.button,a="mousedown"!==t.type;if(e.state.selectionStarted&&(n||a)){for(var r=(0,C.Z)(e.props.value),o=Math.min(e.state.startRow,e.state.endRow),l=Math.max(e.state.startRow,e.state.endRow),c=o;c<=l;c++)for(var i=Math.min(e.state.startColumn,e.state.endColumn),u=Math.max(e.state.startColumn,e.state.endColumn),s=i;s<=u;s++)r[c][s]=e.state.addMode;e.setState({selectionStarted:!1}),e.props.onChange(r)}})),(0,B.Z)((0,N.Z)(e),"isCellBeingSelected",(function(t,n){var a=Math.min(e.state.startRow,e.state.endRow),r=Math.max(e.state.startRow,e.state.endRow),o=Math.min(e.state.startColumn,e.state.endColumn),l=Math.max(e.state.startColumn,e.state.endColumn);return e.state.selectionStarted&&t>=a&&t<=r&&n>=o&&n<=l})),e}return(0,S.Z)(n)}(r.Component);(0,B.Z)(z,"propTypes",{value:function(e){var t=new Error("Invalid prop `value` supplied to `TableDragSelect`. Validation failed.");if(!Array.isArray(e.value))return t;if(0!==e.value.length){var n,a=e.value[0].length,r=O(e.value);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!Array.isArray(o)||o.length!==a)return t;var l,c=O(o);try{for(c.s();!(l=c.n()).done;)if("boolean"!=typeof l.value)return t}catch(e){c.e(e)}finally{c.f()}}}catch(e){r.e(e)}finally{r.f()}}},maxRows:D().number,maxColumns:D().number,onSelectionStart:D().func,onInput:D().func,onChange:D().func,children:function(e){if(!z.propTypes.value(e)){var t=new Error("Invalid prop `children` supplied to `TableDragSelect`. Validation failed."),n=r.Children.toArray(e.children),a=e.value.length,o=0===e.value.length?0:e.value[0].length;if(n.length!==a)return t;var l,c=O(n);try{for(c.s();!(l=c.n()).done;){var i=l.value,u=r.Children.toArray(i.props.children);if("tr"!==i.type||u.length!==o)return t;var s,d=O(u);try{for(d.s();!(s=d.n()).done;)if("td"!==s.value.type)return t}catch(e){d.e(e)}finally{d.f()}}}catch(e){c.e(e)}finally{c.f()}}}}),(0,B.Z)(z,"defaultProps",{value:[],maxRows:1/0,maxColumns:1/0,onSelectionStart:function(){},onInput:function(){},onChange:function(){}});var V=function(e){(0,T.Z)(n,e);var t=Y(n);function n(){var e;(0,x.Z)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),(0,B.Z)((0,N.Z)(e),"shouldComponentUpdate",(function(t){return e.props.beingSelected!==t.beingSelected||e.props.selected!==t.selected})),(0,B.Z)((0,N.Z)(e),"componentDidMount",(function(){e.td.addEventListener("touchstart",e.handleTouchStart,{passive:!1}),e.td.addEventListener("touchmove",e.handleTouchMove,{passive:!1})})),(0,B.Z)((0,N.Z)(e),"componentWillUnmount",(function(){e.td.removeEventListener("touchstart",e.handleTouchStart),e.td.removeEventListener("touchmove",e.handleTouchMove)})),(0,B.Z)((0,N.Z)(e),"render",(function(){var t=e.props,n=t.className,a=void 0===n?"":n,o=t.disabled,l=t.beingSelected,c=t.selected,i=(t.onTouchStart,t.onTouchMove,(0,k.Z)(t,P));return o?a+=" cell-disabled":(a+=" cell-enabled",c&&(a+=" cell-selected"),l&&(a+=" cell-being-selected")),r.createElement("td",(0,A.Z)({ref:function(t){return e.td=t},className:a,onMouseDown:e.handleTouchStart,onMouseMove:e.handleTouchMove},i),e.props.children||r.createElement("span",null," "))})),(0,B.Z)((0,N.Z)(e),"handleTouchStart",(function(t){e.props.disabled||e.props.onTouchStart(t)})),(0,B.Z)((0,N.Z)(e),"handleTouchMove",(function(t){e.props.disabled||e.props.onTouchMove(t)})),e}return(0,S.Z)(n)}(r.Component),q=function(e){var t;if(e.touches){var n=e.touches[0];t=document.elementFromPoint(n.clientX,n.clientY)}else for(t=e.target;"TD"!==t.tagName;)t=t.parentNode;return{row:t.parentNode.rowIndex-1,column:t.cellIndex}},U=n(30381),j=n.n(U),F=n(14050),K=n(41355),_=n(71840);function X(e){var t=e.weekOptions,n=e.copyFromWeek,o=e.contactId,l=(0,r.useState)(!1),i=(0,a.Z)(l,2),u=i[0],s=i[1],d=(0,r.useState)(""),m=(0,a.Z)(d,2),f=m[0],p=m[1],h=(0,r.useState)(1),v=(0,a.Z)(h,2),b=v[0],g=v[1];return(0,r.useEffect)((function(){var e=t.findIndex((function(e){return e.value===n})),a=t[e+1];p(a?a.value:n)}),[u]),u?r.createElement("div",{style:{textAlign:"left"}},r.createElement(K.Z,{buttonConfirmText:"Kopiëren",closeModal:function(){return s(!1)},confirmAction:function(){F.Z.copyAvailabilities(o,{copyFromWeek:n,copyToWeek:f,numberOfWeeks:b}).then((function(){s(!1)})).catch((function(){alert("Er is iets misgegaan met opslaan, probeer het opnieuw.")}))},title:"Beschikbaarheid kopiëren"},r.createElement("div",null,r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-12"},r.createElement("h4",null,"Beschikbaarheid van"," ",r.createElement("strong",null,t.find((function(e){return e.value===n})).text)," kopiëren."),r.createElement("p",null,"De beschikbaarheid van de huidige week in het overzicht wordt gekopieerd naar de gekozen week en de x aantal daaropvolgende weken."))),r.createElement("div",{className:"row"},r.createElement("div",{className:"row"},r.createElement(_.Z,{label:"Naar week",size:"col-sm-12",name:"copyToWeek",options:t,value:f,onChangeAction:function(e){return p(e.target.value)},optionName:"text",optionValue:"value",emptyOption:!1}))),r.createElement("div",{className:"row"},r.createElement("div",{className:"row"},r.createElement(_.Z,{label:"Aantal weken",size:"col-sm-12",name:"numberOfWeeks",options:function(){for(var e=t.findIndex((function(e){return e.value===f})),n=t.length-e,a=[],r=1;r<=n;r++)a.push({value:r,text:r});return a}(),value:b,onChangeAction:function(e){return g(e.target.value)},optionName:"text",optionValue:"value",emptyOption:!1})))))):r.createElement(c.Z,{iconName:"copy",buttonClassName:"btn-default btn-sm",onClickAction:function(){return s(!0)}})}function $(e){var t=e.contactId,n=(0,r.useState)([]),i=(0,a.Z)(n,2),u=i[0],s=i[1],d=(0,r.useState)([]),m=(0,a.Z)(d,2),f=m[0],p=m[1],h=(0,r.useState)(""),v=(0,a.Z)(h,2),b=v[0],g=v[1],w=(0,r.useState)([]),E=(0,a.Z)(w,2),Z=E[0],y=E[1];(0,r.useEffect)((function(){g(j()().startOf("isoWeek").format("YYYY-MM-DD")),C()}),[]),(0,r.useEffect)((function(){b&&(F.Z.fetchContactAvailabilitiesByWeek(t,b).then((function(e){y(e)})),A())}),[b]);var k,C=function(){for(var e=[],t=360;t<1320;t+=30)e.push(t);p(e)},A=function(){for(var e=[],t=j()(b),n=t.clone().endOf("isoWeek");t<=n;)e.push(t.clone()),t.add(1,"d");s(e)},S=function(e){var t=Math.floor(e/60),n=e%60;return(t=t<10?"0"+t:t)+":"+(n<10?"0"+n:n)},x=function(){for(var e=j()().startOf("isoWeek"),t=[],n=0;n<78;n++)t.push({value:e.format("YYYY-MM-DD"),text:"Week "+e.format("W")+" ("+e.format("DD-MM-YY")+")"}),e.add(1,"w");return t},N=function(){var e=x().findIndex((function(e){return e.value===b}));if(e>0)return x()[e-1].value},T=function(){var e=x().findIndex((function(e){return e.value===b}));if(e<x().length-1)return x()[e+1].value};return r.createElement(o.Z,null,r.createElement(M.Z,null,r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-4"},r.createElement(c.Z,{disabled:!N(),iconName:"arrowLeft",buttonClassName:"btn-default btn-sm",onClickAction:function(){return g(N())}})),r.createElement("div",{className:"col-sm-4"},r.createElement("select",{className:"form-control input-sm",value:b,onChange:function(e){return g(e.target.value)}},x().map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.text)})))),r.createElement("div",{className:"col-sm-4",style:{textAlign:"right"}},r.createElement(X,{weekOptions:x(),copyFromWeek:b,contactId:t})," ",r.createElement(c.Z,{disabled:!T(),iconName:"arrowRight",buttonClassName:"btn-default btn-sm",onClickAction:function(){return g(T())}})))),r.createElement(l.Z,null,r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("table",{className:"table-drag-select"},r.createElement("thead",null,r.createElement("tr",null,u.map((function(e,t){return r.createElement("th",{key:t,style:{textAlign:"center"}},e.format("dd DD-MM-YY"))})))),r.createElement(z,{value:(k=[],f.map((function(e){var t=[];u.map((function(n){t.push(function(e,t){return Z.some((function(n){return j()(n.from)<=j()(e).add(t,"minutes")&&j()(n.to)>=j()(e).add(t+30,"minutes")}))}(n,e))})),k.push(t)})),k),onChange:function(e){return function(e){for(var n=[],a=0;a<u.length;a++)for(var r=!1,o=0;o<f.length;o++)e[o][a]?!1===r&&(r=o):!1!==r&&(n.push({day:a,from:S(f[r]),to:S(f[o-1]+30)}),r=!1),o===f.length-1&&r&&n.push({day:a,from:S(f[r]),to:S(f[o]+30)});F.Z.updateContactAvailabilities(t,{startOfWeek:b,availabilities:n}).catch((function(){alert("Er is iets misgegaan met opslaan, probeer het opnieuw.")}))}(e)}},f.map((function(e,t){return r.createElement("tr",{key:t},u.map((function(t,n){return r.createElement("td",{key:n},S(e))})))}))))))))}var G=n(36381),H=n(9181),J=n(49332),Q=n(82178);function ee(e){var t=e.contact,n=e.switchToView,a=e.onSave,c=(0,Q.TA)({initialValues:t,onSubmit:function(e,t){var r=t.setSubmitting;G.Z.updateCoachAttributes(e).then((function(){n(),a(),r(!1)})).catch((function(){r(!1),alert("Er is iets misgegaan met opslaan. Probeer het nogmaals")}))}}),i=c.values,u=c.errors,s=c.touched,d=c.handleChange,m=c.handleSubmit,f=c.handleBlur,p=c.isSubmitting;return r.createElement("form",{className:"form-horizontal",onSubmit:m},r.createElement(o.Z,null,r.createElement(l.Z,null,r.createElement("div",{className:"row"},r.createElement(H.Z,{type:"text",label:"Max. aantal afspraken per week",name:"coachMaxAppointmentsPerWeek",value:i.coachMaxAppointmentsPerWeek,onChangeAction:function(e){e.target.value=e.target.value.replace(/[^0-9.]/g,""),d(e)},onBlurAction:f,required:"required",error:u.coachMaxAppointmentsPerWeek&&s.coachMaxAppointmentsPerWeek,errorMessage:u.coachMaxAppointmentsPerWeek,allowZero:!0}),r.createElement(H.Z,{type:"text",label:"Min. tijd tussen afspraken (minuten)",name:"coachMinMinutesBetweenAppointments",value:i.coachMinMinutesBetweenAppointments,onChangeAction:function(e){e.target.value=e.target.value.replace(/[^0-9.]/g,""),d(e)},onBlurAction:f,required:"required",error:u.coachMinMinutesBetweenAppointments&&s.coachMinMinutesBetweenAppointments,errorMessage:u.coachMinMinutesBetweenAppointments,allowZero:!0})),r.createElement("div",{className:"row"},r.createElement(H.Z,{type:"text",label:"Max. aantal afspraken per maand",name:"coachMaxAppointmentsPerMonth",value:i.coachMaxAppointmentsPerMonth,onChangeAction:function(e){e.target.value=e.target.value.replace(/[^0-9.]/g,""),d(e)},onBlurAction:f,required:"required",error:u.coachMaxAppointmentsPerMonth&&s.coachMaxAppointmentsPerMonth,errorMessage:u.coachMaxAppointmentsPerMonth,allowZero:!0}))),r.createElement(l.Z,null,r.createElement("div",{className:"pull-right btn-group",role:"group"},r.createElement(J.Z,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:n}),r.createElement(J.Z,{buttonText:"Opslaan",onClickAction:m,type:"submit",value:"Submit",loading:p})))))}var te=n(7250);function ne(e){var t=e.contact,n=e.switchToEdit;return r.createElement("div",{onClick:n},r.createElement(o.Z,null,r.createElement(l.Z,null,r.createElement("div",{className:"row"},r.createElement(te.Z,{label:"Max. aantal afspraken per week",value:t.coachMaxAppointmentsPerWeek}),r.createElement(te.Z,{label:"Min. tijd tussen afspraken",value:t.coachMinMinutesBetweenAppointments+" minuten"})),r.createElement("div",{className:"row"},r.createElement(te.Z,{label:"Max. aantal afspraken per maand",value:t.coachMaxAppointmentsPerMonth})))))}function ae(e){var t=e.contact,n=e.onSave,o=(0,r.useState)(""),l=(0,a.Z)(o,2),c=l[0],i=l[1],u=(0,r.useState)(!1),s=(0,a.Z)(u,2),d=s[0],m=s[1];return r.createElement("div",{className:c,onMouseEnter:function(){return i("panel-grey")},onMouseLeave:function(){return i("")}},d?r.createElement(ee,{contact:t,switchToView:function(){return m(!1)},onSave:n}):r.createElement(ne,{contact:t,switchToEdit:function(){return m(!0)}}))}function re(e){var t=(0,r.useState)(null),n=(0,a.Z)(t,2),u=n[0],s=n[1];(0,r.useEffect)((function(){d()}),[]);var d=function(){G.Z.getCoachAttributes(e.params.id).then((function(e){s(e)}))};return u?r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-9"},r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement(o.Z,null,r.createElement(l.Z,{className:"panel-small"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-4"},r.createElement("div",{className:"btn-group",role:"group"},r.createElement(c.Z,{iconName:"arrowLeft",onClickAction:i.mW.goBack}))),r.createElement("div",{className:"col-md-4"},r.createElement("h4",{className:"text-center"},"Beschikbaarheid: ",u.fullName)),r.createElement("div",{className:"col-md-4"}))))),r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement(ae,{contact:u,onSave:d})),r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement($,{contactId:e.params.id}))),r.createElement("div",{className:"col-md-3"})):null}},36443:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(8081),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,".table-drag-select {\r\n    /* Stretch horizontally to fill parent */\r\n    width: 100%;\r\n    /* Keep columns same width */\r\n    table-layout: fixed;\r\n    /* Disable text selection */\r\n    user-select: none;\r\n    /* Center in parent */\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    /* Remove space between border */\r\n    border-collapse: collapse;\r\n}\r\n\r\n/* Table cells */\r\n.table-drag-select td {\r\n    text-align: center;\r\n    /* Cut off long strings of text with ... */\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    /* Make transparent gaps between cells. Better than relying on margin\r\n     * because clicking an element's margin doesn't trigger events */\r\n    border: 0.2rem solid transparent;\r\n    background-clip: padding-box;\r\n    /* Make cells reasonable size */\r\n    /*line-height: 3rem;*/\r\n    /* Shows more text when text too big to fit into cell */\r\n    padding-left: 0rem;\r\n    padding-right: 0rem;\r\n}\r\n\r\n/* Cells that can be interacted with */\r\n.table-drag-select td.cell-enabled {\r\n    background-color: #EEE;\r\n    /* Make the cursor a + symbol */\r\n    cursor: cell;\r\n}\r\n\r\n/* Cells that cannot be interacted with */\r\n.table-drag-select td.cell-disabled {\r\n    /* Put yer css here */\r\n}\r\n\r\n/* Cells that have been selected */\r\n.table-drag-select td.cell-selected {\r\n    background-color: #85a41a;\r\n}\r\n\r\n/* Cells that are in the process of being selected */\r\n.table-drag-select td.cell-being-selected {\r\n    /* This is the blue color you see when you select text with the cursor */\r\n    background-color: #3F83D5;\r\n}",""]);const c=l}}]);