(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1158:function(e,a,t){"use strict";t.d(a,"a",(function(){return p}));var n=t(547),c=t.n(n),r=t(0),l=t.n(r),i=t(27),o=t(30),s=t(36),m=t(1043),u=t(1066),d=t(37),h=t(123),f=t(89),E=t(76);function p(e){for(var a=e.initialValues,t=e.onSubmit,n=e.cancelAction,p=l.a.useState([]),v=c()(p,2),g=v[0],b=v[1],k=Object(m.a)({initialValues:a,validationSchema:u.a().shape({name:u.b().required("Verplicht")}),onSubmit:function(e,a){var n=a.setSubmitting;t(e,n)}}),C=k.values,N=k.errors,w=k.touched,S=k.handleChange,T=k.handleSubmit,D=k.handleBlur,j=k.isSubmitting,A=k.setFieldValue,O=[],P=30;P<=180;P+=15)O.push({id:P,name:P+" minuten"});return Object(r.useEffect)((function(){E.a.fetchEmailTemplatesPeek().then((function(e){b(e)}))}),[]),l.a.createElement("form",{className:"form-horizontal",onSubmit:T},l.a.createElement(i.a,null,l.a.createElement(o.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(s.a,{label:"Weergavenaam",name:"name",value:C.name,onChangeAction:S,onBlurAction:D,required:"required",error:N.name&&w.name,errorMessage:N.name}),l.a.createElement(h.a,{label:"Standaard duur afspraak",name:"defaultDurationMinutes",value:C.defaultDurationMinutes,options:O,onChangeAction:S,emptyOption:!1})),l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Verstuur automatisch e-mail aan bewoner bij maken afspraak",name:"sendEmailToContactWhenPlanned",value:C.sendEmailToContactWhenPlanned,onChangeAction:function(e){e.persist(),A(e.target.name,e.target.checked)}}),C.sendEmailToContactWhenPlanned&&l.a.createElement(h.a,{label:"E-mail template",name:"emailToContactTemplateId",value:C.emailToContactTemplateId,options:g,onChangeAction:S})),l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Verstuur automatisch e-mail aan coach bij maken afspraak",name:"sendEmailToCoachWhenPlanned",value:C.sendEmailToCoachWhenPlanned,onChangeAction:function(e){e.persist(),A(e.target.name,e.target.checked)}}),C.sendEmailToCoachWhenPlanned&&l.a.createElement(h.a,{label:"E-mail template",name:"emailToCoachTemplateId",value:C.emailToCoachTemplateId,options:g,onChangeAction:S})),l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Gesloten",name:"closed",value:C.closed,onChangeAction:function(e){e.persist(),A(e.target.name,e.target.checked)}}))),l.a.createElement(o.a,null,l.a.createElement("div",{className:"pull-right btn-group",role:"group"},n&&l.a.createElement(d.a,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:n}),l.a.createElement(d.a,{buttonText:"Opslaan",onClickAction:T,type:"submit",value:"Submit",loading:j})))))}},1617:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var n=t(547),c=t.n(n),r=t(0),l=t.n(r),i=t(27),o=t(30),s=t(50),m=t(4),u=t(954),d=t(1158);function h(e){var a=e.district,t=e.switchToView,n=e.onSave;return l.a.createElement(d.a,{initialValues:a,onSubmit:function(e,a){var c=a.setSubmitting;u.a.updateDistrict(e).then((function(){n(),t()})).catch((function(){c(!1),alert("Er is iets misgegaan met opslaan. Probeer het nogmaals")}))},cancelAction:t})}var f=t(20);function E(e){var a,t,n=e.district,c=e.switchToEdit;return l.a.createElement("div",{onClick:c},l.a.createElement(i.a,null,l.a.createElement(o.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Weergavenaam",value:n.name}),l.a.createElement(f.a,{label:"Standaard duur afspraak",value:n.defaultDurationMinutes+" minuten"})),l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Verstuur automatisch e-mail aan bewoner bij maken afspraak",value:n.sendEmailToContactWhenPlanned?"Ja":"Nee"}),l.a.createElement(f.a,{label:"E-mail template",value:null===(a=n.emailToContactTemplate)||void 0===a?void 0:a.name})),l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Verstuur automatisch e-mail aan coach bij maken afspraak",value:n.sendEmailToCoachWhenPlanned?"Ja":"Nee"}),l.a.createElement(f.a,{label:"E-mail template",value:null===(t=n.emailToCoachTemplate)||void 0===t?void 0:t.name})),l.a.createElement("div",{className:"row"},l.a.createElement(f.a,{label:"Status",value:n.closed?"Gesloten":"Open"})))))}function p(e){var a=e.district,t=e.onSave,n=Object(r.useState)(""),i=c()(n,2),o=i[0],s=i[1],m=Object(r.useState)(!1),u=c()(m,2),d=u[0],f=u[1];return l.a.createElement("div",{className:o,onMouseEnter:function(){return s("panel-grey")},onMouseLeave:function(){return s("")}},d?l.a.createElement(h,{district:a,switchToView:function(){return f(!1)},onSave:t}):l.a.createElement(E,{district:a,switchToEdit:function(){return f(!0)}}))}var v=t(54),g=t(35);function b(e){var a=e.district,t=e.coach,n=e.onDetach,i=Object(r.useState)(!1),o=c()(i,2),s=o[0],m=o[1],d=Object(r.useState)(!1),h=c()(d,2),f=h[0],E=h[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row border ".concat(s?"highlight-line":""),onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)}},l.a.createElement("div",{className:"col-sm-11"},t.fullName),l.a.createElement("div",{className:"col-sm-1"},s&&l.a.createElement("a",{role:"button",onClick:function(){return E(!0)}},l.a.createElement("span",{className:"glyphicon glyphicon-trash mybtn-danger"})))),f&&l.a.createElement(g.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:function(){return E(!1)},confirmAction:function(){u.a.detachDistrictCoach({districtId:a.id,coachId:t.id}).then((function(){n(),E(!1)})).catch((function(){alert("Er is iets misgegaan met het ontkoppelen van de coach.")}))},title:"Verwijderen"},l.a.createElement("p",null,"Wil je deze coach ontkoppelen van deze afspraakkalender?")))}var k=t(36),C=t(37),N=t(123),w=t(996);function S(e){var a=e.district,t=e.onCreate,n=e.onHide,s=Object(r.useState)([]),m=c()(s,2),d=m[0],h=m[1],f=Object(r.useState)(null),E=c()(f,2),p=E[0],v=E[1];Object(r.useEffect)((function(){w.a.getCoachPeek().then((function(e){h(e)})).catch((function(){alert("Er is iets misgegaan met ophalen van de coaches! Herlaad de pagina en probeer het nogmaals.")}))}),[]);var g=function(e){e.preventDefault(),u.a.attachDistrictCoach({districtId:a.id,coachId:p}).then((function(){t()})).catch((function(){alert("Er is iets misgegaan met het koppelen van de coach.")}))};return l.a.createElement("form",{className:"form-horizontal",onSubmit:g},l.a.createElement(i.a,{className:"panel-grey"},l.a.createElement(o.a,null,l.a.createElement("div",{className:"row"},l.a.createElement(k.a,{label:"Afspraakkalender",name:"afspraakKalender",value:a.name,readOnly:!0}),l.a.createElement(N.a,{label:"Coach",size:"col-sm-6",name:"coachId",options:d.filter((function(e){return!a.coaches.some((function(a){return a.id===e.id}))})),optionName:"name",value:p,onChangeAction:function(e){return v(e.target.value)},required:"required"})),l.a.createElement("div",{className:"pull-right btn-group",role:"group"},l.a.createElement(C.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:n}),l.a.createElement(C.a,{buttonText:"Opslaan",onClickAction:g,type:"submit",value:"Submit"})))))}function T(e){var a=e.district,t=e.onChange,n=Object(r.useState)(!1),s=c()(n,2),m=s[0],u=s[1];return l.a.createElement(i.a,null,l.a.createElement(v.a,null,l.a.createElement("span",{className:"h5 text-bold"},"Gekoppelde coaches"),l.a.createElement("a",{role:"button",className:"pull-right",onClick:function(){return u(!0)}},l.a.createElement("span",{className:"glyphicon glyphicon-plus"}))),l.a.createElement(o.a,null,l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"row border header"},l.a.createElement("div",{className:"col-sm-11"},"Naam"),l.a.createElement("div",{className:"col-sm-1"})),a.coaches.length>0?a.coaches.map((function(e){return l.a.createElement(b,{key:e.id,district:a,coach:e,onDetach:t})})):l.a.createElement("div",null,"Geen coaches bekend.")),l.a.createElement("div",{className:"col-md-12 margin-10-top"},m&&l.a.createElement(S,{district:a,onCreate:function(){u(!1),t()},onHide:function(){return u(!1)}}))))}function D(e){var a=e.district,t=e.onDelete,n=e.showDeleteModal,c=e.setShowDeleteModal;return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{iconName:"glyphicon-trash",onClickAction:function(){return c(!0)}}),n&&l.a.createElement(g.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:function(){return c(!1)},confirmAction:function(){u.a.deleteDistrict(a).then((function(){c(!1),t()})).catch((function(){alert("Er is iets misgegaan met het verwijderen van de afspraakkalender.")}))},title:"Verwijderen"},"Verwijder afspraakkalender: ",l.a.createElement("strong",null," ",a.name," ")))}function j(e){var a=Object(r.useState)({coaches:[]}),t=c()(a,2),n=t[0],d=t[1],h=Object(r.useState)(!1),f=c()(h,2),E=f[0],v=f[1];Object(r.useEffect)((function(){g()}),[]);var g=function(){u.a.fetchDistrictDetails(e.params.id).then((function(e){d(e)})).catch((function(){alert("Er is iets misgegaan met ophalen van de afspraakkalender.")}))};return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-9"},l.a.createElement("div",{className:"col-md-12 margin-10-top"},l.a.createElement(i.a,null,l.a.createElement(o.a,{className:"panel-small"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"btn-group",role:"group"},l.a.createElement(s.a,{iconName:"glyphicon-arrow-left",onClickAction:m.e.goBack}),l.a.createElement(D,{district:n,onDelete:m.e.goBack,setShowDeleteModal:v,showDeleteModal:E}),"                                    ")),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",{className:"text-center"},"Instellingen Afspraakkalender: ",n.name)),l.a.createElement("div",{className:"col-md-4"}))))),l.a.createElement("div",{className:"col-md-12 margin-10-top"},l.a.createElement(p,{district:n,onSave:g}),l.a.createElement(T,{district:n,onChange:g}))),l.a.createElement("div",{className:"col-md-3"}))}},954:function(e,a,t){"use strict";var n=t(2);a.a={fetchDistricts:function(){return n.a.get("district").then((function(e){return e.data}))},fetchDistrictDetails:function(e){return n.a.get("".concat("district","/").concat(e)).then((function(e){return e.data}))},fetchDistrictCalendarItems:function(e,a,t){return n.a.get("".concat("district","/").concat(e,"/calendar-items"),{params:{startDate:a,endDate:t}}).then((function(e){return e.data}))},newDistrict:function(e){return n.a.post("district",e).then((function(e){return e.data}))},updateDistrict:function(e){return n.a.post("".concat("district","/").concat(e.id),e)},deleteDistrict:function(e){return n.a.post("".concat("district","/").concat(e.id,"/delete"))},detachDistrictCoach:function(e){var a=e.districtId,t=e.coachId;return n.a.post("".concat("district","/").concat(a,"/coaches/").concat(t,"/detach"))},attachDistrictCoach:function(e){var a=e.districtId,t=e.coachId;return n.a.post("".concat("district","/").concat(a,"/coaches/").concat(t,"/attach"))}}},996:function(e,a,t){"use strict";var n=t(2),c="".concat(URL_API,"/api");a.a={getCoachPeek:function(){var e="".concat(c,"/coach-peek");return n.a.get(e).then((function(e){return e.data.data})).catch((function(e){console.log(e)}))},getProjectManagerPeek:function(){var e="".concat(c,"/project-manager-peek");return n.a.get(e).then((function(e){return e.data.data})).catch((function(e){console.log(e)}))},getExternalPartyPeek:function(){var e="".concat(c,"/external-party-peek");return n.a.get(e).then((function(e){return e.data.data})).catch((function(e){console.log(e)}))}}}}]);