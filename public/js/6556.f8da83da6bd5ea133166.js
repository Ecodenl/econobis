"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6556],{89271:(e,t,a)=>{a.d(t,{d:()=>n});var n="".concat(window.URL_API,"/api/oauth/ms-azure/callback")},36556:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(29439),r=a(67294),l=a(86706),i=a(9181),o=a(71840),m=a(21606),c=a(49332),s=a(98688),u=a(80720),d=a(14309),p=a(62265),g=a(19501),v=g.Ry().shape({name:g.Z_().required("Verplicht"),email:g.Z_().email("Ongeldige e-mail").required("Verplicht")}),h=g.Ry().shape({imapHost:g.Z_().required("Verplicht"),imapPort:g.Z_().required("Verplicht"),username:g.Z_().required("Verplicht")}),E=g.Ry().shape({smtpHost:g.Z_().required("Verplicht"),smtpPort:g.Z_().required("Verplicht"),username:g.Z_().required("Verplicht")}),S=g.Ry().shape({password:g.Z_().required("Verplicht")}),A=g.Ry().shape({mailgunDomainId:g.Z_().required("Verplicht").typeError("Verplicht")}),b=g.Ry().shape({oauthApiSettings:g.Ry().shape({clientId:g.Z_().trim().required("Verplicht"),projectId:g.Z_().trim().required("Verplicht"),tenantId:g.Z_().trim().required("Verplicht")})}),Z=g.Ry().shape({oauthApiSettings:g.Ry().shape({clientSecret:g.Z_().trim().required("Verplicht")})}),y=a(7250),q=a(30381),T=a.n(q),I=a(89271);const N=function(e){var t,a,n,l,o,m,c,d,p,g,v,h,E,S,A,b,Z=e.values,q=e.errors,T=e.touched,N=e.handleChange,w=e.handleBlur;return r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Microsoft Azure api instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Client id",name:"oauthApiSettings.clientId",value:null===(t=Z.oauthApiSettings)||void 0===t?void 0:t.clientId,onChangeAction:N,onBlurAction:w,required:"required",error:(null===(a=q.oauthApiSettings)||void 0===a?void 0:a.clientId)&&(null===(n=T.oauthApiSettings)||void 0===n?void 0:n.clientId),errorMessage:null===(l=q.oauthApiSettings)||void 0===l?void 0:l.clientId}),r.createElement(i.Z,{label:"Object ID",name:"oauthApiSettings.projectId",value:null===(o=Z.oauthApiSettings)||void 0===o?void 0:o.projectId,onChangeAction:N,onBlurAction:w,required:"required",error:(null===(m=q.oauthApiSettings)||void 0===m?void 0:m.projectId)&&(null===(c=T.oauthApiSettings)||void 0===c?void 0:c.projectId),errorMessage:null===(d=q.oauthApiSettings)||void 0===d?void 0:d.projectId})),r.createElement("div",{className:"row"},r.createElement(y.Z,{className:"form-group col-sm-6",label:"Redirect url",value:I.d}),r.createElement(i.Z,{type:"text",label:"Client secret waarde",name:"oauthApiSettings.clientSecret",value:null===(p=Z.oauthApiSettings)||void 0===p?void 0:p.clientSecret,className:"numeric-password",placeholder:"**********",onChangeAction:N,onBlurAction:w,required:"required",error:(null===(g=q.oauthApiSettings)||void 0===g?void 0:g.clientSecret)&&(null===(v=T.oauthApiSettings)||void 0===v?void 0:v.clientSecret),errorMessage:null===(h=q.oauthApiSettings)||void 0===h?void 0:h.clientSecret})),r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Tenant ID",name:"oauthApiSettings.tenantId",value:null===(E=Z.oauthApiSettings)||void 0===E?void 0:E.tenantId,onChangeAction:N,onBlurAction:w,required:"required",error:(null===(S=q.oauthApiSettings)||void 0===S?void 0:S.tenantId)&&(null===(A=T.oauthApiSettings)||void 0===A?void 0:A.tenantId),errorMessage:null===(b=q.oauthApiSettings)||void 0===b?void 0:b.tenantId}))))},w=(0,l.$j)((function(e){return{mailboxServerTypes:e.systemData.mailboxServerTypes,mailgunDomain:e.systemData.mailgunDomain}}))((function(e){var t,a=e.initialValues,l=e.processSubmit,g=e.mailgunDomain,q=e.mailboxServerTypes,I=e.switchToView,w=e.isNew,f=(0,r.useState)(a.incomingServerType),C=(0,n.Z)(f,2),M=C[0],x=C[1],P=(0,r.useState)(a.outgoingServerType),V=(0,n.Z)(P,2),k=V[0],B=V[1],D=(0,p.TA)({initialValues:a,validationSchema:(t=v,"imap"===M&&(t=t.concat(h),w&&(t=t.concat(S))),"smtp"===k&&(t=t.concat(E),w&&(t=t.concat(S))),"mailgun"===k&&(t=t.concat(A)),"ms-oauth"!==M&&"ms-oauth"!==k||(t=t.concat(b),w&&(t=t.concat(Z))),t),onSubmit:function(e,t){var a=t.setSubmitting;l(e,a)}}),_=D.values,F=D.errors,H=D.touched,L=D.handleChange,R=D.handleSubmit,z=D.setFieldValue,j=D.handleBlur,O=D.isSubmitting;return(0,r.useEffect)((function(){_.incomingServerType&&x(_.incomingServerType),_.outgoingServerType&&B(_.outgoingServerType)}),[_.incomingServerType,_.outgoingServerType]),r.createElement("form",{className:"form-horizontal",onSubmit:R},r.createElement(d.Z,null,r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Weergave Naam",name:"name",value:_.name,onChangeAction:L,onBlurAction:j,required:"required",error:F.name&&H.name,errorMessage:F.name}),r.createElement(i.Z,{label:"E-mail",name:"email",value:_.email,onChangeAction:L,onBlurAction:j,required:"required",error:F.email&&H.email,errorMessage:F.email})),r.createElement("div",{className:"row"},r.createElement(m.Z,{label:"Actief",name:"isActive",value:_.isActive,onChangeAction:function(e){e.persist(),z(e.target.name,e.target.checked)},disabled:_.primary}),r.createElement(m.Z,{label:"Primair (verzend wachtwoord mails)",name:"primary",value:_.primary,onChangeAction:function(e){e.persist(),z(e.target.name,e.target.checked)},disabled:!_.isActive})),r.createElement("div",{className:"row"},r.createElement(m.Z,{label:r.createElement("span",null,"Koppel contact op email ",r.createElement("u",null,"aan")," adres",r.createElement("br",null),r.createElement("small",{style:{color:"#ccc",fontWeight:"normal"}},"Koppeling contact standaard op email ",r.createElement("u",null,"afzender")," adres")),name:"linkContactFromEmailToAddress",value:_.linkContactFromEmailToAddress,onChangeAction:function(e){e.persist(),z(e.target.name,e.target.checked)}}))),r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Servergegevens"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(o.Z,{label:"Inkomende mail type",name:"incomingServerType",value:_.incomingServerType,options:q.incomingServerTypes,onChangeAction:L,emptyOption:!1,required:"required"}),r.createElement(o.Z,{label:"Uitgaande mail type",name:"outgoingServerType",value:_.outgoingServerType,options:q.outgoingServerTypes,onChangeAction:L,emptyOption:!1,required:"required"})),r.createElement("div",{className:"row"},"imap"===_.incomingServerType?r.createElement(i.Z,{label:"Inkomende IMAP host",name:"imapHost",value:_.imapHost,onChangeAction:L,onBlurAction:j,required:"required",error:F.imapHost&&H.imapHost,errorMessage:F.imapHost}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===_.outgoingServerType?r.createElement(i.Z,{label:"Uitgaande SMTP host",name:"smtpHost",value:_.smtpHost,onChangeAction:L,onBlurAction:j,required:"required",error:F.smtpHost&&H.smtpHost,errorMessage:F.smtpHost}):null,"mailgun"===_.outgoingServerType?r.createElement(o.Z,{label:"Uitgaand Mailgun domein",name:"mailgunDomainId",value:_.mailgunDomainId,options:g,optionName:"domain",onChangeAction:L,required:"required",error:F.mailgunDomainId&&H.mailgunDomainId,errorMessage:F.mailgunDomainId}):null)),("imap"===_.incomingServerType||"smtp"===_.outgoingServerType)&&r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Gebruikersnaam",name:"username",value:_.username,onChangeAction:L,onBlurAction:j,required:"required",error:F.username&&H.username,errorMessage:F.username}),r.createElement(i.Z,{type:"text",label:"Wachtwoord",name:"password",value:_.password,className:"numeric-password",placeholder:"**********",onChangeAction:L,onBlurAction:j,required:"required",error:F.password&&H.password,errorMessage:F.password})),r.createElement("div",{className:"row"},"imap"===_.incomingServerType?r.createElement(i.Z,{label:"Imap poort",name:"imapPort",value:_.imapPort,onChangeAction:L,onBlurAction:j,required:"required",error:F.imapPort&&H.imapPort,errorMessage:F.imapPort}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===_.outgoingServerType&&r.createElement(i.Z,{label:"Smtp poort",name:"smtpPort",value:_.smtpPort,onChangeAction:L,onBlurAction:j,required:"required",error:F.smtpPort&&H.smtpPort,errorMessage:F.smtpPort})),r.createElement("div",{className:"row"},"imap"===_.incomingServerType?r.createElement(o.Z,{label:"Imap versleutelde verbinding",name:"imapEncryption",value:_.imapEncryption,options:[{id:"ssl",name:"SSL"},{id:"ssl/novalidate-cert",name:"SSL - self-signed certificate"},{id:"tls",name:"TLS"}],onChangeAction:L}):r.createElement("div",{className:"form-group col-sm-6"}),"smtp"===_.outgoingServerType&&r.createElement(o.Z,{label:"Smtp versleutelde verbinding",name:"smtpEncryption",value:_.smtpEncryption,options:[{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"}],onChangeAction:L})),"imap"===_.incomingServerType&&r.createElement(r.Fragment,null,r.createElement("div",{className:"row"},r.createElement(i.Z,{label:"Inbox prefix",name:"imapInboxPrefix",value:_.imapInboxPrefix,onChangeAction:L,onBlurAction:j,error:F.imapInboxPrefix&&H.imapInboxPrefix,errorMessage:F.imapInboxPrefix})),r.createElement("div",{className:"row"},r.createElement(m.Z,{label:"Zet email als gelezen op server",name:"emailMarkAsSeen",value:_.emailMarkAsSeen,onChangeAction:L,onBlurAction:j}))))),("ms-oauth"===_.incomingServerType||"ms-oauth"===_.outgoingServerType)&&r.createElement(N,{values:_,errors:F,touched:H,handleChange:L,handleBlur:j}),"mailgun"===_.incomingServerType&&r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Mailgun instellingen"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(y.Z,{className:"form-group col-sm-12",labelSize:"col-sm-3",valueSize:"col-sm-9",label:"Forward email",value:_.inboundMailgunEmail?_.inboundMailgunEmail:"Nog niet bepaald",textToolTip:"Forward email "+_.email+" naar "+(_.inboundMailgunEmail?_.inboundMailgunEmail:"Nog niet bepaald")+" om deze in Econobis te ontvangen."})))),_.id&&r.createElement(r.Fragment,null,r.createElement(u.Z,null,r.createElement("span",{className:"h5"},r.createElement("strong",null,"Log"))),r.createElement(s.Z,null,r.createElement("div",{className:"row"},r.createElement(y.Z,{label:"Datum email laatst opgehaald",value:_.dateLastFetched?T()(_.dateLastFetched).format("L HH:mm:ss"):"Nog niet bepaald",className:"form-group col-sm-6"}),r.createElement(y.Z,{label:"UID email laatst opgehaald",value:_.imapIdLastFetched,className:"form-group col-sm-6"})))),r.createElement(s.Z,null,r.createElement("div",{className:"pull-right btn-group",role:"group"},_.id?r.createElement(r.Fragment,null,r.createElement(c.Z,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:I}),r.createElement(c.Z,{buttonText:"Opslaan",onClickAction:R,type:"submit",value:"Submit",loading:O})):r.createElement(c.Z,{buttonText:"Opslaan",onClickAction:R,type:"submit",value:"Submit",loading:O})))))}))}}]);