"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6670],{23932:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(61941);const o={fetchFreeFieldsFields:function(e,t,n){var o="".concat(URL_API,"/api/free-fields-field/grid");return a.A.get(o,{params:{filters:JSON.stringify(e),sorts:JSON.stringify(t),limit:n.limit,offset:n.offset}})},deleteFreeFieldsField:function(e){var t="".concat(URL_API,"/api/free-fields-field/").concat(e,"/delete");return a.A.post(t)},newFreeFieldsField:function(e){var t="".concat(URL_API,"/api/free-fields-field");return a.A.post(t,e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},fetchFreeFieldDetails:function(e){var t="".concat(URL_API,"/api/free-fields-field/").concat(e);return a.A.get(t).then((function(e){return e.data.data}))},updateFreeFieldsField:function(e){return a.A.post("".concat(URL_API,"/api/free-fields-field/").concat(e.id,"/update"),e)},fetchFilterFreeFieldsFieldsContact:function(){var e="".concat(URL_API,"/api/free-fields-field/get-for-filter/contacts");return a.A.get(e)},fetchFilterFreeFieldsFieldsAddress:function(){var e="".concat(URL_API,"/api/free-fields-field/get-for-filter/addresses");return a.A.get(e)},peekFreeFieldsTables:function(){var e="".concat(URL_API,"/api/free-fields-field/free-fields-tables/peek");return a.A.get(e)},peekFreeFieldsFieldFormats:function(){var e="".concat(URL_API,"/api/free-fields-field/free-fields-field-formats/peek");return a.A.get(e)},fetchFreeFieldsFieldRecords:function(e,t){var n="".concat(URL_API,"/api/free-fields-field-records/get-values");return a.A.get(n,{params:{table:e,recordId:t}}).then((function(e){return e.data}))},updateFreeFieldsFieldRecords:function(e,t){var n="".concat(URL_API,"/api/free-fields-field-records/update-values");return a.A.post(n,{data:{records:e,recordId:t}})}}},66670:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Le});var a=n(23029),o=n(92901),r=n(56822),s=n(53954),i=n(85501),l=n(64467),c=n(58168),d=n(96540),u=n(69733),p=n(17375),m=n(2543),h=n(95093),f=n.n(h),g=function(e,t,n,a,o,r){return{type:"FETCH_CONTACTS",filters:e,extraFilters:t,sorts:n,pagination:a,filterType:o,dataControleType:r}},C=function(){return{type:"CLEAR_CONTACTS"}},y=function(e){return{type:"SET_CHECKED_CONTACT_ALL",checkedValue:e}},F=function(e){return{type:"SET_NUMBER_FILTER",number:e}},E=function(e){return{type:"SET_TYPE_FILTER",typeId:e}},b=function(e){return{type:"SET_FULL_NAME_FILTER",fullName:e}},A=function(e){return{type:"SET_STREET_AND_NUMBER_FILTER",streetAndNumber:e}},v=function(e){return{type:"SET_POSTAL_CODE_FILTER",postalCode:e}},k=function(e){return{type:"SET_CITY_FILTER",city:e}},w=function(e){return{type:"SET_EMAIL_ADDRESS_FILTER",emailAddress:e}},S=function(e){return{type:"SET_PHONE_NUMBER_FILTER",phoneNumber:e}},N=function(e){return{type:"SET_VAT_NUMBER_FILTER",vatNumber:e}},T=function(e){return{type:"SET_CHAMBER_OF_COMMERCE_NUMBER",chamberOfCommerceNumber:e}},x=function(e){return{type:"SET_STATUS_FILTER",statusId:e}},D=function(e){return{type:"SET_CREATED_AT_FILTER",createdAt:e}},O=function(){return{type:"CLEAR_FILTER_CONTACTS"}},I=function(e){return{type:"SET_CONTACTS_PAGINATION",pagination:e}},M=n(23138),_=n(42285),R=n(45403),L=n(93913),P=n(9152),G=(n(26829),n(87722)),H=n(34527);const V=(0,u.Ng)(null,(function(e){return{setContactsSortsFilter:function(t,n){e(function(e,t){return{type:"SET_CONTACTS_SORTS_FILTER",field:e,order:t}}(t,n))}}}))((function(e){(0,d.useEffect)((function(){switch(e.dataControleType){case"zelfde-email-naam":t("fullName","ASC"),t("emailAddress","ASC");break;case"zelfde-email-adres":t("streetAndNumber","ASC"),t("postalCode","ASC"),t("emailAddress","ASC");break;case"zelfde-email":t("emailAddress","ASC");break;case"zelfde-adres":t("streetAndNumber","ASC"),t("postalCode","ASC");break;case"zelfde-iban":t("iban","ASC");break;case"zelfde-btwnummer":t("vatNumber","ASC");break;case"zelfde-kvknummer":t("chamberOfCommerceNumber","ASC")}}),[e.dataControleType]);var t=function(t,n){e.setContactsSortsFilter(t,n),setTimeout((function(){e.fetchContactsData()}),100)};return d.createElement("tr",{className:"thead-title"},e.showCheckbox||e.showCheckboxMerge?d.createElement("th",{width:"3%"}):null,d.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"number",title:"#",width:"5%",setSorts:t}),d.createElement(P.A,{RowClassName:"hidden-xs hidden-sm",sortColumn:"typeName",title:"Type",width:"7%",setSorts:t}),d.createElement(P.A,{sortColumn:"fullName",title:"Naam",width:"11%",setSorts:t}),d.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"streetAndNumber",title:"Adres",width:"12%",setSorts:t}),d.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"postalCode",title:"Postcode",width:"7%",setSorts:t}),d.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"city",title:"Plaats",width:"10%",setSorts:t}),d.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"emailAddress",title:"E-mail",width:"12%",setSorts:t}),d.createElement(P.A,{sortColumn:"phoneNumber",title:"Telefoon",width:"7%",setSorts:t}),"zelfde-iban"===e.dataControleType?d.createElement("th",{width:"7%"},"IBAN",d.createElement(G.Ay,{className:"pull-right small",size:14,icon:H.m,role:"button",onClick:t.bind(void 0,"iban","ASC")})):"","zelfde-btwnummer"===e.dataControleType?d.createElement(P.A,{sortColumn:"vatNumber",title:"BTW Nummer",width:"7%",setSorts:t}):"","zelfde-kvknummer"===e.dataControleType?d.createElement(P.A,{sortColumn:"chamberOfCommerceNumber",title:"KVK Nummer",width:"7%",setSorts:t}):"",d.createElement(P.A,{RowClassName:"hidden-xs hidden-sm",sortColumn:"createdAt",title:"Gemaakt op",width:"8%",setSorts:t}),d.createElement("th",{width:"3%"}))}));var z=n(7639);const U=(0,u.Ng)((function(e){return{filters:e.contacts.filters,contactStatuses:e.systemData.contactStatuses,contactTypes:e.systemData.contactTypes}}),(function(e){return(0,p.zH)({setNumberFilter:F,setTypeFilter:E,setFullNameFilter:b,setStreetAndNumberFilter:A,setPostalCodeFilter:v,setCityFilter:k,setEmailAddressFilter:w,setPhoneNumberFilter:S,setStatusFilter:x,setCreatedAtFilter:D,setVatNumberFilter:N,setChamberOfCommerceNumberFilter:T},e)}))((function(e){return d.createElement("tr",{className:"thead-filter"},e.showCheckbox&&d.createElement("td",null,d.createElement("input",{type:"checkbox",value:e.checkedAllCheckboxes,onChange:e.selectAllCheckboxes})),e.showCheckboxMerge&&d.createElement("td",null),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.number.data,onChange:function(t){e.setNumberFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs hidden-sm"},d.createElement("select",{className:"form-control input-sm",value:e.filters.typeId.data,onChange:function(t){e.setTypeFilter(t.target.value),setTimeout((function(){e.onSubmitFilter()}),100)}},d.createElement("option",null),e.contactTypes.map((function(e){return d.createElement("option",{key:e.id,value:e.id},e.name)})))),d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.fullName.data,onChange:function(t){e.setFullNameFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.streetAndNumber.data,onChange:function(t){e.setStreetAndNumberFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.postalCode.data,onChange:function(t){e.setPostalCodeFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.city.data,onChange:function(t){e.setCityFilter(t.target.value)}})),d.createElement("th",{className:"hidden-xs"},d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.emailAddress.data,onChange:function(t){e.setEmailAddressFilter(t.target.value)}})),d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.phoneNumber.data,onChange:function(t){e.setPhoneNumberFilter(t.target.value)}})),"zelfde-btwnummer"===e.dataControleType?d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.vatNumber.data,onChange:function(t){e.setVatNumberFilter(t.target.value)}})):"","zelfde-iban"===e.dataControleType?d.createElement("th",null):"","zelfde-kvknummer"===e.dataControleType?d.createElement("th",null,d.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.chamberOfCommerceNumber.data,onChange:function(t){e.setChamberOfCommerceNumberFilter(t.target.value)}})):"",d.createElement(z.A,{value:e.filters.createdAt.data&&e.filters.createdAt.data,onChangeAction:function(t){void 0===t?e.setCreatedAtFilter(""):e.setCreatedAtFilter(f()(t).format("Y-MM-DD"))}}),d.createElement("th",null))}));var j=n(47767),q=n(87696),Y=n(88505);function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var K=function(e){function t(e){var n,o,i,l;return(0,a.A)(this,t),o=this,i=t,l=[e],i=(0,s.A)(i),(n=(0,r.A)(o,B()?Reflect.construct(i,l||[],(0,s.A)(o).constructor):i.apply(o,l))).state={showActionButtons:!1,highlightRow:""},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"setCheckedContact",value:function(e){this.props.setCheckedContact(e)}},{key:"openItem",value:function(e){this.props.navigate("/contact/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.showCheckbox,a=t.showCheckboxMerge,o=t.checked,r=t.keepSelected,s=t.removeSelected,i=t.blockSelecting,l=t.id,c=t.number,u=t.typeId,p=t.typeName,m=t.fullName,h=t.streetAndNumber,g=t.postalCode,C=t.city,y=t.areaName,F=t.emailAddress,E=t.phoneNumber,b=(t.statusName,t.createdAt),A=t.permissions,v=t.iban,k=t.vatNumber,w=t.chamberOfCommerceNumber;return d.createElement("tr",{className:r?"success-row":s?"error-row":this.state.highlightRow,onDoubleClick:function(){return n||a?void 0:e.openItem(l)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},n&&d.createElement("td",null,d.createElement("input",{type:"checkbox",checked:o,onChange:function(){return e.setCheckedContact(l)}})),a&&d.createElement("td",null,!i&&d.createElement("input",{type:"checkbox",checked:o,onChange:function(){return e.setCheckedContact(l)}})),d.createElement("td",{className:"hidden-xs"},c),d.createElement("td",{className:"hidden-xs hidden-sm"},p," "),d.createElement("td",null,m),d.createElement("td",{className:"hidden-xs"},h),d.createElement("td",{className:"hidden-xs"},g),d.createElement("td",{className:"hidden-xs",title:"Buurt: "+(y||"onbekend")},C),d.createElement("td",{className:"hidden-xs"},F),d.createElement("td",null," ",E),"zelfde-iban"===this.props.dataControleType?d.createElement("td",{className:"hidden-xs"},v):"","zelfde-btwnummer"===this.props.dataControleType?d.createElement("td",{className:"hidden-xs"},k):"","zelfde-kvknummer"===this.props.dataControleType?d.createElement("td",{className:"hidden-xs"},w):"",d.createElement("td",{className:"hidden-xs hidden-sm"},f()(b).format("DD-MM-Y")),d.createElement("td",null,this.state.showActionButtons?d.createElement("a",{role:"button",onClick:function(){return e.openItem(l)}},d.createElement(G.Ay,{className:"mybtn-success",size:14,icon:Y.w})):"",this.state.showActionButtons?d.createElement(d.Fragment,null,"organisation"===u&&A&&A.deleteOrganisation&&d.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,l,m)},d.createElement(G.Ay,{className:"mybtn-danger",size:14,icon:q.d})),"person"===u&&A&&A.deletePerson&&d.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,l,m)},d.createElement(G.Ay,{className:"mybtn-danger",size:14,icon:q.d}))):""))}}])}(d.Component);const W=(0,u.Ng)((function(e){return{statuses:e.statuses,types:e.types,permissions:e.meDetails.permissions}}),(function(e){return{setCheckedContact:function(t){e(function(e){return{type:"SET_CHECKED_CONTACT",id:e}}(t))}}}))((function(e){var t=(0,j.Zp)();return d.createElement(K,(0,c.A)({},e,{navigate:t}))}));var J=n(63750);const Z=(0,u.Ng)(null,(function(e){return{deleteContact:function(t){e(function(e){return{type:"DELETE_CONTACT",id:e}}(t))}}}))((function(e){return d.createElement(J.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteContact(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},d.createElement("p",null,"Verwijder contact: ",d.createElement("strong",null," ",e.fullName," ")))}));var X=n(74850);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}var te=function(e){function t(e){var n,o,i,c;return(0,a.A)(this,t),o=this,i=t,c=[e],i=(0,s.A)(i),n=(0,r.A)(o,ee()?Reflect.construct(i,c||[],(0,s.A)(o).constructor):i.apply(o,c)),(0,l.A)(n,"handleKeyUp",(function(e){13===e.keyCode&&n.props.onSubmitFilter()})),(0,l.A)(n,"showDeleteItemModal",(function(e,t){n.setState($($({},n.state),{},{showDeleteItem:!0,deleteItem:$($({},n.state.deleteItem),{},{id:e,fullName:t})}))})),(0,l.A)(n,"closeDeleteItemModal",(function(){n.setState($($({},n.state),{},{showDeleteItem:!1,deleteItem:$($({},n.state.deleteItem),{},{id:"",fullName:""})}))})),n.state={showDeleteItem:!1,deleteItem:{id:"",fullName:""}},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this,t=this.props.contacts,n=t.data,a=void 0===n?[]:n,o=t.meta,r=void 0===o?{}:o,s=null,i=null,l=0;if(this.props.showCheckboxListMerge){var u=a.filter((function(e){return e.checked})).sort((function(e,t){return e.checkedAt-t.checkedAt}));s=u[0]?Number(u[0].id):null,i=u[1]?Number(u[1].id):null,a.map((function(e){return!0===e.checked&&l++}))}var p="",m=!0;return this.props.hasError?p="Fout bij het ophalen van contacten.":this.props.isLoading?p="Gegevens aan het laden.":0===a.length?p="Geen contacten gevonden!":m=!1,d.createElement("div",null,d.createElement("form",{onKeyUp:this.handleKeyUp},d.createElement(_.A,null,d.createElement(R.A,null,d.createElement(V,{showCheckbox:this.props.showCheckboxList,showCheckboxMerge:this.props.showCheckboxListMerge,fetchContactsData:function(){return e.props.fetchContactsData()},dataControleType:this.props.dataControleType}),d.createElement(U,{showCheckbox:this.props.showCheckboxList,showCheckboxMerge:this.props.showCheckboxListMerge,selectAllCheckboxes:function(){return e.props.selectAllCheckboxes()},onSubmitFilter:this.props.onSubmitFilter,dataControleType:this.props.dataControleType})),d.createElement(L.A,null,m?d.createElement("tr",null,d.createElement("td",{colSpan:10},p)):a.map((function(t){return d.createElement(W,(0,c.A)({key:t.id},t,{showCheckbox:e.props.showCheckboxList,showCheckboxMerge:e.props.showCheckboxListMerge,checkedAllCheckboxes:e.props.checkedAllCheckboxes,dataControleType:e.props.dataControleType,showDeleteItemModal:e.showDeleteItemModal,keepSelected:t.id===s,removeSelected:t.id===i,blockSelecting:t.id!==s&&t.id!==i&&2===l}))})))),d.createElement("div",{className:"col-md-6 col-md-offset-3"},d.createElement(X.A,{onPageChangeAction:this.props.handlePageClick,totalRecords:r.total,initialPage:this.props.contactsPagination.page}))),this.state.showDeleteItem&&d.createElement(Z,(0,c.A)({closeDeleteItemModal:this.closeDeleteItemModal},this.state.deleteItem)))}}])}(d.Component);const ne=(0,u.Ng)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(te);var ae=n(84976),oe=n(91858);const re=(0,u.Ng)((function(e){return{contacts:e.contacts.list.data}}),(function(e){return{deleteSelectedContacts:function(t){e(function(e){return{type:"DELETE_SELECTED_CONTACTS",contactIds:e}}(t))}}}))((function(e){var t=function(){var t=0;return e.contacts.map((function(e){return!0===e.checked&&t++})),t};return d.createElement(J.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.toggleShowDeleteSelectedItems,confirmAction:function(){return t=[],e.contacts.map((function(e){return!0===e.checked&&t.push(e.id)})),e.deleteSelectedContacts(t),void e.toggleShowDeleteSelectedItems();var t},title:"Verwijderen"},0!==t()?d.createElement("div",null,"Verwijder de geselecteerde ",d.createElement("strong",null,t())," contacten?"):d.createElement("div",null,"Geen contacten geselecteerd."))}));var se=n(60738),ie=n(14809);function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}var ce=function(e){function t(e){var n,o,i,c;return(0,a.A)(this,t),o=this,i=t,c=[e],i=(0,s.A)(i),n=(0,r.A)(o,le()?Reflect.construct(i,c||[],(0,s.A)(o).constructor):i.apply(o,c)),(0,l.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,o=t.name;n.setState((0,l.A)({},o,a))})),(0,l.A)(n,"handleSubmit",(function(e){var t=[];n.props.contacts.map((function(e){return!0===e.checked&&t.push(e.id)})),se.A.addManyContactsToGroup(t,n.state.groupId).then((function(e){n.props.toggleAddGroup(),n.props.navigate("/contacten-in-groep/".concat(n.state.groupId))}))})),n.state={contactGroups:[],groupId:"",contactCount:0,contactIds:"",errors:{groupId:!1}},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=this;se.A.peekStaticContactGroups().then((function(t){e.setState({contactGroups:t})}));var t=0;this.props.contacts.map((function(e){return!0===e.checked&&t++})),this.setState({contactCount:t})}},{key:"render",value:function(){return d.createElement(J.A,{buttonConfirmText:"Toevoegen",closeModal:this.props.toggleAddGroup,confirmAction:this.handleSubmit,title:"Contacten toevoegen aan groep"},0!==this.state.contactCount?d.createElement("div",{className:"row"},d.createElement(ie.A,{size:"col-md-12",label:"Voeg ".concat(this.state.contactCount," contact(en) toe aan groep:"),name:"groupId",options:this.state.contactGroups,value:this.state.groupId,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.groupId})):d.createElement("div",null,"Geen contacten geselecteerd."))}}])}(d.Component);const de=(0,u.Ng)((function(e){return{contactDetails:e.contactDetails,contacts:e.contacts.list.data}}),null)((function(e){var t=(0,j.Zp)();return d.createElement(ce,(0,c.A)({},e,{navigate:t}))}));var ue=n(41904),pe=n(23384),me=n(46161),he=n(5544),fe=n(93822);const ge=function(e){var t=e.contacts,n=e.fetchContactsData,a=e.toggleShowMergeSelectedItems,o=(0,d.useState)(""),r=(0,he.A)(o,2),s=r[0],i=r[1],l=(0,d.useState)([]),c=(0,he.A)(l,2),u=c[0],p=c[1],m=t.data.filter((function(e){return e.checked})).sort((function(e,t){return e.checkedAt-t.checkedAt})).map((function(e){return e.id})),h=t.data.find((function(e){return e.id===Number(m[0])})),f=t.data.find((function(e){return e.id===Number(m[1])})),g=function(){var e=0;return t.data.map((function(t){return!0===t.checked&&e++})),e};return d.createElement("div",null,u.length?d.createElement(J.A,{buttonConfirmText:"Samenvoegen",buttonClassName:"btn-danger",closeModal:a,showConfirmAction:!1,title:"Contacten samenvoegen"},d.createElement("p",null,s),d.createElement("ul",null,u.map((function(e){return d.createElement("li",null,e)})))):d.createElement(J.A,{buttonConfirmText:"Samenvoegen",buttonClassName:"btn-danger",closeModal:a,confirmAction:function(){fe.A.mergeContacts(m[0],m[1]).then((function(){i("Contacten zijn succesvol samengevoegd"),n(),setTimeout(a,2e3)})).catch((function(e){if(e.response&&422===e.response.status){if(e.response.data&&e.response.data.errors)e.response.data.errors.econobis&&e.response.data.errors.econobis.length&&(i("Fout bij samenvoegen contacten:"),p(e.response.data.errors.econobis));else if(e.response.data&&e.response.data.message){i("Er is iets misgegaan bij het samenvoegen contacten ("+e.response.status+").");var t=[];if(Array.isArray(e.response.data.message))for(var n=0,a=Object.entries(JSON.parse(e.response.data.message));n<a.length;n++){var o=(0,he.A)(a[n],2),r=(o[0],o[1]);t.push("".concat(r))}else t.push(e.response.data.message);p(t)}}else i("Er is iets misgegaan bij het samenvoegen contacten."),p(["Onbekende fout"])}))},showConfirmAction:2===g(),title:"Contacten samenvoegen"},2===g()?d.createElement("div",null,"Weet je zeker dat je deze 2 contacten wilt samenvoegen? ",d.createElement("br",null),"Gegevens worden overgenomen naar het eerst geselecteerde contact"," ",d.createElement("strong",null,h.number),", het tweede geselecteerde contact"," ",d.createElement("strong",null,f.number)," wordt verwijderd."):d.createElement("div",null,"Selecteer exact 2 contacten om te kunnen samenvoegen.")))};var Ce=n(26819);function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}var Fe=function(e){function t(e){var n,o,i,c;return(0,a.A)(this,t),o=this,i=t,c=[e],i=(0,s.A)(i),n=(0,r.A)(o,ye()?Reflect.construct(i,c||[],(0,s.A)(o).constructor):i.apply(o,c)),(0,l.A)(n,"toggleShowDeleteSelectedItems",(function(){n.setState({showDeleteSelectedItems:!n.state.showDeleteSelectedItems})})),(0,l.A)(n,"toggleShowMergeSelectedItems",(function(){n.setState({showMergeSelectedItems:!n.state.showMergeSelectedItems})})),(0,l.A)(n,"toggleAddContactsToGroup",(function(){n.setState({showAddContactsToGroup:!n.state.showAddContactsToGroup})})),(0,l.A)(n,"newContact",(function(){n.props.navigate("/contact/nieuw")})),(0,l.A)(n,"importContacts",(function(){n.props.navigate("/contact/import")})),n.state={showDeleteSelectedItems:!1,showMergeSelectedItems:!1,showAddContactsToGroup:!1},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props.meDetails.permissions,t=void 0===e?{}:e,n=this.props.contacts.meta,a=void 0===n?{}:n,o=this.props,r=o.dataControleType,s=void 0!==r&&r,i=o.showCheckboxList,l=void 0!==i&&i,c=o.showCheckboxListMerge,u=void 0!==c&&c;return d.createElement(d.Fragment,null,d.createElement("div",{className:"row"},d.createElement("div",{className:"col-md-4"},d.createElement("div",{className:"btn-group",role:"group"},d.createElement(oe.A,{iconName:"refresh",onClickAction:this.props.resetContactFilters,title:"Vernieuwen scherm"}),s||u||!(t.createPerson||t.createOrganisation||t.manageGroup)?null:d.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},d.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown",title:"Toevoegen contact of groep"},d.createElement(G.Ay,{size:14,icon:pe.t})),d.createElement("ul",{className:"dropdown-menu"},t.createPerson&&d.createElement("li",null,d.createElement(ae.N_,{to:"/contact/nieuw/persoon"},"Persoon")),t.createOrganisation&&d.createElement("li",null,d.createElement(ae.N_,{to:"/contact/nieuw/organisatie"},"Organisatie")),t.manageGroup&&d.createElement("li",null,d.createElement(ae.N_,{role:"button",onClick:this.props.toggleSaveAsGroup},"Groep")))),!s&&!u&&(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&d.createElement(oe.A,{iconName:"check",onClickAction:this.props.toggleShowCheckboxList,title:"Contactselectie maken"}),!s&&l&&t.updatePerson&&t.updateOrganisation&&t.manageGroup&&d.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},d.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown",title:"Contactselectie toevoegen aan groep"},d.createElement(G.Ay,{size:14,icon:me.u})),d.createElement("ul",{className:"dropdown-menu"},d.createElement("li",null,d.createElement("a",{role:"button",onClick:this.toggleAddContactsToGroup},"Voeg toe aan groep")))),!s&&l&&(t.deletePerson||t.deleteOrganisation)&&d.createElement(oe.A,{iconName:"trash",onClickAction:this.toggleShowDeleteSelectedItems,title:"Verwijderen geselecteerde contacten"}),!s&&!l&&!u&&d.createElement(oe.A,{iconName:"filter",onClickAction:this.props.toggleShowExtraFilters,title:"Contactfilters"}),!l&&!u&&t.downloadContact&&d.createElement(oe.A,{iconName:"download",onClickAction:this.props.getCSV,title:"Downloaden contacten naar CSV"}),!s&&!l&&!u&&t.downloadContact&&d.createElement(oe.A,{iconName:"download",onClickAction:this.props.getFreeFieldsCSV,title:"Downloaden vrije velden van contacten naar CSV"}),!s&&!l&&!u&&t.downloadContact&&d.createElement(oe.A,{iconName:"download",onClickAction:this.props.getEnergySuppliersCSV,title:"Downloaden contacten energieleveranciers gegevens naar CSV"}),!s&&!l&&!u&&t.import&&d.createElement(oe.A,{iconName:"upload",onClickAction:this.importContacts,title:"Importeren contacten"}),!s&&!l&&!u&&t.downloadContactConsumption&&a.useExportAddressConsumption&&d.createElement(d.Fragment,null,d.createElement("a",{role:"button",className:"btn btn-success btn-sm",onClick:this.props.getExcelAddressEnergyConsumptionElectricity,title:"Downloaden elektriciteit verbruik"},d.createElement(ue.z5h,{width:"13px",height:"12px"})),d.createElement("a",{role:"button",className:"btn btn-success btn-sm",onClick:this.props.getExcelAddressEnergyConsumptionGas,title:"Downloaden gas verbruik"},d.createElement(ue.Itl,{width:"13px",height:"12px"}))),!l&&(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&d.createElement(oe.A,{iconName:"check",onClickAction:this.props.toggleShowCheckboxListMerge,title:"Contacten samenvoegen selectie"}),u&&(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&d.createElement(oe.A,{iconName:"compress",onClickAction:this.toggleShowMergeSelectedItems,title:"Contacten samenvoegen"}))),d.createElement("div",{className:"col-md-4"},d.createElement("h3",{className:"text-center table-title"},"Contacten ",function(){if(s)switch(s){case"zelfde-email-naam":return"(met zelfde email en naam)";case"zelfde-email-adres":return"(met zelfde email en adres)";case"zelfde-email":return"(met zelfde email)";case"zelfde-adres":return"(met zelfde adres)";case"zelfde-kvknummer":return"(met zelfde kvk nummer)";case"zelfde-btwnummer":return"(met zelfde btw nummer)";case"zelfde-iban":return"(met zelfde iban)"}return""}(),s&&d.createElement(d.Fragment,null," ",d.createElement(ue.__w,{color:"blue",size:"15px","data-tip":"Hier staan de contacten die op basis van het geselecteerde criterium als dubbel zijn gevonden.  Je kan deze ontdubbelen door op het de blauwe knop met het vinkje te klikken. (Contacten samenvoegen selectie) Als je twee contacten hebt geselecteerd kan je die samenvoegen door op de blauwe knop met twee pijltjes te klikken (Contacten samenvoegen) Hiermee worden de gegevens van het contact wat groen gemarkeerd is aangevuld. Het rood gemarkeerde contact wordt verwijderd.","data-for":"tooltip-note"}),d.createElement(Ce.A,{id:"tooltip-note",effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})))),d.createElement("div",{className:"col-md-4"},d.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)),this.state.showDeleteSelectedItems&&d.createElement(re,{toggleShowDeleteSelectedItems:this.toggleShowDeleteSelectedItems}),this.state.showAddContactsToGroup&&d.createElement(de,{toggleAddGroup:this.toggleAddContactsToGroup}),this.state.showMergeSelectedItems&&d.createElement(ge,{toggleShowMergeSelectedItems:this.toggleShowMergeSelectedItems,contacts:this.props.contacts,fetchContactsData:this.props.fetchContactsData})),s||l||u||!this.props.cooperationExternalUrlContacts||!this.props.cooperationExternalUrlContacts.show_external_url_for_contacts?null:d.createElement("div",{className:"row"},d.createElement("div",{className:"col-md-12",style:{marginTop:"10px"}},d.createElement(d.Fragment,null," ",d.createElement("div",{className:"btn-group",role:"group"},d.createElement("a",{role:"button",className:"btn btn-success btn-sm",href:this.props.cooperationExternalUrlContacts.external_url_contacts?this.props.cooperationExternalUrlContacts.external_url_contacts:"",title:this.props.cooperationExternalUrlContacts.external_url_contacts_button_text?this.props.cooperationExternalUrlContacts.external_url_contacts_button_text:"EXterne link",target:this.props.cooperationExternalUrlContacts.external_url_contacts_on_new_page?"_blank":"_self"},this.props.cooperationExternalUrlContacts.external_url_contacts_button_text?this.props.cooperationExternalUrlContacts.external_url_contacts_button_text:"EXterne link"))))))}}])}(d.Component);const Ee=(0,u.Ng)((function(e){return{meDetails:e.meDetails,contacts:e.contacts.list,cooperationExternalUrlContacts:e.systemData.cooperationExternalUrlContacts}}),null)((function(e){var t=(0,j.Zp)();return d.createElement(Fe,(0,c.A)({},e,{navigate:t}))}));var be=n(19737),Ae=n(5419),ve=n.n(Ae);const ke=function(e){return d.createElement(J.A,{buttonConfirmText:"Aanmaken",buttonClassName:"btn-success",closeModal:e.closeDeleteItemModal,confirmAction:function(){e.saveAsGroup()},title:"Groep aanmaken"},"Wilt u een groep aanmaken op basis van de huidige filters?")};var we=n(940),Se=n(55956),Ne=n(23932);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}var Oe=function(e){function t(e){var n,o,i,l;return(0,a.A)(this,t),o=this,i=t,l=[e],i=(0,s.A)(i),(n=(0,r.A)(o,De()?Reflect.construct(i,l||[],(0,s.A)(o).constructor):i.apply(o,l))).state={filterType:e.filterType,contactType:e.contactType,amountOfFilters:e.amountOfFilters,filters:e.extraFilters,contactFreeFieldsFields:null,addressFreeFieldsFields:null,measuresToSelect:e.measures.filter((function(e){return 1===e.visible})),yesNoOptions:[{id:0,name:"Nee"},{id:1,name:"Ja"}],allNoYesOptions:[{id:0,name:"--Willekeurige waarde--"},{id:1,name:"Nee"},{id:2,name:"Ja"}]},n.fetchFilterFreeFieldsFieldsContact(),n.fetchFilterFreeFieldsFieldsAddress(),n.closeModal=n.closeModal.bind(n),n.confirmAction=n.confirmAction.bind(n),n.handleFilterFieldChange=n.handleFilterFieldChange.bind(n),n.handleFilterTypeChange=n.handleFilterTypeChange.bind(n),n.handleFilterValueChange=n.handleFilterValueChange.bind(n),n.addFilterRow=n.addFilterRow.bind(n),n.deleteFilterRow=n.deleteFilterRow.bind(n),n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"fetchFilterFreeFieldsFieldsContact",value:function(){var e=this;Ne.A.fetchFilterFreeFieldsFieldsContact().then((function(t){e.setState(xe(xe({},e.state),{},{contactFreeFieldsFields:t.data.data}))}))}},{key:"fetchFilterFreeFieldsFieldsAddress",value:function(){var e=this;Ne.A.fetchFilterFreeFieldsFieldsAddress().then((function(t){e.setState(xe(xe({},e.state),{},{addressFreeFieldsFields:t.data.data}))}))}},{key:"closeModal",value:function(){this.props.toggleShowExtraFilters()}},{key:"confirmAction",value:function(){this.props.handleExtraFiltersChange(this.state.filters,this.state.amountOfFilters,this.state.filterType)}},{key:"handleFilterFieldChange",value:function(e,t){var n=this.state.filters,a=this.state.amountOfFilters;"product"!==n[t].field&&"opportunityMeasureCategory"!==n[t].field&&"intakeMeasureCategory"!==n[t].field&&"housingFileFieldName"!==n[t].field&&"contactFreeFieldsFieldName"!==n[t].field&&"addressFreeFieldsFieldName"!==n[t].field&&"addressDongleTypeReadOut"!==n[t].field||(delete(n=n.filter((function(e){return e.connectedTo!==n[t].connectName})))[t].connectName,a=n.length),"product"===e?(n[t]={field:"product",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"dateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"dateFinish",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"orderStatus",type:"eq",data:"",connectedTo:e+t}),a=n.length):"opportunityMeasureCategory"===e?(n[t]={field:"opportunityMeasureCategory",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"opportunityStatus",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"opportunityMeasure",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"opportunityEvaluationRealised",type:"eq",data:"",connectedTo:e+t}),n.splice(t+4,0,{field:"opportunityCampaign",type:"eq",data:"",connectedTo:e+t}),a=n.length):"intakeMeasureCategory"===e?(n[t]={field:"intakeMeasureCategory",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"intakeDateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"intakeDateFinish",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"intakeStatus",type:"eq",data:"",connectedTo:e+t}),a=n.length):"housingFileFieldName"===e?(n[t]={field:"housingFileFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"housingFileFieldValue",type:"eq",data:"",connectedTo:e+t,housingFileField:""}),a=n.length):"contactFreeFieldsFieldName"===e?(n[t]={field:"contactFreeFieldsFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"contactFreeFieldsFieldValue",type:"eq",data:"",connectedTo:e+t,freeFieldFormatType:""}),a=n.length):"addressFreeFieldsFieldName"===e?(n[t]={field:"addressFreeFieldsFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"addressFreeFieldsFieldValue",type:"eq",data:"",connectedTo:e+t,freeFieldFormatType:""}),a=n.length):"addressDongleTypeReadOut"===e?(n[t]={field:"addressDongleTypeReadOut",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"addressDongleTypeDongle",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"addressDongleDateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"addressDongleDateEnd",type:"eq",data:"",connectedTo:e+t}),n.splice(t+4,0,{field:"addressDongleHasEnergyId",type:"eq",data:"",connectedTo:e+t}),a=n.length):(n[t].field=e,n[t].data=""),this.setState(xe(xe({},this.state),{},{filters:n,amountOfFilters:a}))}},{key:"handleFilterTypeChange",value:function(e){this.setState(xe(xe({},this.state),{},{filterType:e}))}},{key:"handleFilterValueChange",value:function(e,t,n){var a=this.state.filters;if(a[n][e]=t,"housingFileFieldName"===a[n].field&&a[n].data){var o=this.props.housingFileHoomLinks.find((function(e){return e.key===Number(a[n].data)}));if(o){var r=a[n].connectName;a.map((function(e){return e.connectedTo===r&&(e.data="",e.type="eq",e.housingFileField=o.externalHoomShortName),e}))}}if("contactFreeFieldsFieldName"===a[n].field){var s="";if(a[n].data){var i=this.state.contactFreeFieldsFields.find((function(e){return e.id===Number(a[n].data)}));i&&(s=i.formatType)}var l=a[n].connectName;a.map((function(e){return e.connectedTo===l&&(e.data="",e.type="eq",e.freeFieldFormatType=s),e}))}if("addressFreeFieldsFieldName"===a[n].field){var c="";if(a[n].data){var d=this.state.addressFreeFieldsFields.find((function(e){return e.id===Number(a[n].data)}));d&&(c=d.formatType)}var u=a[n].connectName;a.map((function(e){return e.connectedTo===u&&(e.data="",e.type="eq",e.freeFieldFormatType=c),e}))}var p=this.state.measuresToSelect;"opportunityMeasureCategory"===a[n].field&&(p=a[n].data?this.props.measures.filter((function(e){return 1===e.visible&&e.measureCategoryId==a[n].data})):this.props.measures.filter((function(e){return 1===e.visible}))),this.setState(xe(xe({},this.state),{},{filters:a,measuresToSelect:p}))}},{key:"addFilterRow",value:function(){var e=this,t=this.state.filters;t[this.state.amountOfFilters]={field:"name",type:"eq",data:""},setTimeout((function(){e.setState(xe(xe({},e.state),{},{filters:t}))}),300),setTimeout((function(){e.setState({amountOfFilters:e.state.amountOfFilters+1})}),300)}},{key:"deleteFilterRow",value:function(e){var t=this.state.filters;"product"!==t[e].field&&"opportunityMeasureCategory"!==t[e].field&&"intakeMeasureCategory"!==t[e].field&&"housingFileFieldName"!==t[e].field&&"contactFreeFieldsFieldName"!==t[e].field&&"addressFreeFieldsFieldName"!==t[e].field||(t=t.filter((function(n){return n.connectedTo!==t[e].connectName}))),t.splice(e,1),this.setState(xe(xe({},this.state),{},{filters:t,amountOfFilters:t.length}))}},{key:"render",value:function(){var e=this,t={name:{name:"Naam",type:"stringWithoutNull"},postalCode:{name:"Postcode",type:"numberOrString"},sharedArea:{name:"Buurt",type:"searchWithAsync"},city:{name:"Woonplaats",type:"stringWithoutNull"},country:{name:"Land",type:"dropdown",dropDownOptions:this.props.countries},hasEmailAddress:{name:"Heeft emailadres",type:"boolean",dropDownOptions:this.state.yesNoOptions},hasPhoneNumber:{name:"Heeft telefoonnummer",type:"boolean",dropDownOptions:this.state.yesNoOptions},dateOfBirth:{name:"Geboortedatum",type:"date"},createdAt:{name:"Gemaakt op",type:"date"},staticContactGroup:{name:"Statische groep",type:"dropdownHas",dropDownOptions:this.props.staticContactGroups},occupation:{name:"Verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},occupationPrimary:{name:"Primaire verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},campaign:{name:"Campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns},intakeMeasureCategory:{name:"Intake interesse",type:"dropdownHas",dropDownOptions:this.props.measureCategories},opportunityMeasureCategory:{name:"Kans maatregel categorie",type:"dropdownHas",dropDownOptions:this.props.measureCategories},quotationRequestStatusOrganisationOrCoach:{name:"Kansactie status (org/coach)",type:"dropdownHas",dropDownOptions:this.props.quotationRequestStatus},quotationRequestStatusOccupant:{name:"Kansactie status (bewoner)",type:"dropdownHas",dropDownOptions:this.props.quotationRequestStatus},housingFileExists:{name:"Woningdossier aanwezig",type:"boolean",dropDownOptions:this.state.yesNoOptions},housingFileFieldName:{name:"Woningdossier kenmerk",type:"dropdownHousingFileFields",dropDownOptions:this.props.housingFileHoomLinks},hoomdossierExists:{name:"Hoomdossier aangemaakt",type:"boolean",dropDownOptions:this.state.yesNoOptions},contactFreeFieldsFieldName:{name:"Vrij veld contact",type:"dropdownFreeFieldsFields",dropDownOptions:this.state.contactFreeFieldsFields?this.state.contactFreeFieldsFields:[]},addressFreeFieldsFieldName:{name:"Vrij veld adres",type:"dropdownFreeFieldsFields",dropDownOptions:this.state.addressFreeFieldsFields?this.state.addressFreeFieldsFields:[]},product:{name:"Product",type:"dropdownHas",dropDownOptions:this.props.products},energySupplier:{name:"Huidige Energie leverancier",type:"dropdown",dropDownOptions:this.props.energySuppliers},energySupplierType:{name:"Type huidige energie leverancier",type:"dropdownHas",dropDownOptions:this.props.energySupplierTypes},currentObligations:{name:"Huidig aantal obligaties",type:"number"},currentParticipations:{name:"Huidig aantal participaties",type:"number"},currentPostalcodeLinkCapital:{name:"Huidig aantal postcoderoos",type:"number"},currentLoan:{name:"Huidig bedrag lening",type:"number"},portalUser:{name:"Portal gebruiker actief",type:"boolean",dropDownOptions:this.state.yesNoOptions},inspectionPersonType:{name:"Rol in buurtaanpak",type:"dropdownHas",dropDownOptions:this.props.inspectionPersonTypes},didAgreeAvg:{name:"Akkoord privacybeleid",type:"boolean",dropDownOptions:this.state.yesNoOptions},addressDongleTypeReadOut:{name:"Dongel type uitlezing",type:"dropdownHas",dropDownOptions:this.props.typesReadOut}},n={dateStart:{name:"Begin datum",type:"date"},dateFinish:{name:"Eind datum",type:"date"},orderStatus:{name:"Order status",type:"dropdownHas",dropDownOptions:this.props.orderStatuses}},a={opportunityStatus:{name:"Kans status",type:"dropdownHas",dropDownOptions:this.props.opportunityStatus},opportunityMeasure:{name:"Kans maatregel specifiek",type:"dropdownHas",dropDownOptions:this.state.measuresToSelect},opportunityEvaluationRealised:{name:"Kans status evaluatie uitgevoerd",type:"dropdownHas",dropDownOptions:this.props.opportunityEvaluationStatuses},opportunityCampaign:{name:"Kans campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns}},o={intakeDateStart:{name:"Begin datum",type:"date"},intakeDateFinish:{name:"Eind datum",type:"date"},intakeStatus:{name:"Intake status",type:"dropdownHas",dropDownOptions:this.props.intakeStatuses}},r={housingFileFieldValue:{name:"Status/waarde",type:"housingFileFieldValue"}},s={contactFreeFieldsFieldValue:{name:"Status/waarde",type:"contactFreeFieldsFieldValue"}},i={addressFreeFieldsFieldValue:{name:"Status/waarde",type:"addressFreeFieldsFieldValue"}},l={addressDongleTypeDongle:{name:"Type dongel",type:"dropdownHas",dropDownOptions:this.props.typesDongle},addressDongleDateStart:{name:"Start datum",type:"date"},addressDongleDateEnd:{name:"Eind datum",type:"date"},addressDongleHasEnergyId:{name:"Heeft energie ID koppeling",type:"allNoYes",dropDownOptions:this.state.allNoYesOptions}};return d.createElement(J.A,{title:"Extra filters",modalClassName:"modal-dialog-70vw",modalBodyClassName:"scrollable-modal-body",buttonConfirmText:"Toepassen",confirmAction:this.confirmAction,closeModal:this.closeModal,buttonCancelText:"Sluiten",extraButtonLabel:"Maak groep",extraButtonClass:"btn-success",extraButtonAction:this.props.saveAsGroup},d.createElement("div",{className:"row filter-row"},d.createElement("h5",null,d.createElement("div",{className:"col-xs-6"},d.createElement("input",{onChange:function(){return e.handleFilterTypeChange("and")},type:"radio",name:"type",value:"and",id:"and",checked:"and"===this.state.filterType}),d.createElement("label",{htmlFor:"and"},'Alle extra filters zijn "EN"')),d.createElement("div",{className:"col-xs-6"},d.createElement("input",{onChange:function(){return e.handleFilterTypeChange("or")},type:"radio",name:"type",value:"or",id:"or",checked:"or"===this.state.filterType}),d.createElement("label",{htmlFor:"or"},'Alle extra filters zijn "OF"')))),d.createElement("table",{className:"table"},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",{className:"col-md-4"},"Zoekveld"),d.createElement("th",{className:"col-md-3"}),d.createElement("th",{className:"col-md-4"},"Waarde"),d.createElement("th",{className:"col-md-1"}))),d.createElement("tbody",null,0===this.state.filters.length?d.createElement("tr",null,d.createElement("td",{colSpan:4},"Geen filters gezet.")):this.state.filters.map((function(c,u){return d.createElement(we.A,{key:u,filter:c,filterNumber:u,fields:xe(xe(xe(xe(xe(xe(xe(xe({},t),n),a),o),r),s),i),l),handleFilterFieldChange:e.handleFilterFieldChange,deleteFilterRow:e.deleteFilterRow,handleFilterValueChange:e.handleFilterValueChange,contactType:e.state.contactType})})))),d.createElement("div",{className:"row"},d.createElement("div",{className:"col-xs-12 text-right"},d.createElement(Se.A,{buttonText:"Extra filter",onClickAction:this.addFilterRow}))))}}])}(d.Component);const Ie=(0,u.Ng)((function(e){return{contactStatuses:e.systemData.contactStatuses,staticContactGroups:e.systemData.staticContactGroups,primaryOccupations:e.systemData.primaryOccupations,measureCategories:e.systemData.measureCategories,measures:e.systemData.measures,opportunityStatus:e.systemData.opportunityStatus,opportunityEvaluationStatuses:e.systemData.opportunityEvaluationStatuses,intakeStatuses:e.systemData.intakeStatuses,products:e.systemData.products,energySuppliers:e.systemData.energySuppliers,energySupplierTypes:e.systemData.energySupplierTypes,countries:e.systemData.countries,orderStatuses:e.systemData.orderStatuses,quotationRequestStatus:e.systemData.quotationRequestStatus,inspectionPersonTypes:e.systemData.inspectionPersonTypes,housingFileHoomLinks:e.systemData.housingFileHoomLinks,typesReadOut:e.systemData.dongleTypeReadOuts,typesDongle:e.systemData.dongleTypeDongles}}))(Oe);var Me=n(38732);function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_e=function(){return!!e})()}f().locale("nl");var Re=function(e){function t(e){var n,o,i,c;return(0,a.A)(this,t),o=this,i=t,c=[e],i=(0,s.A)(i),n=(0,r.A)(o,_e()?Reflect.construct(i,c||[],(0,s.A)(o).constructor):i.apply(o,c)),(0,l.A)(n,"fetchContactsData",(function(){setTimeout((function(){var e=n.state,t=e.extraFilters,a=e.filterType,o=e.dataControleType,r=(0,be.A)(n.props.contactsFilters),s=n.props.contactsSorts,i={limit:20,offset:n.props.contactsPagination.offset};n.props.fetchContacts(r,t,s,i,a,o)}),100)})),(0,l.A)(n,"saveAsGroup",(function(){var e=n.state,t=e.extraFilters,a=e.filterType,o=(0,be.A)(n.props.contactsFilters);fe.A.saveAsGroup({filters:o,extraFilters:t,filterType:a}).then((function(e){n.props.navigate("/contact-groep/".concat(e.data.data.id,"/edit"))}))})),(0,l.A)(n,"toggleSaveAsGroup",(function(){n.setState((function(e){return{showSaveAsGroup:!e.showSaveAsGroup}}))})),(0,l.A)(n,"getCSV",(function(){n.props.blockUI(),setTimeout((function(){var e=n.state,t=e.extraFilters,a=e.filterType,o=e.dataControleType,r=(0,be.A)(n.props.contactsFilters),s=n.props.contactsSorts;fe.A.getCSV({filters:r,extraFilters:t,sorts:s,filterType:a,dataControleType:o}).then((function(e){ve()(e.data,"Contacten-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".csv")),n.props.unblockUI()})).catch((function(){n.props.unblockUI()}))}),100)})),(0,l.A)(n,"getFreeFieldsCSV",(function(){n.props.blockUI(),setTimeout((function(){var e=n.state,t=e.extraFilters,a=e.filterType,o=(0,be.A)(n.props.contactsFilters),r=n.props.contactsSorts;fe.A.getFreeFieldsCSV({filters:o,extraFilters:t,sorts:r,filterType:a}).then((function(e){ve()(e.data,"Contacten-Vrije-Velden-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".csv")),n.props.unblockUI()})).catch((function(){n.props.unblockUI()}))}),100)})),(0,l.A)(n,"getEnergySuppliersCSV",(function(){n.props.blockUI(),setTimeout((function(){var e=n.state,t=e.extraFilters,a=e.filterType,o=(0,be.A)(n.props.contactsFilters),r=n.props.contactsSorts;fe.A.getEnergySuppliersCSV({filters:o,extraFilters:t,sorts:r,filterType:a}).then((function(e){ve()(e.data,"Contacten-energieleveranciers-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".csv")),n.props.unblockUI()})).catch((function(){n.props.unblockUI()}))}),100)})),(0,l.A)(n,"getExcelAddressEnergyConsumptionGas",(function(){n.props.blockUI(),setTimeout((function(){for(var e=1e4,t=Math.ceil(n.props.contacts.meta.total/e),a=n.props.contacts.meta.total>e,o=1,r=1;r<=t;r++){var s={limit:e,offset:r*e-e},i=n.state.extraFilters,l=(0,be.A)(n.props.contactsFilters),c=n.props.contactsSorts;fe.A.getExcelAddressEnergyConsumptionGas({filters:l,extraFilters:i,sorts:c,pagination:s}).then((function(e){var r=a?"Contacten-verbruik-gas-".concat(f()().format("YYYY-MM-DD HH:mm:ss")," (").concat(o," van ").concat(t,").xlsx"):"Contacten-verbruik-gas-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".xlsx");ve()(e.data,r),o++,n.props.unblockUI()})).catch((function(){n.props.unblockUI()}))}}),100)})),(0,l.A)(n,"getExcelAddressEnergyConsumptionElectricity",(function(){n.props.blockUI(),setTimeout((function(){for(var e=1e4,t=Math.ceil(n.props.contacts.meta.total/e),a=n.props.contacts.meta.total>e,o=1,r=1;r<=t;r++){var s={limit:e,offset:r*e-e},i=n.state.extraFilters,l=(0,be.A)(n.props.contactsFilters),c=n.props.contactsSorts;fe.A.getExcelAddressEnergyConsumptionElectricity({filters:l,extraFilters:i,sorts:c,pagination:s}).then((function(e){var r=a?"Contacten-verbruik-elektriciteit-".concat(f()().format("YYYY-MM-DD HH:mm:ss")," (").concat(o," van ").concat(t,").xlsx"):"Contacten-verbruik-elektriciteit-".concat(f()().format("YYYY-MM-DD HH:mm:ss"),".xlsx");ve()(e.data,r),o++,n.props.unblockUI()})).catch((function(){n.props.unblockUI()}))}}),100)})),(0,l.A)(n,"resetContactFilters",(function(){n.props.clearFilterContacts(),n.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),n.fetchContactsData()})),(0,l.A)(n,"onSubmitFilter",(function(){n.props.clearContacts(),n.props.setContactsPagination({page:0,offset:0}),n.fetchContactsData()})),(0,l.A)(n,"toggleShowCheckboxList",(function(){n.setState((function(e){return{showCheckboxList:!e.showCheckboxList}}))})),(0,l.A)(n,"toggleShowCheckboxListMerge",(function(){n.setState((function(e){return{showCheckboxListMerge:!e.showCheckboxListMerge}}))})),(0,l.A)(n,"selectAllCheckboxes",(function(){n.setState((function(e){return{checkedAllCheckboxes:!e.checkedAllCheckboxes}})),n.props.setCheckedContactAll(!n.state.checkedAllCheckboxes)})),(0,l.A)(n,"prefillExtraFilter",(function(){n.setState({filterType:"and",amountOfFilters:1,extraFilters:[{field:"name",type:"eq",data:""}]})})),(0,l.A)(n,"toggleShowExtraFilters",(function(){0!==n.state.extraFilters.length||n.state.showExtraFilters||n.prefillExtraFilter(),n.setState((function(e){return{showExtraFilters:!e.showExtraFilters}}))})),n.state={campaigns:"",showCheckboxList:!1,showCheckboxListMerge:!1,checkedAllCheckboxes:!1,showSaveAsGroup:!1,showExtraFilters:!1,filterType:"and",dataControleType:"",amountOfFilters:0,extraFilters:[]},n.handlePageClick=n.handlePageClick.bind(n),n.handleExtraFiltersChange=n.handleExtraFiltersChange.bind(n),n.getCSV=n.getCSV.bind(n),n.getFreeFieldsCSV=n.getFreeFieldsCSV.bind(n),n.getEnergySuppliersCSV=n.getEnergySuppliersCSV.bind(n),n.toggleShowExtraFilters=n.toggleShowExtraFilters.bind(n),n.getDataControleType=n.getDataControleType.bind(n),n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"getDataControleType",value:function(e){return e&&"data-controle"===e.filter?e.value:""}},{key:"componentDidMount",value:function(){var e=this;if((0,m.isEmpty)(this.props.params))this.props.clearFilterContacts(),this.setState({filterType:"and",dataControleType:""});else switch(this.props.params.filter){case"type":this.props.clearFilterContacts(),this.props.setTypeFilter(this.props.params.value);break;case"data-controle":this.setState({dataControleType:this.getDataControleType(this.props.params)})}this.fetchContactsData(),Me.A.peekNotFinishedCampaigns().then((function(t){e.setState({campaigns:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.params.value!==e.params.value){if(this.props.clearFilterContacts(),this.setState({filterType:"and",dataControleType:""}),!(0,m.isEmpty)(this.props.params))switch(this.props.params.filter){case"type":this.props.setTypeFilter(this.props.params.value);break;case"data-controle":this.setState({dataControleType:this.getDataControleType(this.props.params)})}setTimeout((function(){t.fetchContactsData()}),100)}}},{key:"componentWillUnmount",value:function(){this.props.clearContacts()}},{key:"handlePageClick",value:function(e){var t=e.selected,n=Math.ceil(20*t);this.props.setContactsPagination({page:t,offset:n}),this.fetchContactsData()}},{key:"handleExtraFiltersChange",value:function(e,t,n){var a=this;this.setState({filterType:n,amountOfFilters:t,extraFilters:e}),this.props.setContactsPagination({page:0,offset:0}),setTimeout((function(){a.fetchContactsData()}),100)}},{key:"render",value:function(){return d.createElement("div",null,d.createElement("div",{className:"panel panel-default"},d.createElement("div",{className:"panel-body"},d.createElement("div",{className:"col-md-12 margin-10-top"},d.createElement(Ee,{dataControleType:this.state.dataControleType,showCheckboxList:this.state.showCheckboxList,showCheckboxListMerge:this.state.showCheckboxListMerge,toggleShowCheckboxList:this.toggleShowCheckboxList,toggleShowCheckboxListMerge:this.toggleShowCheckboxListMerge,resetContactFilters:this.resetContactFilters,selectAllCheckboxes:this.selectAllCheckboxes,checkedAllCheckboxes:this.state.checkedAllCheckboxes,getCSV:this.getCSV,getFreeFieldsCSV:this.getFreeFieldsCSV,getEnergySuppliersCSV:this.getEnergySuppliersCSV,getExcelAddressEnergyConsumptionGas:this.getExcelAddressEnergyConsumptionGas,getExcelAddressEnergyConsumptionElectricity:this.getExcelAddressEnergyConsumptionElectricity,toggleSaveAsGroup:this.toggleSaveAsGroup,saveAsGroup:this.saveAsGroup,toggleShowExtraFilters:this.toggleShowExtraFilters,fetchContactsData:this.fetchContactsData})),d.createElement("div",{className:"col-md-12 margin-10-top"},d.createElement(ne,{dataControleType:this.state.dataControleType,contacts:this.props.contacts,contactsPagination:this.props.contactsPagination,showCheckboxList:this.state.showCheckboxList,showCheckboxListMerge:this.state.showCheckboxListMerge,selectAllCheckboxes:this.selectAllCheckboxes,checkedAllCheckboxes:this.state.checkedAllCheckboxes,onSubmitFilter:this.onSubmitFilter,fetchContactsData:this.fetchContactsData,handlePageClick:this.handlePageClick})))),this.state.showSaveAsGroup&&d.createElement(ke,{saveAsGroup:this.saveAsGroup,closeDeleteItemModal:this.toggleSaveAsGroup}),this.state.showExtraFilters&&d.createElement(Ie,{campaigns:this.state.campaigns,saveAsGroup:this.saveAsGroup,filterType:this.state.filterType,toggleShowExtraFilters:this.toggleShowExtraFilters,handleExtraFiltersChange:this.handleExtraFiltersChange,contactType:this.props.contactsFilters.typeId.data,extraFilters:this.state.extraFilters,amountOfFilters:this.state.amountOfFilters}))}}])}(d.Component);const Le=(0,u.Ng)((function(e){return{contacts:e.contacts.list,contactsFilters:e.contacts.filters,contactsSorts:e.contacts.sorts,contactsPagination:e.contacts.pagination}}),(function(e){return(0,p.zH)({fetchContacts:g,clearContacts:C,setCheckedContactAll:y,setTypeFilter:E,clearFilterContacts:O,setContactsPagination:I,blockUI:M.o,unblockUI:M.r},e)}))((function(e){var t=(0,j.Zp)(),n=(0,j.g)(),a=(0,j.zy)();return d.createElement(Re,(0,c.A)({},e,{navigate:t,params:n,location:a}))}))}}]);