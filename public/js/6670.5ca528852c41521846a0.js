"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6670],{23932:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(61941);const o={fetchFreeFieldsFields:function(e,t,n){var o="".concat(URL_API,"/api/free-fields-field/grid");return a.A.get(o,{params:{filters:JSON.stringify(e),sorts:JSON.stringify(t),limit:n.limit,offset:n.offset}})},deleteFreeFieldsField:function(e){var t="".concat(URL_API,"/api/free-fields-field/").concat(e,"/delete");return a.A.post(t)},newFreeFieldsField:function(e){var t="".concat(URL_API,"/api/free-fields-field");return a.A.post(t,e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},fetchFreeFieldDetails:function(e){var t="".concat(URL_API,"/api/free-fields-field/").concat(e);return a.A.get(t).then((function(e){return e.data.data}))},updateFreeFieldsField:function(e){return a.A.post("".concat(URL_API,"/api/free-fields-field/").concat(e.id,"/update"),e)},fetchFilterFreeFieldsFieldsContact:function(){var e="".concat(URL_API,"/api/free-fields-field/get-for-filter/contacts");return a.A.get(e)},fetchFilterFreeFieldsFieldsAddress:function(){var e="".concat(URL_API,"/api/free-fields-field/get-for-filter/addresses");return a.A.get(e)},peekFreeFieldsTables:function(){var e="".concat(URL_API,"/api/free-fields-field/free-fields-tables/peek");return a.A.get(e)},peekFreeFieldsFieldFormats:function(){var e="".concat(URL_API,"/api/free-fields-field/free-fields-field-formats/peek");return a.A.get(e)},fetchFreeFieldsFieldRecords:function(e,t){var n="".concat(URL_API,"/api/free-fields-field-records/get-values");return a.A.get(n,{params:{table:e,recordId:t}}).then((function(e){return e.data}))},updateFreeFieldsFieldRecords:function(e,t){var n="".concat(URL_API,"/api/free-fields-field-records/update-values");return a.A.post(n,{data:{records:e,recordId:t}})}}},66670:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ge});var a=n(23029),o=n(92901),s=n(56822),r=n(53954),i=n(85501),l=n(64467),c=n(96540),u=n(69733),d=n(17375),p=n(2543),m=n(95093),h=n.n(m),f=function(e,t,n,a,o){return{type:"FETCH_CONTACTS",filters:e,extraFilters:t,sorts:n,pagination:a,filterType:o}},g=function(){return{type:"CLEAR_CONTACTS"}},F=function(e){return{type:"SET_CHECKED_CONTACT_ALL",checkedValue:e}},y=function(e){return{type:"SET_NUMBER_FILTER",number:e}},C=function(e){return{type:"SET_TYPE_FILTER",typeId:e}},E=function(e){return{type:"SET_FULL_NAME_FILTER",fullName:e}},A=function(e){return{type:"SET_STREET_AND_NUMBER_FILTER",streetAndNumber:e}},v=function(e){return{type:"SET_POSTAL_CODE_FILTER",postalCode:e}},b=function(e){return{type:"SET_CITY_FILTER",city:e}},S=function(e){return{type:"SET_EMAIL_ADDRESS_FILTER",emailAddress:e}},w=function(e){return{type:"SET_PHONE_NUMBER_FILTER",phoneNumber:e}},k=function(e){return{type:"SET_STATUS_FILTER",statusId:e}},N=function(e){return{type:"SET_CREATED_AT_FILTER",createdAt:e}},T=function(){return{type:"CLEAR_FILTER_CONTACTS"}},x=function(e){return{type:"SET_CONTACTS_PAGINATION",pagination:e}},D=n(23138),O=n(58168),I=n(42285),R=n(45403),M=n(93913),P=n(9152);const L=(0,u.Ng)(null,(function(e){return{setContactsSortsFilter:function(t,n){e(function(e,t){return{type:"SET_CONTACTS_SORTS_FILTER",field:e,order:t}}(t,n))}}}))((function(e){var t=function(t,n){e.setContactsSortsFilter(t,n),setTimeout((function(){e.fetchContactsData()}),100)};return c.createElement("tr",{className:"thead-title"},e.showCheckbox?c.createElement("th",{width:"3%"}):null,c.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"number",title:"#",width:"5%",setSorts:t}),c.createElement(P.A,{RowClassName:"hidden-xs hidden-sm",sortColumn:"typeName",title:"Type",width:"7%",setSorts:t}),c.createElement(P.A,{sortColumn:"fullName",title:"Naam",width:"11%",setSorts:t}),c.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"streetAndNumber",title:"Adres",width:"12%",setSorts:t}),c.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"postalCode",title:"Postcode",width:"7%",setSorts:t}),c.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"city",title:"Plaats",width:"10%",setSorts:t}),c.createElement(P.A,{RowClassName:"hidden-xs",sortColumn:"emailAddress",title:"E-mail",width:"12%",setSorts:t}),c.createElement(P.A,{sortColumn:"phoneNumber",title:"Telefoon",width:"7%",setSorts:t}),c.createElement(P.A,{RowClassName:"hidden-xs hidden-sm",sortColumn:"createdAt",title:"Gemaakt op",width:"8%",setSorts:t}),c.createElement("th",{width:"3%"}))}));var G=n(7639);const _=(0,u.Ng)((function(e){return{filters:e.contacts.filters,contactStatuses:e.systemData.contactStatuses,contactTypes:e.systemData.contactTypes}}),(function(e){return(0,d.zH)({setNumberFilter:y,setTypeFilter:C,setFullNameFilter:E,setStreetAndNumberFilter:A,setPostalCodeFilter:v,setCityFilter:b,setEmailAddressFilter:S,setPhoneNumberFilter:w,setStatusFilter:k,setCreatedAtFilter:N},e)}))((function(e){return c.createElement("tr",{className:"thead-filter"},e.showCheckbox&&c.createElement("td",null,c.createElement("input",{type:"checkbox",value:e.checkedAllCheckboxes,onChange:e.selectAllCheckboxes})),c.createElement("th",{className:"hidden-xs"},c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.number.data,onChange:function(t){e.setNumberFilter(t.target.value)}})),c.createElement("th",{className:"hidden-xs hidden-sm"},c.createElement("select",{className:"form-control input-sm",value:e.filters.typeId.data,onChange:function(t){e.setTypeFilter(t.target.value),setTimeout((function(){e.onSubmitFilter()}),100)}},c.createElement("option",null),e.contactTypes.map((function(e){return c.createElement("option",{key:e.id,value:e.id},e.name)})))),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.fullName.data,onChange:function(t){e.setFullNameFilter(t.target.value)}})),c.createElement("th",{className:"hidden-xs"},c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.streetAndNumber.data,onChange:function(t){e.setStreetAndNumberFilter(t.target.value)}})),c.createElement("th",{className:"hidden-xs"},c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.postalCode.data,onChange:function(t){e.setPostalCodeFilter(t.target.value)}})),c.createElement("th",{className:"hidden-xs"},c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.city.data,onChange:function(t){e.setCityFilter(t.target.value)}})),c.createElement("th",{className:"hidden-xs"},c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.emailAddress.data,onChange:function(t){e.setEmailAddressFilter(t.target.value)}})),c.createElement("th",null,c.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.phoneNumber.data,onChange:function(t){e.setPhoneNumberFilter(t.target.value)}})),c.createElement(G.A,{value:e.filters.createdAt.data&&e.filters.createdAt.data,onChangeAction:function(t){void 0===t?e.setCreatedAtFilter(""):e.setCreatedAtFilter(h()(t).format("Y-MM-DD"))}}),c.createElement("th",null))}));var V=n(24179),H=n(87722),j=n(87696),q=n(88505);function U(e,t,n){return t=(0,r.A)(t),(0,s.A)(e,Y()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}var B=function(e){function t(e){var n;return(0,a.A)(this,t),(n=U(this,t,[e])).state={showActionButtons:!1,highlightRow:""},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"setCheckedContact",value:function(e){this.props.setCheckedContact(e)}},{key:"openItem",value:function(e){V.RL.push("/contact/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.checked,a=t.id,o=t.number,s=t.typeId,r=t.typeName,i=t.fullName,l=t.streetAndNumber,u=t.postalCode,d=t.city,p=t.areaName,m=t.emailAddress,f=t.phoneNumber,g=(t.statusName,t.createdAt),F=t.permissions;return c.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return e.openItem(a)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},this.props.showCheckbox&&c.createElement("td",null,c.createElement("input",{type:"checkbox",checked:n,onChange:function(){return e.setCheckedContact(a)}})),c.createElement("td",{className:"hidden-xs"},o),c.createElement("td",{className:"hidden-xs hidden-sm"},r," "),c.createElement("td",null,i),c.createElement("td",{className:"hidden-xs"},l),c.createElement("td",{className:"hidden-xs"},u),c.createElement("td",{className:"hidden-xs",title:"Buurt: "+(p||"onbekend")},d),c.createElement("td",{className:"hidden-xs"},m),c.createElement("td",null,f),c.createElement("td",{className:"hidden-xs hidden-sm"},h()(g).format("DD-MM-Y")),c.createElement("td",null,this.state.showActionButtons?c.createElement("a",{role:"button",onClick:function(){return e.openItem(a)}},c.createElement(H.Ay,{className:"mybtn-success",size:14,icon:q.w})):"",this.state.showActionButtons?c.createElement(c.Fragment,null,"organisation"===s&&F&&F.deleteOrganisation&&c.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,a,i)},c.createElement(H.Ay,{className:"mybtn-danger",size:14,icon:j.d})),"person"===s&&F&&F.deletePerson&&c.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,a,i)},c.createElement(H.Ay,{className:"mybtn-danger",size:14,icon:j.d}))):""))}}])}(c.Component);const z=(0,u.Ng)((function(e){return{statuses:e.statuses,types:e.types,permissions:e.meDetails.permissions}}),(function(e){return{setCheckedContact:function(t){e(function(e){return{type:"SET_CHECKED_CONTACT",id:e}}(t))}}}))(B);var K=n(63750);const W=(0,u.Ng)(null,(function(e){return{deleteContact:function(t){e(function(e){return{type:"DELETE_CONTACT",id:e}}(t))}}}))((function(e){return c.createElement(K.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteContact(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},c.createElement("p",null,"Verwijder contact: ",c.createElement("strong",null," ",e.fullName," ")))}));var J=n(74850);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t=(0,r.A)(t),(0,s.A)(e,$()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}var ee=function(e){function t(e){var n;return(0,a.A)(this,t),n=X(this,t,[e]),(0,l.A)(n,"handleKeyUp",(function(e){13===e.keyCode&&n.props.onSubmitFilter()})),(0,l.A)(n,"showDeleteItemModal",(function(e,t){n.setState(Q(Q({},n.state),{},{showDeleteItem:!0,deleteItem:Q(Q({},n.state.deleteItem),{},{id:e,fullName:t})}))})),(0,l.A)(n,"closeDeleteItemModal",(function(){n.setState(Q(Q({},n.state),{},{showDeleteItem:!1,deleteItem:Q(Q({},n.state.deleteItem),{},{id:"",fullName:""})}))})),n.state={showDeleteItem:!1,deleteItem:{id:"",fullName:""}},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this,t=this.props.contacts,n=t.data,a=void 0===n?[]:n,o=t.meta,s=void 0===o?{}:o,r="",i=!0;return this.props.hasError?r="Fout bij het ophalen van contacten.":this.props.isLoading?r="Gegevens aan het laden.":0===a.length?r="Geen contacten gevonden!":i=!1,c.createElement("div",null,c.createElement("form",{onKeyUp:this.handleKeyUp},c.createElement(I.A,null,c.createElement(R.A,null,c.createElement(L,{showCheckbox:this.props.showCheckboxList,fetchContactsData:function(){return e.props.fetchContactsData()}}),c.createElement(_,{showCheckbox:this.props.showCheckboxList,selectAllCheckboxes:function(){return e.props.selectAllCheckboxes()},onSubmitFilter:this.props.onSubmitFilter})),c.createElement(M.A,null,i?c.createElement("tr",null,c.createElement("td",{colSpan:10},r)):a.map((function(t){return c.createElement(z,(0,O.A)({key:t.id},t,{showCheckbox:e.props.showCheckboxList,checkedAllCheckboxes:e.props.checkedAllCheckboxes,showDeleteItemModal:e.showDeleteItemModal}))})))),c.createElement("div",{className:"col-md-6 col-md-offset-3"},c.createElement(J.A,{onPageChangeAction:this.props.handlePageClick,totalRecords:s.total,initialPage:this.props.contactsPagination.page}))),this.state.showDeleteItem&&c.createElement(W,(0,O.A)({closeDeleteItemModal:this.closeDeleteItemModal},this.state.deleteItem)))}}])}(c.Component);const te=(0,u.Ng)((function(e){return{isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(ee);var ne=n(91858);const ae=(0,u.Ng)((function(e){return{contacts:e.contacts.list.data}}),(function(e){return{deleteSelectedContacts:function(t){e(function(e){return{type:"DELETE_SELECTED_CONTACTS",contactIds:e}}(t))}}}))((function(e){var t=function(){var t=0;return e.contacts.map((function(e){return!0===e.checked&&t++})),t};return c.createElement(K.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.toggleShowDeleteSelectedItems,confirmAction:function(){return t=[],e.contacts.map((function(e){return!0===e.checked&&t.push(e.id)})),e.deleteSelectedContacts(t),void e.toggleShowDeleteSelectedItems();var t},title:"Verwijderen"},0!==t()?c.createElement("div",null,"Verwijder de geselecteerde ",c.createElement("strong",null,t())," contacten?"):c.createElement("div",null,"Geen contacten geselecteerd."))}));var oe=n(60738),se=n(14809);function re(e,t,n){return t=(0,r.A)(t),(0,s.A)(e,ie()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}function ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ie=function(){return!!e})()}var le=function(e){function t(e){var n;return(0,a.A)(this,t),n=re(this,t,[e]),(0,l.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,o=t.name;n.setState((0,l.A)({},o,a))})),(0,l.A)(n,"handleSubmit",(function(e){var t=[];n.props.contacts.map((function(e){return!0===e.checked&&t.push(e.id)})),oe.A.addManyContactsToGroup(t,n.state.groupId).then((function(e){n.props.toggleAddGroup(),V.RL.push("/contacten-in-groep/".concat(n.state.groupId))}))})),n.state={contactGroups:[],groupId:"",contactCount:0,contactIds:"",errors:{groupId:!1}},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=this;oe.A.peekStaticContactGroups().then((function(t){e.setState({contactGroups:t})}));var t=0;this.props.contacts.map((function(e){return!0===e.checked&&t++})),this.setState({contactCount:t})}},{key:"render",value:function(){return c.createElement(K.A,{buttonConfirmText:"Toevoegen",closeModal:this.props.toggleAddGroup,confirmAction:this.handleSubmit,title:"Contacten toevoegen aan groep"},0!==this.state.contactCount?c.createElement("div",{className:"row"},c.createElement(se.A,{size:"col-md-12",label:"Voeg ".concat(this.state.contactCount," contact(en) toe aan groep:"),name:"groupId",options:this.state.contactGroups,value:this.state.groupId,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.groupId})):c.createElement("div",null,"Geen contacten geselecteerd."))}}])}(c.Component);const ce=(0,u.Ng)((function(e){return{contactDetails:e.contactDetails,contacts:e.contacts.list.data}}),null)(le);var ue=n(41904),de=n(23384),pe=n(46161),me=n(5544),he=n(93822);const fe=function(e){var t=e.contacts,n=e.fetchContactsData,a=e.toggleShowMergeSelectedItems,o=(0,c.useState)(""),s=(0,me.A)(o,2),r=s[0],i=s[1],l=(0,c.useState)([]),u=(0,me.A)(l,2),d=u[0],p=u[1],m=function(){var e=0;return t.data.map((function(t){return!0===t.checked&&e++})),e};return c.createElement("div",null,d.length?c.createElement(K.A,{buttonConfirmText:"Samenvoegen",buttonClassName:"btn-danger",closeModal:a,showConfirmAction:!1,title:"Contacten samenvoegen"},c.createElement("p",null,r),c.createElement("ul",null,d.map((function(e){return c.createElement("li",null,e)})))):c.createElement(K.A,{buttonConfirmText:"Samenvoegen",buttonClassName:"btn-danger",closeModal:a,confirmAction:function(){return e=t.data.filter((function(e){return e.checked})).sort((function(e,t){return e.checkedAt-t.checkedAt})).map((function(e){return e.id})),void he.A.mergeContacts(e[0],e[1]).then((function(){i("Contacten zijn succesvol samengevoegd"),n(),setTimeout(a,2e3)})).catch((function(e){if(e.response&&422===e.response.status){if(e.response.data&&e.response.data.errors)e.response.data.errors.econobis&&e.response.data.errors.econobis.length&&(i("Fout bij samenvoegen contacten:"),p(e.response.data.errors.econobis));else if(e.response.data&&e.response.data.message){i("Er is iets misgegaan bij het samenvoegen contacten ("+e.response.status+").");var t=[];if(Array.isArray(e.response.data.message))for(var n=0,a=Object.entries(JSON.parse(e.response.data.message));n<a.length;n++){var o=(0,me.A)(a[n],2),s=(o[0],o[1]);t.push("".concat(s))}else t.push(e.response.data.message);p(t)}}else i("Er is iets misgegaan bij het samenvoegen contacten."),p(["Onbekende fout"])}));var e},showConfirmAction:2===m(),title:"Contacten samenvoegen"},2===m()?c.createElement("div",null,"Weet je zeker dat je deze 2 contacten wilt samenvoegen? ",c.createElement("br",null),"Gegevens worden overgenomen naar het eerste contact, het tweede contact wordt verwijderd."):c.createElement("div",null,"Selecteer exact 2 contacten om te kunnen samenvoegen.")))};function ge(e,t,n){return t=(0,r.A)(t),(0,s.A)(e,Fe()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}var ye=function(e){function t(e){var n;return(0,a.A)(this,t),n=ge(this,t,[e]),(0,l.A)(n,"toggleShowDeleteSelectedItems",(function(){n.setState({showDeleteSelectedItems:!n.state.showDeleteSelectedItems})})),(0,l.A)(n,"toggleShowMergeSelectedItems",(function(){n.setState({showMergeSelectedItems:!n.state.showMergeSelectedItems})})),(0,l.A)(n,"toggleAddContactsToGroup",(function(){n.setState({showAddContactsToGroup:!n.state.showAddContactsToGroup})})),(0,l.A)(n,"newContact",(function(){V.RL.push("/contact/nieuw")})),(0,l.A)(n,"importContacts",(function(){V.RL.push("/contact/import")})),n.state={showDeleteSelectedItems:!1,showMergeSelectedItems:!1,showAddContactsToGroup:!1},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props.meDetails.permissions,t=void 0===e?{}:e,n=this.props.contacts.meta,a=void 0===n?{}:n;return c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-4"},c.createElement("div",{className:"btn-group",role:"group"},c.createElement(ne.A,{iconName:"refresh",onClickAction:this.props.resetContactFilters,title:"Vernieuwen scherm"}),t.createPerson||t.createOrganisation||t.manageGroup?c.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},c.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown",title:"Toevoegen contact of groep"},c.createElement(H.Ay,{size:14,icon:de.t})),c.createElement("ul",{className:"dropdown-menu"},t.createPerson&&c.createElement("li",null,c.createElement(V.N_,{to:"contact/nieuw/persoon"},"Persoon")),t.createOrganisation&&c.createElement("li",null,c.createElement(V.N_,{to:"contact/nieuw/organisatie"},"Organisatie")),t.manageGroup&&c.createElement("li",null,c.createElement(V.N_,{role:"button",onClick:this.props.toggleSaveAsGroup},"Groep")))):null,t.updatePerson&&t.updateOrganisation&&t.manageGroup&&c.createElement("div",{className:"nav navbar-nav btn-group",role:"group"},c.createElement("button",{className:"btn btn-success btn-sm","data-toggle":"dropdown",title:"Contactselectie toevoegen aan groep"},c.createElement(H.Ay,{size:14,icon:pe.u})),c.createElement("ul",{className:"dropdown-menu"},c.createElement("li",null,c.createElement("a",{role:"button",onClick:this.toggleAddContactsToGroup},"Voeg toe aan groep")))),(t.deletePerson||t.deleteOrganisation)&&c.createElement(ne.A,{iconName:"trash",onClickAction:this.toggleShowDeleteSelectedItems,title:"Verwijderen geselecteerde contacten"}),(t.deletePerson||t.deleteOrganisation||t.manageGroup)&&c.createElement(ne.A,{iconName:"check",onClickAction:this.props.toggleShowCheckboxList,title:"Contactselectie maken"}),c.createElement(ne.A,{iconName:"filter",onClickAction:this.props.toggleShowExtraFilters,title:"Contactfilters"}),t.downloadContact&&c.createElement(ne.A,{iconName:"download",onClickAction:this.props.getCSV,title:"Downloaden contacten naar CSV"}),t.downloadContact&&c.createElement(ne.A,{iconName:"download",onClickAction:this.props.getFreeFieldsCSV,title:"Downloaden vrije velden van contacten naar CSV"}),t.downloadContact&&c.createElement(ne.A,{iconName:"download",onClickAction:this.props.getEnergySuppliersCSV,title:"Downloaden contacten energieleveranciers gegevens naar CSV"}),t.import&&c.createElement(ne.A,{iconName:"upload",onClickAction:this.importContacts,title:"Importeren contacten"}),t.downloadContactConsumption&&a.useExportAddressConsumption&&c.createElement(c.Fragment,null,c.createElement("a",{role:"button",className:"btn btn-success btn-sm",onClick:this.props.getExcelAddressEnergyConsumptionElectricity,title:"Downloaden elektriciteit verbruik"},c.createElement(ue.z5h,{width:"13px",height:"12px"})),c.createElement("a",{role:"button",className:"btn btn-success btn-sm",onClick:this.props.getExcelAddressEnergyConsumptionGas,title:"Downloaden gas verbruik"},c.createElement(ue.Itl,{width:"13px",height:"12px"}))),c.createElement(ne.A,{iconName:"compress",onClickAction:this.toggleShowMergeSelectedItems,title:"Contacten samenvoegen"}))),c.createElement("div",{className:"col-md-4"},c.createElement("h3",{className:"text-center table-title"},"Contacten")),c.createElement("div",{className:"col-md-4"},c.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)),this.state.showDeleteSelectedItems&&c.createElement(ae,{toggleShowDeleteSelectedItems:this.toggleShowDeleteSelectedItems}),this.state.showAddContactsToGroup&&c.createElement(ce,{toggleAddGroup:this.toggleAddContactsToGroup}),this.state.showMergeSelectedItems&&c.createElement(fe,{toggleShowMergeSelectedItems:this.toggleShowMergeSelectedItems,contacts:this.props.contacts,fetchContactsData:this.props.fetchContactsData}))}}])}(c.Component);const Ce=(0,u.Ng)((function(e){return{meDetails:e.meDetails,contacts:e.contacts.list}}),null)(ye);var Ee=n(19737),Ae=n(5419),ve=n.n(Ae);const be=function(e){return c.createElement(K.A,{buttonConfirmText:"Aanmaken",buttonClassName:"btn-success",closeModal:e.closeDeleteItemModal,confirmAction:function(){e.saveAsGroup()},title:"Groep aanmaken"},"Wilt u een groep aanmaken op basis van de huidige filters?")};var Se=n(70762),we=n(55956),ke=n(23932);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t=(0,r.A)(t),(0,s.A)(e,De()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}var Oe=function(e){function t(e){var n;return(0,a.A)(this,t),(n=xe(this,t,[e])).state={filterType:e.filterType,contactType:e.contactType,amountOfFilters:e.amountOfFilters,filters:e.extraFilters,contactFreeFieldsFields:null,addressFreeFieldsFields:null,measuresToSelect:e.measures.filter((function(e){return 1===e.visible})),yesNoOptions:[{id:0,name:"Nee"},{id:1,name:"Ja"}]},n.fetchFilterFreeFieldsFieldsContact(),n.fetchFilterFreeFieldsFieldsAddress(),n.closeModal=n.closeModal.bind(n),n.confirmAction=n.confirmAction.bind(n),n.handleFilterFieldChange=n.handleFilterFieldChange.bind(n),n.handleFilterTypeChange=n.handleFilterTypeChange.bind(n),n.handleFilterValueChange=n.handleFilterValueChange.bind(n),n.addFilterRow=n.addFilterRow.bind(n),n.deleteFilterRow=n.deleteFilterRow.bind(n),n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"fetchFilterFreeFieldsFieldsContact",value:function(){var e=this;ke.A.fetchFilterFreeFieldsFieldsContact().then((function(t){e.setState(Te(Te({},e.state),{},{contactFreeFieldsFields:t.data.data}))}))}},{key:"fetchFilterFreeFieldsFieldsAddress",value:function(){var e=this;ke.A.fetchFilterFreeFieldsFieldsAddress().then((function(t){e.setState(Te(Te({},e.state),{},{addressFreeFieldsFields:t.data.data}))}))}},{key:"closeModal",value:function(){this.props.toggleShowExtraFilters()}},{key:"confirmAction",value:function(){this.props.handleExtraFiltersChange(this.state.filters,this.state.amountOfFilters,this.state.filterType)}},{key:"handleFilterFieldChange",value:function(e,t){var n=this.state.filters,a=this.state.amountOfFilters;"product"!==n[t].field&&"opportunityMeasureCategory"!==n[t].field&&"intakeMeasureCategory"!==n[t].field&&"housingFileFieldName"!==n[t].field&&"contactFreeFieldsFieldName"!==n[t].field&&"addressFreeFieldsFieldName"!==n[t].field||(delete(n=n.filter((function(e){return e.connectedTo!==n[t].connectName})))[t].connectName,a=n.length),"product"===e?(n[t]={field:"product",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"dateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"dateFinish",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"orderStatus",type:"eq",data:"",connectedTo:e+t}),a=n.length):"opportunityMeasureCategory"===e?(n[t]={field:"opportunityMeasureCategory",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"opportunityStatus",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"opportunityMeasure",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"opportunityEvaluationRealised",type:"eq",data:"",connectedTo:e+t}),n.splice(t+4,0,{field:"opportunityCampaign",type:"eq",data:"",connectedTo:e+t}),a=n.length):"intakeMeasureCategory"===e?(n[t]={field:"intakeMeasureCategory",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"intakeDateStart",type:"eq",data:"",connectedTo:e+t}),n.splice(t+2,0,{field:"intakeDateFinish",type:"eq",data:"",connectedTo:e+t}),n.splice(t+3,0,{field:"intakeStatus",type:"eq",data:"",connectedTo:e+t}),a=n.length):"housingFileFieldName"===e?(n[t]={field:"housingFileFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"housingFileFieldValue",type:"eq",data:"",connectedTo:e+t,housingFileField:""}),a=n.length):"contactFreeFieldsFieldName"===e?(n[t]={field:"contactFreeFieldsFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"contactFreeFieldsFieldValue",type:"eq",data:"",connectedTo:e+t,freeFieldFormatType:""}),a=n.length):"addressFreeFieldsFieldName"===e?(n[t]={field:"addressFreeFieldsFieldName",type:"eq",data:"",connectName:e+t},n.splice(t+1,0,{field:"addressFreeFieldsFieldValue",type:"eq",data:"",connectedTo:e+t,freeFieldFormatType:""}),a=n.length):(n[t].field=e,n[t].data=""),this.setState(Te(Te({},this.state),{},{filters:n,amountOfFilters:a}))}},{key:"handleFilterTypeChange",value:function(e){this.setState(Te(Te({},this.state),{},{filterType:e}))}},{key:"handleFilterValueChange",value:function(e,t,n){var a=this.state.filters;if(a[n][e]=t,"housingFileFieldName"===a[n].field&&a[n].data){var o=this.props.housingFileHoomLinks.find((function(e){return e.key===Number(a[n].data)}));if(o){var s=a[n].connectName;a.map((function(e){return e.connectedTo===s&&(e.data="",e.type="eq",e.housingFileField=o.externalHoomShortName),e}))}}if("contactFreeFieldsFieldName"===a[n].field){var r="";if(a[n].data){var i=this.state.contactFreeFieldsFields.find((function(e){return e.id===Number(a[n].data)}));i&&(r=i.formatType)}var l=a[n].connectName;a.map((function(e){return e.connectedTo===l&&(e.data="",e.type="eq",e.freeFieldFormatType=r),e}))}if("addressFreeFieldsFieldName"===a[n].field){var c="";if(a[n].data){var u=this.state.addressFreeFieldsFields.find((function(e){return e.id===Number(a[n].data)}));u&&(c=u.formatType)}var d=a[n].connectName;a.map((function(e){return e.connectedTo===d&&(e.data="",e.type="eq",e.freeFieldFormatType=c),e}))}var p=this.state.measuresToSelect;"opportunityMeasureCategory"===a[n].field&&(p=a[n].data?this.props.measures.filter((function(e){return 1===e.visible&&e.measureCategoryId==a[n].data})):this.props.measures.filter((function(e){return 1===e.visible}))),this.setState(Te(Te({},this.state),{},{filters:a,measuresToSelect:p}))}},{key:"addFilterRow",value:function(){var e=this,t=this.state.filters;t[this.state.amountOfFilters]={field:"name",type:"eq",data:""},setTimeout((function(){e.setState(Te(Te({},e.state),{},{filters:t}))}),300),setTimeout((function(){e.setState({amountOfFilters:e.state.amountOfFilters+1})}),300)}},{key:"deleteFilterRow",value:function(e){var t=this.state.filters;"product"!==t[e].field&&"opportunityMeasureCategory"!==t[e].field&&"intakeMeasureCategory"!==t[e].field&&"housingFileFieldName"!==t[e].field&&"contactFreeFieldsFieldName"!==t[e].field&&"addressFreeFieldsFieldName"!==t[e].field||(t=t.filter((function(n){return n.connectedTo!==t[e].connectName}))),t.splice(e,1),this.setState(Te(Te({},this.state),{},{filters:t,amountOfFilters:t.length}))}},{key:"render",value:function(){var e=this,t={name:{name:"Naam",type:"stringWithoutNull"},postalCode:{name:"Postcode",type:"numberOrString"},country:{name:"Land",type:"dropdown",dropDownOptions:this.props.countries},createdAt:{name:"Gemaakt op",type:"date"},currentObligations:{name:"Huidig aantal obligaties",type:"number"},currentParticipations:{name:"Huidig aantal participaties",type:"number"},currentPostalcodeLinkCapital:{name:"Huidig aantal postcoderoos",type:"number"},currentLoan:{name:"Huidig bedrag lening",type:"number"},staticContactGroup:{name:"Statische groep",type:"dropdownHas",dropDownOptions:this.props.staticContactGroups},occupation:{name:"Verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},occupationPrimary:{name:"Primaire verbinding",type:"dropdownRelations",dropDownOptions:this.props.primaryOccupations},campaign:{name:"Campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns},opportunityMeasureCategory:{name:"Kans maatregel categorie",type:"dropdownHas",dropDownOptions:this.props.measureCategories},quotationRequestStatusOrganisationOrCoach:{name:"Kansactie status (org/coach)",type:"dropdownHas",dropDownOptions:this.props.quotationRequestStatus},quotationRequestStatusOccupant:{name:"Kansactie status (bewoner)",type:"dropdownHas",dropDownOptions:this.props.quotationRequestStatus},intakeMeasureCategory:{name:"Intake interesse",type:"dropdownHas",dropDownOptions:this.props.measureCategories},product:{name:"Product",type:"dropdownHas",dropDownOptions:this.props.products},dateOfBirth:{name:"Geboortedatum",type:"date"},energySupplier:{name:"Huidige Energie leverancier",type:"dropdown",dropDownOptions:this.props.energySuppliers},energySupplierType:{name:"Type huidige energie leverancier",type:"dropdownHas",dropDownOptions:this.props.energySupplierTypes},didAgreeAvg:{name:"Akkoord privacybeleid",type:"boolean",dropDownOptions:this.state.yesNoOptions},portalUser:{name:"Portal gebruiker actief",type:"boolean",dropDownOptions:this.state.yesNoOptions},housingFileExists:{name:"Woningdossier aanwezig",type:"boolean",dropDownOptions:this.state.yesNoOptions},housingFileFieldName:{name:"Woningdossier kenmerk",type:"dropdownHousingFileFields",dropDownOptions:this.props.housingFileHoomLinks},contactFreeFieldsFieldName:{name:"Vrij veld contact",type:"dropdownFreeFieldsFields",dropDownOptions:this.state.contactFreeFieldsFields?this.state.contactFreeFieldsFields:[]},addressFreeFieldsFieldName:{name:"Vrij veld adres",type:"dropdownFreeFieldsFields",dropDownOptions:this.state.addressFreeFieldsFields?this.state.addressFreeFieldsFields:[]},inspectionPersonType:{name:"Rol in buurtaanpak",type:"dropdownHas",dropDownOptions:this.props.inspectionPersonTypes},sharedArea:{name:"Buurt",type:"searchWithAsync"},hoomdossierExists:{name:"Hoomdossier aangemaakt",type:"boolean",dropDownOptions:this.state.yesNoOptions}},n={dateStart:{name:"Begin datum",type:"date"},dateFinish:{name:"Eind datum",type:"date"},orderStatus:{name:"Order status",type:"dropdownHas",dropDownOptions:this.props.orderStatuses}},a={opportunityStatus:{name:"Kans status",type:"dropdownHas",dropDownOptions:this.props.opportunityStatus},opportunityMeasure:{name:"Kans maatregel specifiek",type:"dropdownHas",dropDownOptions:this.state.measuresToSelect},opportunityEvaluationRealised:{name:"Kans status evaluatie uitgevoerd",type:"dropdownHas",dropDownOptions:this.props.opportunityEvaluationStatuses},opportunityCampaign:{name:"Kans campagne",type:"dropdownHas",dropDownOptions:this.props.campaigns}},o={intakeDateStart:{name:"Begin datum",type:"date"},intakeDateFinish:{name:"Eind datum",type:"date"},intakeStatus:{name:"Intake status",type:"dropdownHas",dropDownOptions:this.props.intakeStatuses}},s={housingFileFieldValue:{name:"Status/waarde",type:"housingFileFieldValue"}},r={contactFreeFieldsFieldValue:{name:"Status/waarde",type:"contactFreeFieldsFieldValue"}},i={addressFreeFieldsFieldValue:{name:"Status/waarde",type:"addressFreeFieldsFieldValue"}};return c.createElement(K.A,{title:"Extra filters",modalClassName:"modal-dialog-70vw",modalBodyClassName:"scrollable-modal-body",buttonConfirmText:"Toepassen",confirmAction:this.confirmAction,closeModal:this.closeModal,buttonCancelText:"Sluiten",extraButtonLabel:"Maak groep",extraButtonClass:"btn-success",extraButtonAction:this.props.saveAsGroup},c.createElement("div",{className:"row filter-row"},c.createElement("h5",null,c.createElement("div",{className:"col-xs-6"},c.createElement("input",{onChange:function(){return e.handleFilterTypeChange("and")},type:"radio",name:"type",value:"and",id:"and",checked:"and"===this.state.filterType}),c.createElement("label",{htmlFor:"and"},'Alle extra filters zijn "EN"')),c.createElement("div",{className:"col-xs-6"},c.createElement("input",{onChange:function(){return e.handleFilterTypeChange("or")},type:"radio",name:"type",value:"or",id:"or",checked:"or"===this.state.filterType}),c.createElement("label",{htmlFor:"or"},'Alle extra filters zijn "OF"')))),c.createElement("table",{className:"table"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{className:"col-md-4"},"Zoekveld"),c.createElement("th",{className:"col-md-3"}),c.createElement("th",{className:"col-md-4"},"Waarde"),c.createElement("th",{className:"col-md-1"}))),c.createElement("tbody",null,0===this.state.filters.length?c.createElement("tr",null,c.createElement("td",{colSpan:4},"Geen filters gezet.")):this.state.filters.map((function(l,u){return c.createElement(Se.A,{key:u,filter:l,filterNumber:u,fields:Te(Te(Te(Te(Te(Te(Te({},t),n),a),o),s),r),i),handleFilterFieldChange:e.handleFilterFieldChange,deleteFilterRow:e.deleteFilterRow,handleFilterValueChange:e.handleFilterValueChange,contactType:e.state.contactType})})))),c.createElement("div",{className:"row"},c.createElement("div",{className:"col-xs-12 text-right"},c.createElement(we.A,{buttonText:"Extra filter",onClickAction:this.addFilterRow}))))}}])}(c.Component);const Ie=(0,u.Ng)((function(e){return{contactStatuses:e.systemData.contactStatuses,staticContactGroups:e.systemData.staticContactGroups,primaryOccupations:e.systemData.primaryOccupations,measureCategories:e.systemData.measureCategories,measures:e.systemData.measures,opportunityStatus:e.systemData.opportunityStatus,opportunityEvaluationStatuses:e.systemData.opportunityEvaluationStatuses,intakeStatuses:e.systemData.intakeStatuses,products:e.systemData.products,energySuppliers:e.systemData.energySuppliers,energySupplierTypes:e.systemData.energySupplierTypes,countries:e.systemData.countries,orderStatuses:e.systemData.orderStatuses,quotationRequestStatus:e.systemData.quotationRequestStatus,inspectionPersonTypes:e.systemData.inspectionPersonTypes,housingFileHoomLinks:e.systemData.housingFileHoomLinks}}))(Oe);var Re=n(38732);function Me(e,t,n){return t=(0,r.A)(t),(0,s.A)(e,Pe()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}h().locale("nl");var Le=function(e){function t(e){var n;return(0,a.A)(this,t),n=Me(this,t,[e]),(0,l.A)(n,"fetchContactsData",(function(){setTimeout((function(){var e=n.state.extraFilters,t=(0,Ee.A)(n.props.contactsFilters),a=n.props.contactsSorts,o={limit:20,offset:n.props.contactsPagination.offset},s=n.state.filterType;n.props.fetchContacts(t,e,a,o,s)}),100)})),(0,l.A)(n,"saveAsGroup",(function(){var e=n.state.extraFilters,t=(0,Ee.A)(n.props.contactsFilters),a=n.state.filterType;he.A.saveAsGroup({filters:t,extraFilters:e,filterType:a}).then((function(e){V.RL.push("/contact-groep/".concat(e.data.data.id,"/edit"))}))})),(0,l.A)(n,"toggleSaveAsGroup",(function(){n.setState({showSaveAsGroup:!n.state.showSaveAsGroup})})),(0,l.A)(n,"getCSV",(function(){n.props.blockUI(),setTimeout((function(){var e=n.state.extraFilters,t=(0,Ee.A)(n.props.contactsFilters),a=n.props.contactsSorts,o=n.state.filterType;he.A.getCSV({filters:t,extraFilters:e,sorts:a,filterType:o}).then((function(e){ve()(e.data,"Contacten-"+h()().format("YYYY-MM-DD HH:mm:ss")+".csv"),n.props.unblockUI()})).catch((function(e){n.props.unblockUI()}))}),100)})),(0,l.A)(n,"getFreeFieldsCSV",(function(){n.props.blockUI(),setTimeout((function(){var e=n.state.extraFilters,t=(0,Ee.A)(n.props.contactsFilters),a=n.props.contactsSorts,o=n.state.filterType;he.A.getFreeFieldsCSV({filters:t,extraFilters:e,sorts:a,filterType:o}).then((function(e){ve()(e.data,"Contacten-Vrije-Velden-"+h()().format("YYYY-MM-DD HH:mm:ss")+".csv"),n.props.unblockUI()})).catch((function(e){n.props.unblockUI()}))}),100)})),(0,l.A)(n,"getEnergySuppliersCSV",(function(){n.props.blockUI(),setTimeout((function(){var e=n.state.extraFilters,t=(0,Ee.A)(n.props.contactsFilters),a=n.props.contactsSorts,o=n.state.filterType;he.A.getEnergySuppliersCSV({filters:t,extraFilters:e,sorts:a,filterType:o}).then((function(e){ve()(e.data,"Contacten-energieleveranciers-"+h()().format("YYYY-MM-DD HH:mm:ss")+".csv"),n.props.unblockUI()})).catch((function(e){n.props.unblockUI()}))}),100)})),(0,l.A)(n,"getExcelAddressEnergyConsumptionGas",(function(){n.props.blockUI(),setTimeout((function(){for(var e=1e4,t=Math.ceil(n.props.contacts.meta.total/e),a=n.props.contacts.meta.total>e,o=1,s=1;s<=t;s++){var r={limit:e,offset:s*e-e},i=(0,Ee.A)(n.props.contactsFilters),l=n.state.extraFilters,c=n.props.contactsSorts;he.A.getExcelAddressEnergyConsumptionGas({filters:i,extraFilters:l,sorts:c,pagination:r}).then((function(e){var s="Contacten-verbruik-gas-".concat(h()().format("YYYY-MM-DD HH:mm:ss"),".xlsx");a&&(s="Contacten-verbruik-gas-".concat(h()().format("YYYY-MM-DD HH:mm:ss")," (").concat(o," van ").concat(t,").xlsx")),ve()(e.data,s),o+=1,n.props.unblockUI()})).catch((function(e){n.props.unblockUI()}))}}),100)})),(0,l.A)(n,"getExcelAddressEnergyConsumptionElectricity",(function(){n.props.blockUI(),setTimeout((function(){for(var e=1e4,t=Math.ceil(n.props.contacts.meta.total/e),a=n.props.contacts.meta.total>e,o=1,s=1;s<=t;s++){var r={limit:e,offset:s*e-e},i=(0,Ee.A)(n.props.contactsFilters),l=n.state.extraFilters,c=n.props.contactsSorts;he.A.getExcelAddressEnergyConsumptionElectricity({filters:i,extraFilters:l,sorts:c,pagination:r}).then((function(e){var s="Contacten-verbruik-elektriciteit-".concat(h()().format("YYYY-MM-DD HH:mm:ss"),".xlsx");a&&(s="Contacten-verbruik-elektriciteit-".concat(h()().format("YYYY-MM-DD HH:mm:ss")," (").concat(o," van ").concat(t,").xlsx")),ve()(e.data,s),o+=1,n.props.unblockUI()})).catch((function(e){n.props.unblockUI()}))}}),100)})),(0,l.A)(n,"resetContactFilters",(function(){n.props.clearFilterContacts(),n.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),n.fetchContactsData()})),(0,l.A)(n,"toggleShowCheckboxList",(function(){n.setState({showCheckboxList:!n.state.showCheckboxList})})),(0,l.A)(n,"selectAllCheckboxes",(function(){n.setState({checkedAllCheckboxes:!n.state.checkedAllCheckboxes}),n.props.setCheckedContactAll(!n.state.checkedAllCheckboxes)})),(0,p.isEmpty)(e.params)||"type"!==e.params.filter||(n.props.clearFilterContacts(),n.props.setTypeFilter(e.params.value)),n.state={campaigns:"",showCheckboxList:!1,checkedAllCheckboxes:!1,showSaveAsGroup:!1,showExtraFilters:!1,filterType:"and",amountOfFilters:0,extraFilters:[]},n.handlePageClick=n.handlePageClick.bind(n),n.handleExtraFiltersChange=n.handleExtraFiltersChange.bind(n),n.getCSV=n.getCSV.bind(n),n.getFreeFieldsCSV=n.getFreeFieldsCSV.bind(n),n.getEnergySuppliersCSV=n.getEnergySuppliersCSV.bind(n),n.toggleShowExtraFilters=n.toggleShowExtraFilters.bind(n),n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchContactsData(),Re.A.peekNotFinishedCampaigns().then((function(t){e.setState({campaigns:t})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.params.value!==e.params.value&&((0,p.isEmpty)(e.params)?this.props.clearFilterContacts():"type"===e.params.filter&&(this.props.clearFilterContacts(),this.props.setTypeFilter(e.params.value)),setTimeout((function(){t.fetchContactsData()}),100))}},{key:"componentWillUnmount",value:function(){this.props.clearContacts()}},{key:"onSubmitFilter",value:function(){this.props.clearContacts(),this.props.setContactsPagination({page:0,offset:0}),this.fetchContactsData()}},{key:"handlePageClick",value:function(e){var t=e.selected,n=Math.ceil(20*t);this.props.setContactsPagination({page:t,offset:n}),this.fetchContactsData()}},{key:"handleExtraFiltersChange",value:function(e,t,n){var a=this;this.setState({filterType:n,amountOfFilters:t,extraFilters:e}),this.props.setContactsPagination({page:0,offset:0}),setTimeout((function(){a.fetchContactsData()}),100)}},{key:"prefillExtraFilter",value:function(){this.setState({filterType:"and",amountOfFilters:1,extraFilters:[{field:"name",type:"eq",data:""}]})}},{key:"toggleShowExtraFilters",value:function(){0===this.state.extraFilters.length&&!this.state.showExtraFilters&&this.prefillExtraFilter(),this.setState({showExtraFilters:!this.state.showExtraFilters})}},{key:"render",value:function(){var e=this;return c.createElement("div",null,c.createElement("div",{className:"panel panel-default"},c.createElement("div",{className:"panel-body"},c.createElement("div",{className:"col-md-12 margin-10-top"},c.createElement(Ce,{toggleShowCheckboxList:function(){return e.toggleShowCheckboxList()},resetContactFilters:function(){return e.resetContactFilters()},selectAllCheckboxes:function(){return e.selectAllCheckboxes()},checkedAllCheckboxes:this.state.checkedAllCheckboxes,getCSV:this.getCSV,getFreeFieldsCSV:this.getFreeFieldsCSV,getEnergySuppliersCSV:this.getEnergySuppliersCSV,getExcelAddressEnergyConsumptionGas:this.getExcelAddressEnergyConsumptionGas,getExcelAddressEnergyConsumptionElectricity:this.getExcelAddressEnergyConsumptionElectricity,toggleSaveAsGroup:this.toggleSaveAsGroup,saveAsGroup:this.saveAsGroup,toggleShowExtraFilters:this.toggleShowExtraFilters,fetchContactsData:this.fetchContactsData})),c.createElement("div",{className:"col-md-12 margin-10-top"},c.createElement(te,{contacts:this.props.contacts,contactsPagination:this.props.contactsPagination,showCheckboxList:this.state.showCheckboxList,selectAllCheckboxes:function(){return e.selectAllCheckboxes()},checkedAllCheckboxes:this.state.checkedAllCheckboxes,onSubmitFilter:function(){return e.onSubmitFilter()},fetchContactsData:function(){return e.fetchContactsData()},handlePageClick:this.handlePageClick})))),this.state.showSaveAsGroup&&c.createElement(be,{saveAsGroup:this.saveAsGroup,closeDeleteItemModal:this.toggleSaveAsGroup}),this.state.showExtraFilters&&c.createElement(Ie,{campaigns:this.state.campaigns,saveAsGroup:this.saveAsGroup,filterType:this.state.filterType,toggleShowExtraFilters:this.toggleShowExtraFilters,handleExtraFiltersChange:this.handleExtraFiltersChange,contactType:this.props.contactsFilters.typeId.data,extraFilters:this.state.extraFilters,amountOfFilters:this.state.amountOfFilters}))}}])}(c.Component);const Ge=(0,u.Ng)((function(e){return{contacts:e.contacts.list,contactsFilters:e.contacts.filters,contactsSorts:e.contacts.sorts,contactsPagination:e.contacts.pagination}}),(function(e){return(0,d.zH)({fetchContacts:f,clearContacts:g,setCheckedContactAll:F,setTypeFilter:C,clearFilterContacts:T,setContactsPagination:x,blockUI:D.o,unblockUI:D.r},e)}))(Le)}}]);