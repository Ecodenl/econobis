"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6776],{76776:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var r=a(23029),o=a(92901),n=a(56822),c=a(53954),s=a(85501),l=a(64467),i=a(96540),m=a(49887),d=a(95506),u=a(24179);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}const w=function(e){function t(e){var a,o,s,i;return(0,r.A)(this,t),o=this,s=t,i=[e],s=(0,c.A)(s),a=(0,n.A)(o,h()?Reflect.construct(s,i||[],(0,c.A)(o).constructor):s.apply(o,i)),(0,l.A)(a,"enableTwoFactor",(function(){m.A.enableTwoFactor(a.state.password).then((function(){a.callFetchTwoFactorQr(),a.callFetchTwoFactorRecoveryCodes()}))})),(0,l.A)(a,"callFetchTwoFactorQr",(function(){return m.A.fetchTwoFactorQr(a.state.password).then((function(e){a.setState({qr:p({},e.data)})}))})),(0,l.A)(a,"callFetchTwoFactorRecoveryCodes",(function(){m.A.fetchTwoFactorRecoveryCodes(a.state.password).then((function(e){a.setState({recoveryCodes:e.data})}))})),a.state={qr:{svg:""},recoveryCodes:[],password:e.location.state?e.location.state.password:"",hasValidPassword:!1,errorMessage:""},a.checkPasswordHandler=a.checkPasswordHandler.bind(a),a}return(0,s.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.password&&m.A.checkPassword(this.state.password).then((function(){e.setState({hasValidPassword:!0}),e.enableTwoFactor()}))}},{key:"checkPasswordHandler",value:function(e){var t=this;e.preventDefault(),this.setState({errorMessage:""}),m.A.checkPassword(this.state.password).then((function(){t.setState({hasValidPassword:!0}),t.enableTwoFactor()})).catch((function(e){t.setState({errorMessage:"Wachtwoord is onjuist."})}))}},{key:"renderAlert",value:function(){if(this.state.errorMessage)return i.createElement("div",{className:"row margin-10-top text-center"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},i.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)))}},{key:"render",value:function(){var e=this;return i.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},i.createElement("div",{className:"panel panel-default add"},i.createElement("div",{className:"panel-body"},i.createElement("div",{className:"text-center"},i.createElement(d.A,{height:"150px"})),this.renderAlert(),this.state.hasValidPassword?i.createElement(i.Fragment,null,i.createElement("div",{className:"row margin-10-top text-center"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},"Het gebruik van twee factor authenticatie is ingeschakeld voor uw account. Sla de herstelcode op een veilige plek op en scan vervolgens de QR-code met een authenticator app.")),i.createElement("div",{className:"row margin-10-top text-center"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},i.createElement("h4",null,"Herstelcode:"),i.createElement("ul",{style:{listStyleType:"none",padding:0}},this.state.recoveryCodes.map((function(e){return i.createElement("li",{key:e,style:{"font-family":"courier"}},e)}))))),i.createElement("div",{className:"row margin-10-top text-center"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},i.createElement("h4",null,"QR"),i.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.qr.svg}}))),i.createElement("div",{className:"row margin-10-top"},i.createElement("div",{className:"col-sm-10 col-md-offset-1"},i.createElement("div",{className:"btn-group pull-right"},i.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){u.RL.push("/two-factor/confirm")}},"Doorgaan"))))):i.createElement("form",{onSubmit:this.checkPasswordHandler},"Voer uw wachtwoord opnieuw in om twee factor authenticatie te activeren.",i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-xs-6"},i.createElement("input",{placeholder:"Wachtwoord",className:"form-control input-sm",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),i.createElement("div",{className:"col-xs-6"},i.createElement("button",{type:"submit",className:"btn btn-primary btn-sm"},"Ontgrendel")))))))}}])}(i.Component)}}]);