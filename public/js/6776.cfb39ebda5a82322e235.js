"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[6776],{76776:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(23029),n=a(92901),o=a(56822),c=a(53954),s=a(85501),l=a(64467),i=a(58168),m=a(96540),d=a(49887),u=a(95506),p=a(47767);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var w=function(e){function t(e){var a,n,s,i;return(0,r.A)(this,t),n=this,s=t,i=[e],s=(0,c.A)(s),a=(0,o.A)(n,v()?Reflect.construct(s,i||[],(0,c.A)(n).constructor):s.apply(n,i)),(0,l.A)(a,"enableTwoFactor",(function(){d.A.enableTwoFactor(a.state.password).then((function(){a.callFetchTwoFactorQr(),a.callFetchTwoFactorRecoveryCodes()}))})),(0,l.A)(a,"callFetchTwoFactorQr",(function(){return d.A.fetchTwoFactorQr(a.state.password).then((function(e){a.setState({qr:h({},e.data)})}))})),(0,l.A)(a,"callFetchTwoFactorRecoveryCodes",(function(){d.A.fetchTwoFactorRecoveryCodes(a.state.password).then((function(e){a.setState({recoveryCodes:e.data})}))})),a.state={qr:{svg:""},recoveryCodes:[],password:e.location.state?e.location.state.password:"",hasValidPassword:!1,errorMessage:""},a.checkPasswordHandler=a.checkPasswordHandler.bind(a),a}return(0,s.A)(t,e),(0,n.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.password&&d.A.checkPassword(this.state.password).then((function(){e.setState({hasValidPassword:!0}),e.enableTwoFactor()}))}},{key:"checkPasswordHandler",value:function(e){var t=this;e.preventDefault(),this.setState({errorMessage:""}),d.A.checkPassword(this.state.password).then((function(){t.setState({hasValidPassword:!0}),t.enableTwoFactor()})).catch((function(e){t.setState({errorMessage:"Wachtwoord is onjuist."})}))}},{key:"renderAlert",value:function(){if(this.state.errorMessage)return m.createElement("div",{className:"row margin-10-top text-center"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)))}},{key:"render",value:function(){var e=this;return m.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},m.createElement("div",{className:"panel panel-default add"},m.createElement("div",{className:"panel-body"},m.createElement("div",{className:"text-center"},m.createElement(u.A,{height:"150px"})),this.renderAlert(),this.state.hasValidPassword?m.createElement(m.Fragment,null,m.createElement("div",{className:"row margin-10-top text-center"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},"Het gebruik van twee factor authenticatie is ingeschakeld voor uw account. Sla de herstelcode op een veilige plek op en scan vervolgens de QR-code met een authenticator app.")),m.createElement("div",{className:"row margin-10-top text-center"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement("h4",null,"Herstelcode:"),m.createElement("ul",{style:{listStyleType:"none",padding:0}},this.state.recoveryCodes.map((function(e){return m.createElement("li",{key:e,style:{"font-family":"courier"}},e)}))))),m.createElement("div",{className:"row margin-10-top text-center"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement("h4",null,"QR"),m.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.qr.svg}}))),m.createElement("div",{className:"row margin-10-top"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement("div",{className:"btn-group pull-right"},m.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.props.navigate("/two-factor/confirm")}},"Doorgaan"))))):m.createElement("form",{onSubmit:this.checkPasswordHandler},"Voer uw wachtwoord opnieuw in om twee factor authenticatie te activeren.",m.createElement("br",null),m.createElement("div",{className:"row"},m.createElement("div",{className:"col-xs-6"},m.createElement("input",{placeholder:"Wachtwoord",className:"form-control input-sm",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),m.createElement("div",{className:"col-xs-6"},m.createElement("button",{type:"submit",className:"btn btn-primary btn-sm"},"Ontgrendel")))))))}}])}(m.Component);const g=function(e){var t=(0,p.Zp)();return m.createElement(w,(0,i.A)({},e,{navigate:t}))}}}]);