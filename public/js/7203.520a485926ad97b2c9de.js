"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[7203],{7639:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(96540),l=n(5556),r=n.n(l),s=n(91385),o=n(4353),i=n(95093),c=n.n(i);c().locale("nl");var u=function(e){var t=e.className,n=e.value,l=e.onChangeAction,r=e.placeholder,i=n?c()(n).format("L"):"";return a.createElement("th",{className:"DayPicker-overflow ".concat(t)},a.createElement(s.default,{value:i,onDayChange:l,formatDate:o.formatDate,parseDate:o.parseDate,dayPickerProps:{showWeekNumbers:!0,locale:"nl",firstDayOfWeek:1,localeUtils:o.default},inputProps:{className:"form-control input-sm",placeholder:r},placeholder:""}))};u.defaultProps={className:"",value:null,placeholder:""},u.propTypes={className:r().string,value:r().oneOfType([r().string,r().object]),onChangeAction:r().func,placeholder:r().string};const m=u},9152:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(96540),l=n(5556),r=n.n(l),s=n(87722),o=n(71866),i=n(34527),c=void 0,u=function(e){var t=e.RowClassName,n=e.setSorts,l=e.sortColumn,r=e.title,u=e.width;return a.createElement("th",{className:t,width:u},r,a.createElement(s.Ay,{className:"pull-right small",size:14,icon:i.m,role:"button",onClick:n.bind(c,l,"ASC")}),a.createElement(s.Ay,{className:"pull-right small",size:14,icon:o.b,role:"button",onClick:n.bind(c,l,"DESC")}))};u.defaultProps={RowClassName:""},u.propTypes={setSorts:r().func.isRequired,sortColumn:r().string.isRequired,title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const m=u},16819:(e,t,n)=>{n.d(t,{lC:()=>l,sD:()=>a,vq:()=>r});var a=function(e){return{type:"FETCH_TASK_DETAILS",id:e}},l=function(e){return{type:"UPDATE_TASK_DETAILS",task:e}},r=function(e){return{type:"DELETE_TASK",id:e}}},19737:(e,t,n)=>{n.d(t,{A:()=>a});const a=function(e){var t=[];for(var n in e)""!==e[n].data&&t.push(e[n]);return t}},26829:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),l=n(5556),r=n.n(l),s=function(e){var t=e.RowClassName,n=e.title,l=e.width;return a.createElement("th",{className:t,width:l},n)};s.defaultProps={RowClassName:""},s.propTypes={title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const o=s},34527:(e,t)=>{t.m=void 0,t.m={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 832q0 53-37 90l-651 652q-39 37-91 37-53 0-90-37l-651-652q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l294 294v-704q0-52 38-90t90-38h128q52 0 90 38t38 90v704l294-294q37-37 90-37 52 0 91 37l75 75q37 39 37 91z"}}]}},42285:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},45403:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("thead",null,e.children)}},71866:(e,t)=>{t.b=void 0,t.b={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 971q0 51-37 90l-75 75q-38 38-91 38-54 0-90-38l-294-293v704q0 52-37.5 84.5t-90.5 32.5h-128q-53 0-90.5-32.5t-37.5-84.5v-704l-294 293q-36 38-90 38t-90-38l-75-75q-38-38-38-90 0-53 38-91l651-651q35-37 90-37 54 0 91 37l651 651q37 39 37 91z"}}]}},77203:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var a=n(5544),l=n(96540),r=n(69733),s=function(e){return{type:"SET_FILTER_TASK_CREATED_AT",createdAt:e}},o=function(e){return{type:"SET_FILTER_TASK_TYPE_ID",typeId:e}},i=function(e){return{type:"SET_FILTER_TASK_NOTE",note:e}},c=function(e){return{type:"SET_FILTER_TASK_CONTACT_FULL_NAME",contactFullName:e}},u=function(e){return{type:"SET_FILTER_TASK_DATE_PLANNED_START",datePlannedStart:e}},m=function(e){return{type:"SET_FILTER_TASK_RESPONSIBLE_NAME",responsibleName:e}},d=function(e){return{type:"SET_FILTER_TASK_ME",me:e}},f=function(e){return{type:"SET_TASKS_PAGINATION",pagination:e}},h=n(58168),E=n(60436),p=n(42285),k=n(45403),A=n(93913),g=n(9152),T=n(26829);const v=(0,r.Ng)(null,(function(e){return{setTasksSortsFilter:function(t,n){e(function(e,t){return{type:"SET_TASKS_SORTS",field:e,order:t}}(t,n))}}}))((function(e){var t=function(t,n){e.setTasksSortsFilter(t,n),setTimeout((function(){e.fetchTasksData()}),100)};return l.createElement("tr",{className:"thead-title"},e.showSelectTasks&&l.createElement("th",{width:"5%"}),l.createElement(g.A,{sortColumn:"createdAt",title:"Datum",width:"8%",setSorts:t}),l.createElement(g.A,{sortColumn:"typeName",title:"Type taak",width:"10%",setSorts:t}),l.createElement(g.A,{sortColumn:"note",title:"Taak / notitie",width:e.showSelectTasks?"15%":"20%",setSorts:t}),l.createElement(g.A,{sortColumn:"contactFullName",title:"Contact",width:"17%",setSorts:t}),l.createElement(g.A,{sortColumn:"datePlannedStart",title:"Datum afhandelen",width:"8%",setSorts:t}),l.createElement(T.A,{title:"Verantwoordelijke",width:"15%"}),l.createElement("th",{width:"5%"}))}));var S=n(17375),N=n(95093),w=n.n(N),b=n(7639);const y=(0,r.Ng)((function(e){return{filters:e.tasks.filters,taskTypes:e.systemData.taskTypes}}),(function(e){return(0,S.zH)({setFilterTaskCreatedAt:s,setFilterTaskTypeId:o,setFilterTaskNote:i,setFilterTaskContactFullName:c,setFilterTaskDatePlannedStart:u,setFilterTaskResponsibleName:m},e)}))((function(e){return l.createElement("tr",{className:"thead-filter"},e.showSelectTasks&&l.createElement("th",null,l.createElement("input",{type:"checkbox",onChange:e.toggleCheckedAll})),l.createElement(b.A,{value:e.filters.createdAt.data&&e.filters.createdAt.data,onChangeAction:function(t){void 0===t?e.setFilterTaskCreatedAt(""):e.setFilterTaskCreatedAt(w()(t).format("Y-MM-DD"))}}),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:e.filters.typeId.data,onChange:function(t){e.setFilterTaskTypeId(t.target.value),setTimeout((function(){e.onSubmitFilter()}),100)}},l.createElement("option",null),e.taskTypes.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.name)})))),l.createElement("th",null,l.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.note.data,onChange:function(t){e.setFilterTaskNote(t.target.value)}})),l.createElement("th",null,l.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.contactFullName.data,onChange:function(t){e.setFilterTaskContactFullName(t.target.value)}})),l.createElement(b.A,{value:e.filters.datePlannedStart.data&&e.filters.datePlannedStart.data,onChangeAction:function(t){void 0===t?e.setFilterTaskDatePlannedStart(""):e.setFilterTaskDatePlannedStart(w()(t).format("Y-MM-DD"))}}),l.createElement("th",null,l.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.responsibleName.data,onChange:function(t){e.setFilterTaskResponsibleName(t.target.value)}})),l.createElement("th",null))}));var C=n(23029),D=n(92901),I=n(56822),F=n(53954),_=n(85501),R=n(47767),M=n(87722),B=n(87696),P=n(88505),q=n(24362);function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}var j=function(e){function t(e){var n,a,l,r;return(0,C.A)(this,t),a=this,l=t,r=[e],l=(0,F.A)(l),(n=(0,I.A)(a,L()?Reflect.construct(l,r||[],(0,F.A)(a).constructor):l.apply(a,r))).state={showActionButtons:!1,highlightRow:""},n.openItem=n.openItem.bind(n),n.setItemFinished=n.setItemFinished.bind(n),n}return(0,_.A)(t,e),(0,D.A)(t,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(){this.props.navigate("/taak/".concat(this.props.id))}},{key:"setItemFinished",value:function(){var e={id:this.props.id,finished:!0};this.props.setTaskFinished(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.createdAt,r=t.typeName,s=t.noteSummary,o=t.contactFullName,i=t.datePlannedStart,c=t.responsibleName,u=t.showSelectTasks,m=t.toggleTaskCheck,d=t.taskIds;return l.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return e.openItem(n)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},u&&l.createElement("td",null,l.createElement("input",{type:"checkbox",name:n,onChange:m,checked:!!(d&&d.length>0)&&d.includes(n)})),l.createElement("td",null,w()(a).format("L")),l.createElement("td",null,r),l.createElement("td",null,s),l.createElement("td",null,o),l.createElement("td",null,i&&w()(i).format("L")),l.createElement("td",null,c),l.createElement("td",null,this.state.showActionButtons?l.createElement("a",{role:"button",onClick:this.openItem},l.createElement(M.Ay,{className:"mybtn-success",size:14,icon:P.w})):"",this.state.showActionButtons&&this.props.permissions.manageTask?l.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,n,s)},l.createElement(M.Ay,{className:"mybtn-danger",size:14,icon:B.d})):"",this.state.showActionButtons?l.createElement("a",{role:"button",onClick:this.setItemFinished},l.createElement(M.Ay,{className:"mybtn-success",size:14,icon:q.z})):""))}}])}(l.Component);const K=(0,r.Ng)((function(e){return{permissions:e.meDetails.permissions}}),(function(e){return{setTaskFinished:function(t){e({type:"SET_TASK_FINISHED",task:t})}}}))((function(e){var t=(0,R.Zp)();return l.createElement(j,(0,h.A)({},e,{navigate:t}))}));var x=n(63750),z=n(16819);const O=(0,r.Ng)(null,(function(e){return{deleteTask:function(t){e((0,z.vq)(t))}}}))((function(e){return l.createElement(x.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteTask(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder taak: ",l.createElement("strong",null," ",e.name," "))}));var U=n(74850),V=n(91858),G=n(32675),H=n(46749);const W=function(e){var t=(0,r.wA)();return l.createElement(x.A,{buttonConfirmText:"Verwijderen taken",buttonClassName:"btn-danger",closeModal:e.closeBulkDeleteModal,confirmAction:function(){e.taskIds&&e.taskIds.length>0&&G.A.deleteBulkTasks(e.taskIds).then((function(n){n.data.length>0&&t((0,H.N)(200,n.data)),e.confirmActionsBulkDelete()})).catch((function(t){console.log("hier de error:"),console.log(t),e.confirmActionsBulkDelete()}))},title:"Verwijderen taken"},"Verwijder alle ",l.createElement("strong",null,e.taskIds.length," geselecteerde taken.")," Weet je het zeker?")};var Y=n(77465),Z=n(8426);const J=function(e){var t=e.confirmActionsBulkUpdate,n=e.closeBulkUpdateModal,s=e.taskIds,o=(0,r.d4)((function(e){return e.systemData.teams})),i=(0,r.d4)((function(e){return e.systemData.users})),c=(0,l.useState)(0),u=(0,a.A)(c,2),m=u[0],d=u[1],f=(0,l.useState)(-1),h=(0,a.A)(f,2),E=h[0],p=h[1],k=(0,l.useState)(-1),A=(0,a.A)(k,2),g=A[0],T=A[1];return l.createElement(x.A,{buttonConfirmText:"Bijwerken taken",buttonClassName:"btn-danger",closeModal:n,confirmAction:function(){return function(){if(s&&s.length>0){var e={};m&&(e.finished=m),-1!==E&&(e.responsibleUserId=E),-1!==g&&(e.responsibleTeamId=g),G.A.updateBulkTasks(s,e).then((function(){t()}))}}()},title:"Bijwerken taken"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement(Y.A,{label:"Afgehandeld?",divSize:"col-sm-12",name:"finished",value:m,onChangeAction:function(e){return d(e.target.checked)}}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement(Z.A,{label:"Verantwoordelijke",divSize:"col-sm-12",name:"responsible",optionsInGroups:[{name:"general",label:"Algemeen",options:[{id:"-1",name:"--- niet wijzigen ---"}]},{name:"user",label:"Gebruikers",options:i,optionName:"fullName"},{name:"team",label:"Teams",options:o}],value:-1===E&&-1===g?"general-1":E?"user"+E:g?"team"+g:"general-1",onChangeAction:function(e){return function(e){if("general-1"===e)return p(-1),void T(-1);p(null),T(null),0===e.indexOf("user")&&p(e.replace("user","")),0===e.indexOf("team")&&T(e.replace("team",""))}(e.target.value)},emptyOption:!1}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},"Bijwerken alle ",l.createElement("strong",null,s.length," geselecteerde taken.")," Weet je het zeker?")))},Q=function(e){var t=e.tasks,n=e.multiSelectEnabled,s=e.setMultiSelectDisabled,o=e.tasksPagination,i=e.onSubmitFilter,c=e.fetchTasksData,u=e.handlePageClick,m=(0,l.useState)(!1),d=(0,a.A)(m,2),f=(d[0],d[1]),g=(0,l.useState)([]),T=(0,a.A)(g,2),S=T[0],N=T[1],w=(0,l.useState)(!1),b=(0,a.A)(w,2),C=b[0],D=b[1],I=(0,l.useState)({id:"",name:""}),F=(0,a.A)(I,2),_=F[0],R=F[1],M=(0,l.useState)(!1),B=(0,a.A)(M,2),P=B[0],q=B[1],L=(0,l.useState)(!1),j=(0,a.A)(L,2),x=j[0],z=j[1],G=(0,r.d4)((function(e){return e.meDetails.permissions})),H=(0,r.d4)((function(e){return e.loadingData.isLoading})),Y=(0,r.d4)((function(e){return e.loadingData.hasError}));function Z(e){var t=e.target.checked,n=Number(e.target.name);t?(N([].concat((0,E.A)(S),[n])),f(S.length===te.taskIdsTotal.length)):(N((0,E.A)(S.filter((function(e){return e!==n})))),f(!1))}function Q(e,t){D(!0),R({id:e,name:t})}(0,l.useEffect)((function(){n||(f(!1),N([]))}),[n]);var X=t.data,$=void 0===X?[]:X,ee=t.meta,te=void 0===ee?{}:ee,ne="",ae=!0;Y?ne="Fout bij het ophalen van taken.":H?ne="Gegevens aan het laden.":0===$.length?ne="Geen taken gevonden!":ae=!1;var le=0;return S&&(le=te&&te.taskIdsTotal?S.length+"/"+te.taskIdsTotal.length:S.length),l.createElement("div",null,l.createElement("form",{onKeyUp:function(e){13===e.keyCode&&i()}},n&&G.manageTask&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"alert alert-success"},"Geselecteerde taken: ",le)),l.createElement("div",{className:"col-md-12 margin-10-bottom"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(V.A,{iconName:"pencil",onClickAction:function(e,t){z(!0)},title:"Bijwerken geselecteerde taken"}),l.createElement(V.A,{iconName:"trash",onClickAction:function(e,t){q(!0)},title:"Verwijderen geselecteerde taken"})))),l.createElement(p.A,null,l.createElement(k.A,null,l.createElement(v,{fetchTasksData:function(){return c()},showSelectTasks:n}),l.createElement(y,{onSubmitFilter:i,showSelectTasks:n,toggleCheckedAll:function(){var e=event.target.checked,t=[];e&&(t=te.taskIdsTotal),N(t),f(e)}})),l.createElement(A.A,null,ae?l.createElement("tr",null,l.createElement("td",{colSpan:n?8:7},ne)):$.map((function(e){return l.createElement(K,(0,h.A)({key:e.id},e,{showDeleteItemModal:Q,showSelectTasks:n,toggleTaskCheck:Z,taskIds:S}))})))),l.createElement("div",{className:"col-md-6 col-md-offset-3"},l.createElement(U.A,{onPageChangeAction:u,totalRecords:te.total,initialPage:o.page}))),C&&l.createElement(O,(0,h.A)({closeDeleteItemModal:function(){D(!1),R({id:"",name:""})}},_)),P&&l.createElement(W,{confirmActionsBulkDelete:function(e,t){q(!1),s(),c()},closeBulkDeleteModal:function(e,t){q(!1)},taskIds:S}),x&&l.createElement(J,{confirmActionsBulkUpdate:function(e,t){z(!1),s(),c()},closeBulkUpdateModal:function(e,t){z(!1)},taskIds:S}))},X=(0,r.Ng)((function(e){return{permissions:e.meDetails.permissions,tasks:e.tasks.list}}),null)((function(e){var t=(0,R.Zp)(),n=e.permissions,a=void 0===n?{}:n,r=e.tasks.meta,s=void 0===r?{}:r;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(V.A,{iconName:"refresh",onClickAction:e.resetTaskFilters}),a.manageTask&&l.createElement(V.A,{iconName:"plus",onClickAction:function(){t("/taak/nieuw")}}),a.manageTask&&l.createElement(V.A,{iconName:"check",onClickAction:e.setMultiSelectEnabled,title:"Taak selectie maken"}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title"},e.me?"Eigen taken":"Taken")),l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"pull-right"},"Resultaten: ",s.total||0)))}));var $=n(19737),ee=n(62493),te=n(55849),ne=n(2543);const ae=function(e){var t=(0,R.g)(),n=(0,l.useState)(!1),s=(0,a.A)(n,2),o=s[0],i=s[1],c=(0,r.d4)((function(e){return e.tasks.list})),u=(0,r.d4)((function(e){return e.tasks.filters})),m=(0,r.d4)((function(e){return e.tasks.sorts})),h=(0,r.d4)((function(e){return e.tasks.pagination})),E=(0,r.wA)();function p(){setTimeout((function(){var e=(0,$.A)(u),t=m,n={limit:20,offset:h.offset};E(function(e,t,n){return{type:"FETCH_TASKS",filters:e,sorts:t,pagination:n}}(e,t,n))}),100)}(0,l.useEffect)((function(){t&&"eigen"===t.type?E(d(!0)):E(d(!1))}),[t.type]),(0,l.useEffect)((function(){p()}),[u,m,h]);var k=!1;return"eigen"===t.type&&(k=!0),l.createElement(ee.A,null,l.createElement(te.A,null,l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(X,{resetTaskFilters:function(){E({type:"CLEAR_FILTER_TASKS"}),(0,ne.isEmpty)(t)||"eigen"===t.type&&E(d(!0))},me:k,setMultiSelectEnabled:function(){return i(!o)}})),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(Q,{tasks:c,multiSelectEnabled:o,setMultiSelectDisabled:function(){return i(!1)},tasksPagination:h,onSubmitFilter:function(){E({type:"CLEAR_TASKS"}),E(f({page:0,offset:0}))},fetchTasksData:p,handlePageClick:function(e){var t=e.selected,n=Math.ceil(20*t);E(f({page:t,offset:n}))}}))))}},93913:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540);const l=function(e){return a.createElement("tbody",null,e.children)}}}]);