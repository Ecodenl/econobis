"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[748],{9152:(e,t,n)=>{n.d(t,{A:()=>u}),n(94170);var l=n(96540),a=n(5556),c=n.n(a),r=n(87722),o=n(71866),s=n(56908),i=void 0,m=function(e){var t=e.RowClassName,n=e.setSorts,a=e.sortColumn,c=e.title,m=e.width;return l.createElement("th",{className:t,width:m},c,l.createElement(r.Ay,{className:"pull-right small",size:14,icon:s.m,role:"button",onClick:n.bind(i,a,"ASC")}),l.createElement(r.Ay,{className:"pull-right small",size:14,icon:o.b,role:"button",onClick:n.bind(i,a,"DESC")}))};m.defaultProps={RowClassName:""},m.propTypes={setSorts:c().func.isRequired,sortColumn:c().string.isRequired,title:c().string.isRequired,width:c().string.isRequired,RowClassName:c().string};const u=m},26829:(e,t,n)=>{n.d(t,{A:()=>o});var l=n(96540),a=n(5556),c=n.n(a),r=function(e){var t=e.RowClassName,n=e.title,a=e.width;return l.createElement("th",{className:t,width:a},n)};r.defaultProps={RowClassName:""},r.propTypes={title:c().string.isRequired,width:c().string.isRequired,RowClassName:c().string};const o=r},30748:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j}),n(52675),n(51629),n(67945),n(84185),n(83851),n(81278),n(79432),n(23500);var l=n(60436),a=n(64467),c=n(5544),r=(n(28706),n(2008),n(62062),n(15086),n(26099),n(76031),n(96540)),o=n(62493),s=n(55849),i=n(58168),m=n(69733),u=n(87722),d=n(88505);const p=(0,m.Ng)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.checkedNew,n=e.toggleCheckedImportNew,l=e.showCheckboxUpdate,a=e.selectedContactsUpdate,o=e.toggleCheckedContactUpdate,s=e.id,i=e.number,m=e.initials,p=e.firstName,h=e.lastNamePrefix,E=e.lastName,f=e.street,g=e.housenumber,C=e.addition,A=e.postalCode,N=e.city,w=e.emailContact,v=e.phoneNumber,b=e.ean,k=e.eanType,I=e.supplierCodeRef,S=e.esNumber,y=(e.permissions,e.importMatchDescription),x=e.contactForImports,U=e.totalImportIds,T=e.allowUpdateAction,F=e.totalContactIds,P=(0,r.useState)(!1),q=(0,c.A)(P,2),O=q[0];return q[1],r.createElement(r.Fragment,null,r.createElement("tr",{style:{backgroundColor:"#ececec"}},r.createElement("td",null,l?null:r.createElement(r.Fragment,null,r.createElement("input",{type:"checkbox",checked:t,onChange:function(){return n(s)},disabled:U.some((function(e){return e.importId===s&&!0===e.blocked}))})," Nieuw")),r.createElement("td",null,y),r.createElement("td",null,i),r.createElement("td",null,m),r.createElement("td",null,p),r.createElement("td",null,h),r.createElement("td",null,E),r.createElement("td",null,f),r.createElement("td",null,g),r.createElement("td",null,C),r.createElement("td",null,A),r.createElement("td",null,N),r.createElement("td",null,w),r.createElement("td",null,v),r.createElement("td",null,I),r.createElement("td",null,k),r.createElement("td",null,b),r.createElement("td",null,S)),x.map((function(e){return r.createElement("tr",null,r.createElement("td",null,O?r.createElement("a",{role:"button",onClick:function(){return openItem(s)}},r.createElement(u.Ay,{className:"mybtn-success",size:14,icon:d.w})):"","supplierFullMatch"!=e.matchCode&&T?r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,r.createElement("input",{type:"checkbox",checked:!!a&&a.some((function(t){return t.importId===s&&t.contactId===e.id})),onChange:function(){return o(s,e.id)},disabled:F.some((function(t){return t.importId===s&&t.contactId===e.id&&!0===t.blocked}))})," Bijwerken")):""),r.createElement("td",{style:{background:e.matchColor}},e.matchDescription),r.createElement("td",null,e.number),r.createElement("td",null,e.initials),r.createElement("td",null,e.firstName),r.createElement("td",null,e.lastNamePrefix),r.createElement("td",null,e.lastName),r.createElement("td",null,e.street),r.createElement("td",null,e.housenumber),r.createElement("td",null,e.addition),r.createElement("td",null,e.postalCode),r.createElement("td",null,e.city),r.createElement("td",null,e.emailContact),r.createElement("td",null,e.phoneNumber),r.createElement("td",null,"Gas"===k?e.esCodeRefGas:e.esCodeRefElectricity),r.createElement("td",null,"Gas"===k?e.esTypeGas:e.esTypeElectricity),r.createElement("td",null,"Gas"===k?e.eanGas:e.eanElectricity),r.createElement("td",null,"Gas"===k?e.esNumberGas:e.esNumberElectricity))})))}));var h=n(74850),E=n(45403),f=n(93913),g=n(26829),C=n(9152);const A=function(e){return r.createElement("tr",{className:"thead-title"},r.createElement("th",{width:"6%"},e.selectAllNew?r.createElement(r.Fragment,null,r.createElement("input",{type:"checkbox",checked:e.checkedAllNew,onChange:e.toggleAllCheckboxesNew})," Nieuw"):null,e.selectAllUpdate?r.createElement(r.Fragment,null,r.createElement("input",{type:"checkbox",checked:e.checkedAllUpdate,onChange:e.toggleAllCheckboxesUpdate})," Bijwerken"):null),r.createElement(g.A,{title:"Match",width:"8%"}),r.createElement(g.A,{title:"Contact nr",width:"5%"}),r.createElement(C.A,{sortColumn:"initials",title:"Initialen",width:"5%",setSorts:e.handleChangeSort}),r.createElement(C.A,{sortColumn:"firstName",title:"Voornaam",width:"5%",setSorts:e.handleChangeSort}),r.createElement(g.A,{sortColumn:"lastNamePrefix",title:"Tussen voegsel",width:"5%",setSorts:e.handleChangeSort}),r.createElement(C.A,{sortColumn:"lastName",title:"Achternaam",width:"9%",setSorts:e.handleChangeSort}),r.createElement(C.A,{sortColumn:"street",title:"Adres",width:"9%",setSorts:e.handleChangeSort}),r.createElement(g.A,{title:"Huis nr",width:"4%"}),r.createElement(g.A,{title:"Toev.",width:"3%"}),r.createElement(C.A,{sortColumn:"postalCode",title:"Postcode",width:"4%",setSorts:e.handleChangeSort}),r.createElement(C.A,{sortColumn:"city",title:"Woonplaats",width:"5%",setSorts:e.handleChangeSort}),r.createElement(C.A,{sortColumn:"emailContact",title:"Email primair",width:"9%",setSorts:e.handleChangeSort}),r.createElement(g.A,{title:"Telefoon",width:"5%"}),r.createElement(g.A,{title:"Energie leverancier",width:"5%"}),r.createElement(g.A,{title:"Ean type",width:"5%"}),r.createElement(g.A,{title:"Ean",width:"8%"}),r.createElement(g.A,{title:"Klant nr",width:"5%"}))};var N=n(74069);const w=function(e){var t=e.filter,n=e.handleChangeFilter;return r.createElement(r.Fragment,null,r.createElement("tr",{className:"thead-filter"},r.createElement("th",null),r.createElement("th",null),r.createElement("th",null),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.initials,onChange:function(e){return n("initials",e.target.value)}})),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.firstName,onChange:function(e){return n("firstName",e.target.value)}})),r.createElement("th",null),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.lastName,onChange:function(e){return n("lastName",e.target.value)}})),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.street,onChange:function(e){return n("street",e.target.value)}})),r.createElement("th",null),r.createElement("th",null),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.postal_code,onChange:function(e){return n("postal_code",e.target.value)}})),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.city,onChange:function(e){return n("city",e.target.value)}})),r.createElement("th",null,r.createElement("input",{type:"text",className:"form-control input-sm",value:t.emailContact,onChange:function(e){return n("emailContact",e.target.value)}})),r.createElement("th",null),r.createElement("th",null),r.createElement("th",null),r.createElement("th",null),r.createElement("th",null)))};var v=n(55956);const b=function(e){var t=e.ContactToImports,n=e.ContactToImportsTotal,l=e.checkedAllNew,a=e.checkedAllUpdate,c=e.recordsPerPage,o=e.isLoading,s=e.filter,m=e.handlePageClick,u=e.handleChangeSort,d=e.handleChangeFilter,g=e.totalImportIds,C=e.allowUpdateAction,N=e.totalContactIds,b=e.selectAllNew,k=e.toggleCheckedImportNew,I=e.toggleAllCheckboxesNew,S=e.selectedImportsNew,y=e.numberSelectedNewTotal,x=e.selectAllUpdate,U=e.toggleCheckedContactUpdate,T=e.toggleAllCheckboxesUpdate,F=e.selectedContactsUpdate,P=e.numberSelectedUpdateTotal,q=e.createContactsFromImport,O=e.updateContactsFromImport;return r.createElement("div",null,r.createElement("form",{className:"margin-10-top"},r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-12"}," "),S&&S.length>0?r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"alert alert-success"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-3"},"  Geselecteerde imports nieuw: ",y),r.createElement("div",{className:"col-md-3"},r.createElement(v.A,{buttonText:"Aanmaken als nieuwe contact(en)",onClickAction:q})),r.createElement("div",{className:"col-md-6"}," ")))):null,F&&F.length>0?r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"alert alert-success"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-3"},"  Geselecteerde contacten bijwerken: ",P),r.createElement("div",{className:"col-md-3"},r.createElement(v.A,{buttonText:"Bijwerken contact(en)",onClickAction:O})),r.createElement("div",{className:"col-md-6"}," ")))):null),r.createElement("table",{className:"table table-condensed col-xs-12"},r.createElement(E.A,null,r.createElement(A,{handleChangeSort:u,checkedAllNew:l,checkedAllUpdate:a,selectAllNew:b,selectAllUpdate:x,toggleAllCheckboxesNew:I,toggleAllCheckboxesUpdate:T}),r.createElement(w,{filter:s,handleChangeFilter:d})),r.createElement(f.A,null,o?r.createElement("tr",null,r.createElement("td",{colSpan:16},"Bezig met gegevens laden")):t.length>0?t.map((function(e){return r.createElement(p,(0,i.A)({checkedNew:!!S&&S.some((function(t){return t.importId===e.id})),toggleCheckedImportNew:k,showCheckboxUpdate:x,selectedContactsUpdate:F,toggleCheckedContactUpdate:U,key:e.id,totalImportIds:g,allowUpdateAction:C,totalContactIds:N},e))})):r.createElement("tr",null,r.createElement("td",{colSpan:16},"Geen resultaten!")))),r.createElement("div",{className:"col-md-6 col-md-offset-3"},r.createElement(h.A,{onPageChangeAction:m,totalRecords:n,initialPage:0,recordsPerPage:c}))))};var k=n(91858);const I=(0,m.Ng)((function(e){return{permissions:e.meDetails.permissions}}),null)((function(e){var t=e.ContactToImportsTotal,n=e.refreshContactToImports,l=(e.permissions,e.getExcel),a=e.allowUpdateAction,c=e.selectAllNew,o=e.selectAllUpdate,s=e.actionSelectAllNew,i=e.actionSelectAllUpdate,m=e.updateContactMatches;return r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-4"},r.createElement("div",{className:"btn-group btn-group-flex",role:"group"},r.createElement(k.A,{iconName:"refresh",onClickAction:n}),r.createElement(k.A,{iconName:"download",onClickAction:l,title:"Downloaden contacten naar Excel"}),r.createElement(v.A,{buttonText:c?"Alles":"Alleen nieuw selectie",onClickAction:s}),a?r.createElement(r.Fragment,null," ",r.createElement(v.A,{buttonText:o?"Alles":"Alleen bijwerken selectie",onClickAction:i})):null,r.createElement(v.A,{buttonText:"Actualiseren matches",onClickAction:m}))),r.createElement("div",{className:"col-md-4"},r.createElement("h3",{className:"text-center table-title"},"Signaleringslijst importeren Energieklanten")),r.createElement("div",{className:"col-md-4"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-12"},r.createElement("div",{className:"pull-right"},"Resultaten: ",t)))))}));var S=n(72505),y=n.n(S),x=n(93822),U=n(5419),T=n.n(U),F=n(95093),P=n.n(F);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const j=function(){var e=(0,r.useState)([]),t=(0,c.A)(e,2),n=t[0],i=t[1],m=(0,r.useState)(!0),u=(0,c.A)(m,2),d=u[0],p=u[1],h=(0,r.useState)(0),E=(0,c.A)(h,2),f=E[0],g=E[1],C=(0,r.useState)([]),A=(0,c.A)(C,2),w=A[0],v=A[1],k=(0,r.useState)(!1),S=(0,c.A)(k,2),U=S[0],F=S[1],q=(0,r.useState)([]),j=(0,c.A)(q,2),R=j[0],D=j[1],M=(0,r.useState)([]),G=(0,c.A)(M,2),z=G[0],B=G[1],Y=(0,r.useState)(!1),H=(0,c.A)(Y,2),J=H[0],L=H[1],W=(0,r.useState)([]),_=(0,c.A)(W,2),K=_[0],V=_[1],Q=(0,r.useState)(!1),X=(0,c.A)(Q,2),Z=X[0],$=X[1],ee=(0,r.useState)([]),te=(0,c.A)(ee,2),ne=te[0],le=te[1],ae=(0,r.useState)(!1),ce=(0,c.A)(ae,2),re=ce[0],oe=ce[1],se=(0,r.useState)(!1),ie=(0,c.A)(se,2),me=ie[0],ue=ie[1],de=(0,r.useState)([{field:"lastName",order:"ASC"}]),pe=(0,c.A)(de,2),he=pe[0],Ee=pe[1],fe=(0,r.useState)({page:0,offset:0,limit:20}),ge=(0,c.A)(fe,2),Ce=ge[0],Ae=ge[1];function Ne(){y().all([N.A.fetchContactToImports(be(!0),he,Ce,re,me)]).then(y().spread((function(e){i(e.data.data),g(e.data.meta.total),v(e.data.meta.totalImportIds),F(e.data.meta.allowUpdateAction),D(e.data.meta.totalContactIds),p(!1)}))).catch((function(e){p(!1),alert("Er is iets misgegaan met ophalen van de gegevens.")}))}function we(e,t){D(R.map((function(n){return n.importId===e?O(O({},n),{},{blocked:n.contactId!==t}):n})))}function ve(e,t){D(R.map((function(t){return t.importId===e?O(O({},t),{},{blocked:!1}):t})))}function be(e){var t=[];return e&&t.push({field:"status",data:"new"}),z.initials&&t.push({field:"initials",data:z.initials}),z.firstName&&t.push({field:"firstName",data:z.firstName}),z.lastName&&t.push({field:"lastName",data:z.lastName}),z.street&&t.push({field:"street",data:z.street}),z.postalCode&&t.push({field:"postalCode",data:z.postalCode}),z.city&&t.push({field:"city",data:z.city}),z.emailContact&&t.push({field:"emailContact",data:z.emailContact}),t}return(0,r.useEffect)((function(){Ne()}),[Ce.offset,z,he,!0===re,!0===me]),(0,r.useEffect)((function(){re&&L(K.length===w.length)}),[K]),(0,r.useEffect)((function(){me&&$(ne.length===R.length)}),[ne]),r.createElement(o.A,null,r.createElement(s.A,null,r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement(I,{ContactToImportsTotal:f,refreshContactToImports:Ne,getExcel:function(){p(!0);var e=be(!1);x.A.getExcelContactToImport({filters:e,sorts:he}).then((function(e){T()(e.data,"signaleringslijst-importeren-energieklanten-".concat(P()().format("YYYY-MM-DD HH:mm:ss"),".xlsx")),p(!1)})).catch((function(){p(!1),alert("Er is iets misgegaan met ophalen van de gegevens.")}))},allowUpdateAction:U,selectAllNew:re,selectAllUpdate:me,actionSelectAllNew:function(){V([]),Ae(O(O({},Ce),{},{offset:0})),!1===re?(ue(!1),oe(!0)):(ue(!1),oe(!1))},actionSelectAllUpdate:function(){le([]),Ae(O(O({},Ce),{},{offset:0})),!1===me?(oe(!1),ue(!0)):(oe(!1),ue(!1))},updateContactMatches:function(){p(!0),N.A.updateContactMatches().then((function(e){setTimeout((function(){oe(!1),ue(!1),L(!1),V([]),$(!1),le([]),Ne()}),200),p(!1)})).catch((function(){p(!1),alert("Er is iets misgegaan met actualiseren matches vanuit import.")}))}})),r.createElement("div",{className:"col-md-12 margin-10-top"},r.createElement(b,{ContactToImports:n,ContactToImportsTotal:f,checkedAllNew:J,checkedAllUpdate:Z,recordsPerPage:20,isLoading:d,filter:z,handlePageClick:function(e){var t=Math.ceil(20*e.selected);Ae(O(O({},Ce),{},{offset:t}))},handleChangeSort:function(e,t){var n=he;3===n.length&&n.pop();var a={field:"".concat(e),order:"".concat(t)};Ee([a].concat((0,l.A)(n)))},handleChangeFilter:function(e,t){B(O(O({},z),{},(0,a.A)({},e,t))),i([]),Ae(O(O({},Ce),{},{offset:0}))},totalImportIds:w,allowUpdateAction:U,totalContactIds:R,selectAllNew:re,toggleCheckedImportNew:function(e){var t={importId:e};K.some((function(t){return t.importId===e}))?(V(K.filter((function(t){return!(t.importId===e)}))),ve(e)):(V([].concat((0,l.A)(K),[t])),we(e,"all"))},toggleAllCheckboxesNew:function(){!1===J?(L(!0),V(w)):(L(!1),V([]))},selectedImportsNew:K,numberSelectedNewTotal:K&&w?K.length+"/"+w.length:K.length,selectAllUpdate:me,toggleCheckedContactUpdate:function(e,t){var n={importId:e,contactId:t};ne.some((function(n){return n.importId===e&&n.contactId===t}))?(le(ne.filter((function(n){return!(n.importId===e&&n.contactId===t)}))),function(e){v(w.map((function(t){return t.importId===e?O(O({},t),{},{blocked:!1}):t})))}(e),ve(e)):(le([].concat((0,l.A)(ne),[n])),function(e){v(w.map((function(t){return t.importId===e?O(O({},t),{},{blocked:!0}):t})))}(e),we(e,t))},toggleAllCheckboxesUpdate:function(){!1===Z?($(!0),le(R)):($(!1),le([]))},selectedContactsUpdate:ne,numberSelectedUpdateTotal:ne&&R?ne.length+"/"+R.length:ne.length,createContactsFromImport:function(){N.A.createContactsFromImport(K).then((function(e){setTimeout((function(){oe(!1),ue(!1),L(!1),V([]),$(!1),le([]),Ne()}),200)})).catch((function(){p(!1),alert("Er is iets misgegaan met aanmaken contacten vanuit import.")}))},updateContactsFromImport:function(){N.A.updateContactsFromImport(ne).then((function(e){setTimeout((function(){oe(!1),ue(!1),L(!1),V([]),$(!1),le([]),Ne()}),200)})).catch((function(){p(!1),alert("Er is iets misgegaan met bijwerken contacten vanuit import.")}))}}))))}},45403:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(96540);const a=function(e){return l.createElement("thead",null,e.children)}},56908:(e,t)=>{t.m=void 0,t.m={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 832q0 53-37 90l-651 652q-39 37-91 37-53 0-90-37l-651-652q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l294 294v-704q0-52 38-90t90-38h128q52 0 90 38t38 90v704l294-294q37-37 90-37 52 0 91 37l75 75q37 39 37 91z"}}]}},71866:(e,t)=>{t.b=void 0,t.b={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 971q0 51-37 90l-75 75q-38 38-91 38-54 0-90-38l-294-293v704q0 52-37.5 84.5t-90.5 32.5h-128q-53 0-90.5-32.5t-37.5-84.5v-704l-294 293q-36 38-90 38t-90-38l-75-75q-38-38-38-90 0-53 38-91l651-651q35-37 90-37 54 0 91 37l651 651q37 39 37 91z"}}]}},74069:(e,t,n)=>{n.d(t,{A:()=>c}),n(60739);var l=n(61941),a=n(61643);const c={fetchContactToImports:function(e,t,n,c,r){var o="".concat((0,a.e)(),"/api/contact-to-imports/grid");return(0,l.A)().get(o,{params:{filters:JSON.stringify(e),sorts:JSON.stringify(t),limit:n.limit,offset:n.offset,selectAllNew:c,selectAllUpdate:r}})},peekContactToImportsWithStatus:function(e){var t="".concat((0,a.e)(),"/api/contact-to-imports/peek-with-status");return(0,l.A)().get(t,{params:{status:JSON.stringify(e)}})},createContactsFromImport:function(e){var t="".concat((0,a.e)(),"/api/contact-to-imports/createContactsFromImport");return(0,l.A)().post(t,{selectedImportsNew:e}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},updateContactsFromImport:function(e){var t="".concat((0,a.e)(),"/api/contact-to-imports/updateContactsFromImport");return(0,l.A)().post(t,{selectedContactsUpdate:e}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},updateContactMatches:function(){var e="".concat((0,a.e)(),"/api/contact/update-contact-matches");return(0,l.A)().post(e).then((function(e){return e.data})).catch((function(e){console.log(e)}))}}},93913:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(96540);const a=function(e){return l.createElement("tbody",null,e.children)}}}]);