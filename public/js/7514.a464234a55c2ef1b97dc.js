"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[7514],{17514:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(96540),r=(n(52675),n(51629),n(67945),n(84185),n(83851),n(81278),n(79432),n(60825),n(23500),n(23029)),o=n(92901),l=n(56822),c=n(53954),i=n(85501),s=n(64467),u=n(58168),p=(n(2008),n(50113),n(62062),n(26099),n(76031),n(62493)),m=n(55849),d=n(93822),h=(n(94170),n(63750));function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var g=n(14825).A;const v=function(e){function t(e){var n,a,o,i;return(0,r.A)(this,t),a=this,o=t,i=[e],o=(0,c.A)(o),(n=(0,l.A)(a,f()?Reflect.construct(o,i||[],(0,c.A)(a).constructor):o.apply(a,i))).state={error:!1,errorMaxSize:!1},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"onDropAccepted",value:function(e){var t=this;this.props.addAttachment(e),setTimeout((function(){t.props.toggleShowNew()}),500)}},{key:"onDropRejected",value:function(){this.setState({errorMaxSize:!0})}},{key:"render",value:function(){return a.createElement(h.A,{closeModal:this.props.toggleShowNew,showConfirmAction:!1,title:"Upload bestand"},a.createElement("div",{className:"upload-file-content"},a.createElement(g,{multiple:!1,className:"dropzone",onDropAccepted:this.onDropAccepted.bind(this),onDropRejected:this.onDropRejected.bind(this),maxSize:6291456},a.createElement("p",null,"Klik hier voor het uploaden van een bestand"),a.createElement("p",null,a.createElement("strong",null,"of")," sleep het bestand hierheen"))),this.state.error&&a.createElement("p",{className:"has-error-message"},"Uploaden mislukt. Probeer nogmaals een bestand te uploaden."),this.state.errorMaxSize&&a.createElement("p",{className:"has-error-message"},"Uploaden mislukt. Het bestand mag maximaal 6MB groot zijn."))}}])}(a.Component);var A=n(55956),E=n(45403),w=n(42285),b=n(26829),N=n(93913);function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}const S=function(e){function t(e){return(0,r.A)(this,t),n=this,a=t,o=[e],a=(0,c.A)(a),(0,l.A)(n,y()?Reflect.construct(a,o||[],(0,c.A)(n).constructor):a.apply(n,o));var n,a,o}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e="";return 1===this.props.data.prio&&(e="error-row"),2===this.props.data.prio&&(e="warning-row"),a.createElement("tr",{className:e},a.createElement("td",null,this.props.data.field?this.props.data.field:""),a.createElement("td",null,this.props.data.value?this.props.data.value:""," "),a.createElement("td",null,this.props.data.line),a.createElement("td",null,this.props.data.message))}}])}(a.Component);var C=n(14809),k=n(74069),O=n(47767);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var x=function(e){function t(e){var n,a,o,i;return(0,r.A)(this,t),a=this,o=t,i=[e],o=(0,c.A)(o),n=(0,l.A)(a,R()?Reflect.construct(o,i||[],(0,c.A)(a).constructor):o.apply(a,i)),(0,s.A)(n,"toggleUpload",(function(){n.setState({upload:!n.state.upload})})),(0,s.A)(n,"import",(function(){n.setState(j(j({},n.state),{},{importing:!0}));var e=new FormData;e.append("attachment",n.state.attachment),e.append("suppliercodeRef",n.state.supplier.code_ref),e.append("warninglines",n.state.validationData.filter((function(e){return 2===e.prio})).map((function(e){return e.line}))),d.A.importFromEnergySupplier(e).then((function(e){n.props.navigate("/contact/signaleringslijst-energie-klanten")}))})),(0,s.A)(n,"handleSupplierChange",(function(e){var t=e.target.value,a=n.state.suppliers.find((function(e){return e.code_ref===t}));n.setState(j(j({},n.state),{},{supplier:a}))})),(0,s.A)(n,"handleSubmit",(function(){n.setState(j(j({},n.state),{},{uploading:!0}));var e=new FormData;e.append("attachment",n.state.attachment),e.append("supplierCodeRef",n.state.supplier.code_ref),e.append("fileHeader",n.state.supplier.file_header),d.A.validateImportFromEnergySupplier(e).then((function(e){var t=e.data.find((function(e){return 1===e.prio}));n.setState(j(j({},n.state),{},{validationData:e.data,hasError:!!t,uploading:!1}))}))})),(0,s.A)(n,"addAttachment",(function(e){n.setState(j(j({},n.state),{},{attachment:e[0]})),setTimeout((function(){n.handleSubmit()}),500)})),n.state={validationData:!1,upload:!1,attachment:!1,hasError:!0,uploading:!1,importing:!1,suppliers:[],supplier:!1,warning:""},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=this;d.A.getContactToImportsSuppliers().then((function(t){e.setState({suppliers:t})})),k.A.peekContactToImportsWithStatus("nog niet verwerkt").then((function(t){t.data>0&&e.setState({warning:"Er zijn nog "+t.data+" onverwerkte energieklanten, deze worden bij een nieuwe import verwijderd."})}))}},{key:"render",value:function(){return a.createElement(p.A,{className:"panel-grey"},!this.state.supplier&&a.createElement(m.A,null,a.createElement("div",{className:"row"},a.createElement("div",{class:"col-sm-12"},a.createElement("small",{class:"col-sm-12",style:{color:"red",fontWeight:"normal",marginBottom:"10px"}},this.state.warning&&this.state.warning))),a.createElement("div",{className:"row"},a.createElement(C.A,{label:"Energie leverancier",size:"col-sm-6",name:"typeId",options:this.state.suppliers,value:"this.state.supplier",optionValue:"code_ref",optionName:"supplier",onChangeAction:this.handleSupplierChange})))||this.state.validationData&&a.createElement(m.A,null,a.createElement(w.A,null,a.createElement(E.A,null,a.createElement(b.A,{title:"Veld",width:"20%"}),a.createElement(b.A,{title:"Waarde",width:"20%"}),a.createElement(b.A,{title:"Regel",width:"20%"}),a.createElement(b.A,{title:"Bericht",width:"40%"})),a.createElement(N.A,null,0===this.state.validationData.length?a.createElement("tr",null,a.createElement("td",{colSpan:4},"Geen regels gevonden!")):this.state.validationData.map((function(e,t){return a.createElement(S,{key:t,data:e})})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},a.createElement(A.A,{loading:this.state.uploading,buttonText:"Upload CSV opnieuw",onClickAction:this.toggleUpload}),!this.state.hasError&&a.createElement(A.A,{loading:this.state.importing,buttonText:"Importeren",onClickAction:this.import})))))||a.createElement(m.A,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},"Hier kunt u een CSV uploaden om contacten te importeren. De CSV moet het volgende formaat hebben:")),a.createElement("div",{className:"row margin-10-top margin-10-bottom"},a.createElement("div",{className:"col-md-12"},a.createElement("span",null,a.createElement("strong",null,this.state.supplier.file_header)))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(A.A,{loading:this.state.uploading,buttonText:"Upload CSV",onClickAction:this.toggleUpload})))),this.state.upload&&a.createElement(v,{toggleShowNew:this.toggleUpload,addAttachment:this.addAttachment}))}}])}(a.Component);const I=function(e){var t=(0,O.Zp)();return a.createElement(x,(0,u.A)({},e,{navigate:t}))},B=function(e){return a.createElement("div",null,a.createElement(I,null))};function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}const P=function(e){function t(e){return(0,r.A)(this,t),n=this,a=t,o=[e],a=(0,c.A)(a),(0,l.A)(n,U()?Reflect.construct(a,o||[],(0,c.A)(n).constructor):a.apply(n,o));var n,a,o}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12"},a.createElement(p.A,null,a.createElement(m.A,{className:"panel-small"},a.createElement("div",{className:"col-md-4"}),a.createElement("div",{className:"col-md-4"},a.createElement("h4",{className:"text-center text-success margin-small"},a.createElement("strong",null,"Importeer energieklanten"))),a.createElement("div",{className:"col-md-4"})))))}}])}(a.Component),T=function(e){return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-9"},a.createElement("div",{className:"col-md-12"},a.createElement(P,null)),a.createElement("div",{className:"col-md-12 margin-10-top"},a.createElement(B,null))))}},26829:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(96540),r=n(5556),o=n.n(r),l=function(e){var t=e.RowClassName,n=e.title,r=e.width;return a.createElement("th",{className:t,width:r},n)};l.defaultProps={RowClassName:""},l.propTypes={title:o().string.isRequired,width:o().string.isRequired,RowClassName:o().string};const c=l},42285:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(96540);const r=function(e){return a.createElement("table",{className:"table table-condensed table-hover table-striped col-xs-12"},e.children)}},45403:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(96540);const r=function(e){return a.createElement("thead",null,e.children)}},74069:(e,t,n)=>{n.d(t,{A:()=>o}),n(60739);var a=n(61941),r=n(61643);const o={fetchContactToImports:function(e,t,n,o,l){var c="".concat((0,r.e)(),"/api/contact-to-imports/grid");return(0,a.A)().get(c,{params:{filters:JSON.stringify(e),sorts:JSON.stringify(t),limit:n.limit,offset:n.offset,selectAllNew:o,selectAllUpdate:l}})},peekContactToImportsWithStatus:function(e){var t="".concat((0,r.e)(),"/api/contact-to-imports/peek-with-status");return(0,a.A)().get(t,{params:{status:JSON.stringify(e)}})},createContactsFromImport:function(e){var t="".concat((0,r.e)(),"/api/contact-to-imports/createContactsFromImport");return(0,a.A)().post(t,{selectedImportsNew:e}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},updateContactsFromImport:function(e){var t="".concat((0,r.e)(),"/api/contact-to-imports/updateContactsFromImport");return(0,a.A)().post(t,{selectedContactsUpdate:e}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},updateContactMatches:function(){var e="".concat((0,r.e)(),"/api/contact/update-contact-matches");return(0,a.A)().post(e).then((function(e){return e.data})).catch((function(e){console.log(e)}))}}},93913:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(96540);const r=function(e){return a.createElement("tbody",null,e.children)}}}]);