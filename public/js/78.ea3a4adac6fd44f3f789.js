(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1517:function(e,t,n){"use strict";n.r(t);var a=n(18),r=n.n(a),i=n(19),o=n.n(i),c=n(20),l=n.n(c),s=n(21),u=n.n(s),m=n(14),d=n.n(m),p=n(0),h=n.n(p),v=n(16),f=n(865),g=n(12),b=n.n(g),E=n(6),y=n.n(E),P=n(3),w=n(48),D=n(41),O=n(118),I=n(7),N=n.n(I),C=n(31),S=n.n(C),R=n(44),j=n(37);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var x=function(e){l()(n,e);var t=A(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(L(L({},a.state),{},{invoice:L(L({},a.state.invoice),{},y()({},r,n))}))})),y()(b()(a),"handleInputChangeDate",(function(e,t){a.setState(L(L({},a.state),{},{invoice:L(L({},a.state.invoice),{},y()({},t,e))}))})),y()(b()(a),"confirmAction",(function(e){e.preventDefault();var t=a.state.invoice,n={},r=!1;S.a.isEmpty(t.datePaid+"")&&(n.datePaid=!0,r=!0),a.setState(L(L({},a.state),{},{errors:n})),r||O.a.updateInvoice(t).then((function(e){a.props.fetchInvoiceDetails(t.id),a.props.closeModal()}))})),a.state={invoice:{id:e.invoiceId,datePaid:N()().format("Y-MM-DD"),paymentReference:null},errors:{datePaid:!1}},a}return o()(n,[{key:"render",value:function(){var e=this.state.invoice,t=e.datePaid,n=e.paymentReference;return h.a.createElement(D.a,{buttonConfirmText:"Nota betalen",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Nota betalen"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm-12 margin-10-bottom"},h.a.createElement("span",null,"Wanneer de betaaldatum wordt ingevuld zal er een betaling aangemaakt worden met het openstaande bedrag(€",this.props.amountOpen.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),")."))),h.a.createElement("div",{className:"row"},h.a.createElement(R.a,{divSize:"col-sm-12",label:"Datum betaald",name:"datePaid",value:t,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.datePaid})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{divSize:"col-sm-12",label:"Betalingskenmerk",name:"paymentReference",value:n,onChangeAction:this.handleInputChange})))}}]),n}(p.Component),T=Object(v.b)(null,(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(x);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var M=function(e){l()(n,e);var t=B(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"confirmAction",(function(e){e.preventDefault(),O.a.sendNotification(a.props.invoiceId).then((function(e){a.props.fetchInvoiceDetails(a.props.invoiceId),a.props.closeModal()}))})),a}return o()(n,[{key:"render",value:function(){return h.a.createElement(D.a,{buttonConfirmText:"Versturen",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Notificatie versturen"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm-12 margin-10-bottom"},h.a.createElement("span",null,this.props.reminderText))))}}]),n}(p.Component),F=Object(v.b)(null,(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(M);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var V=function(e){l()(n,e);var t=q(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"confirmAction",(function(e){e.preventDefault(),O.a.setIrrecoverable(a.props.invoiceId).then((function(e){a.props.fetchInvoiceDetails(a.props.invoiceId),a.props.closeModal()}))})),a}return o()(n,[{key:"render",value:function(){return h.a.createElement(D.a,{closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Nota oninbaar"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm-12 margin-10-bottom"},h.a.createElement("span",null,"Wilt u deze nota als oninbaar markeren?"))))}}]),n}(p.Component),z=Object(v.b)(null,(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(V),W=n(131),Y=n.n(W),G=n(973),_=Object(v.b)(null,(function(e){return{deleteInvoice:function(t){e(Object(f.a)(t))}}}))((function(e){return h.a.createElement(D.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteInvoice(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},h.a.createElement("p",null,"Verwijder nota: ",h.a.createElement("strong",null," ","".concat(e.number,"?"))))})),H=n(104);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var J=function(e){l()(n,e);var t=K(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"download",(function(){O.a.download(a.props.invoiceDetails.id).then((function(e){Y()(e.data,e.headers["x-filename"])}))})),y()(b()(a),"showSend",(function(){var e="collection"===a.props.invoiceDetails.paymentTypeId?"incasso":"overboeken";"incasso"==e&&a.props.invoiceDetails.totalInclVatInclReduction<0?a.props.setError(405,'Een nota met een negatief bedrag kan geen incasso zijn. Wil je a.u.b. de betaalwijze van de order aanpassen in "Overboeken".'):(a.props.previewSend([a.props.invoiceDetails.id]),P.f.push("/financieel/".concat(a.props.invoiceDetails.order.administrationId,"/notas/te-verzenden/verzenden/email/").concat(e)))})),y()(b()(a),"showSendPost",(function(){var e="collection"===a.props.invoiceDetails.paymentTypeId?"incasso":"overboeken";a.props.previewSend([a.props.invoiceDetails.id]),P.f.push("/financieel/".concat(a.props.invoiceDetails.order.administrationId,"/notas/te-verzenden/verzenden/post/").concat(e))})),y()(b()(a),"showSetPaid",(function(){a.setState({showSetPaid:!a.state.showSetPaid})})),y()(b()(a),"showSendNotification",(function(){a.setState({showSendNotification:!a.state.showSendNotification})})),y()(b()(a),"showSetIrrecoverable",(function(){a.setState({showSetIrrecoverable:!a.state.showSetIrrecoverable})})),y()(b()(a),"showDelete",(function(){a.setState({showDelete:!a.state.showDelete})})),y()(b()(a),"view",(function(){P.f.push("/nota/inzien/".concat(a.props.invoiceDetails.id))})),a.state={showSetChecked:!1,showSetPaid:!1,showSendNotification:!1,reminderText:"",showSetIrrecoverable:!1,showDelete:!1},a}return o()(n,[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&(e.invoiceDetails.dateReminder3?this.setState({reminderText:"Wilt u de aanmaning sturen?"}):e.invoiceDetails.dateReminder2?this.setState({reminderText:"Wilt u de derde herinnering sturen?"}):e.invoiceDetails.dateReminder1?this.setState({reminderText:"Wilt u de tweede herinnering sturen?"}):this.setState({reminderText:"Wilt u de eerste herinnering sturen?"}))}},{key:"render",value:function(){return h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-4"},h.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},h.a.createElement(w.a,{iconName:"glyphicon-arrow-left",onClickAction:P.e.goBack}),h.a.createElement(w.a,{iconName:"glyphicon-eye-open",onClickAction:this.view}),("to-send"===this.props.invoiceDetails.statusId||"error-sending"===this.props.invoiceDetails.statusId)&&"Geen e-mail bekend"!==this.props.invoiceDetails.emailToAddress&&h.a.createElement(w.a,{iconName:"glyphicon-envelope",onClickAction:this.showSend}),("to-send"===this.props.invoiceDetails.statusId||"error-sending"===this.props.invoiceDetails.statusId)&&"Geen e-mail bekend"===this.props.invoiceDetails.emailToAddress&&h.a.createElement(w.a,{iconName:"glyphicon-envelope",onClickAction:this.showSendPost}),!this.props.invoiceDetails.invoiceInTwinfield&&("sent"===this.props.invoiceDetails.statusId||"exported"===this.props.invoiceDetails.statusId)&&h.a.createElement(w.a,{iconName:"glyphicon-euro",onClickAction:this.showSetPaid}),("sent"===this.props.invoiceDetails.statusId||"exported"===this.props.invoiceDetails.statusId)&&!this.props.invoiceDetails.dateExhortation&&!this.props.invoiceDetails.isPaidByMollie&&h.a.createElement(w.a,{iconName:"glyphicon-bullhorn",onClickAction:this.showSendNotification}),"to-send"!==this.props.invoiceDetails.statusId&&"in-progress"!==this.props.invoiceDetails.statusId&&"is-sending"!==this.props.invoiceDetails.statusId&&"error-making"!==this.props.invoiceDetails.statusId&&"error-sending"!==this.props.invoiceDetails.statusId&&"is-resending"!==this.props.invoiceDetails.statusId&&"paid"!==this.props.invoiceDetails.statusId&&"irrecoverable"!==this.props.invoiceDetails.statusId&&h.a.createElement(w.a,{iconName:"glyphicon-remove",onClickAction:this.showSetIrrecoverable}),h.a.createElement(w.a,{iconName:"glyphicon-download-alt",onClickAction:this.download}),"to-send"===this.props.invoiceDetails.statusId&&h.a.createElement(w.a,{iconName:"glyphicon-trash",onClickAction:this.showDelete}))),!this.props.isLoading&&h.a.createElement("div",{className:"col-md-4"},h.a.createElement("h4",{className:"text-center"},"Nota:"," ",this.props.invoiceDetails.order?this.props.invoiceDetails.order.contact.fullName:""," /"," ",this.props.invoiceDetails.number)),h.a.createElement("div",{className:"col-md-4"}),this.state.showSetPaid&&h.a.createElement(T,{closeModal:this.showSetPaid,invoiceId:this.props.invoiceDetails.id,amountOpen:this.props.invoiceDetails.amountOpen}),this.state.showSendNotification&&h.a.createElement(F,{reminderText:this.state.reminderText,closeModal:this.showSendNotification,invoiceId:this.props.invoiceDetails.id}),this.state.showSetIrrecoverable&&h.a.createElement(z,{closeModal:this.showSetIrrecoverable,invoiceId:this.props.invoiceDetails.id}),this.state.showDelete&&h.a.createElement(_,{number:this.props.invoiceDetails.number,id:this.props.invoiceDetails.id,closeDeleteItemModal:this.showDelete}))}}]),n}(p.Component),U=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails,isLoading:e.loadingData.isLoading}}),(function(e){return{previewSend:function(t){e(Object(G.e)(t))},setError:function(t,n){e(Object(H.b)(t,n))}}}))(J),Q=n(237),X=n(23),Z=n(30),$=n(33),ee=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails}}))((function(e){var t=e.invoiceDetails,n=t.status,a=t.dateRequested,r=t.paymentType,i=t.paymentTypeId,o=t.invoiceText,c=t.subject,l=t.order,s=t.totalInclVatInclReduction,u=t.amountOpen,m=t.dateSent,d=t.datePaymentDue,p=t.datePaid,v=t.paymentReference,f=t.dateReminder1,g=t.dateReminder2,b=t.dateReminder3,E=t.dateExhortation,y=t.emailReminder1,P=t.emailReminder2,w=t.emailReminder3,D=t.emailExhortation,O=t.dateCollection,I=t.emailedTo,C=t.sentToName,S=t.isPaidByMollie;return h.a.createElement("div",{onClick:e.switchToEdit},h.a.createElement(Z.a,null,h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Contact",value:l.contact?l.contact.fullName:"",link:l.contact?"contact/"+l.contact.id:""}),h.a.createElement(X.a,{label:"Status",value:n?n.name:""})),n&&"sent"===n.id&&S&&h.a.createElement("div",{className:"row"},h.a.createElement(X.a,null),h.a.createElement(X.a,{label:"Substatus",value:"Mollie betaald"})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Betaalwijze",value:r?r.name:""}),h.a.createElement(X.a,{label:"Betreft",value:c||""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Order",value:l?l.number:"",link:l?"order/"+l.id:""})),h.a.createElement("div",{className:"row margin-20-top margin-20-bottom"},h.a.createElement("div",{className:"col-sm-3"},h.a.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Opmerking")),h.a.createElement("div",{className:"col-sm-9",id:"invoiceText"},o||"")),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Bedrag incl. BTW",value:s?"€"+s.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"}),h.a.createElement(X.a,{label:"Openstaand bedrag",value:u?"€"+u.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"})),h.a.createElement("div",{className:"row"},m?h.a.createElement(X.a,{label:"Nota datum",value:m?N()(m).format("DD-MM-Y"):""}):h.a.createElement(X.a,{label:"Geplande nota datum",value:a?N()(a).format("DD-MM-Y"):""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Verstuurd naar",value:C||""}),h.a.createElement(X.a,{label:"Verstuurd naar e-mail",value:I||""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Herinnering 1 verstuurd",value:f?N()(f).format("DD-MM-Y"):""}),h.a.createElement(X.a,{label:"E-mail herinnering 1",value:y||""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Herinnering 2 verstuurd",value:g?N()(g).format("DD-MM-Y"):""}),h.a.createElement(X.a,{label:"E-mail herinnering 2",value:P||""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Herinnering 3 verstuurd",value:b?N()(b).format("DD-MM-Y"):""}),h.a.createElement(X.a,{label:"E-mail herinnering 3",value:w||""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Aanmaning verstuurd",value:E?N()(E).format("DD-MM-Y"):""}),h.a.createElement(X.a,{label:"E-mail aanmaning",value:D||""})),h.a.createElement("div",{className:"row"},"transfer"===i?h.a.createElement(X.a,{label:"Uiterste betaaldatum",value:d?N()(d).format("DD-MM-Y"):""}):h.a.createElement(X.a,{label:"Incasso datum",value:O?N()(O).format("DD-MM-Y"):""}),h.a.createElement(X.a,{label:"Datum betaald",value:p?N()(p).format("DD-MM-Y"):""})),h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Betalingskenmerk",value:v||""})))))}));function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var ne=function(e){l()(n,e);var t=te(n);function n(e){return r()(this,n),t.call(this,e)}return o()(n,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(ee,null))}}]),n}(p.Component);N.a.locale("nl");var ae=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails}}))((function(e){var t=e.invoiceDetails,n=t.createdAt,a=t.createdBy;return h.a.createElement("div",null,h.a.createElement("div",{className:"row"},h.a.createElement(X.a,{label:"Gemaakt door",value:a?a.fullName:"Onbekend",link:a?"gebruiker/"+a.id:""}),h.a.createElement(X.a,{label:"Gemaakt op",value:n?N()(n).format("L"):"Onbekend"})))})),re=n(46),ie=function(e){return h.a.createElement(Z.a,null,h.a.createElement(re.a,null,h.a.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),h.a.createElement($.a,null,h.a.createElement("div",{className:"col-md-12"},h.a.createElement(ae,null))))};N.a.locale("nl");var oe=Object(v.b)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.invoiceProduct,n=t.period,a=t.productCode,r=t.productName,i=t.description,o=t.amount,c=t.amountInclVatInclReduction;return h.a.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},h.a.createElement("div",null,h.a.createElement("div",{className:"col-sm-1"},a||""),h.a.createElement("div",{className:"col-sm-3"},r||""),h.a.createElement("div",{className:"col-sm-3"},i||""),h.a.createElement("div",{className:"col-sm-2"},o||""),h.a.createElement("div",{className:"col-sm-2"},c?"€"+c.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"),h.a.createElement("div",{className:"col-sm-1"}),n&&h.a.createElement("div",{className:"col-sm-12"},"Periode ",n)))})),ce=n(40);N.a.locale("nl");var le=function(e){var t=e.invoiceProduct,n=t.product,a=t.description,r=t.amount,i=t.amountReduction,o=t.percentageReduction,c=t.dateLastInvoice,l=t.variablePrice;return h.a.createElement("div",null,h.a.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},h.a.createElement(Z.a,{className:"panel-grey"},h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Notanummer",name:"invoice",value:e.invoiceDetails?e.invoiceDetails.number:"",readOnly:!0}),h.a.createElement(j.a,{label:"Product",name:"product",value:n?n.name:"",readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Omschrijving",id:"description",name:"description",value:a,onChangeAction:e.handleInputChange,required:"required",error:e.errors.description}),h.a.createElement(j.a,{label:"Aantal",type:"number",id:"amount",name:"amount",value:r,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:o,onChangeAction:e.handleInputChange}),e.productVariablePrice?h.a.createElement(j.a,{label:"Prijs ex. BTW",type:"number",name:"variablePrice",value:l,onChangeAction:e.handleInputChangeVariablePrice}):h.a.createElement(j.a,{label:"Prijs excl. BTW",name:"price",value:"€"+e.invoiceProduct.product.currentPrice.priceInclVat.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:e.invoiceProduct.product.currentPrice.priceNumberOfDecimals}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:i,onChangeAction:e.handleInputChange}),h.a.createElement(j.a,{label:"Totaalbedrag",name:"totalPrice",value:"€"+e.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(R.a,{label:"Begin datum",name:"dateLastInvoice",value:c,onChangeAction:e.handleInputChangeDate})),h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(ce.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),h.a.createElement(ce.a,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))},se=Object(v.b)(null,(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))((function(e){return h.a.createElement(D.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){O.a.deleteInvoiceProduct(e.id).then((function(t){e.fetchInvoiceDetails(e.invoiceId),e.closeDeleteItemModal()}))},title:"Verwijderen"},h.a.createElement("p",null,"Verwijder notaregel?"))}));function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var pe=function(e){l()(n,e);var t=de(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"toggleDelete",(function(){a.setState({showDelete:!a.state.showDelete})})),y()(b()(a),"onLineEnter",(function(){a.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),y()(b()(a),"onLineLeave",(function(){a.setState({showActionButtons:!1,highlightLine:""})})),y()(b()(a),"openEdit",(function(){a.setState({showEdit:!0})})),y()(b()(a),"closeEdit",(function(){a.setState({showEdit:!1})})),y()(b()(a),"cancelEdit",(function(){a.setState(me(me({},a.state),{},{invoiceProduct:me({},a.props.invoiceProduct)})),a.closeEdit()})),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(me(me({},a.state),{},{invoiceProduct:me(me({},a.state.invoiceProduct),{},y()({},r,n))}),a.updatePrice)})),y()(b()(a),"updatePrice",(function(){var e=0;e=a.state.invoiceProduct.variablePrice?S.a.isFloat(a.state.invoiceProduct.variablePrice+"")?a.state.invoiceProduct.variablePrice:0:S.a.isFloat(a.props.invoiceProduct.product.currentPrice.priceInclVat+"")?a.props.invoiceProduct.product.currentPrice.priceInclVat:0;var t=S.a.isFloat(a.state.invoiceProduct.amount+"")?a.state.invoiceProduct.amount:0,n=S.a.isFloat(a.state.invoiceProduct.percentageReduction+"")?a.state.invoiceProduct.percentageReduction:0,r=S.a.isFloat(a.state.invoiceProduct.amountReduction+"")?a.state.invoiceProduct.amountReduction:0,i=0;e<0?i=e*t*((parseFloat(100)+parseFloat(n))/100)-r:i=e*t*((100-n)/100)-r;a.setState(me(me({},a.state),{},{totalPrice:i}))})),y()(b()(a),"handleSubmit",(function(e){e.preventDefault();var t={},n=!1,r=a.state.invoiceProduct;S.a.isEmpty(r.amount+"")&&(t.amount=!0,n=!0),S.a.isEmpty(r.description+"")&&(t.description=!0,n=!0),a.setState(me(me({},a.state),{},{errors:t})),!n&&O.a.updateInvoiceProduct(r).then((function(e){a.props.fetchInvoiceDetails(a.state.invoiceProduct.invoiceId),a.closeEdit()}))})),y()(b()(a),"handleInputChangeVariablePrice",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(me(me({},a.state),{},{price:n,invoiceProduct:me(me({},a.state.invoiceProduct),{},y()({},r,n))}),a.updatePrice)})),a.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,totalPrice:e.invoiceProduct.amountInclVatInclReduction,invoiceProduct:me(me({},e.invoiceProduct),{},{variablePrice:e.invoiceProduct.priceInclVat?Math.round(100*e.invoiceProduct.priceInclVat)/100:0}),errors:{amount:!1,description:!1}},a.handleInputChangeDate=a.handleInputChangeDate.bind(b()(a)),a}return o()(n,[{key:"componentWillReceiveProps",value:function(e){Object(Q.isEqual)(this.state.invoiceProduct,e.invoiceProduct)||this.setState(me(me({},this.state),{},{totalPrice:e.invoiceProduct.amountInclVatInclReduction,invoiceProduct:me(me({},e.invoiceProduct),{},{variablePrice:e.invoiceProduct.priceInclVat?Math.round(100*e.invoiceProduct.priceInclVat)/100:0})}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(me(me({},this.state),{},{invoiceProduct:me(me({},this.state.invoiceProduct),{},y()({},t,e))}))}},{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(oe,{highlightLine:this.state.highlightLine,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,showActionButtons:this.state.showActionButtons,invoiceProduct:this.state.invoiceProduct,invoiceDetails:this.props.invoiceDetails,openEdit:this.openEdit,toggleDelete:this.toggleDelete}),this.state.showEdit&&this.props.permissions.manageFinancial&&h.a.createElement(le,{invoiceDetails:this.props.invoiceDetails,errors:this.state.errors,totalPrice:this.state.totalPrice,invoiceProduct:this.state.invoiceProduct,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit,handleInputChangeVariablePrice:this.handleInputChangeVariablePrice,productVariablePrice:"variable"===this.state.invoiceProduct.product.hasVariablePrice}),this.state.showDelete&&this.props.permissions.manageFinancial&&h.a.createElement(se,{closeDeleteItemModal:this.toggleDelete,id:this.state.invoiceProduct.id,invoiceId:this.state.invoiceProduct.invoiceId}))}}]),n}(p.Component),he=Object(v.b)((function(e){return{permissions:e.meDetails.permissions,invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(pe),ve=Object(v.b)((function(e){return{invoiceProducts:e.invoiceDetails.invoiceProducts}}))((function(e){return h.a.createElement("div",null,h.a.createElement("div",{className:"row border header"},h.a.createElement("div",{className:"col-sm-1"},"Productcode"),h.a.createElement("div",{className:"col-sm-3"},"Productnaam"),h.a.createElement("div",{className:"col-sm-3"},"Omschrijving"),h.a.createElement("div",{className:"col-sm-2"},"Aantal"),h.a.createElement("div",{className:"col-sm-2"},"Bedrag incl. BTW")),e.invoiceProducts.length>0?e.invoiceProducts.map((function(e){return h.a.createElement(he,{key:e.id,invoiceProduct:e})})):h.a.createElement("div",null,"Geen notaregels bekend."))})),fe=n(102),ge=n(839);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Pe=function(e){l()(n,e);var t=ye(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Ee(Ee({},a.state),{},{invoiceProduct:Ee(Ee({},a.state.invoiceProduct),{},y()({},r,n))}),a.updatePrice)})),y()(b()(a),"handleInputChangeProduct",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Ee(Ee({},a.state),{},{product:Ee(Ee({},a.state.product),{},y()({},r,n))}))})),y()(b()(a),"handleInputChangeProductPrice",(function(e){var t,n=e.target,r="checkbox"===n.type?n.checked:n.value,i=n.name;t=a.state.vatPercentage&&"6"==a.state.vatPercentage.id?1.06*r:a.state.vatPercentage&&"9"==a.state.vatPercentage.id?1.09*r:a.state.vatPercentage&&"21"==a.state.vatPercentage.id?1.21*r:r,a.setState(Ee(Ee({},a.state),{},{price:t,product:Ee(Ee({},a.state.product),{},y()({},i,r))}),a.updatePrice)})),y()(b()(a),"handleInputChangeProductVat",(function(e){var t,n=e.target,r="checkbox"===n.type?n.checked:n.value,i=n.name;t="6"==r?1.06*a.state.product.price:"9"==r?1.09*a.state.product.price:"21"==r?1.21*a.state.product.price:a.state.product.price,a.setState(Ee(Ee({},a.state),{},{price:t,product:Ee(Ee({},a.state.product),{},y()({},i,r))}),a.updatePrice)})),y()(b()(a),"updatePrice",(function(){var e=S.a.isFloat(a.state.price+"")?a.state.price:0,t=S.a.isFloat(a.state.invoiceProduct.amount+"")?a.state.invoiceProduct.amount:0,n=S.a.isFloat(a.state.invoiceProduct.percentageReduction+"")?a.state.invoiceProduct.percentageReduction:0,r=S.a.isFloat(a.state.invoiceProduct.amountReduction+"")?a.state.invoiceProduct.amountReduction:0,i=0;e<0?i=e*t*((parseFloat(100)+parseFloat(n))/100)-r:i=e*t*((100-n)/100)-r;a.setState(Ee(Ee({},a.state),{},{price:parseFloat(e).toFixed(2),totalPrice:parseFloat(i).toFixed(2)}))})),y()(b()(a),"handleSubmit",(function(e){e.preventDefault();var t=a.state.invoiceProduct,n={},r=!1,i=!1;S.a.isEmpty(t.amount+"")&&(n.amount=!0,r=!0),S.a.isEmpty(t.dateLastInvoice+"")&&(n.dateLastInvoice=!0,r=!0),S.a.isEmpty(t.description+"")&&(n.description=!0,r=!0);var o=a.state.product,c=!1;a.props.products.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.code===o.code&&(c=!0)&&e.active})),c&&(i="Productcode moet uniek zijn.",n.code=!0,r=!0),S.a.isEmpty(o.code+"")&&(n.code=!0,r=!0);var l=!1;a.props.products.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.name===o.name&&(l=!0)&&e.active})),l&&(i="Productnaam moet uniek zijn.",n.name=!0,r=!0),c&&l&&(i="Productcode en productnaam moeten uniek zijn."),S.a.isEmpty(o.name+"")&&(n.name=!0,r=!0),S.a.isEmpty(o.administrationId+"")&&(n.administrationId=!0,r=!0),S.a.isEmpty(o.price+"")&&(n.price=!0,r=!0),a.setState(Ee(Ee({},a.state),{},{errors:n,errorMessage:i})),!r&&O.a.newProductAndInvoiceProduct(t,o).then((function(e){a.props.fetchInvoiceDetails(t.invoiceId),a.props.toggleShowNewProduct()}))})),a.state={vatPercentages:[{id:"0",name:"0"},{id:"9",name:"9"},{id:"21",name:"21"}],errorMessage:!1,price:"0",totalPrice:"0",invoiceProduct:{invoiceId:a.props.invoiceDetails.id,description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:N()().format("YYYY-MM-DD")},product:{code:"",name:"",durationId:"none",administrationId:a.props.invoiceDetails.order.administrationId,invoiceFrequencyId:"once",vatPercentage:"",price:"",isOneTime:!1,ledgerId:""},errors:{amount:!1,dateLastInvoice:!1,description:!1,code:!1,name:!1,price:!1}},a.handleReactSelectChange=a.handleReactSelectChange.bind(b()(a)),a.handleInputChangeDate=a.handleInputChangeDate.bind(b()(a)),a}return o()(n,[{key:"handleReactSelectChange",value:function(e,t){this.setState(Ee(Ee({},this.state),{},{product:Ee(Ee({},this.state.product),{},y()({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Ee(Ee({},this.state),{},{invoiceProduct:Ee(Ee({},this.state.invoiceProduct),{},y()({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.description,n=e.amount,a=e.amountReduction,r=e.percentageReduction,i=e.dateLastInvoice,o=this.state.product,c=o.code,l=o.name,s=o.vatPercentage,u=o.price,m=o.ledgerId;return h.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},h.a.createElement(Z.a,{className:"panel-grey"},h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Product"))),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Productcode",name:"code",value:c,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.code}),h.a.createElement(j.a,{label:"Naam",name:"name",value:l,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.name})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:u,onChangeAction:this.handleInputChangeProductPrice,required:"required",error:this.state.errors.price}),h.a.createElement(fe.a,{label:"BTW percentage",name:"vatPercentage",options:this.state.vatPercentages,value:s,onChangeAction:this.handleInputChangeProductVat,placeholder:"Geen"})),1==this.props.invoiceDetails.order.administration.usesTwinfield&&1==this.props.invoiceDetails.order.administration.twinfieldIsValid&&h.a.createElement("div",{className:"row"},h.a.createElement(ge.a,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:m,onChangeAction:this.handleReactSelectChange})),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-part panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Notaregel"))),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Omschrijving",id:"description",name:"description",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),h.a.createElement(j.a,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:r,onChangeAction:this.handleInputChange}),h.a.createElement(j.a,{label:"Bedrag",name:"price",value:"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),h.a.createElement(j.a,{label:"Totaalbedrag",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(R.a,{label:"Begin datum",name:"dateLastInvoice",value:i,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),this.state.errorMessage&&h.a.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(ce.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProduct}),h.a.createElement(ce.a,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),n}(p.Component),we=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails,administrationId:e.administrationDetails.id,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,ledgers:e.systemData.ledgers}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(Pe);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Ne=function(e){l()(n,e);var t=Ie(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Oe(Oe({},a.state),{},{invoiceProduct:Oe(Oe({},a.state.invoiceProduct),{},y()({},r,n))}),a.updatePrice)})),y()(b()(a),"handleInputChangeVariablePrice",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Oe(Oe({},a.state),{},{price:n,invoiceProduct:Oe(Oe({},a.state.invoiceProduct),{},y()({},r,n))}),a.updatePrice)})),y()(b()(a),"updatePrice",(function(){var e=S.a.isFloat(a.state.price+"")?a.state.price:0,t=S.a.isFloat(a.state.invoiceProduct.amount+"")?a.state.invoiceProduct.amount:0,n=S.a.isFloat(a.state.invoiceProduct.percentageReduction+"")?a.state.invoiceProduct.percentageReduction:0,r=S.a.isFloat(a.state.invoiceProduct.amountReduction+"")?a.state.invoiceProduct.amountReduction:0,i=0;e<0?i=e*t*((parseFloat(100)+parseFloat(n))/100)-r:i=e*t*((100-n)/100)-r;a.setState(Oe(Oe({},a.state),{},{totalPrice:i}))})),y()(b()(a),"handleChangeProduct",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name,i="",o=0,c="";if(n){var l=a.props.products.filter((function(e){return e.id==n}));o=l[0].priceInclVat,c=l[0].invoiceText,i=l[0].hasVariablePrice}a.setState(Oe(Oe({},a.state),{},{price:o,productHasVariablePrice:"variable"===i,invoiceProduct:Oe(Oe({},a.state.invoiceProduct),{},y()({description:c},r,n))}),a.updatePrice)})),y()(b()(a),"handleSubmit",(function(e){e.preventDefault();var t=a.state.invoiceProduct,n={},r=!1;S.a.isEmpty(t.productId+"")&&(n.productId=!0,r=!0),S.a.isEmpty(t.amount+"")&&(n.amount=!0,r=!0),S.a.isEmpty(t.dateLastInvoice+"")&&(n.dateLastInvoice=!0,r=!0),S.a.isEmpty(t.description+"")&&(n.description=!0,r=!0),a.setState(Oe(Oe({},a.state),{},{errors:n})),!r&&O.a.newInvoiceProduct(t).then((function(e){a.props.fetchInvoiceDetails(t.invoiceId),a.props.toggleShowNew()}))})),a.state={price:"0",totalPrice:"0",productHasVariablePrice:!1,invoiceProduct:{invoiceId:a.props.invoiceDetails.id,productId:"",description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:N()().format("YYYY-MM-DD"),variablePrice:0},errors:{productId:!1,amount:!1,dateLastInvoice:!1,description:!1}},a.handleInputChangeDate=a.handleInputChangeDate.bind(b()(a)),a}return o()(n,[{key:"handleInputChangeDate",value:function(e,t){this.setState(Oe(Oe({},this.state),{},{invoiceProduct:Oe(Oe({},this.state.invoiceProduct),{},y()({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.productId,n=e.description,a=e.amount,r=e.amountReduction,i=e.percentageReduction,o=e.dateLastInvoice;return h.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},h.a.createElement(Z.a,{className:"panel-grey"},h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Order nummer",name:"orderId",value:this.props.invoiceDetails.number,readOnly:!0}),h.a.createElement(fe.a,{label:"Product",id:"productId",name:"productId",options:this.props.products,value:t,onChangeAction:this.handleChangeProduct,required:"required",error:this.state.errors.productId})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Omschrijving",id:"description",name:"description",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),h.a.createElement(j.a,{label:"Aantal",type:"number",id:"amount",name:"amount",value:a,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:i,onChangeAction:this.handleInputChange}),this.state.productHasVariablePrice?h.a.createElement(j.a,{label:"Prijs ex. BTW",type:"number",name:"variablePrice",value:this.state.price,onChangeAction:this.handleInputChangeVariablePrice}):h.a.createElement(j.a,{label:"Prijs excl. BTW",name:"price",value:"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:r,onChangeAction:this.handleInputChange}),h.a.createElement(j.a,{label:"Totaalbedrag",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(R.a,{label:"Begin datum",name:"dateLastInvoice",value:o,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(ce.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),h.a.createElement(ce.a,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),n}(p.Component),Ce=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails,products:e.systemData.products}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(Ne);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var ke=function(e){l()(n,e);var t=je(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Re(Re({},a.state),{},{invoiceProduct:Re(Re({},a.state.invoiceProduct),{},y()({},r,n))}),a.updatePrice)})),y()(b()(a),"handleInputChangeProduct",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Re(Re({},a.state),{},{product:Re(Re({},a.state.product),{},y()({},r,n))}))})),y()(b()(a),"handleInputChangeProductPrice",(function(e){var t,n=e.target,r="checkbox"===n.type?n.checked:n.value,i=n.name;t=a.state.vatPercentage&&"6"==a.state.vatPercentage.id?1.06*r:a.state.vatPercentage&&"9"==a.state.vatPercentage.id?1.09*r:a.state.vatPercentage&&"21"==a.state.vatPercentage.id?1.21*r:r,a.setState(Re(Re({},a.state),{},{price:t,product:Re(Re({},a.state.product),{},y()({},i,r))}),a.updatePrice)})),y()(b()(a),"handleInputChangeProductVat",(function(e){var t,n=e.target,r="checkbox"===n.type?n.checked:n.value,i=n.name;t="6"==r?1.06*a.state.product.price:"9"==r?1.09*a.state.product.price:"21"==r?1.21*a.state.product.price:a.state.product.price,a.setState(Re(Re({},a.state),{},{price:t,product:Re(Re({},a.state.product),{},y()({},i,r))}),a.updatePrice)})),y()(b()(a),"updatePrice",(function(){var e=S.a.isFloat(a.state.price+"")?a.state.price:0,t=S.a.isFloat(a.state.invoiceProduct.amount+"")?a.state.invoiceProduct.amount:0,n=S.a.isFloat(a.state.invoiceProduct.percentageReduction+"")?a.state.invoiceProduct.percentageReduction:0,r=S.a.isFloat(a.state.invoiceProduct.amountReduction+"")?a.state.invoiceProduct.amountReduction:0,i=0;e<0?i=e*t*((parseFloat(100)+parseFloat(n))/100)-r:i=e*t*((100-n)/100)-r;a.setState(Re(Re({},a.state),{},{price:parseFloat(e).toFixed(2),totalPrice:parseFloat(i).toFixed(2)}))})),y()(b()(a),"handleSubmit",(function(e){e.preventDefault();var t=a.state.invoiceProduct,n={},r=!1;S.a.isEmpty(t.amount+"")&&(n.amount=!0,r=!0),S.a.isEmpty(t.dateLastInvoice+"")&&(n.dateLastInvoice=!0,r=!0),S.a.isEmpty(t.description+"")&&(n.description=!0,r=!0);var i=a.state.product;S.a.isEmpty(i.administrationId+"")&&(n.administrationId=!0,r=!0),S.a.isEmpty(i.price+"")&&(n.price=!0,r=!0),a.setState(Re(Re({},a.state),{},{errors:n,errorMessage:!1})),!r&&O.a.newProductAndInvoiceProduct(t,i).then((function(e){a.props.fetchInvoiceDetails(t.invoiceId),a.props.toggleShowNewProductOneTime()}))})),a.state={vatPercentages:[{id:"0",name:"0"},{id:"9",name:"9"},{id:"21",name:"21"}],errorMessage:!1,price:"0",totalPrice:"0",invoiceProduct:{invoiceId:a.props.invoiceDetails.id,description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:N()().format("YYYY-MM-DD")},product:{code:"EMP",name:"Eenmalig product",durationId:"none",administrationId:a.props.invoiceDetails.order.administrationId,invoiceFrequencyId:"once",vatPercentage:"",price:"",isOneTime:!0,ledgerId:""},errors:{amount:!1,dateLastInvoice:!1,description:!1,price:!1}},a.handleReactSelectChange=a.handleReactSelectChange.bind(b()(a)),a.handleInputChangeDate=a.handleInputChangeDate.bind(b()(a)),a}return o()(n,[{key:"handleReactSelectChange",value:function(e,t){this.setState(Re(Re({},this.state),{},{product:Re(Re({},this.state.product),{},y()({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Re(Re({},this.state),{},{invoiceProduct:Re(Re({},this.state.invoiceProduct),{},y()({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.description,n=e.amount,a=e.amountReduction,r=e.percentageReduction,i=e.dateLastInvoice,o=this.state.product,c=o.vatPercentage,l=o.price,s=o.ledgerId;return h.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},h.a.createElement(Z.a,{className:"panel-grey"},h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Product"))),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:l,onChangeAction:this.handleInputChangeProductPrice,required:"required",error:this.state.errors.price}),h.a.createElement(fe.a,{label:"BTW percentage",name:"vatPercentage",options:this.state.vatPercentages,value:c,onChangeAction:this.handleInputChangeProductVat,placeholder:"Geen"})),1==this.props.invoiceDetails.order.administration.usesTwinfield&&1==this.props.invoiceDetails.order.administration.twinfieldIsValid&&h.a.createElement("div",{className:"row"},h.a.createElement(ge.a,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:s,onChangeAction:this.handleReactSelectChange})),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-part panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Notaregel"))),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Omschrijving",id:"description",name:"description",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),h.a.createElement(j.a,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:r,onChangeAction:this.handleInputChange}),h.a.createElement(j.a,{label:"Bedrag",name:"price",value:"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),h.a.createElement(j.a,{label:"Totaalbedrag",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(R.a,{label:"Begin datum",name:"dateLastInvoice",value:i,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),this.state.errorMessage&&h.a.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(ce.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProductOneTime}),h.a.createElement(ce.a,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),n}(p.Component),Le=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails,administrationId:e.administrationDetails.id,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,ledgers:e.systemData.ledgers}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(ke);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var xe=function(e){l()(n,e);var t=Ae(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"toggleShowNew",(function(){a.setState({showNew:!a.state.showNew})})),y()(b()(a),"toggleShowNewProduct",(function(){a.setState({showNewProduct:!a.state.showNewProduct})})),y()(b()(a),"toggleShowNewProductOneTime",(function(){a.setState({showNewProductOneTime:!a.state.showNewProductOneTime})})),a.state={showNew:!1,showNewProduct:!1,showNewProductOneTime:!1},a}return o()(n,[{key:"render",value:function(){return h.a.createElement(Z.a,null,h.a.createElement(re.a,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-xs-10"},h.a.createElement("span",{className:"h5 text-bold"},"Notaregels")))),h.a.createElement($.a,null,h.a.createElement("div",{className:"col-md-12"},h.a.createElement(ve,null)),h.a.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&h.a.createElement(Ce,{toggleShowNew:this.toggleShowNew}),this.state.showNewProduct&&h.a.createElement(we,{toggleShowNewProduct:this.toggleShowNewProduct}),this.state.showNewProductOneTime&&h.a.createElement(Le,{toggleShowNewProductOneTime:this.toggleShowNewProductOneTime}))))}}]),n}(p.Component),Te=Object(v.b)((function(e){return{permissions:e.meDetails.permissions,invoice:e.invoiceDetails}}))(xe);N.a.locale("nl");var Be=Object(v.b)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.payment,n=t.datePaid,a=t.amount,r=t.paymentReference,i=t.createdAt;return h.a.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},h.a.createElement("div",{onClick:e.openEdit},h.a.createElement("div",{className:"col-sm-3"},n?N()(n).format("L"):""),h.a.createElement("div",{className:"col-sm-2"},a?"€"+a.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"),h.a.createElement("div",{className:"col-sm-3"},r||""),h.a.createElement("div",{className:"col-sm-3"},i?N()(i).format("L"):"")),h.a.createElement("div",{className:"col-sm-1"},e.showActionButtons&&e.permissions.manageFinancial?h.a.createElement("a",{role:"button",onClick:e.openEdit},h.a.createElement("span",{className:"glyphicon glyphicon-pencil mybtn-success"})," "):"",e.showActionButtons&&e.permissions.manageFinancial?h.a.createElement("a",{role:"button",onClick:e.toggleDelete},h.a.createElement("span",{className:"glyphicon glyphicon-trash mybtn-danger"})," "):""))}));N.a.locale("nl");var Me=function(e){var t=e.payment,n=t.amount,a=t.datePaid,r=t.paymentReference;return h.a.createElement("div",null,h.a.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},h.a.createElement(Z.a,{className:"panel-grey"},h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Bedrag",id:"amount",name:"amount",value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount}),h.a.createElement(R.a,{label:"Datum betaald",name:"datePaid",value:a,onChangeAction:e.handleInputChangeDate,required:"required",error:e.errors.datePaid})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Betalingskenmerk",name:"paymentReference",value:r,onChangeAction:e.handleInputChange})),h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(ce.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),h.a.createElement(ce.a,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))},Fe=Object(v.b)(null,(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))((function(e){return h.a.createElement(D.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){O.a.deletePayment(e.id).then((function(t){e.fetchInvoiceDetails(e.invoiceId),e.closeDeleteItemModal()}))},title:"Verwijderen"},h.a.createElement("p",null,"Verwijder betaling?"))}));function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var We=function(e){l()(n,e);var t=ze(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"toggleDelete",(function(){a.setState({showDelete:!a.state.showDelete})})),y()(b()(a),"onLineEnter",(function(){a.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),y()(b()(a),"onLineLeave",(function(){a.setState({showActionButtons:!1,highlightLine:""})})),y()(b()(a),"openEdit",(function(){a.setState({showEdit:!0})})),y()(b()(a),"closeEdit",(function(){a.setState({showEdit:!1})})),y()(b()(a),"cancelEdit",(function(){a.setState(Ve(Ve({},a.state),{},{payment:Ve({},a.props.payment)})),a.closeEdit()})),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Ve(Ve({},a.state),{},{payment:Ve(Ve({},a.state.payment),{},y()({},r,n))}))})),y()(b()(a),"handleSubmit",(function(e){e.preventDefault();var t={},n=!1,r=a.state.payment;S.a.isEmpty(r.amount+"")&&(t.amount=!0,n=!0),S.a.isEmpty(r.datePaid+"")&&(t.datePaid=!0,n=!0),a.setState(Ve(Ve({},a.state),{},{errors:t})),!n&&O.a.updatePayment(r).then((function(e){a.props.fetchInvoiceDetails(a.state.payment.invoiceId),a.closeEdit()}))})),a.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,payment:Ve({},e.payment),errors:{amount:!1,datePaid:!1}},a.handleInputChangeDate=a.handleInputChangeDate.bind(b()(a)),a}return o()(n,[{key:"componentWillReceiveProps",value:function(e){Object(Q.isEqual)(this.state.payment,e.payment)||this.setState(Ve(Ve({},this.state),{},{payment:Ve({},e.payment)}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Ve(Ve({},this.state),{},{payment:Ve(Ve({},this.state.payment),{},y()({},t,e))}))}},{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(Be,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,openEdit:this.openEdit,toggleDelete:this.toggleDelete,payment:this.state.payment}),!this.props.invoiceInTwinfield&&this.state.showEdit&&this.props.permissions.manageFinancial&&h.a.createElement(Me,{errors:this.state.errors,payment:this.state.payment,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit}),!this.props.invoiceInTwinfield&&this.state.showDelete&&this.props.permissions.manageFinancial&&h.a.createElement(Fe,{closeDeleteItemModal:this.toggleDelete,id:this.state.payment.id,invoiceId:this.state.payment.invoiceId}))}}]),n}(p.Component),Ye=Object(v.b)((function(e){return{permissions:e.meDetails.permissions,invoiceInTwinfield:e.invoiceDetails.invoiceInTwinfield}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(We),Ge=Object(v.b)((function(e){return{payments:e.invoiceDetails.payments}}))((function(e){return h.a.createElement("div",null,h.a.createElement("div",{className:"row border header"},h.a.createElement("div",{className:"col-sm-3"},"Datum betaald"),h.a.createElement("div",{className:"col-sm-2"},"Bedrag"),h.a.createElement("div",{className:"col-sm-3"},"Betalingskenmerk"),h.a.createElement("div",{className:"col-sm-3"},"Datum aangemaakt"),h.a.createElement("div",{className:"col-sm-1"})),e.payments.length>0?e.payments.map((function(e){return h.a.createElement(Ye,{key:e.id,payment:e})})):h.a.createElement("div",null,"Geen betalingen bekend."))}));function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Je=function(e){l()(n,e);var t=Ke(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"handleInputChange",(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(He(He({},a.state),{},{payment:He(He({},a.state.payment),{},y()({},r,n))}))})),y()(b()(a),"handleSubmit",(function(e){e.preventDefault();var t=a.state.payment,n={},r=!1;S.a.isEmpty(t.amount+"")&&(n.amount=!0,r=!0),S.a.isEmpty(t.datePaid+"")&&(n.datePaid=!0,r=!0),a.setState(He(He({},a.state),{},{errors:n})),!r&&O.a.newPayment(t).then((function(e){a.props.fetchInvoiceDetails(t.invoiceId),a.props.toggleShowNew()}))})),a.state={payment:{invoiceId:a.props.invoiceDetails.id,amount:"",datePaid:N()(),paymentReference:null},errors:{amount:!1,datePaid:!1}},a.handleInputChangeDate=a.handleInputChangeDate.bind(b()(a)),a}return o()(n,[{key:"handleInputChangeDate",value:function(e,t){this.setState(He(He({},this.state),{},{payment:He(He({},this.state.payment),{},y()({},t,e))}))}},{key:"render",value:function(){var e=this.state.payment,t=e.amount,n=e.datePaid,a=e.paymentReference;return h.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},h.a.createElement(Z.a,{className:"panel-grey"},h.a.createElement($.a,null,h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Bedrag",id:"amount",name:"amount",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount}),h.a.createElement(R.a,{label:"Datum betaald",name:"datePaid",value:n,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.datePaid})),h.a.createElement("div",{className:"row"},h.a.createElement(j.a,{label:"Betalingskenmerk",name:"paymentReference",value:a,onChangeAction:this.handleInputChange})),h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(ce.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),h.a.createElement(ce.a,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),n}(p.Component),Ue=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(Je);function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Xe=function(e){l()(n,e);var t=Qe(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"toggleShowNew",(function(){a.setState({showNew:!a.state.showNew})})),a.state={showNew:!1},a}return o()(n,[{key:"render",value:function(){return h.a.createElement(Z.a,null,h.a.createElement(re.a,null,h.a.createElement("span",{className:"h5 text-bold"},"Betalingen"),!this.props.invoiceInTwinfield&&this.props.permissions.manageFinancial&&h.a.createElement("a",{role:"button",className:"pull-right",onClick:this.toggleShowNew},h.a.createElement("span",{className:"glyphicon glyphicon-plus"}))),h.a.createElement($.a,null,h.a.createElement("div",{className:"col-md-12"},h.a.createElement(Ge,null)),h.a.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&h.a.createElement(Ue,{toggleShowNew:this.toggleShowNew}))))}}]),n}(p.Component),Ze=Object(v.b)((function(e){return{permissions:e.meDetails.permissions,invoiceInTwinfield:e.invoiceDetails.invoiceInTwinfield}}))(Xe);N.a.locale("nl");var $e=function(e){var t=e.molliePayment,n=t.mollieId,a=(t.createdAt,t.datePaid),r=t.dateActivated,i=t.iban,o=t.ibanName;return h.a.createElement("div",{className:"row border"},h.a.createElement("div",null,h.a.createElement("div",{className:"col-sm-2"},n),h.a.createElement("div",{className:"col-sm-2"},r?N()(r).format("L HH:mm"):""),h.a.createElement("div",{className:"col-sm-2"},a?N()(a).format("L HH:mm"):""),h.a.createElement("div",{className:"col-sm-3"},i),h.a.createElement("div",{className:"col-sm-3"},o)))};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var at=function(e){l()(n,e);var t=nt(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={molliePayment:tt({},e.molliePayment)},a}return o()(n,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement($e,{molliePayment:this.state.molliePayment}))}}]),n}(p.Component),rt=Object(v.b)((function(e){return{molliePayments:e.invoiceDetails.molliePayments}}))((function(e){return h.a.createElement("div",null,h.a.createElement("div",{className:"row border header"},h.a.createElement("div",{className:"col-sm-2"},"Transactie referentie"),h.a.createElement("div",{className:"col-sm-2"},"Aanvraag gedaan op"),h.a.createElement("div",{className:"col-sm-2"},"Betaald op"),h.a.createElement("div",{className:"col-sm-3"},"Iban"),h.a.createElement("div",{className:"col-sm-3"},"Rekeninghouder")),e.molliePayments.length>0?e.molliePayments.map((function(e){return h.a.createElement(at,{key:e.id,molliePayment:e})})):h.a.createElement("div",null,"Geen online betalingstransacties bekend."))}));function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var ot=function(e){l()(n,e);var t=it(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){return h.a.createElement(Z.a,null,h.a.createElement(re.a,null,h.a.createElement("span",{className:"h5 text-bold"},"Online betalingtransacties")),h.a.createElement($.a,null,h.a.createElement("div",{className:"col-md-12"},h.a.createElement(rt,null))))}}]),n}(p.Component);function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}N.a.locale("nl");var lt=function(e){l()(n,e);var t=ct(n);function n(e){return r()(this,n),t.call(this,e)}return o()(n,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van nota.":this.props.isLoading?e="Gegevens aan het laden.":Object(Q.isEmpty)(this.props.invoiceDetails)?e="Geen nota gevonden!":t=!1,t?h.a.createElement("div",null,e):h.a.createElement("div",null,h.a.createElement(ne,null),h.a.createElement(Te,null),h.a.createElement(Ze,null),this.props.invoiceDetails.usesMollie&&h.a.createElement(ot,null),h.a.createElement(ie,null))}}]),n}(p.Component),st=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(lt);function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var mt=function(e){l()(n,e);var t=ut(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"openItem",(function(e){P.f.push("/taak/".concat(e))})),a.state={relatedTasks:""},a}return o()(n,[{key:"render",value:function(){var e=this,t=this.props.relatedTasks;return h.a.createElement("div",null,""==t&&h.a.createElement("div",null,"Geen taken of notities gevonden."),""!=t&&h.a.createElement("table",{className:"table harmonica-table"},h.a.createElement("tbody",null,t.map((function(t,n){return h.a.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:n},h.a.createElement("td",{className:"col-xs-12 clickable"},N()(t.createdAt).format("L")," - ",t.noteSummary))})))))}}]),n}(p.Component),dt=Object(v.b)((function(e){return{relatedTasks:e.invoiceDetails.relatedTasks}}))(mt),pt=Object(v.b)((function(e){return{permissions:e.meDetails.permissions}}),null)((function(e){var t=e.toggleShowList,n=e.showTasksList,a=e.newTask,r=e.taskCount,i=e.permissions;return h.a.createElement(Z.a,{className:"harmonica-button"},h.a.createElement($.a,null,h.a.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},h.a.createElement("span",null,"TAKEN/NOTITIES ",h.a.createElement("span",{className:"badge"},r))),h.a.createElement("div",{className:"col-sm-2"},i.manageTask&&h.a.createElement("div",{className:"pull-right"},h.a.createElement("span",{className:"glyphicon glyphicon-plus glyphicon-white","data-toggle":"dropdown",role:"button"}),h.a.createElement("ul",{className:"dropdown-menu"},h.a.createElement("li",null,h.a.createElement("a",{className:"btn",onClick:function(){return a("open")}},"Maak taak")),h.a.createElement("li",null,h.a.createElement("a",{className:"btn",onClick:function(){return a("afgehandeld")}},"Maak notitie"))))),h.a.createElement("div",{className:"col-sm-12"},n&&h.a.createElement(dt,null))))}));function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var vt=function(e){l()(n,e);var t=ht(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"openItem",(function(e){P.f.push("/email/".concat(e))})),a}return o()(n,[{key:"render",value:function(){var e=this,t=this.props.relatedEmails;return h.a.createElement("div",null,""==t&&h.a.createElement("div",null,"Geen e-mails gevonden."),""!=t&&h.a.createElement("table",{className:"table harmonica-table"},h.a.createElement("tbody",null,t.map((function(t,n){return h.a.createElement("tr",{key:n},h.a.createElement("td",{className:"col-xs-4 clickable",onClick:function(){return e.openItem(t.id)}},N()(t.date_sent).format("L")),h.a.createElement("td",{className:"col-xs-8 clickable",onClick:function(){return e.openItem(t.id)}},t.subject))})))))}}]),n}(p.Component),ft=Object(v.b)((function(e){return{relatedEmails:e.invoiceDetails.relatedEmails}}))(vt),gt=function(e){var t=e.toggleShowList,n=e.showEmailsList,a=e.newEmail,r=e.emailCount;return h.a.createElement(Z.a,{className:"harmonica-button"},h.a.createElement($.a,null,h.a.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},h.a.createElement("span",{onClick:t,className:""},"E-MAILS ",h.a.createElement("span",{className:"badge"},r))),h.a.createElement("div",{className:"col-sm-2"},h.a.createElement("a",{role:"button",className:"pull-right",onClick:a},h.a.createElement("span",{className:"glyphicon glyphicon-plus glyphicon-white"}))),h.a.createElement("div",{className:"col-sm-12"},n&&h.a.createElement(ft,null))))};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Pt=function(e){l()(n,e);var t=yt(n);function n(e){var a;return r()(this,n),a=t.call(this,e),y()(b()(a),"newTask",(function(e){P.f.push("/taak/nieuw/".concat(e,"/nota/").concat(a.props.invoiceDetails.id))})),y()(b()(a),"newEmail",(function(){P.f.push("/email/nieuw")})),a.state={toggleShowList:{tasks:!1,emails:!1}},a.toggleShowList=a.toggleShowList.bind(b()(a)),a}return o()(n,[{key:"componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.setState({toggleShowList:{tasks:!1,emails:!1}})}},{key:"toggleShowList",value:function(e){this.setState(Et(Et({},this.state),{},{toggleShowList:Et(Et({},this.state.toggleShowList),{},y()({},e,!this.state.toggleShowList[e]))}))}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{className:"margin-10-top"},h.a.createElement(pt,{toggleShowList:function(){return e.toggleShowList("tasks")},showTasksList:this.state.toggleShowList.tasks,taskCount:this.props.invoiceDetails.taskCount,newTask:this.newTask}),h.a.createElement(gt,{toggleShowList:function(){return e.toggleShowList("emails")},showEmailsList:this.state.toggleShowList.emails,newEmail:this.newEmail,emailCount:this.props.invoiceDetails.emailCount}))}}]),n}(p.Component),wt=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails,permissions:e.meDetails.permissions}}),null)(Pt);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Ot=function(e){l()(n,e);var t=Dt(n);function n(e){return r()(this,n),t.call(this,e)}return o()(n,[{key:"componentDidMount",value:function(){this.props.fetchInvoiceDetails(this.props.params.id)}},{key:"render",value:function(){return h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-9"},h.a.createElement("div",{className:"col-md-12 margin-10-top"},h.a.createElement(Z.a,null,h.a.createElement($.a,{className:"panel-small"},h.a.createElement(U,null)))),h.a.createElement("div",{className:"col-md-12 margin-10-top"},h.a.createElement(st,null))),h.a.createElement(Z.a,{className:"col-md-3 harmonica"},h.a.createElement($.a,null,h.a.createElement(wt,null))))}}]),n}(p.Component);t.default=Object(v.b)((function(e){return{invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e(Object(f.b)(t))}}}))(Ot)},831:function(e,t,n){"use strict";n(844),n(236),n(823),n(13),n(6);var a=n(840),r=n(834),i=(n(12),n(841)),o=n(842),c=n(843),l=n(0),s=n.n(l),u=n(833),m=n(828),d=(n(129),n(83),n(822)),p=(n(829),n(827),n(832),n(835)),h=n(849);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}l.Component;var f=Object(p.a)(d.a);t.a=f},839:function(e,t,n){"use strict";var a=n(6),r=n.n(a),i=n(0),o=n.n(i),c=n(5),l=n.n(c),s=n(831);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.label,n=e.divSize,a=e.size,r=e.id,i=e.name,c=e.value,l=e.options,u=e.optionId,d=e.optionName,p=e.onChangeAction,h=e.required,v=e.error,f=e.errorMessage,g=e.isLoading,b=e.disabled,E=e.placeholder,y=e.clearable,P={option:function(e){return m(m({},e),{},{fontSize:"12px"})},singleValue:function(e){return m(m({},e),{},{fontSize:"12px"})},menu:function(e){return m(m({},e),{},{zIndex:20})}};return o.a.createElement("div",{className:"form-group ".concat(n)},o.a.createElement("label",{htmlFor:r,className:"col-sm-6 ".concat(h)},t),o.a.createElement("div",{className:"".concat(a)},o.a.createElement(s.a,{id:r,name:i,value:l&&c?l.find((function(e){return e[u]===c})):"",onChange:function(e){return p(e?e[u]:"",i)},options:l,getOptionLabel:function(e){return e[d]},getOptionValue:function(e){return e[u]},placeholder:E,noOptionsMessage:function(){return"Geen opties gevonden"},loadingMessage:function(){return"Laden"},isMulti:!1,simpleValue:!0,removeSelected:!0,className:v?" has-error":"",isLoading:g,isDisabled:b,styles:P,isClearable:y,theme:function(e){return m(m({},e),{},{colors:m({},e.colors),spacing:m(m({},e.spacing),{},{baseUnit:2,controlHeight:24,menuGutter:4})})}})),v&&o.a.createElement("div",{className:"col-sm-offset-3 col-sm-8"},o.a.createElement("span",{className:"has-error-message"}," ",f)))};d.defaultProps={size:"col-sm-6",divSize:"col-sm-6",optionId:"id",optionName:"name",disabled:!1,required:"",error:!1,errorMessage:"",value:"",isLoading:!1,placeholder:"",clearable:!1},d.propTypes={label:l.a.string.isRequired,size:l.a.string,divSize:l.a.string,id:l.a.string,name:l.a.string.isRequired,options:l.a.array,optionId:l.a.string,optionName:l.a.string,value:l.a.oneOfType([l.a.string,l.a.number]),onChangeAction:l.a.func,onBlurAction:l.a.func,required:l.a.string,disabled:l.a.bool,error:l.a.bool,errorMessage:l.a.string,isLoading:l.a.bool,placeholder:l.a.string,clearable:l.a.bool},t.a=d},865:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){return{type:"FETCH_INVOICE_DETAILS",id:e}},r=function(e){return{type:"DELETE_INVOICE",id:e}}},973:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var a=function(e,t,n,a,r,i){return{type:"FETCH_INVOICES",filters:e,sorts:t,pagination:n,administrationId:a,onlyEmailInvoices:r,onlyPostInvoices:i}},r=function(e){return{type:"INVOICE_PREVIEW_SEND",data:e}},i=function(){return{type:"CLEAR_INVOICE_PREVIEW_SEND"}},o=function(){return{type:"CLEAR_INVOICES"}},c=function(e){return{type:"DELETE_INVOICE_FROM_GRID",id:e}}}}]);