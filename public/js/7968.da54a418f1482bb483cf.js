"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[7968],{87383:(e,t,n)=>{n.d(t,{Em:()=>i,mY:()=>a,r$:()=>r});var a=function(e){return{type:"FETCH_INVOICE_DETAILS",id:e}},i=function(e,t){return{type:"FETCH_INVOICE_FROM_TWINFIELD_DETAILS",twinfieldCode:e,twinfieldNumber:t}},r=function(e){return{type:"DELETE_INVOICE",id:e}}},63390:(e,t,n)=>{n.d(t,{$t:()=>c,Do:()=>a,E9:()=>r,UU:()=>o,p_:()=>i});var a=function(e,t,n,a,i,r,o){return{type:"FETCH_INVOICES",filters:e,sorts:t,pagination:n,administrationId:a,onlyEmailInvoices:i,onlyPostInvoices:r,setInvoicesPaid:o}},i=function(e){return{type:"INVOICE_PREVIEW_SEND",data:e}},r=function(){return{type:"CLEAR_INVOICE_PREVIEW_SEND"}},o=function(){return{type:"CLEAR_INVOICES"}},c=function(e){return{type:"DELETE_INVOICE_FROM_GRID",id:e}}},27968:(e,t,n)=>{n.r(t),n.d(t,{default:()=>rn});var a=n(23029),i=n(92901),r=n(56822),o=n(53954),c=n(85501),l=n(96540),s=n(69733),u=n(87383),m=n(64467),d=n(24179),p=n(91858),h=n(63750),v=n(23299),f=n(95093),g=n.n(f),E=n(57761),b=n.n(E),A=n(73421),y=n(54814);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,N()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}var I=function(e){function t(e){var n;return(0,a.A)(this,t),n=D(this,t,[e]),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(w(w({},n.state),{},{invoice:w(w({},n.state.invoice),{},(0,m.A)({},i,a))}))})),(0,m.A)(n,"handleInputChangeDate",(function(e,t){n.setState(w(w({},n.state),{},{invoice:w(w({},n.state.invoice),{},(0,m.A)({},t,e))}))})),(0,m.A)(n,"confirmAction",(function(e){e.preventDefault();var t=n.state.invoice,a={},i=!1;b().isEmpty(t.datePaid+"")&&(a.datePaid=!0,i=!0),n.setState(w(w({},n.state),{},{errors:a})),i||v.A.updateInvoice(t).then((function(e){n.props.fetchInvoiceDetails(t.id),n.props.closeModal()}))})),n.state={invoice:{id:e.invoiceId,datePaid:g()().format("Y-MM-DD"),paymentReference:null},errors:{datePaid:!1}},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.state.invoice,t=e.datePaid,n=e.paymentReference;return l.createElement(h.A,{buttonConfirmText:"Nota betalen",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Nota betalen"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Vul de betaaldatum en evt. het betalingskenmerk in en klik op Nota's betalen. Er wordt dan een betaling aangemaakt voor het openstaande bedrag (â‚¬ "+this.props.amountOpen.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2})+")."))),l.createElement("div",{className:"row"},l.createElement(A.A,{divSize:"col-sm-12",label:"Datum betaald",name:"datePaid",value:t,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.datePaid})),l.createElement("div",{className:"row"},l.createElement(y.A,{divSize:"col-sm-12",label:"Betalingskenmerk",name:"paymentReference",value:n,onChangeAction:this.handleInputChange})))}}])}(l.Component);const O=(0,s.Ng)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(I);function C(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,S()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var k=function(e){function t(e){var n;return(0,a.A)(this,t),n=C(this,t,[e]),(0,m.A)(n,"confirmAction",(function(e){e.preventDefault(),v.A.sendNotification(n.props.invoiceId).then((function(e){n.props.fetchInvoiceDetails(n.props.invoiceId),n.props.closeModal()}))})),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(h.A,{buttonConfirmText:"Versturen",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Notificatie versturen"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,this.props.reminderText))))}}])}(l.Component);const j=(0,s.Ng)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(k);function R(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,T()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}var L=function(e){function t(e){var n;return(0,a.A)(this,t),n=R(this,t,[e]),(0,m.A)(n,"confirmAction",(function(e){e.preventDefault(),v.A.setIrrecoverable(n.props.invoiceId).then((function(e){n.props.fetchInvoiceDetails(n.props.invoiceId),n.props.closeModal()}))})),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(h.A,{closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Nota oninbaar"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Wilt u deze nota als oninbaar markeren?"))))}}])}(l.Component);const M=(0,s.Ng)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(L);var x=n(5419),B=n.n(x),F=n(63390);const V=(0,s.Ng)(null,(function(e){return{deleteInvoice:function(t){e((0,u.r$)(t))}}}))((function(e){return l.createElement(h.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteInvoice(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},l.createElement("p",null,"Verwijder nota: ",l.createElement("strong",null," ","".concat(e.number,"?"))))}));var q=n(46749);function Y(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,z()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}var W=function(e){function t(e){var n;return(0,a.A)(this,t),n=Y(this,t,[e]),(0,m.A)(n,"download",(function(){v.A.download(n.props.invoiceDetails.id).then((function(e){B()(e.data,e.headers["x-filename"])}))})),(0,m.A)(n,"showSend",(function(){var e="collection"===n.props.invoiceDetails.paymentTypeId?"incasso":"overboeken";"incasso"==e&&n.props.invoiceDetails.totalInclVatInclReduction<0?n.props.setError(405,'Een nota met een negatief bedrag kan geen incasso zijn. Wil je a.u.b. de betaalwijze van de order aanpassen in "Overboeken".'):(n.props.previewSend([n.props.invoiceDetails.id]),d.RL.push("/financieel/".concat(n.props.invoiceDetails.order.administrationId,"/notas/te-verzenden/verzenden/email/").concat(e)))})),(0,m.A)(n,"showSendPost",(function(){var e="collection"===n.props.invoiceDetails.paymentTypeId?"incasso":"overboeken";n.props.previewSend([n.props.invoiceDetails.id]),d.RL.push("/financieel/".concat(n.props.invoiceDetails.order.administrationId,"/notas/te-verzenden/verzenden/post/").concat(e))})),(0,m.A)(n,"showSetPaid",(function(){n.setState({showSetPaid:!n.state.showSetPaid})})),(0,m.A)(n,"showSendNotification",(function(){n.setState({showSendNotification:!n.state.showSendNotification})})),(0,m.A)(n,"showSetIrrecoverable",(function(){n.setState({showSetIrrecoverable:!n.state.showSetIrrecoverable})})),(0,m.A)(n,"showDelete",(function(){n.setState({showDelete:!n.state.showDelete})})),(0,m.A)(n,"view",(function(){d.RL.push("/nota/inzien/".concat(n.props.invoiceDetails.id))})),n.state={showSetChecked:!1,showSetPaid:!1,showSendNotification:!1,reminderText:"",showSetIrrecoverable:!1,showDelete:!1},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&(e.invoiceDetails.dateReminder3?this.setState({reminderText:"Wilt u de aanmaning sturen?"}):e.invoiceDetails.dateReminder2?this.setState({reminderText:"Wilt u de derde herinnering sturen?"}):e.invoiceDetails.dateReminder1?this.setState({reminderText:"Wilt u de tweede herinnering sturen?"}):this.setState({reminderText:"Wilt u de eerste herinnering sturen?"}))}},{key:"render",value:function(){var e=("to-send"===this.props.invoiceDetails.statusId||"sent"===this.props.invoiceDetails.statusId)&&this.props.invoiceDetails.usesTwinfield&&!this.props.invoiceDetails.compatibleWithTwinfield;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},l.createElement(p.A,{iconName:"arrowLeft",onClickAction:d.Nc.goBack}),l.createElement(p.A,{iconName:"eye",onClickAction:this.view}),("to-send"===this.props.invoiceDetails.statusId||"error-sending"===this.props.invoiceDetails.statusId)&&"Geen e-mail bekend"!==this.props.invoiceDetails.emailToAddress&&!e&&l.createElement(p.A,{iconName:"envelopeO",onClickAction:this.showSend}),("to-send"===this.props.invoiceDetails.statusId||"error-sending"===this.props.invoiceDetails.statusId)&&"Geen e-mail bekend"===this.props.invoiceDetails.emailToAddress&&!e&&l.createElement(p.A,{iconName:"envelopeO",onClickAction:this.showSendPost}),!this.props.invoiceDetails.invoiceInTwinfield&&!this.props.invoiceDetails.invoicePaidInTwinfield&&("sent"===this.props.invoiceDetails.statusId||"exported"===this.props.invoiceDetails.statusId)&&l.createElement(p.A,{iconName:"euro",onClickAction:this.showSetPaid}),("sent"===this.props.invoiceDetails.statusId||"exported"===this.props.invoiceDetails.statusId)&&!this.props.invoiceDetails.dateExhortation&&!this.props.invoiceDetails.isPaidByMollie&&l.createElement(p.A,{iconName:"bullhorn",onClickAction:this.showSendNotification}),"to-send"!==this.props.invoiceDetails.statusId&&"in-progress"!==this.props.invoiceDetails.statusId&&"is-sending"!==this.props.invoiceDetails.statusId&&"error-making"!==this.props.invoiceDetails.statusId&&"error-sending"!==this.props.invoiceDetails.statusId&&"is-resending"!==this.props.invoiceDetails.statusId&&"paid"!==this.props.invoiceDetails.statusId&&"irrecoverable"!==this.props.invoiceDetails.statusId&&l.createElement(p.A,{iconName:"remove",onClickAction:this.showSetIrrecoverable}),l.createElement(p.A,{iconName:"download",onClickAction:this.download}),"to-send"===this.props.invoiceDetails.statusId&&l.createElement(p.A,{iconName:"trash",onClickAction:this.showDelete}))),!this.props.isLoading&&l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Nota:"," ",this.props.invoiceDetails.order?this.props.invoiceDetails.order.contact.fullName:""," /"," ",this.props.invoiceDetails.number)),l.createElement("div",{className:"col-md-4"}),this.state.showSetPaid&&l.createElement(O,{closeModal:this.showSetPaid,invoiceId:this.props.invoiceDetails.id,amountOpen:this.props.invoiceDetails.amountOpen}),this.state.showSendNotification&&l.createElement(j,{reminderText:this.state.reminderText,closeModal:this.showSendNotification,invoiceId:this.props.invoiceDetails.id}),this.state.showSetIrrecoverable&&l.createElement(M,{closeModal:this.showSetIrrecoverable,invoiceId:this.props.invoiceDetails.id}),this.state.showDelete&&l.createElement(V,{number:this.props.invoiceDetails.number,id:this.props.invoiceDetails.id,closeDeleteItemModal:this.showDelete}))}}])}(l.Component);const _=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails,isLoading:e.loadingData.isLoading}}),(function(e){return{previewSend:function(t){e((0,F.p_)(t))},setError:function(t,n){e((0,q.N)(t,n))}}}))(W);var G=n(2543),H=n(30483),K=n(62493),U=n(55849);const $=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails}}))((function(e){var t=e.invoiceDetails,n=t.status,a=t.dateRequested,i=t.paymentType,r=t.paymentTypeId,o=t.invoiceText,c=t.subject,s=t.order,u=t.totalInclVatInclReduction,m=t.amountOpen,d=t.dateSent,p=t.datePaymentDue,h=t.datePaid,v=t.paymentReference,f=t.dateReminder1,E=t.dateReminder2,b=t.dateReminder3,A=t.dateExhortation,y=t.emailReminder1,P=t.emailReminder2,w=t.emailReminder3,D=t.emailExhortation,N=t.dateCollection,I=t.emailedTo,O=t.sentToName,C=t.isPaidByMollie;return l.createElement("div",{onClick:e.switchToEdit},l.createElement(K.A,null,l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Contact",value:s.contact?s.contact.fullName:"",link:s.contact?"contact/"+s.contact.id:""}),l.createElement(H.A,{label:"Status",value:n?n.name:""})),n&&"sent"===n.id&&C&&l.createElement("div",{className:"row"},l.createElement(H.A,null),l.createElement(H.A,{label:"Substatus",value:"Mollie betaald"})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Betaalwijze",value:i?i.name:""}),l.createElement(H.A,{label:"Betreft",value:c||""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Order",value:s?s.number:"",link:s?"order/"+s.id:""})),l.createElement("div",{className:"row margin-20-top margin-20-bottom"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Opmerking")),l.createElement("div",{className:"col-sm-9",id:"invoiceText"},o||"")),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Bedrag incl. BTW",value:u?"â‚¬ "+u.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"â‚¬ 0,00"}),l.createElement(H.A,{label:"Openstaand bedrag",value:m?"â‚¬ "+m.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"â‚¬ 0,00"})),l.createElement("div",{className:"row"},d?l.createElement(H.A,{label:"Nota datum",value:d?g()(d).format("DD-MM-Y"):""}):l.createElement(H.A,{label:"Geplande nota datum",value:a?g()(a).format("DD-MM-Y"):""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Verstuurd naar",value:O||""}),l.createElement(H.A,{label:"Verstuurd naar e-mail",value:I||""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Herinnering 1 verstuurd",value:f?g()(f).format("DD-MM-Y"):""}),l.createElement(H.A,{label:"E-mail herinnering 1",value:y||""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Herinnering 2 verstuurd",value:E?g()(E).format("DD-MM-Y"):""}),l.createElement(H.A,{label:"E-mail herinnering 2",value:P||""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Herinnering 3 verstuurd",value:b?g()(b).format("DD-MM-Y"):""}),l.createElement(H.A,{label:"E-mail herinnering 3",value:w||""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Aanmaning verstuurd",value:A?g()(A).format("DD-MM-Y"):""}),l.createElement(H.A,{label:"E-mail aanmaning",value:D||""})),l.createElement("div",{className:"row"},"transfer"===r?l.createElement(H.A,{label:"Uiterste betaaldatum",value:p?g()(p).format("DD-MM-Y"):""}):l.createElement(H.A,{label:"Incasso datum",value:N?g()(N).format("DD-MM-Y"):""}),l.createElement(H.A,{label:"Datum betaald",value:h?g()(h).format("DD-MM-Y"):""})),l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Betalingskenmerk",value:v||""})))))}));function J(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Q()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}const X=function(e){function t(e){return(0,a.A)(this,t),J(this,t,[e])}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement($,null))}}])}(l.Component);g().locale("nl");const Z=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails}}))((function(e){var t=e.invoiceDetails,n=t.createdAt,a=t.createdBy;return l.createElement("div",null,l.createElement("div",{className:"row"},l.createElement(H.A,{label:"Gemaakt door",value:a?a.fullName:"Onbekend",link:a?"gebruiker/"+a.id:""}),l.createElement(H.A,{label:"Gemaakt op",value:n?g()(n).format("L"):"Onbekend"})))}));var ee=n(9392);const te=function(e){return l.createElement(K.A,null,l.createElement(ee.A,null,l.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),l.createElement(U.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(Z,null))))};g().locale("nl");const ne=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.invoiceProduct,n=t.period,a=t.productCode,i=t.productName,r=t.description,o=t.amount,c=t.amountInclVatInclReduction;return l.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},l.createElement("div",null,l.createElement("div",{className:"col-sm-1"},a||""),l.createElement("div",{className:"col-sm-3"},i||""),l.createElement("div",{className:"col-sm-3"},r||""),l.createElement("div",{className:"col-sm-2"},o||""),l.createElement("div",{className:"col-sm-2"},c?"â‚¬ "+c.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"â‚¬ 0,00"),l.createElement("div",{className:"col-sm-1"}),n&&l.createElement("div",{className:"col-sm-12"},"Periode ",n)))}));var ae=n(55956);g().locale("nl");const ie=function(e){var t=e.invoiceProduct,n=t.product,a=t.description,i=t.amount,r=t.amountReduction,o=t.percentageReduction,c=t.dateLastInvoice,s=t.variablePrice;return l.createElement("div",null,l.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},l.createElement(K.A,{className:"panel-grey"},l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Notanummer",name:"invoice",value:e.invoiceDetails?e.invoiceDetails.number:"",readOnly:!0}),l.createElement(y.A,{label:"Product",name:"product",value:n?n.name:"",readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Omschrijving",id:"description",name:"description",value:a,onChangeAction:e.handleInputChange,required:"required",error:e.errors.description}),l.createElement(y.A,{label:"Aantal",type:"number",id:"amount",name:"amount",value:i,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:o,onChangeAction:e.handleInputChange}),e.productVariablePrice?l.createElement(y.A,{label:"Prijs ex. BTW",type:"number",name:"variablePrice",value:s,onChangeAction:e.handleInputChangeVariablePrice}):l.createElement(y.A,{label:"Prijs excl. BTW",name:"price",value:e.invoiceProduct.product.currentPrice?"â‚¬ "+e.invoiceProduct.product.currentPrice.priceInclVat.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:e.invoiceProduct.product.currentPrice.priceNumberOfDecimals}):"",readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:r,onChangeAction:e.handleInputChange}),l.createElement(y.A,{label:"Totaalbedrag",name:"totalPrice",value:"â‚¬ "+e.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Begin datum",name:"dateLastInvoice",value:c,onChangeAction:e.handleInputChangeDate})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(ae.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),l.createElement(ae.A,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))},re=(0,s.Ng)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))((function(e){return l.createElement(h.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){v.A.deleteInvoiceProduct(e.id).then((function(t){e.fetchInvoiceDetails(e.invoiceId),e.closeDeleteItemModal()}))},title:"Verwijderen"},l.createElement("p",null,"Verwijder notaregel?"))}));function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,se()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}var ue=function(e){function t(e){var n;return(0,a.A)(this,t),n=le(this,t,[e]),(0,m.A)(n,"toggleDelete",(function(){n.setState({showDelete:!n.state.showDelete})})),(0,m.A)(n,"onLineEnter",(function(){n.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,m.A)(n,"onLineLeave",(function(){n.setState({showActionButtons:!1,highlightLine:""})})),(0,m.A)(n,"openEdit",(function(){n.setState({showEdit:!0})})),(0,m.A)(n,"closeEdit",(function(){n.setState({showEdit:!1})})),(0,m.A)(n,"cancelEdit",(function(){n.setState(ce(ce({},n.state),{},{invoiceProduct:ce({},n.props.invoiceProduct)})),n.closeEdit()})),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(ce(ce({},n.state),{},{invoiceProduct:ce(ce({},n.state.invoiceProduct),{},(0,m.A)({},i,a))}),n.updatePrice)})),(0,m.A)(n,"updatePrice",(function(){var e;e=n.state.invoiceProduct.variablePrice?b().isFloat(n.state.invoiceProduct.variablePrice+"")?n.state.invoiceProduct.variablePrice:0:n.props.invoiceProduct.product.currentPrice&&b().isFloat(n.props.invoiceProduct.product.currentPrice.priceInclVat+"")?n.props.invoiceProduct.product.currentPrice.priceInclVat:0;var t=b().isFloat(n.state.invoiceProduct.amount+"")?n.state.invoiceProduct.amount:0,a=b().isFloat(n.state.invoiceProduct.percentageReduction+"")?n.state.invoiceProduct.percentageReduction:0,i=b().isFloat(n.state.invoiceProduct.amountReduction+"")?n.state.invoiceProduct.amountReduction:0,r=0;r=e<0?e*t*((parseFloat(100)+parseFloat(a))/100)-i:e*t*((100-a)/100)-i,n.setState(ce(ce({},n.state),{},{totalPrice:r}))})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t={},a=!1,i=n.state.invoiceProduct;b().isEmpty(i.amount+"")&&(t.amount=!0,a=!0),b().isEmpty(i.description+"")&&(t.description=!0,a=!0),n.setState(ce(ce({},n.state),{},{errors:t})),!a&&v.A.updateInvoiceProduct(i).then((function(e){n.props.fetchInvoiceDetails(n.state.invoiceProduct.invoiceId),n.closeEdit()}))})),(0,m.A)(n,"handleInputChangeVariablePrice",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(ce(ce({},n.state),{},{price:a,invoiceProduct:ce(ce({},n.state.invoiceProduct),{},(0,m.A)({},i,a))}),n.updatePrice)})),n.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,totalPrice:e.invoiceProduct.amountInclVatInclReduction,invoiceProduct:ce(ce({},e.invoiceProduct),{},{variablePrice:e.invoiceProduct.priceInclVat?Math.round(100*e.invoiceProduct.priceInclVat)/100:0}),errors:{amount:!1,description:!1}},n.handleInputChangeDate=n.handleInputChangeDate.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentWillReceiveProps",value:function(e){(0,G.isEqual)(this.state.invoiceProduct,e.invoiceProduct)||this.setState(ce(ce({},this.state),{},{totalPrice:e.invoiceProduct.amountInclVatInclReduction,invoiceProduct:ce(ce({},e.invoiceProduct),{},{variablePrice:e.invoiceProduct.priceInclVat?Math.round(100*e.invoiceProduct.priceInclVat)/100:0})}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(ce(ce({},this.state),{},{invoiceProduct:ce(ce({},this.state.invoiceProduct),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){return l.createElement("div",null,l.createElement(ne,{highlightLine:this.state.highlightLine,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,showActionButtons:this.state.showActionButtons,invoiceProduct:this.state.invoiceProduct,invoiceDetails:this.props.invoiceDetails,openEdit:this.openEdit,toggleDelete:this.toggleDelete}),this.state.showEdit&&this.props.permissions.manageFinancial&&l.createElement(ie,{invoiceDetails:this.props.invoiceDetails,errors:this.state.errors,totalPrice:this.state.totalPrice,invoiceProduct:this.state.invoiceProduct,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit,handleInputChangeVariablePrice:this.handleInputChangeVariablePrice,productVariablePrice:"variable"===this.state.invoiceProduct.product.hasVariablePrice}),this.state.showDelete&&this.props.permissions.manageFinancial&&l.createElement(re,{closeDeleteItemModal:this.toggleDelete,id:this.state.invoiceProduct.id,invoiceId:this.state.invoiceProduct.invoiceId}))}}])}(l.Component);const me=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions,invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(ue),de=(0,s.Ng)((function(e){return{invoiceProducts:e.invoiceDetails.invoiceProducts}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-1"},"Productcode"),l.createElement("div",{className:"col-sm-3"},"Productnaam"),l.createElement("div",{className:"col-sm-3"},"Omschrijving"),l.createElement("div",{className:"col-sm-2"},"Aantal"),l.createElement("div",{className:"col-sm-2"},"Bedrag incl. BTW")),e.invoiceProducts.length>0?e.invoiceProducts.map((function(e){return l.createElement(me,{key:e.id,invoiceProduct:e})})):l.createElement("div",null,"Geen notaregels bekend."))}));var pe=n(14809),he=n(31714);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Ee()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ee=function(){return!!e})()}var be=function(e){function t(e){var n;return(0,a.A)(this,t),n=ge(this,t,[e]),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(fe(fe({},n.state),{},{invoiceProduct:fe(fe({},n.state.invoiceProduct),{},(0,m.A)({},i,a))}),n.updatePrice)})),(0,m.A)(n,"handleInputChangeProduct",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(fe(fe({},n.state),{},{product:fe(fe({},n.state.product),{},(0,m.A)({},i,a))}))})),(0,m.A)(n,"handleInputChangeProductPrice",(function(e){var t,a=e.target,i="checkbox"===a.type?a.checked:a.value,r=a.name;t=n.state.vatPercentage&&"6"==n.state.vatPercentage.id?1.06*i:n.state.vatPercentage&&"9"==n.state.vatPercentage.id?1.09*i:n.state.vatPercentage&&"21"==n.state.vatPercentage.id?1.21*i:i,n.setState(fe(fe({},n.state),{},{price:t,product:fe(fe({},n.state.product),{},(0,m.A)({},r,i))}),n.updatePrice)})),(0,m.A)(n,"handleInputChangeProductVat",(function(e){var t,a=e.target,i="checkbox"===a.type?a.checked:a.value,r=a.name;t="6"==i?1.06*n.state.product.price:"9"==i?1.09*n.state.product.price:"21"==i?1.21*n.state.product.price:n.state.product.price,n.setState(fe(fe({},n.state),{},{price:t,product:fe(fe({},n.state.product),{},(0,m.A)({},r,i))}),n.updatePrice)})),(0,m.A)(n,"updatePrice",(function(){var e=b().isFloat(n.state.price+"")?n.state.price:0,t=b().isFloat(n.state.invoiceProduct.amount+"")?n.state.invoiceProduct.amount:0,a=b().isFloat(n.state.invoiceProduct.percentageReduction+"")?n.state.invoiceProduct.percentageReduction:0,i=b().isFloat(n.state.invoiceProduct.amountReduction+"")?n.state.invoiceProduct.amountReduction:0,r=0;r=e<0?e*t*((parseFloat(100)+parseFloat(a))/100)-i:e*t*((100-a)/100)-i,n.setState(fe(fe({},n.state),{},{price:parseFloat(e).toFixed(2),totalPrice:parseFloat(r).toFixed(2)}))})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.invoiceProduct,a={},i=!1,r=!1;b().isEmpty(t.amount+"")&&(a.amount=!0,i=!0),b().isEmpty(t.dateLastInvoice+"")&&(a.dateLastInvoice=!0,i=!0),b().isEmpty(t.description+"")&&(a.description=!0,i=!0);var o=n.state.product,c=!1;n.props.products.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.code===o.code&&(c=!0)&&e.active})),c&&(r="Productcode moet uniek zijn.",a.code=!0,i=!0),b().isEmpty(o.code+"")&&(a.code=!0,i=!0);var l=!1;n.props.products.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.name===o.name&&(l=!0)&&e.active})),l&&(r="Productnaam moet uniek zijn.",a.name=!0,i=!0),c&&l&&(r="Productcode en productnaam moeten uniek zijn."),b().isEmpty(o.name+"")&&(a.name=!0,i=!0),b().isEmpty(o.administrationId+"")&&(a.administrationId=!0,i=!0),b().isEmpty(o.price+"")&&(a.price=!0,i=!0),n.setState(fe(fe({},n.state),{},{errors:a,errorMessage:r})),!i&&v.A.newProductAndInvoiceProduct(t,o).then((function(e){n.props.fetchInvoiceDetails(t.invoiceId),n.props.toggleShowNewProduct()}))})),n.state={vatPercentages:[{id:"0",name:"0"},{id:"9",name:"9"},{id:"21",name:"21"}],errorMessage:!1,price:"0",totalPrice:"0",invoiceProduct:{invoiceId:n.props.invoiceDetails.id,description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:g()().format("YYYY-MM-DD")},product:{code:"",name:"",durationId:"none",administrationId:n.props.invoiceDetails.order.administrationId,invoiceFrequencyId:"once",vatPercentage:"",price:"",isOneTime:!1,ledgerId:""},errors:{amount:!1,dateLastInvoice:!1,description:!1,code:!1,name:!1,price:!1}},n.handleReactSelectChange=n.handleReactSelectChange.bind(n),n.handleInputChangeDate=n.handleInputChangeDate.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"handleReactSelectChange",value:function(e,t){this.setState(fe(fe({},this.state),{},{product:fe(fe({},this.state.product),{},(0,m.A)({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(fe(fe({},this.state),{},{invoiceProduct:fe(fe({},this.state.invoiceProduct),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.description,n=e.amount,a=e.amountReduction,i=e.percentageReduction,r=e.dateLastInvoice,o=this.state.product,c=o.code,s=o.name,u=o.vatPercentage,m=o.price,d=o.ledgerId;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(K.A,{className:"panel-grey"},l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Product"))),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Productcode",name:"code",value:c,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.code}),l.createElement(y.A,{label:"Naam",name:"name",value:s,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.name})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:m,onChangeAction:this.handleInputChangeProductPrice,required:"required",error:this.state.errors.price}),l.createElement(pe.A,{label:"BTW percentage",name:"vatPercentage",options:this.state.vatPercentages,value:u,onChangeAction:this.handleInputChangeProductVat,placeholder:"Geen"})),1==this.props.invoiceDetails.order.administration.usesTwinfield&&1==this.props.invoiceDetails.order.administration.twinfieldIsValid&&l.createElement("div",{className:"row"},l.createElement(he.A,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:d,onChangeAction:this.handleReactSelectChange})),l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-part panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Notaregel"))),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Omschrijving",id:"description",name:"description",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),l.createElement(y.A,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:i,onChangeAction:this.handleInputChange}),l.createElement(y.A,{label:"Bedrag",name:"price",value:"â‚¬ "+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),l.createElement(y.A,{label:"Totaalbedrag",name:"totalPrice",value:"â‚¬ "+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Begin datum",name:"dateLastInvoice",value:r,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),this.state.errorMessage&&l.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(ae.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProduct}),l.createElement(ae.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(l.Component);const Ae=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails,administrationId:e.administrationDetails.id,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,ledgers:e.systemData.ledgers}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(be);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,De()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}var Ne=function(e){function t(e){var n;return(0,a.A)(this,t),n=we(this,t,[e]),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(Pe(Pe({},n.state),{},{invoiceProduct:Pe(Pe({},n.state.invoiceProduct),{},(0,m.A)({},i,a))}),n.updatePrice)})),(0,m.A)(n,"handleInputChangeVariablePrice",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(Pe(Pe({},n.state),{},{price:a,invoiceProduct:Pe(Pe({},n.state.invoiceProduct),{},(0,m.A)({},i,a))}),n.updatePrice)})),(0,m.A)(n,"updatePrice",(function(){var e=b().isFloat(n.state.price+"")?n.state.price:0,t=b().isFloat(n.state.invoiceProduct.amount+"")?n.state.invoiceProduct.amount:0,a=b().isFloat(n.state.invoiceProduct.percentageReduction+"")?n.state.invoiceProduct.percentageReduction:0,i=b().isFloat(n.state.invoiceProduct.amountReduction+"")?n.state.invoiceProduct.amountReduction:0,r=0;r=e<0?e*t*((parseFloat(100)+parseFloat(a))/100)-i:e*t*((100-a)/100)-i,n.setState(Pe(Pe({},n.state),{},{totalPrice:r}))})),(0,m.A)(n,"handleChangeProduct",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name,r="",o=0,c="";if(a){var l=n.props.products.filter((function(e){return e.id==a}));o=l[0].priceInclVat,c=l[0].invoiceText,r=l[0].hasVariablePrice}n.setState(Pe(Pe({},n.state),{},{price:o,productHasVariablePrice:"variable"===r,invoiceProduct:Pe(Pe({},n.state.invoiceProduct),{},(0,m.A)({description:c},i,a))}),n.updatePrice)})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.invoiceProduct,a={},i=!1;b().isEmpty(t.productId+"")&&(a.productId=!0,i=!0),b().isEmpty(t.amount+"")&&(a.amount=!0,i=!0),b().isEmpty(t.dateLastInvoice+"")&&(a.dateLastInvoice=!0,i=!0),b().isEmpty(t.description+"")&&(a.description=!0,i=!0),n.setState(Pe(Pe({},n.state),{},{errors:a})),!i&&v.A.newInvoiceProduct(t).then((function(e){n.props.fetchInvoiceDetails(t.invoiceId),n.props.toggleShowNew()}))})),n.state={price:"0",totalPrice:"0",productHasVariablePrice:!1,invoiceProduct:{invoiceId:n.props.invoiceDetails.id,productId:"",description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:g()().format("YYYY-MM-DD"),variablePrice:0},errors:{productId:!1,amount:!1,dateLastInvoice:!1,description:!1}},n.handleInputChangeDate=n.handleInputChangeDate.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"handleInputChangeDate",value:function(e,t){this.setState(Pe(Pe({},this.state),{},{invoiceProduct:Pe(Pe({},this.state.invoiceProduct),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.productId,n=e.description,a=e.amount,i=e.amountReduction,r=e.percentageReduction,o=e.dateLastInvoice;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(K.A,{className:"panel-grey"},l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Order nummer",name:"orderId",value:this.props.invoiceDetails.number,readOnly:!0}),l.createElement(pe.A,{label:"Product",id:"productId",name:"productId",options:this.props.products,value:t,onChangeAction:this.handleChangeProduct,required:"required",error:this.state.errors.productId})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Omschrijving",id:"description",name:"description",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),l.createElement(y.A,{label:"Aantal",type:"number",id:"amount",name:"amount",value:a,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:r,onChangeAction:this.handleInputChange}),this.state.productHasVariablePrice?l.createElement(y.A,{label:"Prijs ex. BTW",type:"number",name:"variablePrice",value:this.state.price,onChangeAction:this.handleInputChangeVariablePrice}):l.createElement(y.A,{label:"Prijs excl. BTW",name:"price",value:"â‚¬ "+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:i,onChangeAction:this.handleInputChange}),l.createElement(y.A,{label:"Totaalbedrag",name:"totalPrice",value:"â‚¬ "+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Begin datum",name:"dateLastInvoice",value:o,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(ae.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),l.createElement(ae.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(l.Component);const Ie=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails,products:e.systemData.products}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(Ne);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,ke()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}var je=function(e){function t(e){var n;return(0,a.A)(this,t),n=Se(this,t,[e]),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(Ce(Ce({},n.state),{},{invoiceProduct:Ce(Ce({},n.state.invoiceProduct),{},(0,m.A)({},i,a))}),n.updatePrice)})),(0,m.A)(n,"handleInputChangeProduct",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(Ce(Ce({},n.state),{},{product:Ce(Ce({},n.state.product),{},(0,m.A)({},i,a))}))})),(0,m.A)(n,"handleInputChangeProductPrice",(function(e){var t,a=e.target,i="checkbox"===a.type?a.checked:a.value,r=a.name;t=n.state.vatPercentage&&"6"==n.state.vatPercentage.id?1.06*i:n.state.vatPercentage&&"9"==n.state.vatPercentage.id?1.09*i:n.state.vatPercentage&&"21"==n.state.vatPercentage.id?1.21*i:i,n.setState(Ce(Ce({},n.state),{},{price:t,product:Ce(Ce({},n.state.product),{},(0,m.A)({},r,i))}),n.updatePrice)})),(0,m.A)(n,"handleInputChangeProductVat",(function(e){var t,a=e.target,i="checkbox"===a.type?a.checked:a.value,r=a.name;t="6"==i?1.06*n.state.product.price:"9"==i?1.09*n.state.product.price:"21"==i?1.21*n.state.product.price:n.state.product.price,n.setState(Ce(Ce({},n.state),{},{price:t,product:Ce(Ce({},n.state.product),{},(0,m.A)({},r,i))}),n.updatePrice)})),(0,m.A)(n,"updatePrice",(function(){var e=b().isFloat(n.state.price+"")?n.state.price:0,t=b().isFloat(n.state.invoiceProduct.amount+"")?n.state.invoiceProduct.amount:0,a=b().isFloat(n.state.invoiceProduct.percentageReduction+"")?n.state.invoiceProduct.percentageReduction:0,i=b().isFloat(n.state.invoiceProduct.amountReduction+"")?n.state.invoiceProduct.amountReduction:0,r=0;r=e<0?e*t*((parseFloat(100)+parseFloat(a))/100)-i:e*t*((100-a)/100)-i,n.setState(Ce(Ce({},n.state),{},{price:parseFloat(e).toFixed(2),totalPrice:parseFloat(r).toFixed(2)}))})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.invoiceProduct,a={},i=!1;b().isEmpty(t.amount+"")&&(a.amount=!0,i=!0),b().isEmpty(t.dateLastInvoice+"")&&(a.dateLastInvoice=!0,i=!0),b().isEmpty(t.description+"")&&(a.description=!0,i=!0);var r=n.state.product;b().isEmpty(r.administrationId+"")&&(a.administrationId=!0,i=!0),b().isEmpty(r.price+"")&&(a.price=!0,i=!0),n.setState(Ce(Ce({},n.state),{},{errors:a,errorMessage:!1})),!i&&v.A.newProductAndInvoiceProduct(t,r).then((function(e){n.props.fetchInvoiceDetails(t.invoiceId),n.props.toggleShowNewProductOneTime()}))})),n.state={vatPercentages:[{id:"0",name:"0"},{id:"9",name:"9"},{id:"21",name:"21"}],errorMessage:!1,price:"0",totalPrice:"0",invoiceProduct:{invoiceId:n.props.invoiceDetails.id,description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:g()().format("YYYY-MM-DD")},product:{code:"EMP",name:"Eenmalig product",durationId:"none",administrationId:n.props.invoiceDetails.order.administrationId,invoiceFrequencyId:"once",vatPercentage:"",price:"",isOneTime:!0,ledgerId:""},errors:{amount:!1,dateLastInvoice:!1,description:!1,price:!1}},n.handleReactSelectChange=n.handleReactSelectChange.bind(n),n.handleInputChangeDate=n.handleInputChangeDate.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"handleReactSelectChange",value:function(e,t){this.setState(Ce(Ce({},this.state),{},{product:Ce(Ce({},this.state.product),{},(0,m.A)({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Ce(Ce({},this.state),{},{invoiceProduct:Ce(Ce({},this.state.invoiceProduct),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.description,n=e.amount,a=e.amountReduction,i=e.percentageReduction,r=e.dateLastInvoice,o=this.state.product,c=o.vatPercentage,s=o.price,u=o.ledgerId;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(K.A,{className:"panel-grey"},l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Product"))),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:s,onChangeAction:this.handleInputChangeProductPrice,required:"required",error:this.state.errors.price}),l.createElement(pe.A,{label:"BTW percentage",name:"vatPercentage",options:this.state.vatPercentages,value:c,onChangeAction:this.handleInputChangeProductVat,placeholder:"Geen"})),1==this.props.invoiceDetails.order.administration.usesTwinfield&&1==this.props.invoiceDetails.order.administration.twinfieldIsValid&&l.createElement("div",{className:"row"},l.createElement(he.A,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:u,onChangeAction:this.handleReactSelectChange})),l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-part panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Notaregel"))),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Omschrijving",id:"description",name:"description",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),l.createElement(y.A,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:i,onChangeAction:this.handleInputChange}),l.createElement(y.A,{label:"Bedrag",name:"price",value:"â‚¬ "+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),l.createElement(y.A,{label:"Totaalbedrag",name:"totalPrice",value:"â‚¬ "+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Begin datum",name:"dateLastInvoice",value:r,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),this.state.errorMessage&&l.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(ae.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProductOneTime}),l.createElement(ae.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(l.Component);const Re=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails,administrationId:e.administrationDetails.id,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,ledgers:e.systemData.ledgers}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(je);function Te(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Le()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}var Me=function(e){function t(e){var n;return(0,a.A)(this,t),n=Te(this,t,[e]),(0,m.A)(n,"toggleShowNew",(function(){n.setState({showNew:!n.state.showNew})})),(0,m.A)(n,"toggleShowNewProduct",(function(){n.setState({showNewProduct:!n.state.showNewProduct})})),(0,m.A)(n,"toggleShowNewProductOneTime",(function(){n.setState({showNewProductOneTime:!n.state.showNewProductOneTime})})),n.state={showNew:!1,showNewProduct:!1,showNewProductOneTime:!1},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(K.A,null,l.createElement(ee.A,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-xs-10"},l.createElement("span",{className:"h5 text-bold"},"Notaregels")))),l.createElement(U.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(de,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&l.createElement(Ie,{toggleShowNew:this.toggleShowNew}),this.state.showNewProduct&&l.createElement(Ae,{toggleShowNewProduct:this.toggleShowNewProduct}),this.state.showNewProductOneTime&&l.createElement(Re,{toggleShowNewProductOneTime:this.toggleShowNewProductOneTime}))))}}])}(l.Component);const xe=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions,invoice:e.invoiceDetails}}))(Me);var Be=n(87722),Fe=n(88505),Ve=n(87696);g().locale("nl");const qe=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.payment,n=t.datePaid,a=t.amount,i=t.paymentReference,r=t.createdAt;return l.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},l.createElement("div",{onClick:e.openEdit},l.createElement("div",{className:"col-sm-3"},n?g()(n).format("L"):""),l.createElement("div",{className:"col-sm-2"},a?"â‚¬ "+a.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"â‚¬ 0,00"),l.createElement("div",{className:"col-sm-3"},i||""),l.createElement("div",{className:"col-sm-3"},r?g()(r).format("L"):"")),l.createElement("div",{className:"col-sm-1"},!e.invoiceInTwinfield&&!e.invoicePaidInTwinfield&&e.showActionButtons&&e.permissions.manageFinancial?l.createElement("a",{role:"button",onClick:e.openEdit},l.createElement(Be.Ay,{className:"mybtn-success",size:14,icon:Fe.w})):"","Â ",!e.invoiceInTwinfield&&!e.invoicePaidInTwinfield&&e.showActionButtons&&e.permissions.manageFinancial?l.createElement("a",{role:"button",onClick:e.toggleDelete},l.createElement(Be.Ay,{className:"mybtn-danger",size:14,icon:Ve.d})):""))}));g().locale("nl");const Ye=function(e){var t=e.payment,n=t.amount,a=t.datePaid,i=t.paymentReference;return l.createElement("div",null,l.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},l.createElement(K.A,{className:"panel-grey"},l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Bedrag",type:"number",id:"amount",name:"amount",value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount}),l.createElement(A.A,{label:"Datum betaald",name:"datePaid",value:a,onChangeAction:e.handleInputChangeDate,required:"required",error:e.errors.datePaid})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Betalingskenmerk",name:"paymentReference",value:i,onChangeAction:e.handleInputChange})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(ae.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),l.createElement(ae.A,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))},ze=(0,s.Ng)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))((function(e){return l.createElement(h.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){v.A.deletePayment(e.id).then((function(t){e.fetchInvoiceDetails(e.invoiceId),e.closeDeleteItemModal()}))},title:"Verwijderen"},l.createElement("p",null,"Verwijder betaling?"))}));function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,He()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(He=function(){return!!e})()}var Ke=function(e){function t(e){var n;return(0,a.A)(this,t),n=Ge(this,t,[e]),(0,m.A)(n,"toggleDelete",(function(){n.setState({showDelete:!n.state.showDelete})})),(0,m.A)(n,"onLineEnter",(function(){n.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,m.A)(n,"onLineLeave",(function(){n.setState({showActionButtons:!1,highlightLine:""})})),(0,m.A)(n,"openEdit",(function(){n.setState({showEdit:!0})})),(0,m.A)(n,"closeEdit",(function(){n.setState({showEdit:!1})})),(0,m.A)(n,"cancelEdit",(function(){n.setState(_e(_e({},n.state),{},{payment:_e({},n.props.payment)})),n.closeEdit()})),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(_e(_e({},n.state),{},{payment:_e(_e({},n.state.payment),{},(0,m.A)({},i,a))}))})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t={},a=!1,i=n.state.payment;b().isEmpty(i.amount+"")&&(t.amount=!0,a=!0),b().isEmpty(i.datePaid+"")&&(t.datePaid=!0,a=!0),n.setState(_e(_e({},n.state),{},{errors:t})),!a&&v.A.updatePayment(i).then((function(e){n.props.fetchInvoiceDetails(n.state.payment.invoiceId),n.closeEdit()}))})),n.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,payment:_e({},e.payment),errors:{amount:!1,datePaid:!1}},n.handleInputChangeDate=n.handleInputChangeDate.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentWillReceiveProps",value:function(e){(0,G.isEqual)(this.state.payment,e.payment)||this.setState(_e(_e({},this.state),{},{payment:_e({},e.payment)}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(_e(_e({},this.state),{},{payment:_e(_e({},this.state.payment),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){return l.createElement("div",null,l.createElement(qe,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,openEdit:this.openEdit,toggleDelete:this.toggleDelete,payment:this.state.payment,invoiceInTwinfield:this.props.invoiceInTwinfield,invoicePaidInTwinfield:this.props.invoicePaidInTwinfield}),!this.props.invoiceInTwinfield&&!this.props.invoicePaidInTwinfield&&this.state.showEdit&&this.props.permissions.manageFinancial&&l.createElement(Ye,{errors:this.state.errors,payment:this.state.payment,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit}),!this.props.invoiceInTwinfield&&!this.props.invoicePaidInTwinfield&&this.state.showDelete&&this.props.permissions.manageFinancial&&l.createElement(ze,{closeDeleteItemModal:this.toggleDelete,id:this.state.payment.id,invoiceId:this.state.payment.invoiceId}))}}])}(l.Component);const Ue=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions,invoiceInTwinfield:e.invoiceDetails.invoiceInTwinfield,invoicePaidInTwinfield:e.invoiceDetails.invoicePaidInTwinfield}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(Ke),$e=(0,s.Ng)((function(e){return{payments:e.invoiceDetails.payments}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-3"},"Datum betaald"),l.createElement("div",{className:"col-sm-2"},"Bedrag"),l.createElement("div",{className:"col-sm-3"},"Betalingskenmerk"),l.createElement("div",{className:"col-sm-3"},"Datum aangemaakt"),l.createElement("div",{className:"col-sm-1"})),e.payments.length>0?e.payments.map((function(e){return l.createElement(Ue,{key:e.id,payment:e})})):l.createElement("div",null,"Geen betalingen bekend."))}));function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Ze()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ze=function(){return!!e})()}var et=function(e){function t(e){var n;return(0,a.A)(this,t),n=Xe(this,t,[e]),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(Qe(Qe({},n.state),{},{payment:Qe(Qe({},n.state.payment),{},(0,m.A)({},i,a))}))})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.payment,a={},i=!1;b().isEmpty(t.amount+"")&&(a.amount=!0,i=!0),b().isEmpty(t.datePaid+"")&&(a.datePaid=!0,i=!0),n.setState(Qe(Qe({},n.state),{},{errors:a})),!i&&v.A.newPayment(t).then((function(e){n.props.fetchInvoiceDetails(t.invoiceId),n.props.toggleShowNew()}))})),n.state={payment:{invoiceId:n.props.invoiceDetails.id,amount:"",datePaid:g()(),paymentReference:null},errors:{amount:!1,datePaid:!1}},n.handleInputChangeDate=n.handleInputChangeDate.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"handleInputChangeDate",value:function(e,t){this.setState(Qe(Qe({},this.state),{},{payment:Qe(Qe({},this.state.payment),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){var e=this.state.payment,t=e.amount,n=e.datePaid,a=e.paymentReference;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(K.A,{className:"panel-grey"},l.createElement(U.A,null,l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Bedrag",type:"number",id:"amount",name:"amount",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount}),l.createElement(A.A,{label:"Datum betaald",name:"datePaid",value:n,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.datePaid})),l.createElement("div",{className:"row"},l.createElement(y.A,{label:"Betalingskenmerk",name:"paymentReference",value:a,onChangeAction:this.handleInputChange})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(ae.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),l.createElement(ae.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(l.Component);const tt=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(et);var nt=n(23384);function at(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,it()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function it(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(it=function(){return!!e})()}var rt=function(e){function t(e){var n;return(0,a.A)(this,t),n=at(this,t,[e]),(0,m.A)(n,"toggleShowNew",(function(){n.setState({showNew:!n.state.showNew})})),n.state={showNew:!1},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(K.A,null,l.createElement(ee.A,null,l.createElement("span",{className:"h5 text-bold"},"Betalingen"),!this.props.invoiceInTwinfield&&!this.props.invoicePaidInTwinfield&&this.props.permissions.manageFinancial&&l.createElement("a",{role:"button",className:"pull-right",onClick:this.toggleShowNew},l.createElement(Be.Ay,{size:14,icon:nt.t}))),l.createElement(U.A,null,l.createElement("div",{className:"col-md-12"},l.createElement($e,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&l.createElement(tt,{toggleShowNew:this.toggleShowNew}))))}}])}(l.Component);const ot=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions,invoiceInTwinfield:e.invoiceDetails.invoiceInTwinfield,invoicePaidInTwinfield:e.invoiceDetails.invoicePaidInTwinfield}}))(rt);g().locale("nl");const ct=function(e){var t=e.molliePayment,n=t.mollieId,a=(t.createdAt,t.datePaid),i=t.dateActivated,r=t.iban,o=t.ibanName;return l.createElement("div",{className:"row border"},l.createElement("div",null,l.createElement("div",{className:"col-sm-2"},n),l.createElement("div",{className:"col-sm-2"},i?g()(i).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-2"},a?g()(a).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-3"},r),l.createElement("div",{className:"col-sm-3"},o)))};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,mt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}const dt=function(e){function t(e){var n;return(0,a.A)(this,t),(n=ut(this,t,[e])).state={molliePayment:st({},e.molliePayment)},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(ct,{molliePayment:this.state.molliePayment}))}}])}(l.Component),pt=(0,s.Ng)((function(e){return{molliePayments:e.invoiceDetails.molliePayments}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-2"},"Transactie referentie"),l.createElement("div",{className:"col-sm-2"},"Aanvraag gedaan op"),l.createElement("div",{className:"col-sm-2"},"Betaald op"),l.createElement("div",{className:"col-sm-3"},"Iban"),l.createElement("div",{className:"col-sm-3"},"Rekeninghouder")),e.molliePayments.length>0?e.molliePayments.map((function(e){return l.createElement(dt,{key:e.id,molliePayment:e})})):l.createElement("div",null,"Geen online betalingstransacties bekend."))}));function ht(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,vt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vt=function(){return!!e})()}const ft=function(e){function t(){return(0,a.A)(this,t),ht(this,t,arguments)}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(K.A,null,l.createElement(ee.A,null,l.createElement("span",{className:"h5 text-bold"},"Online betalingtransacties")),l.createElement(U.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(pt,null))))}}])}(l.Component);g().locale("nl");const gt=function(e){var t=e.twinfieldMessage,n=t.createdAt,a=t.messageText,i=t.isError?"alert-warning":"";return l.createElement("div",{className:"row border"},l.createElement("div",null,l.createElement("div",{className:"col-sm-2 ".concat(i)},n?g()(n).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-10 ".concat(i)},a)))};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,yt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yt=function(){return!!e})()}const Pt=function(e){function t(e){var n;return(0,a.A)(this,t),(n=At(this,t,[e])).state={twinfieldMessage:bt({},e.twinfieldMessage)},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(gt,{twinfieldMessage:this.state.twinfieldMessage}))}}])}(l.Component),wt=(0,s.Ng)((function(e){return{twinfieldMessages:e.invoiceDetails.twinfieldMessagesInvoice}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-2"},"Datum"),l.createElement("div",{className:"col-sm-10"},"Melding")),e.twinfieldMessages.length>0?e.twinfieldMessages.map((function(e){return l.createElement(Pt,{key:e.id,twinfieldMessage:e})})):l.createElement("div",null,"Geen Twinfield meldingen."))}));function Dt(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Nt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nt=function(){return!!e})()}const It=function(e){function t(){return(0,a.A)(this,t),Dt(this,t,arguments)}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(K.A,null,l.createElement(ee.A,null,l.createElement("span",{className:"h5 text-bold"},"Twinfield log nota's")),l.createElement(U.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(wt,null))))}}])}(l.Component);g().locale("nl");const Ot=function(e){var t=e.twinfieldMessage,n=t.createdAt,a=t.messageText,i=t.isError?"alert-warning":"";return l.createElement("div",{className:"row border"},l.createElement("div",null,l.createElement("div",{className:"col-sm-2 ".concat(i)},n?g()(n).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-10 ".concat(i)},a)))};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,jt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jt=function(){return!!e})()}const Rt=function(e){function t(e){var n;return(0,a.A)(this,t),(n=kt(this,t,[e])).state={twinfieldMessage:St({},e.twinfieldMessage)},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(Ot,{twinfieldMessage:this.state.twinfieldMessage}))}}])}(l.Component),Tt=(0,s.Ng)((function(e){return{twinfieldMessages:e.invoiceDetails.twinfieldMessagesPayment}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-2"},"Datum"),l.createElement("div",{className:"col-sm-10"},"Melding")),e.twinfieldMessages.length>0?e.twinfieldMessages.map((function(e){return l.createElement(Rt,{key:e.id,twinfieldMessage:e})})):l.createElement("div",null,"Geen Twinfield meldingen."))}));function Lt(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Mt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mt=function(){return!!e})()}const xt=function(e){function t(){return(0,a.A)(this,t),Lt(this,t,arguments)}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){return l.createElement(K.A,null,l.createElement(ee.A,null,l.createElement("span",{className:"h5 text-bold"},"Twinfield log betalingen")),l.createElement(U.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(Tt,null))))}}])}(l.Component);function Bt(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Ft()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ft=function(){return!!e})()}g().locale("nl");var Vt=function(e){function t(e){return(0,a.A)(this,t),Bt(this,t,[e])}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van nota.":this.props.isLoading?e="Gegevens aan het laden.":(0,G.isEmpty)(this.props.invoiceDetails)?e="Geen nota gevonden!":t=!1,t?l.createElement("div",null,e):l.createElement("div",null,l.createElement(X,null),l.createElement(xe,null),this.props.invoiceDetails.usesTwinfield?l.createElement(It,null):null,l.createElement(ot,null),this.props.invoiceDetails.usesMollie?l.createElement(ft,null):null,this.props.invoiceDetails.usesTwinfield?l.createElement(xt,null):null,l.createElement(te,null))}}])}(l.Component);const qt=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(Vt);function Yt(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,zt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zt=function(){return!!e})()}var Wt=function(e){function t(e){var n;return(0,a.A)(this,t),n=Yt(this,t,[e]),(0,m.A)(n,"openItem",(function(e){d.RL.push("/taak/".concat(e))})),n.state={relatedTasks:""},n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this,t=this.props.relatedTasks;return l.createElement("div",null,""==t&&l.createElement("div",null,"Geen taken of notities gevonden."),""!=t&&l.createElement("table",{className:"table harmonica-table"},l.createElement("tbody",null,t.map((function(t,n){return l.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:n},l.createElement("td",{className:"col-xs-12 clickable"},g()(t.createdAt).format("L")," - ",t.noteSummary))})))))}}])}(l.Component);const _t=(0,s.Ng)((function(e){return{relatedTasks:e.invoiceDetails.relatedTasks}}))(Wt),Gt=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions}}),null)((function(e){var t=e.toggleShowList,n=e.showTasksList,a=e.newTask,i=e.taskCount,r=e.permissions;return l.createElement(K.A,{className:"harmonica-button"},l.createElement(U.A,null,l.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},l.createElement("span",null,"TAKEN/NOTITIES ",l.createElement("span",{className:"badge"},i))),l.createElement("div",{className:"col-sm-2"},r.manageTask&&l.createElement("div",{className:"pull-right"},l.createElement(Be.Ay,{className:"harmonica-button",size:14,icon:nt.t,"data-toggle":"dropdown",role:"button"}),l.createElement("ul",{className:"dropdown-menu"},l.createElement("li",null,l.createElement("a",{className:"btn",onClick:function(){return a("open")}},"Maak taak")),l.createElement("li",null,l.createElement("a",{className:"btn",onClick:function(){return a("afgehandeld")}},"Maak notitie"))))),l.createElement("div",{className:"col-sm-12"},n&&l.createElement(_t,null))))}));var Ht=n(9293);const Kt=(0,s.Ng)((function(e){return{emails:e.invoiceDetails.relatedEmails}}))((function(e){var t=e.emails,n=(0,l.useContext)(Ht.t).openEmailDetailsModal;return l.createElement("div",null,""===t&&l.createElement("div",null,"Geen e-mails gevonden."),""!==t&&l.createElement("table",{className:"table harmonica-table"},l.createElement("tbody",null,t.map((function(e,t){return l.createElement("tr",{key:t},l.createElement("td",{className:"col-xs-4 clickable",onClick:function(){return n(e.id)}},g()(e.date_sent).format("L")),l.createElement("td",{className:"col-xs-8 clickable",onClick:function(){return n(e.id)}},e.subject))})))))})),Ut=function(e){var t=e.toggleShowList,n=e.showEmailsList,a=e.newEmail,i=e.emailCount;return l.createElement(K.A,{className:"harmonica-button"},l.createElement(U.A,null,l.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},l.createElement("span",{onClick:t,className:""},"E-MAILS ",l.createElement("span",{className:"badge"},i))),l.createElement("div",{className:"col-sm-2"},l.createElement("a",{role:"button",className:"pull-right",onClick:a},l.createElement(Be.Ay,{className:"harmonica-button",size:14,icon:nt.t}))),l.createElement("div",{className:"col-sm-12"},n&&l.createElement(Kt,null))))};function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,Xt()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function Xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xt=function(){return!!e})()}var Zt=function(e){function t(e){var n;return(0,a.A)(this,t),n=Qt(this,t,[e]),(0,m.A)(n,"newTask",(function(e){n.props.invoiceDetails&&d.RL.push("/taak/nieuw/".concat(e,"/nota/").concat(n.props.invoiceDetails.id,"/order/").concat(n.props.invoiceDetails.orderId,"/contact/").concat(n.props.invoiceDetails.contactId))})),(0,m.A)(n,"newEmail",(function(){d.RL.push("/email/nieuw")})),n.state={toggleShowList:{tasks:!1,emails:!1}},n.toggleShowList=n.toggleShowList.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.setState({toggleShowList:{tasks:!1,emails:!1}})}},{key:"toggleShowList",value:function(e){this.setState(Jt(Jt({},this.state),{},{toggleShowList:Jt(Jt({},this.state.toggleShowList),{},(0,m.A)({},e,!this.state.toggleShowList[e]))}))}},{key:"render",value:function(){var e=this;return l.createElement("div",{className:"margin-10-top"},l.createElement(Gt,{toggleShowList:function(){return e.toggleShowList("tasks")},showTasksList:this.state.toggleShowList.tasks,taskCount:this.props.invoiceDetails.taskCount,newTask:this.newTask}),l.createElement(Ut,{toggleShowList:function(){return e.toggleShowList("emails")},showEmailsList:this.state.toggleShowList.emails,newEmail:this.newEmail,emailCount:this.props.invoiceDetails.emailCount}))}}])}(l.Component);const en=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails,permissions:e.meDetails.permissions}}),null)(Zt);function tn(e,t,n){return t=(0,o.A)(t),(0,r.A)(e,nn()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function nn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nn=function(){return!!e})()}var an=function(e){function t(e){return(0,a.A)(this,t),tn(this,t,[e])}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){this.props.fetchInvoiceDetails(this.props.params.id)}},{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(K.A,null,l.createElement(U.A,{className:"panel-small"},l.createElement(_,null)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(qt,null))),l.createElement(K.A,{className:"col-md-3 harmonica"},l.createElement(U.A,null,l.createElement(en,null))))}}])}(l.Component);const rn=(0,s.Ng)((function(e){return{invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.mY)(t))}}}))(an)}}]);