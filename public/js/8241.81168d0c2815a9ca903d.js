"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[8241],{48241:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(29439),l=n(67294),r=n(14309),c=n(98688),m=n(55451),o=n(96498),i=n(75286),u=n(52822),s=n(24480),d=n(30381),E=n.n(d);function f(e){var t=e.mailgunLog,n=e.hasError,r=(0,l.useState)(""),c=(0,a.Z)(r,2),m=c[0],o=c[1];return l.createElement("tr",{className:m,onMouseEnter:function(){o("highlight-row")},onMouseLeave:function(){o("")}},l.createElement("td",null,E()(t.eventDate).format("DD-MM-YYYY HH:mm")),l.createElement("td",null,t.domain.domain),l.createElement("td",null,n?l.createElement("span",{className:"text-danger"},t.event):l.createElement("span",null,t.event)),l.createElement("td",null,t.recipient),l.createElement("td",null,t.subject))}var v=n(69265),g=n(51910);function h(){var e=["rejected","failed","complained","unsubscribed"],t=(0,l.useState)(!0),n=(0,a.Z)(t,2),d=n[0],E=n[1],h=(0,l.useState)([]),p=(0,a.Z)(h,2),Z=p[0],N=p[1],b=(0,l.useState)(0),k=(0,a.Z)(b,2),w=k[0],S=k[1],y=(0,l.useState)(0),j=(0,a.Z)(y,2),D=j[0],C=j[1],M=(0,l.useState)(""),P=(0,a.Z)(M,2),Y=P[0],A=P[1],L=(0,l.useState)("all-error"),x=(0,a.Z)(L,2),G=x[0],H=x[1],R=(0,l.useState)([]),I=(0,a.Z)(R,2),O=I[0],T=I[1],q=(0,l.useState)(""),z=(0,a.Z)(q,2),B=z[0],F=z[1];(0,l.useEffect)((function(){J(),K()}),[]),(0,l.useEffect)((function(){J()}),[D,B,G]);var J=function(){return E(!0),v.Z.get("jory/mailgun-event",{params:{jory:U(),meta:["total"]}}).then((function(e){N(e.data.data),S(e.data.meta.total),E(!1)})).catch((function(){A("Er is iets misgegaan met ophalen van de mailgun logs."),E(!1)}))},K=function(){return v.Z.get("jory/mailgun-domain",{params:{jory:{fld:["id","domain"],srt:["domain"]}}}).then((function(e){T(e.data.data)}))},Q=function(){return Y||(d?"Gegevens aan het laden.":0===Z.length?"Geen mailgun logs gevonden!":"")},U=function(){return{fld:["id","event","recipient","subject","eventDate"],rlt:{domain:{fld:["domain"]}},srt:["-eventDate"],flt:V(),lmt:100,ofs:100*D}},V=function(){var t={and:[]};return B&&t.and.push({f:"mailgunDomainId",d:B}),G&&("all-error"===G?t.and.push({f:"event",o:"in",d:e}):t.and.push({f:"event",d:G})),t};return l.createElement(r.Z,{className:"col-md-12"},l.createElement(c.Z,null,l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(m.Z,{iconName:"refresh",onClickAction:J}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title"},"Mailgun logs")),l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"pull-right"},"Resultaten: ",w)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(o.Z,null,l.createElement(i.Z,null,l.createElement("tr",{className:"thead-title"},l.createElement(u.Z,{title:"Datum",width:"10%"}),l.createElement(u.Z,{title:"Domein",width:"20%"}),l.createElement(u.Z,{title:"Type",width:"10%"}),l.createElement(u.Z,{title:"Aan",width:"30%"}),l.createElement(u.Z,{title:"Onderwerp",width:"30%"}))),l.createElement(s.Z,null,l.createElement("tr",{className:"thead-filter"},l.createElement("th",null),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:B,onChange:function(e){return F(e.target.value)}},l.createElement("option",null),O.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.domain)})))),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:G,onChange:function(e){return H(e.target.value)}},l.createElement("option",null),l.createElement("option",{key:"all-error",value:"all-error"},"- alle fouten -"),["accepted","rejected","delivered","failed","opened","clicked","unsubscribed","complained","stored"].map((function(e){return l.createElement("option",{key:e,value:e},e)})))),l.createElement("th",null),l.createElement("th",null)),Q()?l.createElement("tr",null,l.createElement("td",{colSpan:5},Q())):Z.map((function(t){return l.createElement(f,{key:t.id,mailgunLog:t,hasError:e.includes(t.event)})}))))),l.createElement("div",{className:"col-md-6 col-md-offset-3"},l.createElement(g.Z,{onPageChangeAction:function(e){return C(e.selected)},totalRecords:w,initialPage:0,recordsPerPage:100}))))}}}]);