"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[8241],{17036:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(96540);const n=a.p+"f16a591e26463d103c70d91c927fe80a.png",o=function(e){var t={height:e.height,paddingTop:"10px",paddingBottom:"10px",width:"auto"};return r.createElement("img",{src:n,className:"img-logo",alt:"Logo Eco",style:t})}},98241:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y}),a(60825);var r=a(23029),n=a(92901),o=a(56822),s=a(53954),c=a(85501),l=a(64467),i=a(58168),m=(a(62010),a(96540)),u=a(69733),d=a(84976),p=a(47767),h=a(18743),v=a(68495),f=a(17036),g=a(95093),E=a.n(g),w=a(49887),N=a(61941),A=a(61643);function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var k=function(e){function t(e){var a,n,c,i;return(0,r.A)(this,t),n=this,c=t,i=[e],c=(0,s.A)(c),a=(0,o.A)(n,b()?Reflect.construct(c,i||[],(0,s.A)(n).constructor):c.apply(n,i)),(0,l.A)(a,"handleInputChange",(function(e){var t=e.target,r=t.value,n=t.name;a.setState((0,l.A)({},n,r))})),(0,l.A)(a,"handleSubmit",(function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};v.A.loginUser(t).then((function(e){200==e.status?(localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),localStorage.setItem("last_activity",E()().format()),a.props.authSuccess(),w.A.fetchTwoFactorStatus().then((function(e){e.data.requireTwoFactorAuthentication?e.data.twoFactorActivated?e.data.hasValidToken?a.props.navigate("/"):a.props.navigate("/two-factor/confirm"):a.props.navigate("/two-factor/activate",{state:{password:a.state.password}}):a.props.navigate("/")}))):a.setState({username:"",password:"",errorMessage:e?e.error:"Verkeerde inloggegevens ingevuld!"})}))})),a.state={username:"",password:"",errorMessage:"",version:""},a}return(0,c.A)(t,e),(0,n.A)(t,[{key:"componentDidMount",value:function(){var e,t=this;(e="".concat((0,A.e)(),"/client-version"),(0,N.A)().get(e)).then((function(e){t.setState({version:e.data.version})}))}},{key:"renderAlert",value:function(){if(this.state.errorMessage)return m.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger login-alert"},this.state.errorMessage)}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,r=e.version;return m.createElement("div",{className:"col-md-4 col-sm-8 col-xs-10 login-form"},m.createElement("div",{className:"panel panel-default add"},m.createElement("div",{className:"panel-body"},m.createElement("div",{className:"text-center"},m.createElement(f.A,{height:"150px"}),m.createElement("h4",{className:"text-center"},m.createElement("i",null,"Versie: ",r))),m.createElement("form",{onSubmit:this.handleSubmit},m.createElement("div",{className:"row margin-10-top"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement("div",{className:"form-group"},m.createElement("label",{htmlFor:"username",className:"control-label"},"E-mail:"),m.createElement("input",{type:"text",name:"username",value:t,className:"form-control",placeholder:"E-mail...",onChange:this.handleInputChange})),m.createElement("div",{className:"form-group"},m.createElement("label",{htmlFor:"password",className:"control-label"},"Wachtwoord:"),m.createElement("input",{type:"password",name:"password",value:a,className:"form-control",placeholder:"Wachtwoord ...",onChange:this.handleInputChange}))),this.renderAlert()),m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-10 col-md-offset-1"},m.createElement(d.N_,{to:"/wachtwoord-vergeten",className:"link-underline"},"Wachtwoord vergeten?"),m.createElement("div",{className:"btn-group pull-right"},m.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))))))))}}])}(m.Component);const y=(0,u.Ng)(null,(function(e){return{authSuccess:function(){e((0,h.W)())}}}))((function(e){var t=(0,p.Zp)();return m.createElement(k,(0,i.A)({},e,{navigate:t}))}))}}]);