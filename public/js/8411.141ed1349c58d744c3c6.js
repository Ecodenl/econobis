"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[8411],{29315:(e,t,n)=>{n.d(t,{Ti:()=>o,VB:()=>s,aI:()=>l,cX:()=>a,eM:()=>c,lv:()=>i,n7:()=>r,oI:()=>u});var a=function(e){return{type:"FETCH_TEAM_DETAILS",id:e}},r=function(e,t){return{type:"UPDATE_TEAM",team:e,switchToView:t}},i=function(e){return{type:"NEW_TEAM_USER",teamUser:e}},c=function(e,t){return{type:"DELETE_TEAM_USER",teamId:e,userId:t}},o=function(e){return{type:"NEW_TEAM_CONTACT_GROUP",teamContactGroup:e}},l=function(e,t){return{type:"DELETE_TEAM_CONTACT_GROUP",teamId:e,contactGroupId:t}},s=function(e){return{type:"NEW_TEAM_DOCUMENT_CREATED_FROM",teamDocumentCreatedFrom:e}},u=function(e,t){return{type:"DELETE_TEAM_DOCUMENT_CREATED_FROM",teamId:e,documentCreatedFromId:t}}},69566:(e,t,n)=>{n.d(t,{DD:()=>i,aR:()=>r,j0:()=>a});var a=function(e,t){return{type:"FETCH_PRODUCTS",filters:e,filterType:t}},r=function(){return{type:"CLEAR_PRODUCTS"}},i=function(e){return{type:"DELETE_PRODUCT",id:e}}},98411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>fe}),n(60825);var a=n(23029),r=n(92901),i=n(56822),c=n(53954),o=n(85501),l=n(58168),s=n(96540),u=n(69733),m=n(64467),d=(n(62010),n(47767)),p=n(91858),h=n(63750),v=n(69566);const f=function(e){var t=e.id,n=e.name,a=e.closeDeleteItemModal,r=(0,u.wA)();return s.createElement(h.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:a,confirmAction:function(){r((0,v.DD)(t)),a()},title:"Verwijderen"},"Verwijder product: ",s.createElement("strong",null,n),"?")};function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}var y=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,E()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"showDeleteModal",(function(){n.setState({showDelete:!0})})),(0,m.A)(n,"hideDeleteModal",(function(){n.setState({showDelete:!1}),n.props.navigate("/producten")})),n.state={showDelete:!1},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this;return s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-4"},s.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},s.createElement(p.A,{iconName:"arrowLeft",onClickAction:function(){return e.props.navigate(-1)}}),s.createElement(p.A,{iconName:"trash",onClickAction:this.showDeleteModal}))),s.createElement("div",{className:"col-md-4"},s.createElement("h4",{className:"text-center"},"Product: ",this.props.name)),s.createElement("div",{className:"col-md-4"}),this.state.showDelete&&s.createElement(f,{closeDeleteItemModal:this.hideDeleteModal,name:this.props.name,id:this.props.id}))}}])}(s.Component);const g=(0,u.Ng)((function(e){return{name:e.productDetails.name,id:e.productDetails.id}}),null)((function(e){var t=(0,d.Zp)();return s.createElement(y,(0,l.A)({},e,{navigate:t}))}));var A=n(2543),b=n(29315),w=(n(52675),n(51629),n(67945),n(84185),n(83851),n(81278),n(79432),n(23500),n(2008),n(62062),n(94170),n(2892),n(26099),n(57761)),D=n.n(w),N=n(54814),C=n(55956),I=n(62493),T=n(55849),P=n(14809);function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var S=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,O()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"confirmAction",(function(e){n.props.updateProduct(n.props.product,n.props.switchToView),n.props.closeModal()})),n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return s.createElement(h.A,{modalClassName:"modal-lg",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Product wijzigen",buttonConfirmText:"Opslaan"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-12 margin-10-bottom"},s.createElement("span",null,"Let op. Een wijziging in een product kan grote gevolgen hebben op je lopende facturering. Dus bedenk goed wat je wilt voordat je een wijziging doorvoert."))))}}])}(s.Component);const k=(0,u.Ng)(null,(function(e){return{updateProduct:function(t,n){e(function(e,t){return{type:"UPDATE_PRODUCT",product:e,switchToView:t}}(t,n))}}}))(S);var j=n(31714),V=n(77465);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var H=function(e){function t(e){var n,r,o,l;(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,B()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"handleInputChangeDuration",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name,i=n.state.product.invoiceFrequencyId,c=n.state.invoiceFrequencies;switch(a){case"none":c=[{id:"once",name:"Eenmalig"}],i="once";break;case"month":c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==i&&"yearly"!==i&&"half-year"!==i||(i="monthly");break;case"quarter":c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==i&&"half-year"!==i||(i="quarterly");break;case"half_year":c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===i&&(i="half-year");break;default:c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}n.setState(q(q({},n.state),{},{invoiceFrequencies:c,product:q(q({},n.state.product),{},(0,m.A)((0,m.A)({},r,a),"invoiceFrequencyId",i))}))})),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(q(q({},n.state),{},{product:q(q({},n.state.product),{},(0,m.A)({},r,a))}))})),(0,m.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.product,a={},r=!1,i=!1,c=!1;n.props.products.map((function(e){return e.code==t.code&&(c=!0)})),c&&t.code!==n.state.oldCode&&(r="Productcode moet uniek zijn.",a.code=!0,i=!0),D().isEmpty(t.code+"")&&(a.code=!0,i=!0);var o=!1;n.props.products.map((function(e){return e.name==t.name&&(o=!0)})),o&&t.name!==n.state.oldName&&(r="Productnaam moet uniek zijn.",a.name=!0,i=!0),c&&o&&t.code!==n.state.oldCode&&t.name!==n.state.oldName&&(r="Productcode en productnaam moeten uniek zijn."),D().isEmpty(t.name+"")&&(a.name=!0,i=!0),D().isEmpty(t.administrationId+"")&&(a.administrationId=!0,i=!0),n.setState(q(q({},n.state),{},{errors:a,errorMessage:r})),i||n.toggleShowConfirm()})),(0,m.A)(n,"toggleShowConfirm",(function(){n.setState({showConfirm:!n.state.showConfirm})}));var s=e.productDetails,u=s.id,d=s.code,p=s.name,h=s.invoiceText,v=s.durationId,f=s.invoiceFrequencyId,E=s.paymentTypeId,y=s.administrationId,g=s.ledgerId,A=s.costCenterId,b=s.active;return n.state={invoiceFrequencies:[{id:"once",name:"Eenmalig"}],showConfirm:!1,errorMessage:!1,oldCode:d||"",oldName:p||"",product:{id:u,code:d||"",name:p||"",invoiceText:h||"",durationId:v||"none",invoiceFrequencyId:f||"once",paymentTypeId:E||"",administrationId:y||"",ledgerId:g||"",costCenterId:A||"",active:b},errors:{code:!1,name:!1,administrationId:!1}},n.handleReactSelectChange=n.handleReactSelectChange.bind(n),n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.state.invoiceFrequencies,t=this.state.product.invoiceFrequencyId;switch(this.state.product.durationId){case"none":e=[{id:"once",name:"Eenmalig"}],t="once";break;case"month":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==t&&"yearly"!==t&&"half-year"!==t||(t="monthly");break;case"quarter":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==t&&"half-year"!==t||(t="quarterly");break;case"half_year":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===t&&(t="half-year");break;default:e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}this.setState(q(q({},this.state),{},{invoiceFrequencies:e,product:q(q({},this.state.product),{},{invoiceFrequencyId:t})}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(q(q({},this.state),{},{product:q(q({},this.state.product),{},(0,m.A)({},t,e))}))}},{key:"render",value:function(){var e=this,t=this.state.product,n=t.code,a=t.name,r=t.invoiceText,i=t.durationId,c=t.invoiceFrequencyId,o=t.paymentTypeId,l=t.administrationId,u=t.ledgerId,m=t.costCenterId,d=t.active,p=this.props.ledgers,h=this.props.productDetails.currentPrice;return this.props.usesTwinfield&&h&&(p=this.props.ledgers.filter((function(e){return e.vatCode?e.vatCode.percentage===h.vatPercentage:e.vatCode===h.vatPercentage}))),s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(I.A,null,s.createElement(T.A,null,s.createElement("div",{className:"row"},s.createElement(N.A,{label:"Productcode",name:"code",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.code}),s.createElement(N.A,{label:"Naam",name:"name",value:a,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.name})),s.createElement("div",{className:"row"},s.createElement("div",{className:"form-group col-sm-12"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-3"},s.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),s.createElement("div",{className:"col-sm-8"},s.createElement("textarea",{name:"invoiceText",value:r,onChange:this.handleInputChange,className:"form-control input-sm",maxLength:"1000"}))))),s.createElement("div",{className:"row"},s.createElement(P.A,{label:"Looptijd",id:"durationId",name:"durationId",options:this.props.productDurations,value:i,onChangeAction:this.handleInputChangeDuration,emptyOption:!1}),s.createElement(P.A,{label:"Prijs per",id:"invoiceFrequencyId",name:"invoiceFrequencyId",options:this.state.invoiceFrequencies,value:c,onChangeAction:this.handleInputChange,emptyOption:!1})),s.createElement("div",{className:"row"},s.createElement(P.A,{label:"Betaalwijze",id:"paymentTypeId",name:"paymentTypeId",options:this.props.productPaymentTypes,value:o,onChangeAction:this.handleInputChange}),s.createElement(P.A,{label:"Administratie",id:"administrationId",name:"administrationId",options:this.props.administrations,value:l,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.administrationId})),this.props.usesTwinfield?s.createElement("div",{className:"row"},s.createElement(j.A,{label:"Grootboek",name:"ledgerId",options:p,optionName:"description",value:Number(u),onChangeAction:this.handleReactSelectChange}),s.createElement(j.A,{label:"Kostenplaats",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:Number(m),onChangeAction:this.handleReactSelectChange})):null,s.createElement("div",{className:"row"},s.createElement(V.A,{label:"Actief",name:"active",value:d,onChangeAction:function(t){t.persist(),e.handleInputChange(t)}})),this.state.errorMessage&&s.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage)),s.createElement(T.A,null,s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(C.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),s.createElement(C.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))),this.state.showConfirm&&s.createElement(k,{product:this.state.product,closeModal:this.toggleShowConfirm,switchToView:this.props.switchToView}))}}])}(s.Component);const M=(0,u.Ng)((function(e){return{productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,productDetails:e.productDetails,administrations:e.meDetails.administrations,products:e.systemData.products,ledgers:e.systemData.ledgers,costCenters:e.systemData.costCenters,usesTwinfield:e.systemData.usesTwinfield}}),null)(H);n(89463);var L=n(30483);const R=(0,u.Ng)((function(e){return{productDetails:e.productDetails,usesTwinfield:e.systemData.usesTwinfield}}))((function(e){var t=e.productDetails,n=t.code,a=t.name,r=t.invoiceText,i=t.duration,c=t.invoiceFrequency,o=t.paymentType,l=t.administration,u=t.ledger,m=t.costCenter,d=t.active;return s.createElement("div",{onClick:e.switchToEdit},s.createElement(I.A,null,s.createElement(T.A,null,s.createElement("div",{className:"row"},s.createElement(L.A,{label:"Productcode",value:n}),s.createElement(L.A,{label:"Product",value:a})),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-3"},s.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),s.createElement("div",{className:"col-sm-9",id:"invoiceText"},r)),s.createElement("div",{className:"row"},s.createElement(L.A,{label:"Looptijd",value:i?i.name:""}),s.createElement(L.A,{label:"Prijs per",value:c?c.name:""})),s.createElement("div",{className:"row"},s.createElement(L.A,{label:"Betaalwijze",value:o?o.name:""}),s.createElement(L.A,{label:"Administratie",value:l?l.name:""})),e.usesTwinfield?s.createElement("div",{className:"row"},s.createElement(L.A,{label:"Grootboek",value:u?u.description:""}),s.createElement(L.A,{label:"Kostenplaats",value:m?m.description:""})):null,s.createElement("div",{className:"row"},s.createElement(L.A,{label:"Actief",value:d?"Ja":"Nee"})))))}));function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var _=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,x()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"switchToEdit",(function(){n.setState({showEdit:!0})})),(0,m.A)(n,"switchToView",(function(){n.setState({showEdit:!1,activeDiv:""})})),n.state={showEdit:!1,activeDiv:""},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.meDetails.permissions,n=void 0===t?{}:t;return s.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&n.manageFinancial?s.createElement(M,{switchToView:this.switchToView}):s.createElement(R,{switchToEdit:this.switchToEdit}))}}])}(s.Component);const U=(0,u.Ng)((function(e){return{productDetails:e.productDetails,meDetails:e.meDetails}}))(_);var W=n(95093),G=n.n(W);const z=(0,u.Ng)((function(e){return{currentPrice:e.productDetails.currentPrice,productHasVariablePrice:e.productDetails.hasVariablePrice}}))((function(e){var t=e.price,n=t.id,a=t.dateStart,r=t.priceNumberOfDecimals,i=t.price,c=t.vatPercentage,o=t.priceInclVat;return s.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},s.createElement("div",{className:"col-sm-3"}," ",a?G()(a).format("L"):""),"variable"===e.productHasVariablePrice?s.createElement("div",{className:"col-sm-3"},"Variabel"):s.createElement("div",{className:"col-sm-3"},i?"€ "+i.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:r}):""),s.createElement("div",{className:"col-sm-2"},null!==c?c:"Geen"),"variable"===e.productHasVariablePrice?s.createElement("div",{className:"col-sm-2"},"Variabel"):s.createElement("div",{className:"col-sm-2"},o?"€ "+o.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:r}):""),s.createElement("div",{className:"col-sm-2"},e.currentPrice&&n===e.currentPrice.id?"Ja":""))}));function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}var J=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,K()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"onLineEnter",(function(){n.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,m.A)(n,"onLineLeave",(function(){n.setState({showActionButtons:!1,highlightLine:""})})),n.state={showActionButtons:!1,highlightLine:"",showDelete:!1,price:e.price},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return s.createElement("div",null,s.createElement(z,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,toggleDelete:this.toggleDelete,price:this.state.price}))}}])}(s.Component);const X=(0,u.Ng)((function(e){return{permissions:e.meDetails.permissions}}))(J),Y=(0,u.Ng)((function(e){return{priceHistory:e.productDetails.priceHistory}}))((function(e){return s.createElement("div",null,s.createElement("div",{className:"row border header"},s.createElement("div",{className:"col-sm-3"},"Startdatum"),s.createElement("div",{className:"col-sm-3"},"Prijs excl. BTW"),s.createElement("div",{className:"col-sm-2"},"BTW percentage"),s.createElement("div",{className:"col-sm-2"},"Prijs incl. BTW"),s.createElement("div",{className:"col-sm-2"},"Actief")),e.priceHistory.length>0?e.priceHistory.map((function(e){return s.createElement(X,{key:e.id,price:e})})):s.createElement("div",null,"Geen prijshistorie bekend."))}));n(9868),n(78459);var Z=n(73421);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}var te=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,ee()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState($($({},n.state),{},{priceHistory:$($({},n.state.priceHistory),{},(0,m.A)({},r,a))}),n.updatePrice)})),(0,m.A)(n,"handleInputChangeDate",(function(e,t){n.setState($($({},n.state),{},{priceHistory:$($({},n.state.priceHistory),{},(0,m.A)({},t,e))}))})),(0,m.A)(n,"handleBlurProductPrice",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState($($({},n.state),{},{priceHistory:$($({},n.state.priceHistory),{},(0,m.A)({},r,parseFloat(a).toFixed(n.state.priceHistory.priceNumberOfDecimals)))}))})),(0,m.A)(n,"handleBlurDecimals",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=(t.name,a);r<2&&(r=2),r>6&&(r=6),n.setState($($({},n.state),{},{priceHistory:$($({},n.state.priceHistory),{},{priceNumberOfDecimals:r,price:parseFloat(n.state.priceHistory.price).toFixed(r),priceInclVat:parseFloat(n.state.priceHistory.priceInclVat).toFixed(r)})}),n.updatePrice)})),(0,m.A)(n,"updatePrice",(function(){var e=!!n.state.priceHistory.inputInclVat&&n.state.priceHistory.inputInclVat,t=D().isFloat(n.state.priceHistory.price+"")?n.state.priceHistory.price:0,a=D().isFloat(n.state.priceHistory.priceInclVat+"")?n.state.priceHistory.priceInclVat:0,r=D().isFloat(n.state.priceHistory.vatPercentage+"")?n.state.priceHistory.vatPercentage:0,i=(parseFloat(100)+parseFloat(r))/100;e?(t=a/i,n.setState($($({},n.state),{},{priceHistory:$($({},n.state.priceHistory),{},{price:parseFloat(t).toFixed(n.state.priceHistory.priceNumberOfDecimals)})}))):(a=t*i,n.setState($($({},n.state),{},{priceHistory:$($({},n.state.priceHistory),{},{priceInclVat:parseFloat(a).toFixed(n.state.priceHistory.priceNumberOfDecimals)})})))})),n.state={priceHistory:{productId:e.productId,dateStart:"",inputInclVat:!1,priceNumberOfDecimals:2,price:"",priceInclVat:"",vatPercentage:e.ledger?e.ledger.vatCode&&e.ledger.vatCode.percentage:null,hasVariablePrice:"variable"===e.hasVariablePrice},errors:{dateStart:!1,priceNumberOfDecimals:!1,price:!1,priceInclVat:!1}},n.handleInputChange=n.handleInputChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.priceHistory,n={},a=!1;D().isEmpty(t.dateStart)&&(n.dateStart=!0,a=!0),t.hasVariablePrice||(t.inputInclVat?D().isEmpty(t.priceInclVat)&&(n.priceInclVat=!0,a=!0):D().isEmpty(t.price)&&(n.price=!0,a=!0)),this.setState($($({},this.state),{},{errors:n})),a||(this.props.addProductPriceHistory(t),this.props.toggleShowNew())}},{key:"render",value:function(){var e=this.state.priceHistory,t=e.dateStart,n=e.inputInclVat,a=e.priceNumberOfDecimals,r=e.price,i=e.priceInclVat,c=e.vatPercentage,o=e.hasVariablePrice;return s.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},s.createElement(I.A,{className:"panel-grey"},s.createElement(T.A,null,"none"===this.props.hasVariablePrice&&s.createElement("div",{className:"row"},s.createElement(V.A,{label:"Variabele prijs",name:"hasVariablePrice",value:o,onChangeAction:this.handleInputChange})),s.createElement("div",{className:"row"},s.createElement(N.A,{label:"Productcode",id:"code",name:"code",value:this.props.productCode,readOnly:!0}),s.createElement(N.A,{label:"Product",id:"name",name:"name",value:this.props.productName,readOnly:!0})),s.createElement("div",{className:"row"},s.createElement(Z.A,{label:"Startdatum",name:"dateStart",value:t,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateStart}),s.createElement(P.A,{label:"BTW percentage",name:"vatPercentage",options:this.props.vatCodes,optionValue:"percentage",optionName:"description",value:c,onChangeAction:this.props.usesTwinfield?null:this.handleInputChange,placeholder:"Geen",readOnly:this.props.usesTwinfield})),s.createElement("div",{className:"row"},s.createElement(V.A,{label:"Invoer inclusief BTW",name:"inputInclVat",value:n,onChangeAction:this.handleInputChange}),s.createElement(N.A,{label:"Aantal decimalen",type:"number",min:"2",max:"6",name:"priceNumberOfDecimals",value:a,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurDecimals,required:"required",error:this.state.errors.priceNumberOfDecimals})),s.createElement("div",{className:"row"},"variable"===this.props.hasVariablePrice||o?s.createElement(s.Fragment,null,s.createElement(N.A,{label:"Prijs excl. BTW",id:"price",name:"price",value:"Variabel",readOnly:!0,required:"required"}),s.createElement(N.A,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:"Variabel",readOnly:!0,required:"required"})):s.createElement(s.Fragment,null,n?s.createElement(s.Fragment,null,s.createElement(N.A,{label:"Prijs excl. BTW",id:"price",name:"price",value:r,readOnly:!0,required:"required"}),s.createElement(N.A,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",type:"number",min:"0",max:"1000000",value:i,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.priceInclVat})):s.createElement(s.Fragment,null,s.createElement(N.A,{label:"Prijs excl. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:r,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.price}),s.createElement(N.A,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:i,readOnly:!0,required:"required"})))),s.createElement("div",{className:"pull-right btn-group",role:"group"},s.createElement(C.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),s.createElement(C.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(s.Component);const ne=(0,u.Ng)((function(e){return{productId:e.productDetails.id,productName:e.productDetails.name,productCode:e.productDetails.code,hasVariablePrice:e.productDetails.hasVariablePrice,ledger:e.productDetails.ledger,vatCodes:e.systemData.vatCodes,usesTwinfield:e.systemData.usesTwinfield}}),(function(e){return{addProductPriceHistory:function(t){e(function(e){return{type:"ADD_PRODUCT_PRICE_HISTORY",priceHistory:e}}(t))}}}))(te);var ae=n(9392),re=n(87722),ie=n(23384);function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}var oe=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,ce()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,m.A)(n,"toggleShowNew",(function(){n.setState({showNew:!n.state.showNew})})),n.state={showNew:!1},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return s.createElement(I.A,null,s.createElement(ae.A,null,s.createElement("span",{className:"h5 text-bold"},"Prijshistorie"),this.props.permissions.manageFinancial&&s.createElement("a",{role:"button",className:"pull-right",onClick:this.toggleShowNew},s.createElement(re.Ay,{size:14,icon:ie.t}))),s.createElement(T.A,null,s.createElement("div",{className:"col-md-12"},s.createElement(Y,null)),s.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&s.createElement(ne,{toggleShowNew:this.toggleShowNew}))))}}])}(s.Component);const le=(0,u.Ng)((function(e){return{permissions:e.meDetails.permissions}}))(oe);G().locale("nl");const se=(0,u.Ng)((function(e){return{productDetails:e.productDetails}}))((function(e){var t=e.productDetails,n=t.createdAt,a=t.createdBy;return s.createElement("div",null,s.createElement("div",{className:"row"},s.createElement(L.A,{label:"Gemaakt door",value:a?a.fullName:"Onbekend",link:a?"/gebruiker/"+a.id:""}),s.createElement(L.A,{label:"Gemaakt op",value:n?G()(n).format("L"):"Onbekend"})))})),ue=function(e){return s.createElement(I.A,null,s.createElement(ae.A,null,s.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),s.createElement(T.A,null,s.createElement("div",{className:"col-md-12"},s.createElement(se,null))))};function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}G().locale("nl");var de=function(e){function t(e){return(0,a.A)(this,t),n=this,r=t,o=[e],r=(0,c.A)(r),(0,i.A)(n,me()?Reflect.construct(r,o||[],(0,c.A)(n).constructor):r.apply(n,o));var n,r,o}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van product.":this.props.isLoading?e="Gegevens aan het laden.":(0,A.isEmpty)(this.props.productDetails)?e="Geen product gevonden!":t=!1,t?s.createElement("div",null,e):s.createElement("div",null,s.createElement(U,null),s.createElement(le,null),s.createElement(ue,null))}}])}(s.Component);const pe=(0,u.Ng)((function(e){return{productDetails:e.productDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}),(function(e){return{fetchTeamDetails:function(t){e((0,b.cX)(t))}}}))(de);function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}var ve=function(e){function t(e){return(0,a.A)(this,t),n=this,r=t,o=[e],r=(0,c.A)(r),(0,i.A)(n,he()?Reflect.construct(r,o||[],(0,c.A)(n).constructor):r.apply(n,o));var n,r,o}return(0,o.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.props.fetchProductDetails(this.props.params.id)}},{key:"render",value:function(){return s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-9"},s.createElement("div",{className:"col-md-12 margin-10-top"},s.createElement(I.A,null,s.createElement(T.A,{className:"panel-small"},s.createElement(g,null)))),s.createElement("div",{className:"col-md-12 margin-10-top"},s.createElement(pe,null))),s.createElement("div",{className:"col-md-3"}))}}])}(s.Component);const fe=(0,u.Ng)((function(e){return{productDetails:e.productDetails}}),(function(e){return{fetchProductDetails:function(t){e(function(e){return{type:"FETCH_PRODUCT_DETAILS",id:e}}(t))}}}))((function(e){var t=(0,d.g)();return s.createElement(ve,(0,l.A)({},e,{params:t}))}))}}]);