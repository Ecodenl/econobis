"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[8411],{69566:(e,t,n)=>{n.d(t,{DD:()=>i,aR:()=>r,j0:()=>a});var a=function(e,t){return{type:"FETCH_PRODUCTS",filters:e,filterType:t}},r=function(){return{type:"CLEAR_PRODUCTS"}},i=function(e){return{type:"DELETE_PRODUCT",id:e}}},29315:(e,t,n)=>{n.d(t,{Ti:()=>o,VB:()=>s,aI:()=>l,cX:()=>a,eM:()=>c,lv:()=>i,n7:()=>r,oI:()=>u});var a=function(e){return{type:"FETCH_TEAM_DETAILS",id:e}},r=function(e,t){return{type:"UPDATE_TEAM",team:e,switchToView:t}},i=function(e){return{type:"NEW_TEAM_USER",teamUser:e}},c=function(e,t){return{type:"DELETE_TEAM_USER",teamId:e,userId:t}},o=function(e){return{type:"NEW_TEAM_CONTACT_GROUP",teamContactGroup:e}},l=function(e,t){return{type:"DELETE_TEAM_CONTACT_GROUP",teamId:e,contactGroupId:t}},s=function(e){return{type:"NEW_TEAM_DOCUMENT_CREATED_FROM",teamDocumentCreatedFrom:e}},u=function(e,t){return{type:"DELETE_TEAM_DOCUMENT_CREATED_FROM",teamId:e,documentCreatedFromId:t}}},98411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ve});var a=n(23029),r=n(92901),i=n(56822),c=n(53954),o=n(85501),l=n(96540),s=n(69733),u=n(64467),m=n(24179),d=n(91858),p=n(63750),h=n(69566);const v=(0,s.Ng)(null,(function(e){return{deleteProduct:function(t){e((0,h.DD)(t))}}}))((function(e){return l.createElement(p.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteProduct(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder product: ",l.createElement("strong",null,e.name),"?")}));function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var E=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,f()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"toggleDelete",(function(){n.setState({showDelete:!n.state.showDelete})})),n.state={showDelete:!1},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},l.createElement(d.A,{iconName:"arrowLeft",onClickAction:m.Nc.goBack}),l.createElement(d.A,{iconName:"trash",onClickAction:this.toggleDelete}))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Product: ",this.props.name)),l.createElement("div",{className:"col-md-4"}),this.state.showDelete&&l.createElement(v,{closeDeleteItemModal:this.toggleDelete,name:this.props.name,id:this.props.id}))}}])}(l.Component);const y=(0,s.Ng)((function(e){return{name:e.productDetails.name,id:e.productDetails.id}}),null)(E);var g=n(2543),A=n(29315),b=n(57761),w=n.n(b),D=n(54814),N=n(55956),C=n(62493),I=n(55849),P=n(14809);function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}var O=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,T()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"confirmAction",(function(e){n.props.updateProduct(n.props.product,n.props.switchToView),n.props.closeModal()})),n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return l.createElement(p.A,{modalClassName:"modal-lg",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Product wijzigen",buttonConfirmText:"Opslaan"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Let op. Een wijziging in een product kan grote gevolgen hebben op je lopende facturering. Dus bedenk goed wat je wilt voordat je een wijziging doorvoert."))))}}])}(l.Component);const S=(0,s.Ng)(null,(function(e){return{updateProduct:function(t,n){e(function(e,t){return{type:"UPDATE_PRODUCT",product:e,switchToView:t}}(t,n))}}}))(O);var k=n(31714),j=n(77465);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}var B=function(e){function t(e){var n,r,o,l;(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,q()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"handleInputChangeDuration",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name,i=n.state.product.invoiceFrequencyId,c=n.state.invoiceFrequencies;switch(a){case"none":c=[{id:"once",name:"Eenmalig"}],i="once";break;case"month":c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==i&&"yearly"!==i&&"half-year"!==i||(i="monthly");break;case"quarter":c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==i&&"half-year"!==i||(i="quarterly");break;case"half_year":c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===i&&(i="half-year");break;default:c=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}n.setState(F(F({},n.state),{},{invoiceFrequencies:c,product:F(F({},n.state.product),{},(0,u.A)((0,u.A)({},r,a),"invoiceFrequencyId",i))}))})),(0,u.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(F(F({},n.state),{},{product:F(F({},n.state.product),{},(0,u.A)({},r,a))}))})),(0,u.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=n.state.product,a={},r=!1,i=!1,c=!1;n.props.products.map((function(e){return e.code==t.code&&(c=!0)})),c&&t.code!==n.state.oldCode&&(r="Productcode moet uniek zijn.",a.code=!0,i=!0),w().isEmpty(t.code+"")&&(a.code=!0,i=!0);var o=!1;n.props.products.map((function(e){return e.name==t.name&&(o=!0)})),o&&t.name!==n.state.oldName&&(r="Productnaam moet uniek zijn.",a.name=!0,i=!0),c&&o&&t.code!==n.state.oldCode&&t.name!==n.state.oldName&&(r="Productcode en productnaam moeten uniek zijn."),w().isEmpty(t.name+"")&&(a.name=!0,i=!0),w().isEmpty(t.administrationId+"")&&(a.administrationId=!0,i=!0),n.setState(F(F({},n.state),{},{errors:a,errorMessage:r})),i||n.toggleShowConfirm()})),(0,u.A)(n,"toggleShowConfirm",(function(){n.setState({showConfirm:!n.state.showConfirm})}));var s=e.productDetails,m=s.id,d=s.code,p=s.name,h=s.invoiceText,v=s.durationId,f=s.invoiceFrequencyId,E=s.paymentTypeId,y=s.administrationId,g=s.ledgerId,A=s.costCenterId,b=s.active;return n.state={invoiceFrequencies:[{id:"once",name:"Eenmalig"}],showConfirm:!1,errorMessage:!1,oldCode:d||"",oldName:p||"",product:{id:m,code:d||"",name:p||"",invoiceText:h||"",durationId:v||"none",invoiceFrequencyId:f||"once",paymentTypeId:E||"",administrationId:y||"",ledgerId:g||"",costCenterId:A||"",active:b},errors:{code:!1,name:!1,administrationId:!1}},n.handleReactSelectChange=n.handleReactSelectChange.bind(n),n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.state.invoiceFrequencies,t=this.state.product.invoiceFrequencyId;switch(this.state.product.durationId){case"none":e=[{id:"once",name:"Eenmalig"}],t="once";break;case"month":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"}],"quarterly"!==t&&"yearly"!==t&&"half-year"!==t||(t="monthly");break;case"quarter":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"}],"yearly"!==t&&"half-year"!==t||(t="quarterly");break;case"half_year":e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"}],"yearly"===t&&(t="half-year");break;default:e=[{id:"once",name:"Eenmalig"},{id:"monthly",name:"Maand"},{id:"quarterly",name:"Kwartaal"},{id:"half-year",name:"Half jaar"},{id:"yearly",name:"Jaar"}]}this.setState(F(F({},this.state),{},{invoiceFrequencies:e,product:F(F({},this.state.product),{},{invoiceFrequencyId:t})}))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(F(F({},this.state),{},{product:F(F({},this.state.product),{},(0,u.A)({},t,e))}))}},{key:"render",value:function(){var e=this,t=this.state.product,n=t.code,a=t.name,r=t.invoiceText,i=t.durationId,c=t.invoiceFrequencyId,o=t.paymentTypeId,s=t.administrationId,u=t.ledgerId,m=t.costCenterId,d=t.active,p=this.props.ledgers,h=this.props.productDetails.currentPrice;return this.props.usesTwinfield&&h&&(p=this.props.ledgers.filter((function(e){return e.vatCode?e.vatCode.percentage===h.vatPercentage:e.vatCode===h.vatPercentage}))),l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(C.A,null,l.createElement(I.A,null,l.createElement("div",{className:"row"},l.createElement(D.A,{label:"Productcode",name:"code",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.code}),l.createElement(D.A,{label:"Naam",name:"name",value:a,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.name})),l.createElement("div",{className:"row"},l.createElement("div",{className:"form-group col-sm-12"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),l.createElement("div",{className:"col-sm-8"},l.createElement("textarea",{name:"invoiceText",value:r,onChange:this.handleInputChange,className:"form-control input-sm",maxLength:"1000"}))))),l.createElement("div",{className:"row"},l.createElement(P.A,{label:"Looptijd",id:"durationId",name:"durationId",options:this.props.productDurations,value:i,onChangeAction:this.handleInputChangeDuration,emptyOption:!1}),l.createElement(P.A,{label:"Prijs per",id:"invoiceFrequencyId",name:"invoiceFrequencyId",options:this.state.invoiceFrequencies,value:c,onChangeAction:this.handleInputChange,emptyOption:!1})),l.createElement("div",{className:"row"},l.createElement(P.A,{label:"Betaalwijze",id:"paymentTypeId",name:"paymentTypeId",options:this.props.productPaymentTypes,value:o,onChangeAction:this.handleInputChange}),l.createElement(P.A,{label:"Administratie",id:"administrationId",name:"administrationId",options:this.props.administrations,value:s,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.administrationId})),this.props.usesTwinfield?l.createElement("div",{className:"row"},l.createElement(k.A,{label:"Grootboek",name:"ledgerId",options:p,optionName:"description",value:Number(u),onChangeAction:this.handleReactSelectChange}),l.createElement(k.A,{label:"Kostenplaats",name:"costCenterId",options:this.props.costCenters,optionName:"description",value:Number(m),onChangeAction:this.handleReactSelectChange})):null,l.createElement("div",{className:"row"},l.createElement(j.A,{label:"Actief",name:"active",value:d,onChangeAction:function(t){t.persist(),e.handleInputChange(t)}})),this.state.errorMessage&&l.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage)),l.createElement(I.A,null,l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(N.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),l.createElement(N.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))),this.state.showConfirm&&l.createElement(S,{product:this.state.product,closeModal:this.toggleShowConfirm,switchToView:this.props.switchToView}))}}])}(l.Component);const H=(0,s.Ng)((function(e){return{productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,productDetails:e.productDetails,administrations:e.meDetails.administrations,products:e.systemData.products,ledgers:e.systemData.ledgers,costCenters:e.systemData.costCenters,usesTwinfield:e.systemData.usesTwinfield}}),null)(B);var L=n(30483);const R=(0,s.Ng)((function(e){return{productDetails:e.productDetails,usesTwinfield:e.systemData.usesTwinfield}}))((function(e){var t=e.productDetails,n=t.code,a=t.name,r=t.invoiceText,i=t.duration,c=t.invoiceFrequency,o=t.paymentType,s=t.administration,u=t.ledger,m=t.costCenter,d=t.active;return l.createElement("div",{onClick:e.switchToEdit},l.createElement(C.A,null,l.createElement(I.A,null,l.createElement("div",{className:"row"},l.createElement(L.A,{label:"Productcode",value:n}),l.createElement(L.A,{label:"Product",value:a})),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Omschrijving")),l.createElement("div",{className:"col-sm-9",id:"invoiceText"},r)),l.createElement("div",{className:"row"},l.createElement(L.A,{label:"Looptijd",value:i?i.name:""}),l.createElement(L.A,{label:"Prijs per",value:c?c.name:""})),l.createElement("div",{className:"row"},l.createElement(L.A,{label:"Betaalwijze",value:o?o.name:""}),l.createElement(L.A,{label:"Administratie",value:s?s.name:""})),e.usesTwinfield?l.createElement("div",{className:"row"},l.createElement(L.A,{label:"Grootboek",value:u?u.description:""}),l.createElement(L.A,{label:"Kostenplaats",value:m?m.description:""})):null,l.createElement("div",{className:"row"},l.createElement(L.A,{label:"Actief",value:d?"Ja":"Nee"})))))}));function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var M=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,x()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"switchToEdit",(function(){n.setState({showEdit:!0})})),(0,u.A)(n,"switchToView",(function(){n.setState({showEdit:!1,activeDiv:""})})),n.state={showEdit:!1,activeDiv:""},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.meDetails.permissions,n=void 0===t?{}:t;return l.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&n.manageFinancial?l.createElement(H,{switchToView:this.switchToView}):l.createElement(R,{switchToEdit:this.switchToEdit}))}}])}(l.Component);const _=(0,s.Ng)((function(e){return{productDetails:e.productDetails,meDetails:e.meDetails}}))(M);var U=n(95093),W=n.n(U);const G=(0,s.Ng)((function(e){return{currentPrice:e.productDetails.currentPrice,productHasVariablePrice:e.productDetails.hasVariablePrice}}))((function(e){var t=e.price,n=t.id,a=t.dateStart,r=t.priceNumberOfDecimals,i=t.price,c=t.vatPercentage,o=t.priceInclVat;return l.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},l.createElement("div",{className:"col-sm-3"}," ",a?W()(a).format("L"):""),"variable"===e.productHasVariablePrice?l.createElement("div",{className:"col-sm-3"},"Variabel"):l.createElement("div",{className:"col-sm-3"},i?"€ "+i.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:r}):""),l.createElement("div",{className:"col-sm-2"},null!==c?c:"Geen"),"variable"===e.productHasVariablePrice?l.createElement("div",{className:"col-sm-2"},"Variabel"):l.createElement("div",{className:"col-sm-2"},o?"€ "+o.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:r}):""),l.createElement("div",{className:"col-sm-2"},e.currentPrice&&n===e.currentPrice.id?"Ja":""))}));function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}var K=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,z()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"onLineEnter",(function(){n.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,u.A)(n,"onLineLeave",(function(){n.setState({showActionButtons:!1,highlightLine:""})})),n.state={showActionButtons:!1,highlightLine:"",showDelete:!1,price:e.price},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(G,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,toggleDelete:this.toggleDelete,price:this.state.price}))}}])}(l.Component);const J=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions}}))(K),X=(0,s.Ng)((function(e){return{priceHistory:e.productDetails.priceHistory}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-3"},"Startdatum"),l.createElement("div",{className:"col-sm-3"},"Prijs excl. BTW"),l.createElement("div",{className:"col-sm-2"},"BTW percentage"),l.createElement("div",{className:"col-sm-2"},"Prijs incl. BTW"),l.createElement("div",{className:"col-sm-2"},"Actief")),e.priceHistory.length>0?e.priceHistory.map((function(e){return l.createElement(J,{key:e.id,price:e})})):l.createElement("div",null,"Geen prijshistorie bekend."))}));var Y=n(73421);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}var ee=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,$()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(Z(Z({},n.state),{},{priceHistory:Z(Z({},n.state.priceHistory),{},(0,u.A)({},r,a))}),n.updatePrice)})),(0,u.A)(n,"handleInputChangeDate",(function(e,t){n.setState(Z(Z({},n.state),{},{priceHistory:Z(Z({},n.state.priceHistory),{},(0,u.A)({},t,e))}))})),(0,u.A)(n,"handleBlurProductPrice",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(Z(Z({},n.state),{},{priceHistory:Z(Z({},n.state.priceHistory),{},(0,u.A)({},r,parseFloat(a).toFixed(n.state.priceHistory.priceNumberOfDecimals)))}))})),(0,u.A)(n,"handleBlurDecimals",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=(t.name,a);r<2&&(r=2),r>6&&(r=6),n.setState(Z(Z({},n.state),{},{priceHistory:Z(Z({},n.state.priceHistory),{},{priceNumberOfDecimals:r,price:parseFloat(n.state.priceHistory.price).toFixed(r),priceInclVat:parseFloat(n.state.priceHistory.priceInclVat).toFixed(r)})}),n.updatePrice)})),(0,u.A)(n,"updatePrice",(function(){var e=!!n.state.priceHistory.inputInclVat&&n.state.priceHistory.inputInclVat,t=w().isFloat(n.state.priceHistory.price+"")?n.state.priceHistory.price:0,a=w().isFloat(n.state.priceHistory.priceInclVat+"")?n.state.priceHistory.priceInclVat:0,r=w().isFloat(n.state.priceHistory.vatPercentage+"")?n.state.priceHistory.vatPercentage:0,i=(parseFloat(100)+parseFloat(r))/100;e?(t=a/i,n.setState(Z(Z({},n.state),{},{priceHistory:Z(Z({},n.state.priceHistory),{},{price:parseFloat(t).toFixed(n.state.priceHistory.priceNumberOfDecimals)})}))):(a=t*i,n.setState(Z(Z({},n.state),{},{priceHistory:Z(Z({},n.state.priceHistory),{},{priceInclVat:parseFloat(a).toFixed(n.state.priceHistory.priceNumberOfDecimals)})})))})),n.state={priceHistory:{productId:e.productId,dateStart:"",inputInclVat:!1,priceNumberOfDecimals:2,price:"",priceInclVat:"",vatPercentage:e.ledger?e.ledger.vatCode&&e.ledger.vatCode.percentage:null,hasVariablePrice:"variable"===e.hasVariablePrice},errors:{dateStart:!1,priceNumberOfDecimals:!1,price:!1,priceInclVat:!1}},n.handleInputChange=n.handleInputChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.priceHistory,n={},a=!1;w().isEmpty(t.dateStart)&&(n.dateStart=!0,a=!0),t.hasVariablePrice||(t.inputInclVat?w().isEmpty(t.priceInclVat)&&(n.priceInclVat=!0,a=!0):w().isEmpty(t.price)&&(n.price=!0,a=!0)),this.setState(Z(Z({},this.state),{},{errors:n})),a||(this.props.addProductPriceHistory(t),this.props.toggleShowNew())}},{key:"render",value:function(){var e=this.state.priceHistory,t=e.dateStart,n=e.inputInclVat,a=e.priceNumberOfDecimals,r=e.price,i=e.priceInclVat,c=e.vatPercentage,o=e.hasVariablePrice;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(C.A,{className:"panel-grey"},l.createElement(I.A,null,"none"===this.props.hasVariablePrice&&l.createElement("div",{className:"row"},l.createElement(j.A,{label:"Variabele prijs",name:"hasVariablePrice",value:o,onChangeAction:this.handleInputChange})),l.createElement("div",{className:"row"},l.createElement(D.A,{label:"Productcode",id:"code",name:"code",value:this.props.productCode,readOnly:!0}),l.createElement(D.A,{label:"Product",id:"name",name:"name",value:this.props.productName,readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(Y.A,{label:"Startdatum",name:"dateStart",value:t,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateStart}),l.createElement(P.A,{label:"BTW percentage",name:"vatPercentage",options:this.props.vatCodes,optionValue:"percentage",optionName:"description",value:c,onChangeAction:this.props.usesTwinfield?null:this.handleInputChange,placeholder:"Geen",readOnly:this.props.usesTwinfield})),l.createElement("div",{className:"row"},l.createElement(j.A,{label:"Invoer inclusief BTW",name:"inputInclVat",value:n,onChangeAction:this.handleInputChange}),l.createElement(D.A,{label:"Aantal decimalen",type:"number",min:"2",max:"6",name:"priceNumberOfDecimals",value:a,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurDecimals,required:"required",error:this.state.errors.priceNumberOfDecimals})),l.createElement("div",{className:"row"},"variable"===this.props.hasVariablePrice||o?l.createElement(l.Fragment,null,l.createElement(D.A,{label:"Prijs excl. BTW",id:"price",name:"price",value:"Variabel",readOnly:!0,required:"required"}),l.createElement(D.A,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:"Variabel",readOnly:!0,required:"required"})):l.createElement(l.Fragment,null,n?l.createElement(l.Fragment,null,l.createElement(D.A,{label:"Prijs excl. BTW",id:"price",name:"price",value:r,readOnly:!0,required:"required"}),l.createElement(D.A,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",type:"number",min:"0",max:"1000000",value:i,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.priceInclVat})):l.createElement(l.Fragment,null,l.createElement(D.A,{label:"Prijs excl. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:r,onChangeAction:this.handleInputChange,onBlurAction:this.handleBlurProductPrice,required:"required",error:this.state.errors.price}),l.createElement(D.A,{label:"Prijs incl. BTW",id:"priceInclVat",name:"priceInclVat",value:i,readOnly:!0,required:"required"})))),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(N.A,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),l.createElement(N.A,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}])}(l.Component);const te=(0,s.Ng)((function(e){return{productId:e.productDetails.id,productName:e.productDetails.name,productCode:e.productDetails.code,hasVariablePrice:e.productDetails.hasVariablePrice,ledger:e.productDetails.ledger,vatCodes:e.systemData.vatCodes,usesTwinfield:e.systemData.usesTwinfield}}),(function(e){return{addProductPriceHistory:function(t){e(function(e){return{type:"ADD_PRODUCT_PRICE_HISTORY",priceHistory:e}}(t))}}}))(ee);var ne=n(9392),ae=n(87722),re=n(23384);function ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ie=function(){return!!e})()}var ce=function(e){function t(e){var n,r,o,l;return(0,a.A)(this,t),r=this,o=t,l=[e],o=(0,c.A)(o),n=(0,i.A)(r,ie()?Reflect.construct(o,l||[],(0,c.A)(r).constructor):o.apply(r,l)),(0,u.A)(n,"toggleShowNew",(function(){n.setState({showNew:!n.state.showNew})})),n.state={showNew:!1},n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return l.createElement(C.A,null,l.createElement(ne.A,null,l.createElement("span",{className:"h5 text-bold"},"Prijshistorie"),this.props.permissions.manageFinancial&&l.createElement("a",{role:"button",className:"pull-right",onClick:this.toggleShowNew},l.createElement(ae.Ay,{size:14,icon:re.t}))),l.createElement(I.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(X,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&l.createElement(te,{toggleShowNew:this.toggleShowNew}))))}}])}(l.Component);const oe=(0,s.Ng)((function(e){return{permissions:e.meDetails.permissions}}))(ce);W().locale("nl");const le=(0,s.Ng)((function(e){return{productDetails:e.productDetails}}))((function(e){var t=e.productDetails,n=t.createdAt,a=t.createdBy;return l.createElement("div",null,l.createElement("div",{className:"row"},l.createElement(L.A,{label:"Gemaakt door",value:a?a.fullName:"Onbekend",link:a?"gebruiker/"+a.id:""}),l.createElement(L.A,{label:"Gemaakt op",value:n?W()(n).format("L"):"Onbekend"})))})),se=function(e){return l.createElement(C.A,null,l.createElement(ne.A,null,l.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),l.createElement(I.A,null,l.createElement("div",{className:"col-md-12"},l.createElement(le,null))))};function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}W().locale("nl");var me=function(e){function t(e){return(0,a.A)(this,t),n=this,r=t,o=[e],r=(0,c.A)(r),(0,i.A)(n,ue()?Reflect.construct(r,o||[],(0,c.A)(n).constructor):r.apply(n,o));var n,r,o}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van product.":this.props.isLoading?e="Gegevens aan het laden.":(0,g.isEmpty)(this.props.productDetails)?e="Geen product gevonden!":t=!1,t?l.createElement("div",null,e):l.createElement("div",null,l.createElement(_,null),l.createElement(oe,null),l.createElement(se,null))}}])}(l.Component);const de=(0,s.Ng)((function(e){return{productDetails:e.productDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}),(function(e){return{fetchTeamDetails:function(t){e((0,A.cX)(t))}}}))(me);function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pe=function(){return!!e})()}var he=function(e){function t(e){return(0,a.A)(this,t),n=this,r=t,o=[e],r=(0,c.A)(r),(0,i.A)(n,pe()?Reflect.construct(r,o||[],(0,c.A)(n).constructor):r.apply(n,o));var n,r,o}return(0,o.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.props.fetchProductDetails(this.props.params.id)}},{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(C.A,null,l.createElement(I.A,{className:"panel-small"},l.createElement(y,null)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(de,null))),l.createElement("div",{className:"col-md-3"}))}}])}(l.Component);const ve=(0,s.Ng)((function(e){return{productDetails:e.productDetails}}),(function(e){return{fetchProductDetails:function(t){e(function(e){return{type:"FETCH_PRODUCT_DETAILS",id:e}}(t))}}}))(he)}}]);