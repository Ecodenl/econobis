"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[8684],{8617:(e,t,a)=>{a.d(t,{A:()=>c}),a(62010),a(50778);var r=a(96540),l=a(84976),n=a(5556),i=a.n(n),o=a(1612),s=a(26819),m=function(e){var t=e.label,a=e.id,n=e.value,i=e.link,m=e.hidden,c=e.name,d=e.textToolTip;return i.length>0?r.createElement("div",{className:"form-group col-sm-12",style:m?{display:"none"}:{}},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-3"},r.createElement("label",{htmlFor:a,className:"col-sm-12"},t)),r.createElement("div",{className:"col-sm-6",id:a,onClick:null},r.createElement(l.N_,{to:i,className:"link-underline"},n)," ",d&&r.createElement("span",null,r.createElement(o.__w,{color:"blue",size:"15px","data-tip":d,"data-for":"tooltip-".concat(c)}),r.createElement(s.A,{id:"tooltip-".concat(c),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"}))))):r.createElement("div",{className:"form-group col-sm-12",style:m?{display:"none"}:{}},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-3"},r.createElement("label",{htmlFor:a,className:"col-sm-12"},t)),r.createElement("div",{className:"col-sm-6",id:a},n," ",d&&r.createElement("span",null,r.createElement(o.__w,{color:"blue",size:"15px","data-tip":d,"data-for":"tooltip-".concat(c)}),r.createElement(s.A,{id:"tooltip-".concat(c),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})))))};m.defaultProps={label:"",value:"",name:"",textToolTip:"",link:"",hidden:!1},m.propTypes={label:i().oneOfType([i().string,i().object]).isRequired,id:i().string,name:i().string,textToolTip:i().string,value:i().oneOfType([i().string,i().number]),link:i().string,hidden:i().bool};const c=m},29008:(e,t,a)=>{a.d(t,{A:()=>n}),a(52675),a(89463);var r=a(96540),l=a(63750);const n=function(e){var t=e.deleteFreeFieldsField,a=e.closeDeleteItemModal,n=e.description,i=e.id;return r.createElement(l.A,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:a,confirmAction:function(){return t(i),void a()},title:"Verwijderen"},"Verwijder vrije veld: ",r.createElement("strong",null,n),"?")}},98684:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var r=a(5544),l=(a(62010),a(96540)),n=a(23932),i=a(62493),o=a(55849),s=a(91858),m=a(47767),c=(a(60825),a(58168)),d=a(23029),u=a(92901),f=a(56822),h=a(53954),p=a(85501),v=a(64467),b=a(69733),E=(a(52675),a(2008),a(51629),a(67945),a(84185),a(83851),a(81278),a(79432),a(26099),a(23500),a(94170),a(27495),a(71761),a(57761)),g=a.n(E),A=a(54814),F=a(55956),N=a(77465),w=a(31714),y=a(72505),k=a.n(y),C=a(96643),I=a(30483),x=a(35692),V=a(95093),D=a.n(V);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,v.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}const P=function(e){function t(e){var a,r,l,i;(0,d.A)(this,t),r=this,l=t,i=[e],l=(0,h.A)(l),a=(0,f.A)(r,O()?Reflect.construct(l,i||[],(0,h.A)(r).constructor):l.apply(r,i)),(0,v.A)(a,"handleInputChange",(function(e){var t=e.target,r="checkbox"===t.type?t.checked:t.value,l=t.name;a.setState(M(M({},a.state),{},{freeField:M(M({},a.state.freeField),{},(0,v.A)({},l,r))}))})),(0,v.A)(a,"handleInputChangeDate",(function(e,t){var r=e?D()(e).format("Y-MM-DD"):"";a.setState(M(M({},a.state),{},{freeField:M(M({},a.state.freeField),{},(0,v.A)({},t,r))}))})),(0,v.A)(a,"handleInputChangeDatetimeDate",(function(e,t){var r=e||"",l="08:00";a.state.freeField.defaultValue&&(l=D()(a.state.freeField.defaultValue).format("HH:mm"));var n="";g().isEmpty(r)||(n=D()(r+" "+l+":00").format("YYYY-MM-DD HH:mm:ss")),a.setState(M(M({},a.state),{},{freeField:M(M({},a.state.freeField),{},(0,v.A)({},t,n))}))})),(0,v.A)(a,"handleInputChangeDatetimeTime",(function(e,t){var r="",l=e||"08:00";a.state.freeField.defaultValue&&(r=D()(a.state.freeField.defaultValue).format("Y-MM-DD"));var n="";g().isEmpty(r)||(n=D()(r+" "+l+":00").format("YYYY-MM-DD HH:mm:ss")),a.setState(M(M({},a.state),{},{freeField:M(M({},a.state.freeField),{},(0,v.A)({},t,n))}))})),(0,v.A)(a,"handleSubmit",(function(e){e.preventDefault();var t=a.state.freeField,r={},l={},i=!1,o=(0,C.m)({fieldFormatType:"defaultValue",defaultValue:a.state.freeField.defaultValue,mandatory:a.state.freeField.mandatory,mask:a.state.freeField.mask});o&&(l.defaultValue=o,r.defaultValue=!0,i=!0),g().isEmpty(t.tableId+"")&&(r.tableId=!0,l.tableId="verplicht",i=!0),g().isEmpty(t.fieldFormatId+"")&&(r.fieldFormatId=!0,l.fieldFormatId="verplicht",i=!0),g().isEmpty(t.fieldName)&&(r.fieldName=!0,l.fieldName="verplicht",i=!0),null==t.fieldNameWebform||g().isEmpty(t.fieldNameWebform)||t.fieldNameWebform.match(/^[a-z0-9_]+$/)||(r.fieldNameWebform=!0,l.fieldNameWebform="Waarde ongeldig",i=!0),t.mandatory&&g().isEmpty(""+t.defaultValue)&&(r.defaultValue=!0,l.defaultValue="verplicht",i=!0),g().isEmpty(t.sortOrder+"")&&(r.sortOrder=!0,l.sortOrder="verplicht",i=!0),a.setState(M(M({},a.state),{},{errors:r,errorsMessage:l})),!i&&n.A.updateFreeFieldsField(t).then((function(){a.props.fetchFreeField(),a.props.switchToView()})).catch((function(e){console.log(e),alert("Er is iets misgegaan bij opslaan. Herlaad de pagina en probeer het nogmaals.")}))}));var o=e.freeField,s=o.id,m=o.tableId,c=o.tablePrefixFieldNameWebform,u=(o.fieldFormat,o.fieldFormatId),p=o.fieldName,b=o.fieldNameWebform,E=o.visiblePortal,A=o.changePortal,F=o.mandatory,N=o.defaultValue,w=o.exportable,y=o.sortOrder,k=o.mask;return a.state={freeField:{id:s,tableId:m,tablePrefixFieldNameWebform:c,fieldFormatId:u,fieldName:p,fieldNameWebform:b,visiblePortal:E,changePortal:A,mandatory:F,defaultValue:N,exportable:w,sortOrder:y,mask:k},freeFieldsTables:[],freeFieldsFieldFormats:[],errors:{tableId:!1,fieldFormatId:!1,fieldName:!1,fieldNameWebform:!1,visiblePortal:!1,changePortal:!1,mandatory:!1,defaultValue:!1,exportable:!1,sortOrder:!1,mask:!1},errorsMessage:{tableId:"",fieldFormatId:"",fieldName:"",fieldNameWebform:"",visiblePortal:"",changePortal:"",mandatory:"",defaultValue:"",exportable:"",sortOrder:"",mask:""}},a.handleReactSelectChange=a.handleReactSelectChange.bind(a),a}return(0,p.A)(t,e),(0,u.A)(t,[{key:"componentDidMount",value:function(){var e=this;k().all([n.A.peekFreeFieldsTables(),n.A.peekFreeFieldsFieldFormats()]).then(k().spread((function(t,a){e.setState({freeFieldsTables:t.data.data,freeFieldsFieldFormats:a.data.data})})))}},{key:"handleReactSelectChange",value:function(e,t){this.setState(M(M({},this.state),{},{freeField:M(M({},this.state.freeField),{},(0,v.A)({},t,e))}))}},{key:"render",value:function(){var e=this.state.freeField,t=e.tableId,a=e.tablePrefixFieldNameWebform,r=e.fieldFormatId,n=e.fieldName,s=e.fieldNameWebform,m=e.visiblePortal,c=e.changePortal,d=e.mandatory,u=e.defaultValue,f=e.exportable,h=e.sortOrder,p=e.mask;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(i.A,null,l.createElement(o.A,null,l.createElement("div",{className:"row"},l.createElement(w.A,{label:"Op onderdeel",id:"tableId",name:"tableId",options:this.state.freeFieldsTables,value:t,disabled:!0}),l.createElement(w.A,{label:"Type",id:"fieldFormatId",name:"fieldFormatId",options:this.state.freeFieldsFieldFormats,value:r,disabled:!0})),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Veldnaam",name:"fieldName",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.fieldName,errorMessage:this.state.errorsMessage.fieldName}),l.createElement(N.A,{label:"Verplicht",name:"mandatory",value:d,onChangeAction:this.handleInputChange,error:this.state.errors.mandatory,errorMessage:this.state.errorsMessage.mandatory})),l.createElement("div",{className:"row"},l.createElement(N.A,{label:"Zichtbaar in portaal",name:"visiblePortal",value:m,onChangeAction:this.handleInputChange,error:this.state.errors.visiblePortal,errorMessage:this.state.errorsMessage.visiblePortal}),l.createElement(N.A,{label:"Aan te passen in portaal",name:"changePortal",value:c,onChangeAction:this.handleInputChange,error:this.state.errors.changePortal,errorMessage:this.state.errorsMessage.changePortal})),l.createElement("div",{className:"row"},l.createElement(x.A,{fieldFormatType:this.props.freeField.fieldFormat.formatType,defaultValue:u,mandatory:d,errors:this.state.errors,errorsMessage:this.state.errorsMessage,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleInputChangeDatetimeDate:this.handleInputChangeDatetimeDate,handleInputChangeDatetimeTime:this.handleInputChangeDatetimeTime}),l.createElement(N.A,{label:"Exporteerbaar",name:"exportable",value:f,onChangeAction:this.handleInputChange,error:this.state.errors.exportable,errorMessage:this.state.errorsMessage.exportable})),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Volgorde",name:"sortOrder",value:h,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.sortOrder,errorMessage:this.state.errorsMessage.sortOrder,type:"number"})),null!=a?l.createElement("div",{className:"row"},l.createElement(I.A,{className:"form-group col-sm-6 ",label:"Veldnaam webformulier",value:s?a+s:""}),l.createElement(A.A,{label:"Wijzig veldnaam webformulier",name:"fieldNameWebform",value:s,size:"col-sm-5",onChangeAction:this.handleInputChange,error:this.state.errors.fieldNameWebform,errorMessage:this.state.errorsMessage.fieldNameWebform,textToolTip:"Te gebruiken veldnaam voor webformulier in snake_case notatie. Alleen kleine letters, cijfers en liggend streepje (undescore) toegestaan.Veldnamen voor webformulieren hebben altijd een vaste prefix, afhankelijk van onderdeel."})):null,l.createElement("hr",null),l.createElement("div",{className:"row"},l.createElement(A.A,{label:"Masker",name:"mask",value:p,onChangeAction:this.handleInputChange,error:this.state.errors.mask,errorMessage:this.state.errorsMessage.mask}),l.createElement("div",{className:"form-group col-sm-3 "},l.createElement("div",{className:"col-sm-12"},"Legenda:",l.createElement("br",null),"9 = nummer",l.createElement("br",null),"a = letter",l.createElement("br",null),"x = nummer / letter",l.createElement("br",null),"Alle andere karakters zullen letterlijk moeten worden gebruikt")),l.createElement("div",{className:"form-group col-sm-3"},l.createElement("div",{className:"col-sm-6"},"Voorbeelden:",l.createElement("br",null),"999-999",l.createElement("br",null),"9a9/999a",l.createElement("br",null),"999-99-9999",l.createElement("br",null),"xx.xx.xxxx.xx"),l.createElement("div",{className:"col-sm-6"},l.createElement("br",null),"123-760",l.createElement("br",null),"3q2/887w",l.createElement("br",null),"987-65-4329",l.createElement("br",null),"12.qq.12aw.3r")))),l.createElement(o.A,null,l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(F.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),l.createElement(F.A,{buttonText:"Opslaan",type:"submit",value:"Submit"})))))}}])}(l.Component);a(9868),a(78459);var S=a(60123),j=a(8617);const W=function(e){var t=e.fieldFormatType,a=e.defaultValue;switch(t){case"boolean":return l.createElement(I.A,{label:"Standaard waarde",value:Boolean(a)?"Ja":"Nee"});case"text_short":case"int":return l.createElement(I.A,{label:"Standaard waarde",value:a||""});case"text_long":return l.createElement(j.A,{label:"Standaard waarde",value:a||""});case"double_2_dec":return l.createElement(I.A,{label:"Standaard waarde",value:a?parseFloat(a).toFixed(2):""});case"amount_euro":return l.createElement(I.A,{label:"Standaard waarde",value:a?(0,S.A)(a):""});case"date":return l.createElement(I.A,{label:"Standaard waarde",value:a?D()(a).format("L"):""});case"datetime":var r=D()(a).format("HH:mm"),n=a?"00:00"===r?D()(a).format("L")+" (onbekend)":D()(a).format("L HH:mm"):"";return l.createElement(I.A,{label:"Standaard waarde",value:n})}},_=function(e){var t=e.fieldName,a=e.fieldNameWebform,r=e.mandatory,n=e.visiblePortal,s=e.changePortal,m=e.defaultValue,c=e.switchToEdit,d=e.table,u=e.tablePrefixFieldNameWebform,f=e.fieldFormat,h=e.exportable,p=e.sortOrder,v=e.mask;return l.createElement("div",{onClick:c},l.createElement(i.A,null,l.createElement(o.A,null,l.createElement("div",{className:"row"},l.createElement(I.A,{label:"Op onderdeel",value:d.name}),l.createElement(I.A,{label:"Type",value:f.formatName})),l.createElement("div",{className:"row"},l.createElement(I.A,{label:"Veldnaam",value:t}),l.createElement(I.A,{label:"Verplicht",value:Boolean(r)?"Ja":"Nee"})),l.createElement("div",{className:"row"},l.createElement(I.A,{label:"Zichtbaar in portaal",value:Boolean(n)?"Ja":"Nee"}),l.createElement(I.A,{label:"Aan te passen in portaal",value:Boolean(s)?"Ja":"Nee"})),l.createElement("div",{className:"row"},l.createElement(W,{fieldFormatType:f.formatType,defaultValue:m}),l.createElement(I.A,{label:"Exporteerbaar",value:Boolean(h)?"Ja":"Nee"})),l.createElement("div",{className:"row"},l.createElement(I.A,{label:"Volgorde",value:p})),null!=u?l.createElement("div",{className:"row"},l.createElement(I.A,{label:"Veldnaam webformulier",value:a?u+a:""})):null,l.createElement("div",{className:"row"},l.createElement(I.A,{label:"Masker",value:v})))))};function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}var Y=function(e){function t(e){var a,r,l,n;return(0,d.A)(this,t),r=this,l=t,n=[e],l=(0,h.A)(l),a=(0,f.A)(r,H()?Reflect.construct(l,n||[],(0,h.A)(r).constructor):l.apply(r,n)),(0,v.A)(a,"switchToEdit",(function(){a.setState({showEdit:!0})})),(0,v.A)(a,"switchToView",(function(){a.setState({showEdit:!1,activeDiv:""})})),a.state={showEdit:!1,activeDiv:""},a}return(0,p.A)(t,e),(0,u.A)(t,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this,t=this.props.permissions,a=void 0===t?{}:t;return l.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},this.state.showEdit&&a.manageFreeFields?l.createElement(P,{freeField:this.props.freeField,switchToView:this.switchToView,fetchFreeField:this.props.fetchFreeField}):l.createElement(_,(0,c.A)({},this.props.freeField,{switchToEdit:this.switchToEdit})))}}])}(l.Component);const B=(0,b.Ng)((function(e){return{permissions:e.meDetails.permissions}}))(Y);var R=a(29008),q=a(2543);const L=function(e){var t=(0,m.Zp)(),a=(0,m.g)(),c=(0,l.useState)({}),d=(0,r.A)(c,2),u=d[0],f=d[1],h=(0,l.useState)(!0),p=(0,r.A)(h,2),v=p[0],b=p[1],E=(0,l.useState)(!1),g=(0,r.A)(E,2),A=g[0],F=g[1],N=(0,l.useState)(!1),w=(0,r.A)(N,2),y=w[0],k=w[1];function C(){b(!0),n.A.fetchFreeFieldDetails(a.id).then((function(e){f(e),b(!1),F(!1)})).catch((function(){alert("Er is iets misgegaan met ophalen van het vrije veld."),b(!1),F(!0)}))}(0,l.useEffect)((function(){C()}),[]);var I="";return A?I="Fout bij het ophalen van het vrije veld.":v?I="Gegevens aan het laden.":(0,q.isEmpty)(u)&&(I="Geen vrij veld gevonden!"),v||A?l.createElement("div",null,I):l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(i.A,null,l.createElement(o.A,{className:"panel-small"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(s.A,{iconName:"arrowLeft",onClickAction:function(){return t(-1)}}),!u.hasFreeFieldsFieldRecords&&l.createElement(s.A,{iconName:"trash",onClickAction:function(){k(!0)}}))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Vrij veld: ",u.table.name," / ",u.fieldName)),l.createElement("div",{className:"col-md-4"}))))),l.createElement("div",{className:"col-md-12"},l.createElement(B,{freeField:u,fetchFreeField:C})),l.createElement("div",{className:"col-md-12 margin-10-top"})),y&&l.createElement(R.A,{closeDeleteItemModal:function(){k(!1)},deleteFreeFieldsField:function(e){n.A.deleteFreeFieldsField(e).then((function(){t("/vrije-velden")})).catch((function(e){console.log(e),alert("Er is iets misgegaan bij verwijderen. Probeer het opnieuw.")}))},description:u.fieldName,id:u.id}))}}}]);