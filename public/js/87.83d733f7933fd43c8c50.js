(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1199:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return r}));var n=function(t,e,a,n,r,i){return{type:"FETCH_PARTICIPANTS_PROJECT",filters:t,extraFilters:e,sorts:a,pagination:n,filterType:r,fetchFromProject:i}},r=function(){return{type:"CLEAR_PARTICIPANTS_PROJECT"}}},1200:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=function(t){return{type:"SET_PARTICIPANTS_PROJECTS_PAGINATION",pagination:t}}},1201:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=function(t,e){return{type:"SET_PARTICIPANTS_PROJECT_SORTS_FILTER",field:t,order:e}}},1556:function(t,e,a){"use strict";a.r(e);var n=a(12),r=a.n(n),i=a(24),o=a.n(i),c=a(25),l=a.n(c),s=a(22),u=a.n(s),p=a(26),m=a.n(p),d=a(27),h=a.n(d),f=a(16),E=a.n(f),g=a(6),P=a.n(g),C=a(0),y=a.n(C),T=a(31),v=a(14),b=a(767),k=a(1199),I=a(976),R=a(1200),j=a(769),F=a(199),S=a.n(F),A=a(150),x=a(151),N=a(201),w=a(757),O=a(1201),_=a(104),D=Object(T.b)(null,(function(t){return{setParticipantsProjectSortsFilter:function(e,a){t(Object(O.a)(e,a))}}}))((function(t){var e=function(e,a){t.setParticipantsProjectSortsFilter(e,a),setTimeout((function(){t.refreshParticipantsProjectData()}),100)};return y.a.createElement("tr",{className:"thead-title"},y.a.createElement(_.a,{title:"",width:"2%"}),y.a.createElement(w.a,{sortColumn:"contactType",title:"Type",width:"9%",setSorts:e}),y.a.createElement(w.a,{sortColumn:"name",title:"Naam",width:"9%",setSorts:e}),y.a.createElement(w.a,{sortColumn:"address",title:"Adres",width:"9%",setSorts:e}),y.a.createElement(w.a,{sortColumn:"postalCode",title:"Postcode",width:"8%",setSorts:e}),y.a.createElement(w.a,{sortColumn:"city",title:"Plaats",width:"9%",setSorts:e}),y.a.createElement(_.a,{title:"Project",width:"8%"}),y.a.createElement(_.a,{title:"Aantal deelnames",width:"9%"}),y.a.createElement(w.a,{sortColumn:"participantMutationStatusId",title:"Deelname status",width:"8%",setSorts:e}),y.a.createElement(w.a,{sortColumn:"dateRegister",title:"Eerste ingangsdatum deelname",width:"9%",setSorts:e}),y.a.createElement(w.a,{sortColumn:"energySupplier",title:"Energie leverancier",width:"9%",setSorts:e}),y.a.createElement("th",{width:"5%"}))})),L=a(7),M=a.n(L),J=a(765),U=Object(T.b)((function(t){return{filters:t.participantsProject.filters,contactTypes:t.systemData.contactTypes,contactStatuses:t.systemData.contactStatuses,participantMutationStatuses:t.systemData.participantMutationStatuses,energySuppliers:t.systemData.energySuppliers}}),(function(t){return Object(v.b)({clearFilterParticipantsProject:I.a,setFilterParticipantProjectAddress:I.c,setFilterParticipantProjectCity:I.e,setFilterParticipantProjectContactType:I.f,setFilterParticipantProjectParticipationsDefinitive:I.k,setFilterParticipantProjectDateRegister:I.g,setFilterParticipantProjectEnergySupplierId:I.h,setFilterParticipantProjectName:I.j,setFilterParticipantMutationStatusId:I.b,setFilterParticipantProjectPostalCode:I.l,setFilterProjectId:I.m},t)}))((function(t){var e=[].concat(r()(t.participantMutationStatuses),[{id:"isTerminated",name:"Beëindigd"}]);return y.a.createElement("tr",{className:"thead-filter"},y.a.createElement("th",null,t.showCheckboxList&&t.checkedAll&&y.a.createElement("input",{type:"checkbox",onChange:t.toggleCheckedAll,checked:!0}),t.showCheckboxList&&!t.checkedAll&&y.a.createElement("input",{type:"checkbox",onChange:t.toggleCheckedAll})),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("select",{className:"form-control input-sm",value:t.filters.contactType.data,onChange:function(e){t.setFilterParticipantProjectContactType(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},y.a.createElement("option",null),t.contactTypes.map((function(t){return y.a.createElement("option",{key:t.id,value:t.id},t.name)})))),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.name.data,onChange:function(e){t.setFilterParticipantProjectName(e.target.value)}})),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.address.data,onChange:function(e){t.setFilterParticipantProjectAddress(e.target.value)}})),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.postalCode.data,onChange:function(e){t.setFilterParticipantProjectPostalCode(e.target.value)}})),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.city.data,onChange:function(e){t.setFilterParticipantProjectCity(e.target.value)}})),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("select",{className:"form-control input-sm",value:t.filters.projectId.data,onChange:function(e){t.setFilterProjectId(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},y.a.createElement("option",null),t.projects.map((function(t){return y.a.createElement("option",{key:t.id,value:t.id},t.name)})))),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("input",{type:"text",className:"form-control input-sm",value:t.filters.participationsDefinitive.data,onChange:function(e){t.setFilterParticipantProjectParticipationsDefinitive(e.target.value)}})),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("select",{className:"form-control input-sm",value:t.filters.participantMutationStatusId.data,onChange:function(e){t.setFilterParticipantMutationStatusId(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},y.a.createElement("option",null),e.map((function(t){return y.a.createElement("option",{key:t.id,value:t.id},t.name)})))),t.showCheckboxList?y.a.createElement("th",null):y.a.createElement(J.a,{value:t.filters.dateRegister.data&&t.filters.dateRegister.data,onChangeAction:function(e){void 0===e?t.setFilterParticipantProjectDateRegister(""):t.setFilterParticipantProjectDateRegister(M()(e).format("Y-MM-DD"))}}),y.a.createElement("th",null,t.showCheckboxList?null:y.a.createElement("select",{className:"form-control input-sm",value:t.filters.energySupplierId.data,onChange:function(e){t.setFilterParticipantProjectEnergySupplierId(e.target.value),setTimeout((function(){t.onSubmitFilter()}),100)}},y.a.createElement("option",null),t.energySuppliers.map((function(t){return y.a.createElement("option",{key:t.id,value:t.id},t.name)})))),y.a.createElement("th",null))})),V=a(4),G=a(715),B=a.n(G),q=a(749);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=E()(t);if(e){var r=E()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}M.a.locale("nl");var Y=function(t){m()(a,t);var e=z(a);function a(t){var n;return o()(this,a),(n=e.call(this,t)).state={showActionButtons:!1,highlightRow:""},n}return l()(a,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(t){V.f.push("/project/deelnemer/".concat(t))}},{key:"render",value:function(){var t=this,e=this.props,a=e.id,n=e.contact,r=e.address,i=e.participationsInteressed,o=e.participationsOptioned,c=e.participationsGranted,l=e.participationsDefinitive,s=e.amountInteressed,u=e.amountOptioned,p=e.amountGranted,m=e.amountDefinitive,d=e.uniqueMutationStatuses,h=e.dateRegister,f=e.project,E=f?f.typeCodeRef:"",g=i+o+c+l,P=s+u+p+m,C="",T="",v="";r&&(r.street&&(C=r.street),r.number&&(T=r.number),r.addition&&(v=r.addition));var b=!(n.primaryEmailAddress&&n.primaryEmailAddress.email&&!B.a.isEmpty(n.primaryEmailAddress.email)),k=b?"Primair e-mailadres bij contact ontbreekt.":"",I=b?this.state.highlightRow+" missing-data-row":this.state.highlightRow;return y.a.createElement("tr",{title:k,className:I,onDoubleClick:function(){return t.openItem(a)},onMouseEnter:function(){return t.onRowEnter()},onMouseLeave:function(){return t.onRowLeave()}},y.a.createElement("td",null,this.props.showCheckboxList?y.a.createElement("input",{type:"checkbox",name:a,onChange:this.props.toggleParticipantCheck,checked:!!this.props.participantIds&&this.props.participantIds.includes(a)}):null),y.a.createElement("td",null,n.type?n.type.name:""),y.a.createElement("td",null,n.fullName),y.a.createElement("td",null,C+" "+T+(v?"-"+v:"")),y.a.createElement("td",null,r?r.postalCode:""),y.a.createElement("td",null,r?r.city:""),y.a.createElement("td",null,f?f.name:""),"loan"===E?y.a.createElement("td",null,P?Object(q.a)(P):""):y.a.createElement("td",null,g||""),y.a.createElement("td",null,d.map((function(t){return t.name})).join(", ")),y.a.createElement("td",null,h?M()(h).format("L"):""),y.a.createElement("td",null,r.primaryAddressEnergySupplier?r.primaryAddressEnergySupplier.energySupplier.name:""),y.a.createElement("td",null,this.state.showActionButtons?y.a.createElement("a",{role:"button",onClick:function(){return t.openItem(a)}},y.a.createElement("span",{className:"glyphicon glyphicon-pencil mybtn-success"})," "):""))}}]),a}(C.Component),H=a(750);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=E()(t);if(e){var r=E()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var K=function(t){m()(a,t);var e=W(a);function a(t){var n;return o()(this,a),n=e.call(this,t),P()(u()(n),"handleKeyUp",(function(t){13===t.keyCode&&n.props.onSubmitFilter()})),n}return l()(a,[{key:"render",value:function(){var t=this,e=this.props.participantsProject,a=e.data,n=void 0===a?[]:a,r=e.meta,i=void 0===r?{}:r,o="",c=!0;return this.props.hasError?o="Fout bij het ophalen van deelnemers.":this.props.isLoading?o="Gegevens aan het laden.":0===n.length?o="Geen deelnemers gevonden!":c=!1,y.a.createElement("form",{onKeyUp:this.handleKeyUp},y.a.createElement(A.a,null,y.a.createElement(x.a,null,y.a.createElement(D,{refreshParticipantsProjectData:function(){return t.props.refreshParticipantsProjectData()}}),y.a.createElement(U,{onSubmitFilter:this.props.onSubmitFilter,toggleCheckedAll:this.props.toggleCheckedAll,showCheckboxList:this.props.showCheckboxList,checkedAll:this.props.checkedAll,projects:this.props.projects})),y.a.createElement(N.a,null,c?y.a.createElement("tr",null,y.a.createElement("td",{colSpan:11},o)):n.map((function(e){return y.a.createElement(Y,S()({key:e.id,showCheckboxList:t.props.showCheckboxList,checkedAll:t.props.checkedAll,toggleParticipantCheck:t.props.toggleParticipantCheck,participantIds:t.props.participantIds},e))})))),y.a.createElement("div",{className:"col-md-4 col-md-offset-4"},y.a.createElement(H.a,{recordsPerPage:20,onPageChangeAction:this.props.handlePageClick,totalRecords:i.total,initialPage:this.props.participantsProjectPagination.page})))}}]),a}(C.Component),Z=Object(T.b)((function(t){return{isLoading:t.loadingData.isLoading,hasError:t.loadingData.hasError}}))(K),Q=a(702),X=a(703),$=Object(T.b)((function(t){return{participantsProject:t.participantsProject.list,permissions:t.meDetails.permissions}}),null)((function(t){var e=t.participantsProject.meta,a=void 0===e?{}:e;return y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-md-2"},y.a.createElement("div",{className:"btn-group btn-group-flex",role:"group"},y.a.createElement(Q.a,{iconName:"glyphicon-refresh",onClickAction:t.resetParticipantProjectFilters}),y.a.createElement(Q.a,{iconName:"glyphicon-download-alt",onClickAction:t.getExcel}),y.a.createElement(X.a,{buttonText:"Rapportage",onClickAction:t.toggleShowCheckboxList}))),y.a.createElement("div",{className:"col-md-8"},y.a.createElement("h4",{className:"text-center table-title"},"Deelnemers project")),y.a.createElement("div",{className:"col-md-2"},y.a.createElement("div",{className:"pull-right"},"Resultaten: ",a.total||0)))})),tt=a(758),et=a(700),at=a(701),nt=a(105),rt=a(107),it=a(102),ot=a(704),ct=a(709),lt=a(706),st=a(211),ut=a(748),pt=a.n(ut),mt=a(2),dt=a.n(mt),ht=a(1222),ft=a(206),Et=a(106);function gt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Pt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(a),!0).forEach((function(e){P()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=E()(t);if(e){var r=E()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var yt=function(t){m()(a,t);var e=Ct(a);function a(t){var n;return o()(this,a),(n=e.call(this,t)).state={filterType:t.filterType,amountOfFilters:t.amountOfFilters,filters:t.extraFilters,yesNoOptions:[{id:1,name:"Ja"},{id:0,name:"Nee"}],projects:[],contacts:[]},n.closeModal=n.closeModal.bind(u()(n)),n.confirmAction=n.confirmAction.bind(u()(n)),n.handleFilterFieldChange=n.handleFilterFieldChange.bind(u()(n)),n.handleFilterTypeChange=n.handleFilterTypeChange.bind(u()(n)),n.handleFilterValueChange=n.handleFilterValueChange.bind(u()(n)),n.addFilterRow=n.addFilterRow.bind(u()(n)),n.deleteFilterRow=n.deleteFilterRow.bind(u()(n)),n}return l()(a,[{key:"componentDidMount",value:function(){var t=this;dt.a.all([ft.a.peekProjects(),Et.a.getContactsPeek()]).then(dt.a.spread((function(e,a){t.setState({projects:e,contacts:a})})))}},{key:"closeModal",value:function(){this.props.toggleShowExtraFilters()}},{key:"confirmAction",value:function(){this.props.handleExtraFiltersChange(this.state.filters,this.state.amountOfFilters,this.state.filterType)}},{key:"handleFilterFieldChange",value:function(t,e){var a=this.state.filters;a[e].field=t,a[e].data="",this.setState(Pt(Pt({},this.state),{},{filters:a}))}},{key:"handleFilterTypeChange",value:function(t){this.setState(Pt(Pt({},this.state),{},{filterType:t}))}},{key:"handleFilterValueChange",value:function(t,e,a){var n=this.state.filters;n[a][t]=e,this.setState(Pt(Pt({},this.state),{},{filters:n}))}},{key:"addFilterRow",value:function(){var t=this,e=this.state.filters;e[this.state.amountOfFilters]={field:"name",type:"eq",data:""},setTimeout((function(){t.setState(Pt(Pt({},t.state),{},{filters:e}))}),300),setTimeout((function(){t.setState({amountOfFilters:t.state.amountOfFilters+1})}),300)}},{key:"deleteFilterRow",value:function(t){var e=this.state.filters;e.splice(t,1),this.setState(Pt(Pt({},this.state),{},{filters:e,amountOfFilters:e.length}))}},{key:"render",value:function(){var t=this,e={name:{name:"Naam",type:"string"},postalCode:{name:"Postcode",type:"string"},amountDefinitive:{name:"Huidig aantal lening",type:"number"},participationsDefinitive:{name:"Huidig aantal deelnames",type:"number"},dateRegister:{name:"Datum inschrijving",type:"date"},datePayed:{name:"Datum betaald",type:"date"},participationStatusId:{name:"Deelnames status",type:"dropdown",dropDownOptions:this.props.participantMutationStatuses},contactBirthday:{name:"Contact geboortedatum",type:"date"},projectId:{name:"Project",type:"dropdownHas",dropDownOptions:this.state.projects},dateContractSend:{name:"Datum contract verzonden",type:"date"},dateContractRetour:{name:"Datum contract retour",type:"date"},dateEnd:{name:"Einddatum",type:"date"},giftedByContactId:{name:"Geschonken door",type:"dropdown",dropDownOptions:this.state.contacts,optionName:"fullName"},participationsSold:{name:"Deelnames overgedragen",type:"number"},didAcceptAgreement:{name:"Akkoord voorwaarden",type:"dropdown",dropDownOptions:this.state.yesNoOptions},didUnderstandInfo:{name:"Projectinfo begrepen",type:"dropdown",dropDownOptions:this.state.yesNoOptions},participationsRequested:{name:"Deelnames aangevraagd",type:"number"}};return y.a.createElement(it.a,{title:"Extra filters",buttonConfirmText:"Toepassen",confirmAction:this.confirmAction,closeModal:this.closeModal,buttonCancelText:"Sluiten",extraButtonLabel:"Maak groep",extraButtonClass:"btn-success",extraButtonAction:this.props.saveAsGroup},y.a.createElement("div",{className:"row filter-row"},y.a.createElement("h5",null,y.a.createElement("div",{className:"col-xs-6"},y.a.createElement("input",{onChange:function(){return t.handleFilterTypeChange("and")},type:"radio",name:"type",value:"and",id:"and",checked:"and"===this.state.filterType}),y.a.createElement("label",{htmlFor:"and"},'Alle extra filters zijn "EN"')),y.a.createElement("div",{className:"col-xs-6"},y.a.createElement("input",{onChange:function(){return t.handleFilterTypeChange("or")},type:"radio",name:"type",value:"or",id:"or",checked:"or"===this.state.filterType}),y.a.createElement("label",{htmlFor:"or"},'Alle extra filters zijn "OF"')))),y.a.createElement("table",{className:"table"},y.a.createElement("thead",null,y.a.createElement("tr",null,y.a.createElement("th",{className:"col-md-4"},"Zoekveld"),y.a.createElement("th",{className:"col-md-3"}),y.a.createElement("th",{className:"col-md-4"},"Waarde"),y.a.createElement("th",{className:"col-md-1"}))),y.a.createElement("tbody",null,0===this.state.filters.length?y.a.createElement("tr",null,y.a.createElement("td",{colSpan:4},"Geen filters gezet.")):this.state.filters.map((function(a,n){return y.a.createElement(ht.a,{key:n,filter:a,filterNumber:n,fields:e,handleFilterFieldChange:t.handleFilterFieldChange,deleteFilterRow:t.deleteFilterRow,handleFilterValueChange:t.handleFilterValueChange})})))),y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-xs-12 text-right"},y.a.createElement(X.a,{buttonText:"Extra filter",onClickAction:this.addFilterRow}))))}}]),a}(C.Component),Tt=Object(T.b)((function(t){return{participantMutationStatuses:t.systemData.participantMutationStatuses,contactStatuses:t.systemData.contactStatuses}}))(yt);function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=E()(t);if(e){var r=E()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var bt=function(t){m()(a,t);var e=vt(a);function a(t){var n;return o()(this,a),n=e.call(this,t),P()(u()(n),"fetchParticipantsProjectData",(function(){setTimeout((function(){var t=n.state.extraFilters,e=Object(tt.a)(n.props.participantsProjectFilters),a=n.props.participantsProjectSorts,r={limit:20,offset:n.props.participantsProjectPagination.offset},i=n.state.filterType;n.props.fetchParticipantsProject(e,t,a,r,i,!1)}),100)})),P()(u()(n),"resetParticipantProjectFilters",(function(){n.props.clearFilterParticipantsProject(),n.setState({filterType:"and",amountOfFilters:0,extraFilters:[]}),n.fetchParticipantsProjectData()})),P()(u()(n),"toggleShowCheckboxList",(function(){n.state.showCheckboxList?n.setState({showCheckboxList:!1,participantIds:[]}):n.setState({showCheckboxList:!0,participantIds:n.props.participantsProject.meta.participantIdsTotal,checkedAll:!0})})),P()(u()(n),"toggleModal",(function(){n.setState({showModal:!n.state.showModal})})),P()(u()(n),"toggleCheckedAll",(function(){var t=event.target.checked,e=[];t&&(e=n.props.participantsProject.meta.participantIdsTotal),n.setState({participantIds:e,checkedAll:t})})),P()(u()(n),"toggleParticipantCheck",(function(t){var e=t.target.checked,a=Number(t.target.name);e?n.setState({participantIds:[].concat(r()(n.state.participantIds),[a])},n.checkAllParticipantsAreChecked):n.setState({participantIds:n.state.participantIds.filter((function(t){return t!==a})),checkedAll:!1})})),P()(u()(n),"checkParticipantReport",(function(){var t=!1;B.a.isEmpty(n.state.templateId)?(t=!0,n.setState({templateIdError:!0})):n.setState({templateIdError:!1}),B.a.isEmpty(n.state.emailTemplateId)?(t=!0,n.setState({emailTemplateIdError:!0})):n.setState({emailTemplateIdError:!1}),n.state.participantIds.length>0&&!t?(n.props.previewParticipantReport({templateId:n.state.templateId,emailTemplateId:n.state.emailTemplateId,subject:n.state.subject,participantIds:n.state.participantIds}),V.f.push("/project/preview-rapportage")):t||n.setState({showModal:!0,modalText:"Er zijn geen deelnemers geselecteerd.",buttonConfirmText:"Voeg deelnemers toe"})})),P()(u()(n),"getExcel",(function(){n.props.blockUI();for(var t=Math.ceil(n.props.participantsProject.meta.total/1e3),e=n.props.participantsProject.meta.total>1e3,a=1,r=1;r<=t;r++){var i={limit:1e3,offset:1e3*r-1e3},o=Object(tt.a)(n.props.participantsProjectFilters),c=n.state.extraFilters,l=n.props.participantsProjectSorts;st.a.getExcel(o,c,l,i).then((function(r){if(i="Deelnemers-".concat(M()().format("YYYY-MM-DD HH:mm:ss"),".xlsx"),e)var i="Deelnemers-".concat(M()().format("YYYY-MM-DD HH:mm:ss")," (").concat(a," van ").concat(t,").xlsx");pt()(r.data,i),a+=1,n.props.unblockUI()})).catch((function(t){n.props.unblockUI()}))}})),P()(u()(n),"saveAsGroup",(function(){var t=n.state.extraFilters,e=Object(tt.a)(n.props.participantsProjectFilters),a=n.state.filterType;st.a.saveAsGroup({filters:e,extraFilters:t,filterType:a,saveFromProject:!1}).then((function(t){V.f.push("/contact-groep/".concat(t.data.data.id,"/edit"))}))})),n.state={participantIds:[],templateId:"",templateIdError:!1,templates:[],emailTemplateId:"",emailTemplateIdError:!1,emailTemplates:[],subject:[],documentGroup:"",checkedAll:!1,showCheckboxList:!1,showModal:!1,modalText:"",buttonConfirmText:"",readyForCreation:!1,showExtraFilters:!1,filterType:"and",amountOfFilters:0,extraFilters:[],projects:[]},n.handleInputChange=n.handleInputChange.bind(u()(n)),n.handleExtraFiltersChange=n.handleExtraFiltersChange.bind(u()(n)),n.toggleParticipantCheck=n.toggleParticipantCheck.bind(u()(n)),n.handleEmailTemplateChange=n.handleEmailTemplateChange.bind(u()(n)),n.handleSubjectChange=n.handleSubjectChange.bind(u()(n)),n.handlePageClick=n.handlePageClick.bind(u()(n)),n.toggleShowExtraFilters=n.toggleShowExtraFilters.bind(u()(n)),n}return l()(a,[{key:"componentDidMount",value:function(){var t=this;this.fetchParticipantsProjectData(),rt.a.fetchDocumentTemplatesPeekGeneral().then((function(e){var a=[];e.forEach((function(t){"participation"!=t.group&&"revenue"!=t.group||a.push({id:t.id,name:t.name})})),t.setState({templates:a})})),nt.a.fetchEmailTemplatesPeek().then((function(e){t.setState({emailTemplates:e})})),dt.a.all([ft.a.peekProjects(),Et.a.getContactsPeek()]).then(dt.a.spread((function(e,a){t.setState({projects:e,contacts:a})})))}},{key:"componentWillUnmount",value:function(){this.props.clearParticipantsProject()}},{key:"onSubmitFilter",value:function(){var t=this;this.props.setParticipantsProjectPagination({page:0,offset:0}),setTimeout((function(){t.fetchParticipantsProjectData()}),100)}},{key:"handlePageClick",value:function(t){var e=this,a=t.selected,n=Math.ceil(20*a);this.props.setParticipantsProjectPagination({page:a,offset:n}),setTimeout((function(){e.fetchParticipantsProjectData()}),100)}},{key:"handleInputChange",value:function(t){var e=t.target,a="checkbox"===e.type?e.checked:e.value;this.setState({templateId:a})}},{key:"handleSubjectChange",value:function(t){var e=t.target,a="checkbox"===e.type?e.checked:e.value;this.setState({subject:a})}},{key:"handleEmailTemplateChange",value:function(t){var e=this,a=t.target,n="checkbox"===a.type?a.checked:a.value;a.name;this.setState({emailTemplateId:n}),nt.a.fetchEmailTemplateWithUser(n).then((function(t){e.setState({subject:t.subject?t.subject:e.state.subject})}))}},{key:"handleExtraFiltersChange",value:function(t,e,a){var n=this;this.setState({filterType:a,amountOfFilters:e,extraFilters:t}),this.props.setParticipantsProjectPagination({page:0,offset:0}),setTimeout((function(){n.fetchParticipantsProjectData()}),100)}},{key:"checkAllParticipantsAreChecked",value:function(){this.setState({checkedAll:this.state.participantIds.length===this.props.participantsProject.meta.participantIdsTotal.length})}},{key:"prefillExtraFilter",value:function(){this.setState({filterType:"and",amountOfFilters:1,extraFilters:[{field:"name",type:"eq",data:""}]})}},{key:"toggleShowExtraFilters",value:function(){0===this.state.extraFilters.length&&!this.state.showExtraFilters&&this.prefillExtraFilter(),this.setState({showExtraFilters:!this.state.showExtraFilters})}},{key:"render",value:function(){var t,e=this,a=0;return this.state.participantIds&&(a=this.props&&this.props.participantsProject&&this.props.participantsProject.meta&&this.props.participantsProject.meta.participantIdsTotal?this.state.participantIds.length+"/"+this.props.participantsProject.meta.participantIdsTotal.length:this.state.participantIds.length),y.a.createElement(et.a,null,y.a.createElement(at.a,null,this.state.showCheckboxList?null:y.a.createElement("div",{className:"col-md-12 margin-10-top"},y.a.createElement($,{resetParticipantProjectFilters:function(){return e.resetParticipantProjectFilters()},toggleShowCheckboxList:this.toggleShowCheckboxList,handleExtraFiltersChange:this.handleExtraFiltersChange,toggleShowExtraFilters:this.toggleShowExtraFilters,getExcel:this.getExcel,saveAsGroup:this.saveAsGroup})),this.state.showCheckboxList?y.a.createElement(et.a,null,y.a.createElement(at.a,null,y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-md-12"},y.a.createElement(lt.a,{label:"Documentgroep",value:"Deelname / Opbrengst"}),y.a.createElement(ct.a,{label:"Document template",name:"templateId",value:this.state.templateId,options:this.state.templates,onChangeAction:this.handleInputChange,required:"required",error:this.state.templateIdError})),y.a.createElement("div",{className:"col-md-12"},y.a.createElement(ct.a,{label:"E-mail template",name:"emailTemplateId",value:this.state.emailTemplateId,options:this.state.emailTemplates,onChangeAction:this.handleEmailTemplateChange,required:"required",error:this.state.emailTemplateIdError}),y.a.createElement(ot.a,{label:"E-mail onderwerp",name:"subject",value:this.state.subject,onChangeAction:this.handleSubjectChange})),y.a.createElement("div",{className:"col-md-12"},y.a.createElement(lt.a,{label:"Geselecteerde deelnemers",value:a}),y.a.createElement("div",{className:"margin-10-top pull-right btn-group",role:"group"},y.a.createElement(X.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.toggleShowCheckboxList}),y.a.createElement(X.a,{buttonText:"Preview rapportage",onClickAction:this.checkParticipantReport,type:"submit",value:"Submit"})))))):null,y.a.createElement("div",{className:"col-md-12 margin-10-top"},y.a.createElement(Z,(t={participantsProject:this.props.participantsProject,participantsProjectPagination:this.props.participantsProjectPagination,onSubmitFilter:function(){return e.onSubmitFilter()},refreshParticipantsProjectData:function(){return e.fetchParticipantsProjectData()},handlePageClick:this.handlePageClick,showCheckboxList:this.state.showCheckboxList,toggleCheckedAll:this.toggleCheckedAll,checkedAll:this.state.checkedAll,toggleParticipantCheck:this.toggleParticipantCheck,participantIds:this.state.participantIds},P()(t,"toggleCheckedAll",this.toggleCheckedAll),P()(t,"projects",this.state.projects),t)))),this.state.showModal&&y.a.createElement(it.a,{title:"Deelnemer rapport maken",closeModal:this.toggleModal,buttonConfirmText:this.state.buttonConfirmText,confirmAction:this.createParticipantReport},this.state.modalText),this.state.showExtraFilters&&y.a.createElement(Tt,{toggleShowExtraFilters:this.toggleShowExtraFilters,handleExtraFiltersChange:this.handleExtraFiltersChange,extraFilters:this.state.extraFilters,amountOfFilters:this.state.amountOfFilters,filterType:this.state.filterType,saveAsGroup:this.saveAsGroup}))}}]),a}(C.Component);e.default=Object(T.b)((function(t){return{participantsProject:t.participantsProject.list,participantsProjectFilters:t.participantsProject.filters,participantsProjectSorts:t.participantsProject.sorts,participantsProjectPagination:t.participantsProject.pagination}}),(function(t){return Object(v.b)({blockUI:j.a,unblockUI:j.b,previewParticipantReport:b.l,fetchParticipantsProject:k.b,clearParticipantsProject:k.a,setParticipantsProjectPagination:R.a,clearFilterParticipantsProject:I.a},t)}))(bt)},700:function(t,e,a){"use strict";var n=a(0),r=a.n(n),i=a(8),o=a.n(i),c=function(t){var e=t.children,a=t.className,n=t.onMouseEnter,i=t.onMouseLeave;return r.a.createElement("div",{className:"panel panel-default ".concat(a),onMouseEnter:n,onMouseLeave:i},e)};c.defaultProps={className:"",onMouseEnter:function(){},onMouseLeave:function(){}},c.propTypes={className:o.a.string,onMouseEnter:o.a.func,onMouseLeave:o.a.func},e.a=c},701:function(t,e,a){"use strict";var n=a(0),r=a.n(n),i=a(8),o=a.n(i),c=function(t){var e=t.className,a=t.children;return r.a.createElement("div",{className:"panel-body ".concat(e)},a)};c.defaultProps={className:""},c.propTypes={className:o.a.string},e.a=c},704:function(t,e,a){"use strict";var n=a(0),r=a.n(n),i=a(8),o=a.n(i),c=a(707),l=a(708),s=function(t){var e=t.label,a=t.type,n=t.className,i=t.size,o=t.id,s=t.placeholder,u=t.name,p=t.value,m=t.onClickAction,d=t.onChangeAction,h=t.onBlurAction,f=t.required,E=t.readOnly,g=t.maxLength,P=t.error,C=t.min,y=t.max,T=t.step,v=t.textToolTip,b=t.errorMessage,k=t.divSize,I=t.divClassName,R=t.autoComplete;return r.a.createElement("div",{className:"form-group ".concat(k," ").concat(I)},r.a.createElement("label",{htmlFor:o,className:"col-sm-6 ".concat(f)},e),r.a.createElement("div",{className:"".concat(i)},r.a.createElement("input",{type:a,className:"form-control input-sm ".concat(n)+(P?"has-error":""),id:o,placeholder:s,name:u,value:p||"",onClick:m,onChange:d,onBlur:h,readOnly:E,maxLength:g,min:C,max:y,autoComplete:R,step:T}))," ",v&&r.a.createElement("div",{className:"col-sm-1"},r.a.createElement(c.a,{color:"blue",size:"15px","data-tip":v,"data-for":"tooltip-".concat(u)}),r.a.createElement(l.a,{id:"tooltip-".concat(u),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})),P&&r.a.createElement("div",{className:"col-sm-offset-6 col-sm-6"},r.a.createElement("span",{className:"has-error-message"}," ",b)))};s.defaultProps={divClassName:"",className:"",size:"col-sm-6",divSize:"col-sm-6",name:"",type:"text",value:"",required:"",readOnly:!1,maxLength:null,error:!1,min:"",max:"",step:"",textToolTip:"",errorMessage:"",autoComplete:"off",onBlurAction:function(){},onClickAction:function(){},onChangeAction:function(){}},s.propTypes={label:o.a.oneOfType([o.a.string,o.a.object]).isRequired,type:o.a.string,className:o.a.string,divClassName:o.a.string,size:o.a.string,divSize:o.a.string,id:o.a.string,placeholder:o.a.string,name:o.a.string.isRequired,value:o.a.oneOfType([o.a.string,o.a.number]),onClickAction:o.a.func,onChangeAction:o.a.func,onBlurAction:o.a.func,required:o.a.string,readOnly:o.a.bool,maxLength:o.a.string,error:o.a.bool,min:o.a.string,max:o.a.string,step:o.a.string,textToolTip:o.a.string,errorMessage:o.a.string,autoComplete:o.a.string},e.a=s},706:function(t,e,a){"use strict";var n=a(0),r=a.n(n),i=a(4),o=a(8),c=a.n(o),l=a(707),s=a(708),u=function(t){var e=t.label,a=t.className,n=t.id,o=t.value,c=t.link,u=t.hidden,p=t.name,m=t.textToolTip;return c.length>0?r.a.createElement("div",{className:a,style:u?{display:"none"}:{}},r.a.createElement("label",{htmlFor:n,className:"col-sm-6"},e),r.a.createElement("div",{className:"col-sm-6",id:n,onClick:null},r.a.createElement(i.b,{to:c,className:"link-underline"},o)," ",m&&r.a.createElement("span",null,r.a.createElement(l.a,{color:"blue",size:"15px","data-tip":m,"data-for":"tooltip-".concat(p)}),r.a.createElement(s.a,{id:"tooltip-".concat(p),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"})))):r.a.createElement("div",{className:a,style:u?{display:"none"}:{}},r.a.createElement("label",{htmlFor:n,className:"col-sm-6"},e),r.a.createElement("div",{className:"col-sm-6",id:n},o," ",m&&r.a.createElement("span",null,r.a.createElement(l.a,{color:"blue",size:"15px","data-tip":m,"data-for":"tooltip-".concat(p)}),r.a.createElement(s.a,{id:"tooltip-".concat(p),effect:"float",place:"right",multiline:!0,"aria-haspopup":"true"}))))};u.defaultProps={className:"col-sm-6",value:"",name:"",textToolTip:"",link:"",hidden:!1},u.propTypes={label:c.a.oneOfType([c.a.string,c.a.object]).isRequired,className:c.a.string,id:c.a.string,name:c.a.string,textToolTip:c.a.string,value:c.a.oneOfType([c.a.string,c.a.number]),link:c.a.string,hidden:c.a.bool},e.a=u},749:function(t,e,a){"use strict";e.a=function(t){return t||(t=0),t=parseFloat(t),isNaN(t)?"Ongeldig bedrag":"€ ".concat(t.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}))}},767:function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"k",(function(){return o})),a.d(e,"n",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"i",(function(){return s})),a.d(e,"m",(function(){return u})),a.d(e,"j",(function(){return p})),a.d(e,"b",(function(){return m})),a.d(e,"l",(function(){return d})),a.d(e,"a",(function(){return h})),a.d(e,"d",(function(){return f})),a.d(e,"f",(function(){return E}));var n=function(t){return{type:"FETCH_PROJECT",id:t}},r=function(t){return{type:"DELETE_PROJECT",id:t}},i=function(){return{type:"CLEAR_PROJECT"}},o=function(t){return{type:"NEW_VALUE_COURSE",valueCourse:t}},c=function(t){return{type:"UPDATE_VALUE_COURSE",valueCourse:t}},l=function(t){return{type:"DELETE_VALUE_COURSE",id:t}},s=function(t){return{type:"FETCH_PROJECT_REVENUE",id:t}},u=function(t){return{type:"PROJECT_REVENUE_PREVIEW_REPORT",data:t}},p=function(t){return{type:"PROJECT_REVENUE_GET_DISTRIBUTION",data:t}},m=function(){return{type:"CLEAR_PROJECT_REVENUE_PREVIEW_REPORT"}},d=function(t){return{type:"PROJECT_PARTICIPANT_PREVIEW_REPORT",data:t}},h=function(){return{type:"CLEAR_PROJECT_PARTICIPANT_PREVIEW_REPORT"}},f=function(){return{type:"CLEAR_PROJECT_REVENUE"}},E=function(t){return{type:"DELETE_REVENUE",id:t}}},976:function(t,e,a){"use strict";a.d(e,"i",(function(){return n})),a.d(e,"f",(function(){return r})),a.d(e,"j",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"l",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"d",(function(){return s})),a.d(e,"k",(function(){return u})),a.d(e,"b",(function(){return p})),a.d(e,"g",(function(){return m})),a.d(e,"h",(function(){return d})),a.d(e,"m",(function(){return h})),a.d(e,"a",(function(){return f}));var n=function(t){return{type:"SET_FILTER_PROJECT_PARTICIPANT_ID",id:t}},r=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_CONTACT_TYPE",contactType:t}},i=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_NAME",name:t}},o=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_ADDRESS",address:t}},c=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_POSTAL_CODE",postalCode:t}},l=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_CITY",city:t}},s=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_AMOUNT_DEFINITIVE",amountDefinitive:t}},u=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_PARTICIPATIONS_DEFINITIVE",participationsDefinitive:t}},p=function(t){return{type:"SET_FILTER_PARTICIPANT_MUTATION_STATUS_ID",participantMutationStatusId:t}},m=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_DATE_REGISTER",dateRegister:t}},d=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_ENERGY_SUPPLIER_ID",energySupplierId:t}},h=function(t){return{type:"SET_FILTER_PARTICIPANT_PROJECT_ID",projectId:t}},f=function(){return{type:"CLEAR_FILTER_PARTICIPANTS_PROJECT"}}}}]);