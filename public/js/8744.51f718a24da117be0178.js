"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[8744],{9391:(e,n,t)=>{var a=t(46518),l=t(96395),c=t(80550),i=t(79039),r=t(97751),o=t(94901),s=t(2293),d=t(93438),m=t(36840),v=c&&c.prototype;if(a({target:"Promise",proto:!0,real:!0,forced:!!c&&i((function(){v.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var n=s(this,r("Promise")),t=o(e);return this.then(t?function(t){return d(n,e()).then((function(){return t}))}:e,t?function(t){return d(n,e()).then((function(){throw t}))}:e)}}),!l&&o(c)){var u=r("Promise").prototype.finally;v.finally!==u&&m(v,"finally",u,{unsafe:!0})}},38744:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var a=t(5544),l=t(96540),c=t(47767),i=t(69733),r=t(62493),o=t(55849),s=(t(28706),t(64346),t(62062),t(26099),t(91877)),d=t(84976);const m=function(e){var n=e.financialOverviewContacts,t=void 0===n?[]:n,a=e.isLoading,c=void 0!==a&&a,i=e.changeFinancialOverviewContact,r=Array.isArray(t)&&t.length>0;return l.createElement("nav",{className:"financialOverviewContacts-list open sticky"},l.createElement("div",{className:"send-financial-overview-contacts-sidebar-menu",style:{color:"$brand-primary"}},l.createElement(s.Ay,{highlightColor:"$brand-primary",highlightBgColor:"#e5e5e5",hoverBgColor:"#F1EFF0",defaultSelected:"financialOverviewContact"},r?t.map((function(e){var n,t,a,c,r,o,m,v,u=e.id,f=null!==(n=null!==(t=null!==(a=null!==(c=e.contactNumber)&&void 0!==c?c:e.contact_number)&&void 0!==a?a:e.contactId)&&void 0!==t?t:e.contact_id)&&void 0!==n?n:"",w=null!==(r=null!==(o=null!==(m=e.contactName)&&void 0!==m?m:e.contactFullNameFnf)&&void 0!==o?o:null===(v=e.contact)||void 0===v?void 0:v.fullNameFnf)&&void 0!==r?r:"Onbekende contactpersoon",E="Geen e-mail bekend"===e.emailed_to||!1===e.emailToAllowed;return l.createElement(s.so,{onNavClick:function(){return i&&i(u)},key:u,id:"foc-".concat(u)},l.createElement(s.Jm,null,l.createElement(d.N_,{className:E?"send-financial-overview-contacts-list-link-error":"send-financial-overview-contacts-list-link"},f?"".concat(f," - ").concat(w):w)))})):l.createElement(s.so,{id:"financialOverviewContact"},l.createElement(s.Jm,null,c?l.createElement(d.N_,{className:"send-financial-overview-contacts-list-link"},"Gegevens aan het laden."):l.createElement(d.N_,{className:"send-financial-overview-contacts-list-link"},"Geen waardestaten beschikbaar."))))))};var v=t(69188),u=(t(76031),t(41919));const f=function(e){var n=e.financialOverviewContactId,t=e.isLoading,c=void 0!==t&&t,i=e.amountOfFinancialOverviewContacts,r=void 0===i?0:i,o=(0,l.useState)(null),s=(0,a.A)(o,2),d=s[0],m=s[1],f=(0,l.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&v.A.download(e).then((function(e){m(e.data)})).catch((function(){n<2&&setTimeout((function(){f(e,n+1)}),500)}))}),[]);return(0,l.useEffect)((function(){m(null),n&&f(n,0)}),[n,f]),c?l.createElement("div",null,"Gegevens aan het laden."):d?l.createElement("div",null,l.createElement(u.A,{file:d})):r>0?l.createElement("div",null,"Selecteer links in het scherm een contact om een preview te zien."):l.createElement("div",null,"Geen gegevens gevonden.")};var w=t(53530);const E=function(e){var n=e.financialOverviewContactId,t=e.isLoading,c=void 0!==t&&t,i=e.amountOfFinancialOverviewContacts,r=void 0===i?0:i,o=(0,l.useState)(null),s=(0,a.A)(o,2),d=s[0],m=s[1];return(0,l.useEffect)((function(){n?v.A.getEmailPreview(n).then((function(e){m(e.data)})).catch((function(){m(null)})):m(null)}),[n]),c?l.createElement("div",null,"Gegevens aan het laden."):d?l.createElement("div",null,l.createElement("div",{className:"row margin-10-top"},l.createElement("div",{className:"col-sm-12"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{className:"col-sm-12"},"Aan")),l.createElement("div",{className:"col-sm-9"},d.to)))),d.bcc?l.createElement("div",{className:"row margin-10-top"},l.createElement("div",{className:"col-sm-12"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{className:"col-sm-12"},"Bcc")),l.createElement("div",{className:"col-sm-9"},d.bcc)))):null,l.createElement("div",{className:"row margin-10-top"},l.createElement("div",{className:"col-sm-12"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{className:"col-sm-12"},"Onderwerp")),l.createElement("div",{className:"col-sm-9"},d.subject)))),l.createElement("div",{className:"row"},l.createElement(w.A,{label:"Tekst",value:d.htmlBody}))):r>0?l.createElement("div",null,"Selecteer links in het scherm een contact om een preview te zien."):l.createElement("div",null,"Geen gegevens gevonden.")};var g=t(91858),p=t(55956),N=(t(3362),t(9391),t(63750)),h=t(5419),A=t.n(h),O=t(46749);function y(e){var n=e.closeModal,t=e.financialOverviewId,r=e.financialOverviewContactIds,o=void 0===r?[]:r,s=e.financialOverviewContactId,d=e.isInterimMode,m=(0,l.useState)(!1),u=(0,a.A)(m,2),f=u[0],w=u[1],E=(0,c.Zp)(),g=(0,i.wA)();return l.createElement(N.A,{closeModal:n,confirmAction:function(e){e.preventDefault(),w(!0),!0===d&&s?v.A.sendInterim(s).then((function(e){e&&e.headers&&e.headers["x-filename"]&&A()(e.data,e.headers["x-filename"])})).catch((function(e){var n,t;g((0,O.N)(null!==(n=null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&void 0!==n?n:500,"Verzenden is mislukt."))})).finally((function(){E("/waardestaat/".concat(t))})):v.A.sendAll(t,o,d).then((function(e){e&&e.headers&&e.headers["x-filename"]&&A()(e.data,e.headers["x-filename"])})).catch((function(e){var n,t;g((0,O.N)(null!==(n=null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&void 0!==n?n:500,"Verzenden is mislukt."))})).finally((function(){E("/waardestaat/".concat(t))}))},title:"Waardestaten verzenden",buttonConfirmText:"Verzenden",loading:f},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Wilt u alle geselecteerde definitieve waardestaten (",o.length,") verzenden?"))))}function b(e){var n=e.closeModal,t=e.financialOverviewId,i=e.financialOverviewContactIds,r=void 0===i?[]:i,o=e.financialOverviewContactId,s=e.isInterimMode,d=(0,l.useState)(!1),m=(0,a.A)(d,2),u=m[0],f=m[1],w=(0,c.Zp)();return l.createElement(N.A,{closeModal:n,confirmAction:function(e){e.preventDefault(),f(!0),!0===s&&o?v.A.sendInterimPost(o).then((function(e){e&&e.headers&&e.headers["x-filename"]&&A()(e.data,e.headers["x-filename"])})).finally((function(){w("/waardestaat/".concat(t))})):v.A.sendAllPost(t,r,s).then((function(e){e&&e.headers&&e.headers["x-filename"]&&A()(e.data,e.headers["x-filename"])})).finally((function(){w("/waardestaat/".concat(t))}))},title:"Waardestaten downloaden",buttonConfirmText:"Downloaden",loading:u},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Wilt u alle geselecteerde definitieve waardestaten (",r.length,") downloaden en doorzetten naar status verzonden?"))))}function C(e){var n=e.type,t=e.selectedIds,i=void 0===t?[]:t,r=e.amountOfFinancialOverviewContacts,o=void 0===r?0:r,s=e.financialOverviewId,d=e.financialOverviewContactId,m=e.isInterimMode,v=(0,c.Zp)(),u=(0,l.useState)(!1),f=(0,a.A)(u,2),w=f[0],E=f[1],N=function(){return E((function(e){return!e}))};return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},l.createElement(g.A,{iconName:"arrowLeft",onClickAction:function(){return v(-1)}}),o>0&&"email"===n&&l.createElement(p.A,{buttonText:"Waardestaten e-mailen",onClickAction:N}),o>0&&"post"===n&&l.createElement(p.A,{buttonText:"Waardestaten downloaden",onClickAction:N}))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Te verzenden waardestaten versturen (",o,")")),l.createElement("div",{className:"col-md-4"}),w&&"email"===n&&l.createElement(y,{financialOverviewContactIds:i,closeModal:N,financialOverviewId:s,financialOverviewContactId:d,isInterimMode:m}),w&&"post"===n&&l.createElement(b,{financialOverviewContactIds:i,closeModal:N,financialOverviewId:s,financialOverviewContactId:d,isInterimMode:m}))}function I(){var e=(0,c.g)(),n=e.id,t=e.type,s=e.financialOverviewContactId,d=(0,i.d4)((function(e){return e.financialOverviewPreview.selectedIds})),u=(0,l.useState)([]),w=(0,a.A)(u,2),g=w[0],p=w[1],N=(0,l.useState)(""),h=(0,a.A)(N,2),A=h[0],O=h[1],y=(0,l.useState)(!1),b=(0,a.A)(y,2),I=b[0],F=b[1],k=!!s,T=(0,l.useCallback)((function(){F(!0),v.A.getFinancialOverviewContactsForSending(n,d,t).then((function(e){var n,t,a=null!==(n=null==e||null===(t=e.data)||void 0===t?void 0:t.data)&&void 0!==n?n:[];p(a),a.length>0?O(a[0].id):O(""),F(!1)})).catch((function(){F(!1)}))}),[n,t,d]),S=(0,l.useCallback)((function(){s&&(F(!0),v.A.fetchFinancialOverviewContactForInterim(s).then((function(e){var n,t,a=null!==(n=null==e||null===(t=e.data)||void 0===t?void 0:t.data)&&void 0!==n?n:null;null!=a&&a.allowInterimFinancialOverview?(p(a?[a]:[]),O(a?a.id:"")):(p([]),O("")),F(!1)})).catch((function(){p([]),O(""),F(!1)})))}),[s]);(0,l.useEffect)((function(){k?S():T()}),[k,S,T]);var x=g?g.length:0;return l.createElement(l.Fragment,null,I||0!==x?l.createElement("div",null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(r.A,null,l.createElement(o.A,{className:"panel-small"},l.createElement(C,{type:t,selectedIds:k?[s]:d,amountOfFinancialOverviewContacts:x,financialOverviewId:n,financialOverviewContactId:s,isInterimMode:k})))))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(r.A,null,l.createElement(o.A,{className:"panel-financial-overview-contacts-list"},l.createElement(m,{financialOverviewContacts:g,isLoading:I,changeFinancialOverviewContact:function(e){O(e)}}))))),"email"===t?l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-5"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(r.A,null,l.createElement(o.A,null,l.createElement(f,{financialOverviewContactId:A,isLoading:I,amountOfFinancialOverviewContacts:x||-1}))))),l.createElement("div",{className:"col-md-5"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(r.A,null,l.createElement(o.A,null,l.createElement(E,{financialOverviewContactId:A,isLoading:I,amountOfFinancialOverviewContacts:x||-1})))))):l.createElement("div",{className:"col-md-6"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(r.A,null,l.createElement(o.A,null,l.createElement(f,{financialOverviewContactId:A}))))))):l.createElement("p",null,"Geen waardestaat gegevens"))}},53530:(e,n,t)=>{t.d(n,{A:()=>d});var a=t(96540),l=t(96522),c=t(5556),i=t.n(c),r=t(62493),o=t(55956),s=function(e){var n=e.label,t=e.className,c=e.id,i=e.value,s=e.switchToEdit;return a.createElement("div",{className:t},a.createElement("label",{htmlFor:c,className:"col-sm-3"},n,s?a.createElement("span",null,a.createElement("br",null),a.createElement(o.A,{buttonClassName:"btn-success btn-padding-small",buttonText:"Wijzig",onClickAction:s})):""),a.createElement(r.A,{className:"col-sm-9"},a.createElement(l.A,null,a.createElement("div",{id:c,dangerouslySetInnerHTML:{__html:i}}))))};s.defaultProps={className:"col-sm-12",value:""},s.propTypes={label:i().string.isRequired,className:i().string,id:i().string,value:i().oneOfType([i().string,i().number])};const d=s},64346:(e,n,t)=>{t(46518)({target:"Array",stat:!0},{isArray:t(34376)})},69188:(e,n,t)=>{t.d(n,{A:()=>c}),t(28706),t(60739);var a=t(61941),l="financial-overview-contact";const c={fetchFinancialOverviewContacts:function(e,n,t,c,i,r,o){var s="".concat(l,"/grid");return(0,a.A)().get(s,{params:{financialOverviewId:JSON.stringify(c),onlyInterimFinancialOverviewContacts:JSON.stringify(i),onlyEmailFinancialOverviewContacts:JSON.stringify(r),onlyPostFinancialOverviewContacts:JSON.stringify(o),filters:JSON.stringify(e),sorts:JSON.stringify(n),limit:t.limit,offset:t.offset}})},fetchFinancialOverviewContactDetails:function(e){var n="".concat(l,"/").concat(e,"/get");return(0,a.A)().get(n)},fetchFinancialOverviewContactForInterim:function(e){var n="".concat(l,"/").concat(e,"/get-for-interim");return(0,a.A)().get(n)},updateFinancialOverviewContactForInterim:function(e,n,t){var c="".concat(l,"/").concat(e,"/update-for-interim");return(0,a.A)().post(c,{emailTemplateFinancialOverviewId:n,documentTemplateFinancialOverviewId:t})},getFinancialOverviewContactsForSending:function(e,n,t){var c="".concat(l,"/").concat(e,"/sending/").concat(t);return(0,a.A)().post(c,{ids:n})},sendAll:function(e,n){var t="".concat(l,"/").concat(e,"/send-all");document.body.style.cursor="wait";var c=(0,a.A)().post(t,{ids:n},{responseType:"blob"});return document.body.style.cursor="default",c},sendAllPost:function(e,n){var t="".concat(l,"/").concat(e,"/send-all-post");document.body.style.cursor="wait";var c=(0,a.A)().post(t,{ids:n},{responseType:"blob"});return document.body.style.cursor="default",c},sendInterim:function(e){var n="".concat(l,"/").concat(e,"/send-interim");document.body.style.cursor="wait";var t=(0,a.A)().post(n,{responseType:"blob"});return document.body.style.cursor="default",t},sendInterimPost:function(e){var n="".concat(l,"/").concat(e,"/send-interim-post");document.body.style.cursor="wait";var t=(0,a.A)().post(n,{responseType:"blob"});return document.body.style.cursor="default",t},download:function(e){var n="".concat(l,"/").concat(e,"/download");return(0,a.A)().get(n,{responseType:"blob"})},downloadPreview:function(e){var n="".concat(l,"/").concat(e,"}/download-preview");return(0,a.A)().get(n,{responseType:"blob"})},getEmailPreview:function(e){var n="".concat(l,"/").concat(e,"/email-preview");return(0,a.A)().get(n)}}}}]);