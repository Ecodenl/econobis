"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[9113],{7047:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(69265),c="/campaign";const o={fetchCampaign:function(t){var e=t.id,n="".concat(c,"/").concat(e);return a.Z.get(n)},fetchCampaignIntakes:function(t){var e=t.id,n=t.page,o="".concat(c,"/").concat(e,"/intakes?page=").concat(n);return a.Z.get(o)},fetchCampaignOpportunities:function(t){var e=t.id,n=t.page,o="".concat(c,"/").concat(e,"/opportunities?page=").concat(n);return a.Z.get(o)},updateCampaign:function(t,e){var n="".concat(c,"/").concat(t);return a.Z.post(n,e)},storeCampaign:function(t){var e="".concat(c);return a.Z.post(e,t)},deleteCampaign:function(t){var e="".concat(c,"/").concat(t,"/delete");return a.Z.post(e)},attachResponse:function(t,e){var n="".concat(c,"/").concat(t,"/response/").concat(e,"/attach");return a.Z.post(n)},detachResponse:function(t,e){var n="".concat(c,"/").concat(t,"/response/").concat(e,"/detach");return a.Z.post(n)},attachOrganisation:function(t,e){var n="".concat(c,"/").concat(t,"/organisation/").concat(e,"/attach");return a.Z.post(n)},detachOrganisation:function(t,e){var n="".concat(c,"/").concat(t,"/organisation/").concat(e,"/detach");return a.Z.post(n)},attachCoach:function(t,e){var n="".concat(c,"/").concat(t,"/coach/").concat(e,"/attach");return a.Z.post(n)},detachCoach:function(t,e){var n="".concat(c,"/").concat(t,"/coach/").concat(e,"/detach");return a.Z.post(n)},attachProjectManager:function(t,e){var n="".concat(c,"/").concat(t,"/projectManager/").concat(e,"/attach");return a.Z.post(n)},detachProjectManager:function(t,e){var n="".concat(c,"/").concat(t,"/projectManager/").concat(e,"/detach");return a.Z.post(n)},attachExternalParty:function(t,e){var n="".concat(c,"/").concat(t,"/externalParty/").concat(e,"/attach");return a.Z.post(n)},detachExternalParty:function(t,e){var n="".concat(c,"/").concat(t,"/externalParty/").concat(e,"/detach");return a.Z.post(n)},updateCampaignOwner:function(t,e){var n="".concat(c,"/").concat(t,"/owner/").concat(e,"/associate");return a.Z.post(n)}}},29113:(t,e,n)=>{n.r(e),n.d(e,{default:()=>A});var a=n(15671),c=n(43144),o=n(97326),r=n(60136),i=n(82963),s=n(61120),l=n(67294),u=n(37974),m=n(61409),p=n(55451);const h=(0,u.$j)((function(t){return{permissions:t.meDetails.permissions,campaigns:t.campaigns.list}}))((function(t){var e=t.permissions,n=void 0===e?{}:e,a=t.campaigns.meta,c=void 0===a?{}:a;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(p.Z,{iconName:"glyphicon-arrow-left",onClickAction:m.mW.goBack}),n.manageMarketing&&l.createElement(p.Z,{iconName:"glyphicon-plus",onClickAction:function(){m.nA.push("campagne/nieuw")}}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title"},"Campagnes")),l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"pull-right"},"Resultaten: ",c.total||0)))}));var f=n(87462),d=n(4942),g=n(96498),v=n(75286),E=n(24480),Z=n(52822),y=n(30381),C=n.n(y);C().locale("nl");var w=function(t){(0,r.Z)(u,t);var e,n,o=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.Z)(e);if(n){var c=(0,s.Z)(this).constructor;t=Reflect.construct(a,arguments,c)}else t=a.apply(this,arguments);return(0,i.Z)(this,t)});function u(t){var e;return(0,a.Z)(this,u),(e=o.call(this,t)).state={showActionButtons:!1,highlightRow:""},e}return(0,c.Z)(u,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(t){m.nA.push("campagne/".concat(t))}},{key:"render",value:function(){var t=this,e=this.props,n=e.id,a=e.number,c=e.startDate,o=e.endDate,r=e.name,i=e.type,s=e.status,u=e.amountResponses;return l.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return t.openItem(n)},onMouseEnter:function(){return t.onRowEnter()},onMouseLeave:function(){return t.onRowLeave()}},l.createElement("td",null,a),l.createElement("td",null,c?C()(c).format("L"):""),l.createElement("td",null,o?C()(o).format("L"):""),l.createElement("td",null,r),l.createElement("td",null,i),l.createElement("td",null,s),l.createElement("td",null,u),l.createElement("td",null,this.state.showActionButtons?l.createElement("a",{role:"button",onClick:function(){return t.openItem(n)}},l.createElement("span",{className:"glyphicon glyphicon-pencil mybtn-success"})," "):"",(this.state.showActionButtons&&this.props.permissions.manageMarketing,"")))}}]),u}(l.Component);const P=(0,u.$j)((function(t){return{permissions:t.meDetails.permissions}}))(w);var D=n(41355),k=n(7047);const b=function(t){return l.createElement(D.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:t.closeDeleteItemModal,confirmAction:function(){return k.Z.deleteCampaign(t.id).then((function(){t.fetchCampaignsData()})),void t.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder campagne ",l.createElement("strong",null,t.name),"?")};var R=n(51910);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(t){(0,r.Z)(m,t);var e,n,u=(e=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.Z)(e);if(n){var c=(0,s.Z)(this).constructor;t=Reflect.construct(a,arguments,c)}else t=a.apply(this,arguments);return(0,i.Z)(this,t)});function m(t){var e;return(0,a.Z)(this,m),e=u.call(this,t),(0,d.Z)((0,o.Z)(e),"showDeleteItemModal",(function(t,n){e.setState(N(N({},e.state),{},{showDeleteItem:!0,deleteItem:N(N({},e.state.deleteItem),{},{id:t,name:n})}))})),(0,d.Z)((0,o.Z)(e),"closeDeleteItemModal",(function(){e.setState(N(N({},e.state),{},{showDeleteItem:!1,deleteItem:N(N({},e.state.deleteItem),{},{id:"",name:""})}))})),e.state={showDeleteItem:!1,deleteItem:{id:"",name:""}},e}return(0,c.Z)(m,[{key:"render",value:function(){var t=this,e=this.props.campaigns,n=e.data,a=void 0===n?[]:n,c=e.meta,o=void 0===c?{}:c,r="",i=!0;return this.props.hasError?r="Fout bij het ophalen van campagnes.":this.props.isLoading?r="Gegevens aan het laden.":0===a.length?r="Geen campagnes gevonden!":i=!1,l.createElement("div",null,l.createElement(g.Z,null,l.createElement(v.Z,null,l.createElement("tr",{className:"thead-title-quaternary"},l.createElement(Z.Z,{title:"Nummer",width:"10%"}),l.createElement(Z.Z,{title:"Begindatum",width:"10%"}),l.createElement(Z.Z,{title:"Einddatum",width:"10%"}),l.createElement(Z.Z,{title:"Naam",width:"20%"}),l.createElement(Z.Z,{title:"Type",width:"20%"}),l.createElement(Z.Z,{title:"Status",width:"10%"}),l.createElement(Z.Z,{title:"Aantal responses",width:"14%"}),l.createElement(Z.Z,{title:"",width:"6%"}))),l.createElement(E.Z,null,i?l.createElement("tr",null,l.createElement("td",{colSpan:9},r)):a.map((function(e){return l.createElement(P,(0,f.Z)({key:e.id},e,{showDeleteItemModal:t.showDeleteItemModal}))})))),l.createElement("div",{className:"col-md-6 col-md-offset-3"},l.createElement(R.Z,{onPageChangeAction:this.props.handlePageClick,totalRecords:o.total,initialPage:this.props.campaignsPagination.page})),this.state.showDeleteItem&&l.createElement(b,(0,f.Z)({closeDeleteItemModal:this.closeDeleteItemModal,fetchCampaignsData:this.props.fetchCampaignsData},this.state.deleteItem)))}}]),m}(l.Component);const j=(0,u.$j)((function(t){return{campaigns:t.campaigns.list,campaignsPagination:t.campaigns.pagination,isLoading:t.loadingData.isLoading,hasError:t.loadingData.hasError}}),null)(O);var M=function(t){(0,r.Z)(m,t);var e,n,u=(e=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.Z)(e);if(n){var c=(0,s.Z)(this).constructor;t=Reflect.construct(a,arguments,c)}else t=a.apply(this,arguments);return(0,i.Z)(this,t)});function m(t){var e;return(0,a.Z)(this,m),(e=u.call(this,t)).fetchCampaignsData=e.fetchCampaignsData.bind((0,o.Z)(e)),e.handlePageClick=e.handlePageClick.bind((0,o.Z)(e)),e}return(0,c.Z)(m,[{key:"componentDidMount",value:function(){this.fetchCampaignsData()}},{key:"componentWillUnmount",value:function(){this.props.clearCampaigns()}},{key:"fetchCampaignsData",value:function(){var t=this;setTimeout((function(){var e={limit:20,offset:t.props.campaignsPagination.offset};t.props.fetchCampaigns(e)}),100)}},{key:"handlePageClick",value:function(t){var e=t.selected,n=Math.ceil(20*e);this.props.setCampaignsPagination({page:e,offset:n}),this.fetchCampaignsData()}},{key:"render",value:function(){return l.createElement("div",null,l.createElement("div",{className:"panel panel-default col-md-12"},l.createElement("div",{className:"panel-body"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(h,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(j,{handlePageClick:this.handlePageClick,fetchCampaignsData:this.fetchCampaignsData})))))}}]),m}(l.Component);const A=(0,u.$j)((function(t){return{campaignsPagination:t.campaigns.pagination}}),(function(t){return{fetchCampaigns:function(e){t(function(t){return{type:"FETCH_CAMPAIGNS",pagination:t}}(e))},clearCampaigns:function(){t({type:"CLEAR_CAMPAIGNS"})},setCampaignsPagination:function(e){t(function(t){return{type:"SET_CAMPAIGNS_PAGINATION",pagination:t}}(e))}}}))(M)}}]);