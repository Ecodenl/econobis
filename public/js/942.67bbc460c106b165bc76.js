"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[942],{46613:(e,t,n)=>{n.d(t,{Js:()=>a,Pk:()=>r,Wu:()=>i});var a=function(e){return{type:"FETCH_INVOICE_DETAILS",id:e}},r=function(e,t){return{type:"FETCH_INVOICE_FROM_TWINFIELD_DETAILS",twinfieldCode:e,twinfieldNumber:t}},i=function(e){return{type:"DELETE_INVOICE",id:e}}},91818:(e,t,n)=>{n.d(t,{AM:()=>r,As:()=>o,WM:()=>a,nk:()=>c,p:()=>i});var a=function(e,t,n,a,r,i,o){return{type:"FETCH_INVOICES",filters:e,sorts:t,pagination:n,administrationId:a,onlyEmailInvoices:r,onlyPostInvoices:i,setInvoicesPaid:o}},r=function(e){return{type:"INVOICE_PREVIEW_SEND",data:e}},i=function(){return{type:"CLEAR_INVOICE_PREVIEW_SEND"}},o=function(){return{type:"CLEAR_INVOICES"}},c=function(e){return{type:"DELETE_INVOICE_FROM_GRID",id:e}}},30942:(e,t,n)=>{n.r(t),n.d(t,{default:()=>pt});var a=n(15671),r=n(43144),i=n(60136),o=n(82963),c=n(61120),l=n(67294),s=n(37974),u=n(46613),m=n(97326),d=n(4942),p=n(61409),h=n(55451),f=n(41355),v=n(73813),g=n(30381),E=n.n(g),b=n(48966),y=n.n(b),Z=n(54138),P=n(9181);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(D(D({},t.state),{},{invoice:D(D({},t.state.invoice),{},(0,d.Z)({},r,a))}))})),(0,d.Z)((0,m.Z)(t),"handleInputChangeDate",(function(e,n){t.setState(D(D({},t.state),{},{invoice:D(D({},t.state.invoice),{},(0,d.Z)({},n,e))}))})),(0,d.Z)((0,m.Z)(t),"confirmAction",(function(e){e.preventDefault();var n=t.state.invoice,a={},r=!1;y().isEmpty(n.datePaid+"")&&(a.datePaid=!0,r=!0),t.setState(D(D({},t.state),{},{errors:a})),r||v.Z.updateInvoice(n).then((function(e){t.props.fetchInvoiceDetails(n.id),t.props.closeModal()}))})),t.state={invoice:{id:e.invoiceId,datePaid:E()().format("Y-MM-DD"),paymentReference:null},errors:{datePaid:!1}},t}return(0,r.Z)(u,[{key:"render",value:function(){var e=this.state.invoice,t=e.datePaid,n=e.paymentReference;return l.createElement(f.Z,{buttonConfirmText:"Nota betalen",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Nota betalen"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Vul de betaaldatum en evt. het betalingskenmerk in en klik op Nota's betalen. Er wordt dan een betaling aangemaakt voor het openstaande bedrag (€",this.props.amountOpen.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),")."))),l.createElement("div",{className:"row"},l.createElement(Z.Z,{divSize:"col-sm-12",label:"Datum betaald",name:"datePaid",value:t,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.datePaid})),l.createElement("div",{className:"row"},l.createElement(P.Z,{divSize:"col-sm-12",label:"Betalingskenmerk",name:"paymentReference",value:n,onChangeAction:this.handleInputChange})))}}]),u}(l.Component);const N=(0,s.$j)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(I);var O=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"confirmAction",(function(e){e.preventDefault(),v.Z.sendNotification(t.props.invoiceId).then((function(e){t.props.fetchInvoiceDetails(t.props.invoiceId),t.props.closeModal()}))})),t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(f.Z,{buttonConfirmText:"Versturen",closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Notificatie versturen"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,this.props.reminderText))))}}]),u}(l.Component);const C=(0,s.$j)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(O);var S=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"confirmAction",(function(e){e.preventDefault(),v.Z.setIrrecoverable(t.props.invoiceId).then((function(e){t.props.fetchInvoiceDetails(t.props.invoiceId),t.props.closeModal()}))})),t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(f.Z,{closeModal:this.props.closeModal,confirmAction:this.confirmAction,title:"Nota oninbaar"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 margin-10-bottom"},l.createElement("span",null,"Wilt u deze nota als oninbaar markeren?"))))}}]),u}(l.Component);const R=(0,s.$j)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(S);var k=n(35823),j=n.n(k),T=n(91818);const A=(0,s.$j)(null,(function(e){return{deleteInvoice:function(t){e((0,u.Wu)(t))}}}))((function(e){return l.createElement(f.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteInvoice(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},l.createElement("p",null,"Verwijder nota: ",l.createElement("strong",null," ","".concat(e.number,"?"))))}));var x=n(11776);var L=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"download",(function(){v.Z.download(t.props.invoiceDetails.id).then((function(e){j()(e.data,e.headers["x-filename"])}))})),(0,d.Z)((0,m.Z)(t),"showSend",(function(){var e="collection"===t.props.invoiceDetails.paymentTypeId?"incasso":"overboeken";"incasso"==e&&t.props.invoiceDetails.totalInclVatInclReduction<0?t.props.setError(405,'Een nota met een negatief bedrag kan geen incasso zijn. Wil je a.u.b. de betaalwijze van de order aanpassen in "Overboeken".'):(t.props.previewSend([t.props.invoiceDetails.id]),p.nA.push("/financieel/".concat(t.props.invoiceDetails.order.administrationId,"/notas/te-verzenden/verzenden/email/").concat(e)))})),(0,d.Z)((0,m.Z)(t),"showSendPost",(function(){var e="collection"===t.props.invoiceDetails.paymentTypeId?"incasso":"overboeken";t.props.previewSend([t.props.invoiceDetails.id]),p.nA.push("/financieel/".concat(t.props.invoiceDetails.order.administrationId,"/notas/te-verzenden/verzenden/post/").concat(e))})),(0,d.Z)((0,m.Z)(t),"showSetPaid",(function(){t.setState({showSetPaid:!t.state.showSetPaid})})),(0,d.Z)((0,m.Z)(t),"showSendNotification",(function(){t.setState({showSendNotification:!t.state.showSendNotification})})),(0,d.Z)((0,m.Z)(t),"showSetIrrecoverable",(function(){t.setState({showSetIrrecoverable:!t.state.showSetIrrecoverable})})),(0,d.Z)((0,m.Z)(t),"showDelete",(function(){t.setState({showDelete:!t.state.showDelete})})),(0,d.Z)((0,m.Z)(t),"view",(function(){p.nA.push("/nota/inzien/".concat(t.props.invoiceDetails.id))})),t.state={showSetChecked:!1,showSetPaid:!1,showSendNotification:!1,reminderText:"",showSetIrrecoverable:!1,showDelete:!1},t}return(0,r.Z)(u,[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&(e.invoiceDetails.dateReminder3?this.setState({reminderText:"Wilt u de aanmaning sturen?"}):e.invoiceDetails.dateReminder2?this.setState({reminderText:"Wilt u de derde herinnering sturen?"}):e.invoiceDetails.dateReminder1?this.setState({reminderText:"Wilt u de tweede herinnering sturen?"}):this.setState({reminderText:"Wilt u de eerste herinnering sturen?"}))}},{key:"render",value:function(){var e=("to-send"===this.props.invoiceDetails.statusId||"sent"===this.props.invoiceDetails.statusId)&&this.props.invoiceDetails.usesTwinfield&&!this.props.invoiceDetails.compatibleWithTwinfield;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},l.createElement(h.Z,{iconName:"arrowLeft",onClickAction:p.mW.goBack}),l.createElement(h.Z,{iconName:"eye",onClickAction:this.view}),("to-send"===this.props.invoiceDetails.statusId||"error-sending"===this.props.invoiceDetails.statusId)&&"Geen e-mail bekend"!==this.props.invoiceDetails.emailToAddress&&!e&&l.createElement(h.Z,{iconName:"envelopeO",onClickAction:this.showSend}),("to-send"===this.props.invoiceDetails.statusId||"error-sending"===this.props.invoiceDetails.statusId)&&"Geen e-mail bekend"===this.props.invoiceDetails.emailToAddress&&!e&&l.createElement(h.Z,{iconName:"envelopeO",onClickAction:this.showSendPost}),!this.props.invoiceDetails.invoiceInTwinfield&&!this.props.invoiceDetails.invoicePaidInTwinfield&&("sent"===this.props.invoiceDetails.statusId||"exported"===this.props.invoiceDetails.statusId)&&l.createElement(h.Z,{iconName:"euro",onClickAction:this.showSetPaid}),("sent"===this.props.invoiceDetails.statusId||"exported"===this.props.invoiceDetails.statusId)&&!this.props.invoiceDetails.dateExhortation&&!this.props.invoiceDetails.isPaidByMollie&&l.createElement(h.Z,{iconName:"bullhorn",onClickAction:this.showSendNotification}),"to-send"!==this.props.invoiceDetails.statusId&&"in-progress"!==this.props.invoiceDetails.statusId&&"is-sending"!==this.props.invoiceDetails.statusId&&"error-making"!==this.props.invoiceDetails.statusId&&"error-sending"!==this.props.invoiceDetails.statusId&&"is-resending"!==this.props.invoiceDetails.statusId&&"paid"!==this.props.invoiceDetails.statusId&&"irrecoverable"!==this.props.invoiceDetails.statusId&&l.createElement(h.Z,{iconName:"remove",onClickAction:this.showSetIrrecoverable}),l.createElement(h.Z,{iconName:"download",onClickAction:this.download}),"to-send"===this.props.invoiceDetails.statusId&&l.createElement(h.Z,{iconName:"trash",onClickAction:this.showDelete}))),!this.props.isLoading&&l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Nota:"," ",this.props.invoiceDetails.order?this.props.invoiceDetails.order.contact.fullName:""," /"," ",this.props.invoiceDetails.number)),l.createElement("div",{className:"col-md-4"}),this.state.showSetPaid&&l.createElement(N,{closeModal:this.showSetPaid,invoiceId:this.props.invoiceDetails.id,amountOpen:this.props.invoiceDetails.amountOpen}),this.state.showSendNotification&&l.createElement(C,{reminderText:this.state.reminderText,closeModal:this.showSendNotification,invoiceId:this.props.invoiceDetails.id}),this.state.showSetIrrecoverable&&l.createElement(R,{closeModal:this.showSetIrrecoverable,invoiceId:this.props.invoiceDetails.id}),this.state.showDelete&&l.createElement(A,{number:this.props.invoiceDetails.number,id:this.props.invoiceDetails.id,closeDeleteItemModal:this.showDelete}))}}]),u}(l.Component);const M=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails,isLoading:e.loadingData.isLoading}}),(function(e){return{previewSend:function(t){e((0,T.AM)(t))},setError:function(t,n){e((0,x.s)(t,n))}}}))(L);var B=n(96486),F=n(7250),V=n(14309),q=n(98688);const $=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails}}))((function(e){var t=e.invoiceDetails,n=t.status,a=t.dateRequested,r=t.paymentType,i=t.paymentTypeId,o=t.invoiceText,c=t.subject,s=t.order,u=t.totalInclVatInclReduction,m=t.amountOpen,d=t.dateSent,p=t.datePaymentDue,h=t.datePaid,f=t.paymentReference,v=t.dateReminder1,g=t.dateReminder2,b=t.dateReminder3,y=t.dateExhortation,Z=t.emailReminder1,P=t.emailReminder2,w=t.emailReminder3,D=t.emailExhortation,I=t.dateCollection,N=t.emailedTo,O=t.sentToName,C=t.isPaidByMollie;return l.createElement("div",{onClick:e.switchToEdit},l.createElement(V.Z,null,l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Contact",value:s.contact?s.contact.fullName:"",link:s.contact?"contact/"+s.contact.id:""}),l.createElement(F.Z,{label:"Status",value:n?n.name:""})),n&&"sent"===n.id&&C&&l.createElement("div",{className:"row"},l.createElement(F.Z,null),l.createElement(F.Z,{label:"Substatus",value:"Mollie betaald"})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Betaalwijze",value:r?r.name:""}),l.createElement(F.Z,{label:"Betreft",value:c||""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Order",value:s?s.number:"",link:s?"order/"+s.id:""})),l.createElement("div",{className:"row margin-20-top margin-20-bottom"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",{htmlFor:"invoiceText",className:"col-sm-12"},"Opmerking")),l.createElement("div",{className:"col-sm-9",id:"invoiceText"},o||"")),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Bedrag incl. BTW",value:u?"€"+u.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"}),l.createElement(F.Z,{label:"Openstaand bedrag",value:m?"€"+m.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"})),l.createElement("div",{className:"row"},d?l.createElement(F.Z,{label:"Nota datum",value:d?E()(d).format("DD-MM-Y"):""}):l.createElement(F.Z,{label:"Geplande nota datum",value:a?E()(a).format("DD-MM-Y"):""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Verstuurd naar",value:O||""}),l.createElement(F.Z,{label:"Verstuurd naar e-mail",value:N||""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Herinnering 1 verstuurd",value:v?E()(v).format("DD-MM-Y"):""}),l.createElement(F.Z,{label:"E-mail herinnering 1",value:Z||""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Herinnering 2 verstuurd",value:g?E()(g).format("DD-MM-Y"):""}),l.createElement(F.Z,{label:"E-mail herinnering 2",value:P||""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Herinnering 3 verstuurd",value:b?E()(b).format("DD-MM-Y"):""}),l.createElement(F.Z,{label:"E-mail herinnering 3",value:w||""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Aanmaning verstuurd",value:y?E()(y).format("DD-MM-Y"):""}),l.createElement(F.Z,{label:"E-mail aanmaning",value:D||""})),l.createElement("div",{className:"row"},"transfer"===i?l.createElement(F.Z,{label:"Uiterste betaaldatum",value:p?E()(p).format("DD-MM-Y"):""}):l.createElement(F.Z,{label:"Incasso datum",value:I?E()(I).format("DD-MM-Y"):""}),l.createElement(F.Z,{label:"Datum betaald",value:h?E()(h).format("DD-MM-Y"):""})),l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Betalingskenmerk",value:f||""})))))}));const W=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){return(0,a.Z)(this,u),s.call(this,e)}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement("div",null,l.createElement($,null))}}]),u}(l.Component);E().locale("nl");const z=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails}}))((function(e){var t=e.invoiceDetails,n=t.createdAt,a=t.createdBy;return l.createElement("div",null,l.createElement("div",{className:"row"},l.createElement(F.Z,{label:"Gemaakt door",value:a?a.fullName:"Onbekend",link:a?"gebruiker/"+a.id:""}),l.createElement(F.Z,{label:"Gemaakt op",value:n?E()(n).format("L"):"Onbekend"})))}));var Y=n(80720);const G=function(e){return l.createElement(V.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),l.createElement(q.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(z,null))))};E().locale("nl");const _=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.invoiceProduct,n=t.period,a=t.productCode,r=t.productName,i=t.description,o=t.amount,c=t.amountInclVatInclReduction;return l.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},l.createElement("div",null,l.createElement("div",{className:"col-sm-1"},a||""),l.createElement("div",{className:"col-sm-3"},r||""),l.createElement("div",{className:"col-sm-3"},i||""),l.createElement("div",{className:"col-sm-2"},o||""),l.createElement("div",{className:"col-sm-2"},c?"€"+c.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"),l.createElement("div",{className:"col-sm-1"}),n&&l.createElement("div",{className:"col-sm-12"},"Periode ",n)))}));var H=n(49332);E().locale("nl");const J=function(e){var t=e.invoiceProduct,n=t.product,a=t.description,r=t.amount,i=t.amountReduction,o=t.percentageReduction,c=t.dateLastInvoice,s=t.variablePrice;return l.createElement("div",null,l.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},l.createElement(V.Z,{className:"panel-grey"},l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Notanummer",name:"invoice",value:e.invoiceDetails?e.invoiceDetails.number:"",readOnly:!0}),l.createElement(P.Z,{label:"Product",name:"product",value:n?n.name:"",readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Omschrijving",id:"description",name:"description",value:a,onChangeAction:e.handleInputChange,required:"required",error:e.errors.description}),l.createElement(P.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:r,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:o,onChangeAction:e.handleInputChange}),e.productVariablePrice?l.createElement(P.Z,{label:"Prijs ex. BTW",type:"number",name:"variablePrice",value:s,onChangeAction:e.handleInputChangeVariablePrice}):l.createElement(P.Z,{label:"Prijs excl. BTW",name:"price",value:"€"+e.invoiceProduct.product.currentPrice.priceInclVat.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:e.invoiceProduct.product.currentPrice.priceNumberOfDecimals}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:i,onChangeAction:e.handleInputChange}),l.createElement(P.Z,{label:"Totaalbedrag",name:"totalPrice",value:"€"+e.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(Z.Z,{label:"Begin datum",name:"dateLastInvoice",value:c,onChangeAction:e.handleInputChangeDate})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(H.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),l.createElement(H.Z,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))},K=(0,s.$j)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))((function(e){return l.createElement(f.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){v.Z.deleteInvoiceProduct(e.id).then((function(t){e.fetchInvoiceDetails(e.invoiceId),e.closeDeleteItemModal()}))},title:"Verwijderen"},l.createElement("p",null,"Verwijder notaregel?"))}));function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"toggleDelete",(function(){t.setState({showDelete:!t.state.showDelete})})),(0,d.Z)((0,m.Z)(t),"onLineEnter",(function(){t.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,d.Z)((0,m.Z)(t),"onLineLeave",(function(){t.setState({showActionButtons:!1,highlightLine:""})})),(0,d.Z)((0,m.Z)(t),"openEdit",(function(){t.setState({showEdit:!0})})),(0,d.Z)((0,m.Z)(t),"closeEdit",(function(){t.setState({showEdit:!1})})),(0,d.Z)((0,m.Z)(t),"cancelEdit",(function(){t.setState(Q(Q({},t.state),{},{invoiceProduct:Q({},t.props.invoiceProduct)})),t.closeEdit()})),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(Q(Q({},t.state),{},{invoiceProduct:Q(Q({},t.state.invoiceProduct),{},(0,d.Z)({},r,a))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"updatePrice",(function(){var e;e=t.state.invoiceProduct.variablePrice?y().isFloat(t.state.invoiceProduct.variablePrice+"")?t.state.invoiceProduct.variablePrice:0:y().isFloat(t.props.invoiceProduct.product.currentPrice.priceInclVat+"")?t.props.invoiceProduct.product.currentPrice.priceInclVat:0;var n=y().isFloat(t.state.invoiceProduct.amount+"")?t.state.invoiceProduct.amount:0,a=y().isFloat(t.state.invoiceProduct.percentageReduction+"")?t.state.invoiceProduct.percentageReduction:0,r=y().isFloat(t.state.invoiceProduct.amountReduction+"")?t.state.invoiceProduct.amountReduction:0,i=0;i=e<0?e*n*((parseFloat(100)+parseFloat(a))/100)-r:e*n*((100-a)/100)-r,t.setState(Q(Q({},t.state),{},{totalPrice:i}))})),(0,d.Z)((0,m.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n={},a=!1,r=t.state.invoiceProduct;y().isEmpty(r.amount+"")&&(n.amount=!0,a=!0),y().isEmpty(r.description+"")&&(n.description=!0,a=!0),t.setState(Q(Q({},t.state),{},{errors:n})),!a&&v.Z.updateInvoiceProduct(r).then((function(e){t.props.fetchInvoiceDetails(t.state.invoiceProduct.invoiceId),t.closeEdit()}))})),(0,d.Z)((0,m.Z)(t),"handleInputChangeVariablePrice",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(Q(Q({},t.state),{},{price:a,invoiceProduct:Q(Q({},t.state.invoiceProduct),{},(0,d.Z)({},r,a))}),t.updatePrice)})),t.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,totalPrice:e.invoiceProduct.amountInclVatInclReduction,invoiceProduct:Q(Q({},e.invoiceProduct),{},{variablePrice:e.invoiceProduct.priceInclVat?Math.round(100*e.invoiceProduct.priceInclVat)/100:0}),errors:{amount:!1,description:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"componentWillReceiveProps",value:function(e){(0,B.isEqual)(this.state.invoiceProduct,e.invoiceProduct)||this.setState(Q(Q({},this.state),{},{totalPrice:e.invoiceProduct.amountInclVatInclReduction,invoiceProduct:Q(Q({},e.invoiceProduct),{},{variablePrice:e.invoiceProduct.priceInclVat?Math.round(100*e.invoiceProduct.priceInclVat)/100:0})}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Q(Q({},this.state),{},{invoiceProduct:Q(Q({},this.state.invoiceProduct),{},(0,d.Z)({},t,e))}))}},{key:"render",value:function(){return l.createElement("div",null,l.createElement(_,{highlightLine:this.state.highlightLine,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,showActionButtons:this.state.showActionButtons,invoiceProduct:this.state.invoiceProduct,invoiceDetails:this.props.invoiceDetails,openEdit:this.openEdit,toggleDelete:this.toggleDelete}),this.state.showEdit&&this.props.permissions.manageFinancial&&l.createElement(J,{invoiceDetails:this.props.invoiceDetails,errors:this.state.errors,totalPrice:this.state.totalPrice,invoiceProduct:this.state.invoiceProduct,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit,handleInputChangeVariablePrice:this.handleInputChangeVariablePrice,productVariablePrice:"variable"===this.state.invoiceProduct.product.hasVariablePrice}),this.state.showDelete&&this.props.permissions.manageFinancial&&l.createElement(K,{closeDeleteItemModal:this.toggleDelete,id:this.state.invoiceProduct.id,invoiceId:this.state.invoiceProduct.invoiceId}))}}]),u}(l.Component);const ee=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions,invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(X),te=(0,s.$j)((function(e){return{invoiceProducts:e.invoiceDetails.invoiceProducts}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-1"},"Productcode"),l.createElement("div",{className:"col-sm-3"},"Productnaam"),l.createElement("div",{className:"col-sm-3"},"Omschrijving"),l.createElement("div",{className:"col-sm-2"},"Aantal"),l.createElement("div",{className:"col-sm-2"},"Bedrag incl. BTW")),e.invoiceProducts.length>0?e.invoiceProducts.map((function(e){return l.createElement(ee,{key:e.id,invoiceProduct:e})})):l.createElement("div",null,"Geen notaregels bekend."))}));var ne=n(71840),ae=n(82084);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(ie(ie({},t.state),{},{invoiceProduct:ie(ie({},t.state.invoiceProduct),{},(0,d.Z)({},r,a))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"handleInputChangeProduct",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(ie(ie({},t.state),{},{product:ie(ie({},t.state.product),{},(0,d.Z)({},r,a))}))})),(0,d.Z)((0,m.Z)(t),"handleInputChangeProductPrice",(function(e){var n,a=e.target,r="checkbox"===a.type?a.checked:a.value,i=a.name;n=t.state.vatPercentage&&"6"==t.state.vatPercentage.id?1.06*r:t.state.vatPercentage&&"9"==t.state.vatPercentage.id?1.09*r:t.state.vatPercentage&&"21"==t.state.vatPercentage.id?1.21*r:r,t.setState(ie(ie({},t.state),{},{price:n,product:ie(ie({},t.state.product),{},(0,d.Z)({},i,r))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"handleInputChangeProductVat",(function(e){var n,a=e.target,r="checkbox"===a.type?a.checked:a.value,i=a.name;n="6"==r?1.06*t.state.product.price:"9"==r?1.09*t.state.product.price:"21"==r?1.21*t.state.product.price:t.state.product.price,t.setState(ie(ie({},t.state),{},{price:n,product:ie(ie({},t.state.product),{},(0,d.Z)({},i,r))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"updatePrice",(function(){var e=y().isFloat(t.state.price+"")?t.state.price:0,n=y().isFloat(t.state.invoiceProduct.amount+"")?t.state.invoiceProduct.amount:0,a=y().isFloat(t.state.invoiceProduct.percentageReduction+"")?t.state.invoiceProduct.percentageReduction:0,r=y().isFloat(t.state.invoiceProduct.amountReduction+"")?t.state.invoiceProduct.amountReduction:0,i=0;i=e<0?e*n*((parseFloat(100)+parseFloat(a))/100)-r:e*n*((100-a)/100)-r,t.setState(ie(ie({},t.state),{},{price:parseFloat(e).toFixed(2),totalPrice:parseFloat(i).toFixed(2)}))})),(0,d.Z)((0,m.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n=t.state.invoiceProduct,a={},r=!1,i=!1;y().isEmpty(n.amount+"")&&(a.amount=!0,r=!0),y().isEmpty(n.dateLastInvoice+"")&&(a.dateLastInvoice=!0,r=!0),y().isEmpty(n.description+"")&&(a.description=!0,r=!0);var o=t.state.product,c=!1;t.props.products.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.code===o.code&&(c=!0)&&e.active})),c&&(i="Productcode moet uniek zijn.",a.code=!0,r=!0),y().isEmpty(o.code+"")&&(a.code=!0,r=!0);var l=!1;t.props.products.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.name===o.name&&(l=!0)&&e.active})),l&&(i="Productnaam moet uniek zijn.",a.name=!0,r=!0),c&&l&&(i="Productcode en productnaam moeten uniek zijn."),y().isEmpty(o.name+"")&&(a.name=!0,r=!0),y().isEmpty(o.administrationId+"")&&(a.administrationId=!0,r=!0),y().isEmpty(o.price+"")&&(a.price=!0,r=!0),t.setState(ie(ie({},t.state),{},{errors:a,errorMessage:i})),!r&&v.Z.newProductAndInvoiceProduct(n,o).then((function(e){t.props.fetchInvoiceDetails(n.invoiceId),t.props.toggleShowNewProduct()}))})),t.state={vatPercentages:[{id:"0",name:"0"},{id:"9",name:"9"},{id:"21",name:"21"}],errorMessage:!1,price:"0",totalPrice:"0",invoiceProduct:{invoiceId:t.props.invoiceDetails.id,description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:E()().format("YYYY-MM-DD")},product:{code:"",name:"",durationId:"none",administrationId:t.props.invoiceDetails.order.administrationId,invoiceFrequencyId:"once",vatPercentage:"",price:"",isOneTime:!1,ledgerId:""},errors:{amount:!1,dateLastInvoice:!1,description:!1,code:!1,name:!1,price:!1}},t.handleReactSelectChange=t.handleReactSelectChange.bind((0,m.Z)(t)),t.handleInputChangeDate=t.handleInputChangeDate.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"handleReactSelectChange",value:function(e,t){this.setState(ie(ie({},this.state),{},{product:ie(ie({},this.state.product),{},(0,d.Z)({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(ie(ie({},this.state),{},{invoiceProduct:ie(ie({},this.state.invoiceProduct),{},(0,d.Z)({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.description,n=e.amount,a=e.amountReduction,r=e.percentageReduction,i=e.dateLastInvoice,o=this.state.product,c=o.code,s=o.name,u=o.vatPercentage,m=o.price,d=o.ledgerId;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(V.Z,{className:"panel-grey"},l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Product"))),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Productcode",name:"code",value:c,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.code}),l.createElement(P.Z,{label:"Naam",name:"name",value:s,onChangeAction:this.handleInputChangeProduct,required:"required",error:this.state.errors.name})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:m,onChangeAction:this.handleInputChangeProductPrice,required:"required",error:this.state.errors.price}),l.createElement(ne.Z,{label:"BTW percentage",name:"vatPercentage",options:this.state.vatPercentages,value:u,onChangeAction:this.handleInputChangeProductVat,placeholder:"Geen"})),1==this.props.invoiceDetails.order.administration.usesTwinfield&&1==this.props.invoiceDetails.order.administration.twinfieldIsValid&&l.createElement("div",{className:"row"},l.createElement(ae.Z,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:d,onChangeAction:this.handleReactSelectChange})),l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-part panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Notaregel"))),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Omschrijving",id:"description",name:"description",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),l.createElement(P.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:r,onChangeAction:this.handleInputChange}),l.createElement(P.Z,{label:"Bedrag",name:"price",value:"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),l.createElement(P.Z,{label:"Totaalbedrag",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(Z.Z,{label:"Begin datum",name:"dateLastInvoice",value:i,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),this.state.errorMessage&&l.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(H.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProduct}),l.createElement(H.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),u}(l.Component);const ce=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails,administrationId:e.administrationDetails.id,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,ledgers:e.systemData.ledgers}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(oe);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(se(se({},t.state),{},{invoiceProduct:se(se({},t.state.invoiceProduct),{},(0,d.Z)({},r,a))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"handleInputChangeVariablePrice",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(se(se({},t.state),{},{price:a,invoiceProduct:se(se({},t.state.invoiceProduct),{},(0,d.Z)({},r,a))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"updatePrice",(function(){var e=y().isFloat(t.state.price+"")?t.state.price:0,n=y().isFloat(t.state.invoiceProduct.amount+"")?t.state.invoiceProduct.amount:0,a=y().isFloat(t.state.invoiceProduct.percentageReduction+"")?t.state.invoiceProduct.percentageReduction:0,r=y().isFloat(t.state.invoiceProduct.amountReduction+"")?t.state.invoiceProduct.amountReduction:0,i=0;i=e<0?e*n*((parseFloat(100)+parseFloat(a))/100)-r:e*n*((100-a)/100)-r,t.setState(se(se({},t.state),{},{totalPrice:i}))})),(0,d.Z)((0,m.Z)(t),"handleChangeProduct",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name,i="",o=0,c="";if(a){var l=t.props.products.filter((function(e){return e.id==a}));o=l[0].priceInclVat,c=l[0].invoiceText,i=l[0].hasVariablePrice}t.setState(se(se({},t.state),{},{price:o,productHasVariablePrice:"variable"===i,invoiceProduct:se(se({},t.state.invoiceProduct),{},(0,d.Z)({description:c},r,a))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n=t.state.invoiceProduct,a={},r=!1;y().isEmpty(n.productId+"")&&(a.productId=!0,r=!0),y().isEmpty(n.amount+"")&&(a.amount=!0,r=!0),y().isEmpty(n.dateLastInvoice+"")&&(a.dateLastInvoice=!0,r=!0),y().isEmpty(n.description+"")&&(a.description=!0,r=!0),t.setState(se(se({},t.state),{},{errors:a})),!r&&v.Z.newInvoiceProduct(n).then((function(e){t.props.fetchInvoiceDetails(n.invoiceId),t.props.toggleShowNew()}))})),t.state={price:"0",totalPrice:"0",productHasVariablePrice:!1,invoiceProduct:{invoiceId:t.props.invoiceDetails.id,productId:"",description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:E()().format("YYYY-MM-DD"),variablePrice:0},errors:{productId:!1,amount:!1,dateLastInvoice:!1,description:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"handleInputChangeDate",value:function(e,t){this.setState(se(se({},this.state),{},{invoiceProduct:se(se({},this.state.invoiceProduct),{},(0,d.Z)({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.productId,n=e.description,a=e.amount,r=e.amountReduction,i=e.percentageReduction,o=e.dateLastInvoice;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(V.Z,{className:"panel-grey"},l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Order nummer",name:"orderId",value:this.props.invoiceDetails.number,readOnly:!0}),l.createElement(ne.Z,{label:"Product",id:"productId",name:"productId",options:this.props.products,value:t,onChangeAction:this.handleChangeProduct,required:"required",error:this.state.errors.productId})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Omschrijving",id:"description",name:"description",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),l.createElement(P.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:a,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:i,onChangeAction:this.handleInputChange}),this.state.productHasVariablePrice?l.createElement(P.Z,{label:"Prijs ex. BTW",type:"number",name:"variablePrice",value:this.state.price,onChangeAction:this.handleInputChangeVariablePrice}):l.createElement(P.Z,{label:"Prijs excl. BTW",name:"price",value:"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:r,onChangeAction:this.handleInputChange}),l.createElement(P.Z,{label:"Totaalbedrag",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(Z.Z,{label:"Begin datum",name:"dateLastInvoice",value:o,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(H.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),l.createElement(H.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),u}(l.Component);const me=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails,products:e.systemData.products}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(ue);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(pe(pe({},t.state),{},{invoiceProduct:pe(pe({},t.state.invoiceProduct),{},(0,d.Z)({},r,a))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"handleInputChangeProduct",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(pe(pe({},t.state),{},{product:pe(pe({},t.state.product),{},(0,d.Z)({},r,a))}))})),(0,d.Z)((0,m.Z)(t),"handleInputChangeProductPrice",(function(e){var n,a=e.target,r="checkbox"===a.type?a.checked:a.value,i=a.name;n=t.state.vatPercentage&&"6"==t.state.vatPercentage.id?1.06*r:t.state.vatPercentage&&"9"==t.state.vatPercentage.id?1.09*r:t.state.vatPercentage&&"21"==t.state.vatPercentage.id?1.21*r:r,t.setState(pe(pe({},t.state),{},{price:n,product:pe(pe({},t.state.product),{},(0,d.Z)({},i,r))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"handleInputChangeProductVat",(function(e){var n,a=e.target,r="checkbox"===a.type?a.checked:a.value,i=a.name;n="6"==r?1.06*t.state.product.price:"9"==r?1.09*t.state.product.price:"21"==r?1.21*t.state.product.price:t.state.product.price,t.setState(pe(pe({},t.state),{},{price:n,product:pe(pe({},t.state.product),{},(0,d.Z)({},i,r))}),t.updatePrice)})),(0,d.Z)((0,m.Z)(t),"updatePrice",(function(){var e=y().isFloat(t.state.price+"")?t.state.price:0,n=y().isFloat(t.state.invoiceProduct.amount+"")?t.state.invoiceProduct.amount:0,a=y().isFloat(t.state.invoiceProduct.percentageReduction+"")?t.state.invoiceProduct.percentageReduction:0,r=y().isFloat(t.state.invoiceProduct.amountReduction+"")?t.state.invoiceProduct.amountReduction:0,i=0;i=e<0?e*n*((parseFloat(100)+parseFloat(a))/100)-r:e*n*((100-a)/100)-r,t.setState(pe(pe({},t.state),{},{price:parseFloat(e).toFixed(2),totalPrice:parseFloat(i).toFixed(2)}))})),(0,d.Z)((0,m.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n=t.state.invoiceProduct,a={},r=!1;y().isEmpty(n.amount+"")&&(a.amount=!0,r=!0),y().isEmpty(n.dateLastInvoice+"")&&(a.dateLastInvoice=!0,r=!0),y().isEmpty(n.description+"")&&(a.description=!0,r=!0);var i=t.state.product;y().isEmpty(i.administrationId+"")&&(a.administrationId=!0,r=!0),y().isEmpty(i.price+"")&&(a.price=!0,r=!0),t.setState(pe(pe({},t.state),{},{errors:a,errorMessage:!1})),!r&&v.Z.newProductAndInvoiceProduct(n,i).then((function(e){t.props.fetchInvoiceDetails(n.invoiceId),t.props.toggleShowNewProductOneTime()}))})),t.state={vatPercentages:[{id:"0",name:"0"},{id:"9",name:"9"},{id:"21",name:"21"}],errorMessage:!1,price:"0",totalPrice:"0",invoiceProduct:{invoiceId:t.props.invoiceDetails.id,description:"",amount:1,amountReduction:0,percentageReduction:0,dateLastInvoice:E()().format("YYYY-MM-DD")},product:{code:"EMP",name:"Eenmalig product",durationId:"none",administrationId:t.props.invoiceDetails.order.administrationId,invoiceFrequencyId:"once",vatPercentage:"",price:"",isOneTime:!0,ledgerId:""},errors:{amount:!1,dateLastInvoice:!1,description:!1,price:!1}},t.handleReactSelectChange=t.handleReactSelectChange.bind((0,m.Z)(t)),t.handleInputChangeDate=t.handleInputChangeDate.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"handleReactSelectChange",value:function(e,t){this.setState(pe(pe({},this.state),{},{product:pe(pe({},this.state.product),{},(0,d.Z)({},t,e))}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(pe(pe({},this.state),{},{invoiceProduct:pe(pe({},this.state.invoiceProduct),{},(0,d.Z)({},t,e))}))}},{key:"render",value:function(){var e=this.state.invoiceProduct,t=e.description,n=e.amount,a=e.amountReduction,r=e.percentageReduction,i=e.dateLastInvoice,o=this.state.product,c=o.vatPercentage,s=o.price,u=o.ledgerId;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(V.Z,{className:"panel-grey"},l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Product"))),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Prijs ex. BTW",id:"price",name:"price",type:"number",min:"0",max:"1000000",value:s,onChangeAction:this.handleInputChangeProductPrice,required:"required",error:this.state.errors.price}),l.createElement(ne.Z,{label:"BTW percentage",name:"vatPercentage",options:this.state.vatPercentages,value:c,onChangeAction:this.handleInputChangeProductVat,placeholder:"Geen"})),1==this.props.invoiceDetails.order.administration.usesTwinfield&&1==this.props.invoiceDetails.order.administration.twinfieldIsValid&&l.createElement("div",{className:"row"},l.createElement(ae.Z,{label:"Grootboek",name:"ledgerId",options:this.props.ledgers,optionName:"description",value:u,onChangeAction:this.handleReactSelectChange})),l.createElement("div",{className:"row"},l.createElement("div",{className:"panel-part panel-heading"},l.createElement("span",{className:"h5 text-bold"},"Notaregel"))),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Omschrijving",id:"description",name:"description",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.description}),l.createElement(P.Z,{label:"Aantal",type:"number",id:"amount",name:"amount",value:n,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingspercentage",type:"number",id:"percentageReduction",name:"percentageReduction",value:r,onChangeAction:this.handleInputChange}),l.createElement(P.Z,{label:"Bedrag",name:"price",value:"€"+this.state.price.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Kortingsbedrag",type:"number",id:"amountReduction",name:"amountReduction",value:a,onChangeAction:this.handleInputChange}),l.createElement(P.Z,{label:"Totaalbedrag",name:"totalPrice",value:"€"+this.state.totalPrice.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})),l.createElement("div",{className:"row"},l.createElement(Z.Z,{label:"Begin datum",name:"dateLastInvoice",value:i,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateLastInvoice})),this.state.errorMessage&&l.createElement("div",{className:"col-sm-10 col-md-offset-1 alert alert-danger"},this.state.errorMessage),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(H.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNewProductOneTime}),l.createElement(H.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),u}(l.Component);const fe=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails,administrationId:e.administrationDetails.id,productDurations:e.systemData.productDurations,productInvoiceFrequencies:e.systemData.productInvoiceFrequencies,productPaymentTypes:e.systemData.productPaymentTypes,products:e.systemData.products,ledgers:e.systemData.ledgers}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(he);var ve=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"toggleShowNew",(function(){t.setState({showNew:!t.state.showNew})})),(0,d.Z)((0,m.Z)(t),"toggleShowNewProduct",(function(){t.setState({showNewProduct:!t.state.showNewProduct})})),(0,d.Z)((0,m.Z)(t),"toggleShowNewProductOneTime",(function(){t.setState({showNewProductOneTime:!t.state.showNewProductOneTime})})),t.state={showNew:!1,showNewProduct:!1,showNewProductOneTime:!1},t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(V.Z,null,l.createElement(Y.Z,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-xs-10"},l.createElement("span",{className:"h5 text-bold"},"Notaregels")))),l.createElement(q.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(te,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&l.createElement(me,{toggleShowNew:this.toggleShowNew}),this.state.showNewProduct&&l.createElement(ce,{toggleShowNewProduct:this.toggleShowNewProduct}),this.state.showNewProductOneTime&&l.createElement(fe,{toggleShowNewProductOneTime:this.toggleShowNewProductOneTime}))))}}]),u}(l.Component);const ge=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions,invoice:e.invoiceDetails}}))(ve);var Ee=n(97894),be=n(75502),ye=n(77320);E().locale("nl");const Ze=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions}}))((function(e){var t=e.payment,n=t.datePaid,a=t.amount,r=t.paymentReference,i=t.createdAt;return l.createElement("div",{className:"row border ".concat(e.highlightLine),onMouseEnter:function(){return e.onLineEnter()},onMouseLeave:function(){return e.onLineLeave()}},l.createElement("div",{onClick:e.openEdit},l.createElement("div",{className:"col-sm-3"},n?E()(n).format("L"):""),l.createElement("div",{className:"col-sm-2"},a?"€"+a.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"€0,00"),l.createElement("div",{className:"col-sm-3"},r||""),l.createElement("div",{className:"col-sm-3"},i?E()(i).format("L"):"")),l.createElement("div",{className:"col-sm-1"},!e.invoiceInTwinfield&&!e.invoicePaidInTwinfield&&e.showActionButtons&&e.permissions.manageFinancial?l.createElement("a",{role:"button",onClick:e.openEdit},l.createElement(Ee.ZP,{className:"mybtn-success",size:14,icon:be.r})):""," ",!e.invoiceInTwinfield&&!e.invoicePaidInTwinfield&&e.showActionButtons&&e.permissions.manageFinancial?l.createElement("a",{role:"button",onClick:e.toggleDelete},l.createElement(Ee.ZP,{className:"mybtn-danger",size:14,icon:ye._})):""))}));E().locale("nl");const Pe=function(e){var t=e.payment,n=t.amount,a=t.datePaid,r=t.paymentReference;return l.createElement("div",null,l.createElement("form",{className:"form-horizontal",onSubmit:e.handleSubmit},l.createElement(V.Z,{className:"panel-grey"},l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Bedrag",type:"number",id:"amount",name:"amount",value:n,onChangeAction:e.handleInputChange,required:"required",error:e.errors.amount}),l.createElement(Z.Z,{label:"Datum betaald",name:"datePaid",value:a,onChangeAction:e.handleInputChangeDate,required:"required",error:e.errors.datePaid})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Betalingskenmerk",name:"paymentReference",value:r,onChangeAction:e.handleInputChange})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(H.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:e.cancelEdit}),l.createElement(H.Z,{buttonText:"Opslaan",onClickAction:e.handleSubmit,type:"submit",value:"Submit"}))))))},we=(0,s.$j)(null,(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))((function(e){return l.createElement(f.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){v.Z.deletePayment(e.id).then((function(t){e.fetchInvoiceDetails(e.invoiceId),e.closeDeleteItemModal()}))},title:"Verwijderen"},l.createElement("p",null,"Verwijder betaling?"))}));function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"toggleDelete",(function(){t.setState({showDelete:!t.state.showDelete})})),(0,d.Z)((0,m.Z)(t),"onLineEnter",(function(){t.setState({showActionButtons:!0,highlightLine:"highlight-line"})})),(0,d.Z)((0,m.Z)(t),"onLineLeave",(function(){t.setState({showActionButtons:!1,highlightLine:""})})),(0,d.Z)((0,m.Z)(t),"openEdit",(function(){t.setState({showEdit:!0})})),(0,d.Z)((0,m.Z)(t),"closeEdit",(function(){t.setState({showEdit:!1})})),(0,d.Z)((0,m.Z)(t),"cancelEdit",(function(){t.setState(Ie(Ie({},t.state),{},{payment:Ie({},t.props.payment)})),t.closeEdit()})),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(Ie(Ie({},t.state),{},{payment:Ie(Ie({},t.state.payment),{},(0,d.Z)({},r,a))}))})),(0,d.Z)((0,m.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n={},a=!1,r=t.state.payment;y().isEmpty(r.amount+"")&&(n.amount=!0,a=!0),y().isEmpty(r.datePaid+"")&&(n.datePaid=!0,a=!0),t.setState(Ie(Ie({},t.state),{},{errors:n})),!a&&v.Z.updatePayment(r).then((function(e){t.props.fetchInvoiceDetails(t.state.payment.invoiceId),t.closeEdit()}))})),t.state={showActionButtons:!1,highlightLine:"",showEdit:!1,showDelete:!1,payment:Ie({},e.payment),errors:{amount:!1,datePaid:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"componentWillReceiveProps",value:function(e){(0,B.isEqual)(this.state.payment,e.payment)||this.setState(Ie(Ie({},this.state),{},{payment:Ie({},e.payment)}))}},{key:"handleInputChangeDate",value:function(e,t){this.setState(Ie(Ie({},this.state),{},{payment:Ie(Ie({},this.state.payment),{},(0,d.Z)({},t,e))}))}},{key:"render",value:function(){return l.createElement("div",null,l.createElement(Ze,{highlightLine:this.state.highlightLine,showActionButtons:this.state.showActionButtons,onLineEnter:this.onLineEnter,onLineLeave:this.onLineLeave,openEdit:this.openEdit,toggleDelete:this.toggleDelete,payment:this.state.payment,invoiceInTwinfield:this.props.invoiceInTwinfield,invoicePaidInTwinfield:this.props.invoicePaidInTwinfield}),!this.props.invoiceInTwinfield&&!this.props.invoicePaidInTwinfield&&this.state.showEdit&&this.props.permissions.manageFinancial&&l.createElement(Pe,{errors:this.state.errors,payment:this.state.payment,handleInputChange:this.handleInputChange,handleInputChangeDate:this.handleInputChangeDate,handleSubmit:this.handleSubmit,cancelEdit:this.cancelEdit}),!this.props.invoiceInTwinfield&&!this.props.invoicePaidInTwinfield&&this.state.showDelete&&this.props.permissions.manageFinancial&&l.createElement(we,{closeDeleteItemModal:this.toggleDelete,id:this.state.payment.id,invoiceId:this.state.payment.invoiceId}))}}]),u}(l.Component);const Oe=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions,invoiceInTwinfield:e.invoiceDetails.invoiceInTwinfield,invoicePaidInTwinfield:e.invoiceDetails.invoicePaidInTwinfield}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(Ne),Ce=(0,s.$j)((function(e){return{payments:e.invoiceDetails.payments}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-3"},"Datum betaald"),l.createElement("div",{className:"col-sm-2"},"Bedrag"),l.createElement("div",{className:"col-sm-3"},"Betalingskenmerk"),l.createElement("div",{className:"col-sm-3"},"Datum aangemaakt"),l.createElement("div",{className:"col-sm-1"})),e.payments.length>0?e.payments.map((function(e){return l.createElement(Oe,{key:e.id,payment:e})})):l.createElement("div",null,"Geen betalingen bekend."))}));function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"handleInputChange",(function(e){var n=e.target,a="checkbox"===n.type?n.checked:n.value,r=n.name;t.setState(Re(Re({},t.state),{},{payment:Re(Re({},t.state.payment),{},(0,d.Z)({},r,a))}))})),(0,d.Z)((0,m.Z)(t),"handleSubmit",(function(e){e.preventDefault();var n=t.state.payment,a={},r=!1;y().isEmpty(n.amount+"")&&(a.amount=!0,r=!0),y().isEmpty(n.datePaid+"")&&(a.datePaid=!0,r=!0),t.setState(Re(Re({},t.state),{},{errors:a})),!r&&v.Z.newPayment(n).then((function(e){t.props.fetchInvoiceDetails(n.invoiceId),t.props.toggleShowNew()}))})),t.state={payment:{invoiceId:t.props.invoiceDetails.id,amount:"",datePaid:E()(),paymentReference:null},errors:{amount:!1,datePaid:!1}},t.handleInputChangeDate=t.handleInputChangeDate.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"handleInputChangeDate",value:function(e,t){this.setState(Re(Re({},this.state),{},{payment:Re(Re({},this.state.payment),{},(0,d.Z)({},t,e))}))}},{key:"render",value:function(){var e=this.state.payment,t=e.amount,n=e.datePaid,a=e.paymentReference;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(V.Z,{className:"panel-grey"},l.createElement(q.Z,null,l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Bedrag",type:"number",id:"amount",name:"amount",value:t,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.amount}),l.createElement(Z.Z,{label:"Datum betaald",name:"datePaid",value:n,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.datePaid})),l.createElement("div",{className:"row"},l.createElement(P.Z,{label:"Betalingskenmerk",name:"paymentReference",value:a,onChangeAction:this.handleInputChange})),l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(H.Z,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.toggleShowNew}),l.createElement(H.Z,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit"})))))}}]),u}(l.Component);const je=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(ke);var Te=n(10055);var Ae=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"toggleShowNew",(function(){t.setState({showNew:!t.state.showNew})})),t.state={showNew:!1},t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(V.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Betalingen"),!this.props.invoiceInTwinfield&&!this.props.invoicePaidInTwinfield&&this.props.permissions.manageFinancial&&l.createElement("a",{role:"button",className:"pull-right",onClick:this.toggleShowNew},l.createElement(Ee.ZP,{size:14,icon:Te.P}))),l.createElement(q.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(Ce,null)),l.createElement("div",{className:"col-md-12 margin-10-top"},this.state.showNew&&l.createElement(je,{toggleShowNew:this.toggleShowNew}))))}}]),u}(l.Component);const xe=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions,invoiceInTwinfield:e.invoiceDetails.invoiceInTwinfield,invoicePaidInTwinfield:e.invoiceDetails.invoicePaidInTwinfield}}))(Ae);E().locale("nl");const Le=function(e){var t=e.molliePayment,n=t.mollieId,a=(t.createdAt,t.datePaid),r=t.dateActivated,i=t.iban,o=t.ibanName;return l.createElement("div",{className:"row border"},l.createElement("div",null,l.createElement("div",{className:"col-sm-2"},n),l.createElement("div",{className:"col-sm-2"},r?E()(r).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-2"},a?E()(a).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-3"},i),l.createElement("div",{className:"col-sm-3"},o)))};function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fe=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),(t=s.call(this,e)).state={molliePayment:Be({},e.molliePayment)},t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(Le,{molliePayment:this.state.molliePayment}))}}]),u}(l.Component),Ve=(0,s.$j)((function(e){return{molliePayments:e.invoiceDetails.molliePayments}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-2"},"Transactie referentie"),l.createElement("div",{className:"col-sm-2"},"Aanvraag gedaan op"),l.createElement("div",{className:"col-sm-2"},"Betaald op"),l.createElement("div",{className:"col-sm-3"},"Iban"),l.createElement("div",{className:"col-sm-3"},"Rekeninghouder")),e.molliePayments.length>0?e.molliePayments.map((function(e){return l.createElement(Fe,{key:e.id,molliePayment:e})})):l.createElement("div",null,"Geen online betalingstransacties bekend."))}));const qe=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(){return(0,a.Z)(this,u),s.apply(this,arguments)}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(V.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Online betalingtransacties")),l.createElement(q.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(Ve,null))))}}]),u}(l.Component);E().locale("nl");const $e=function(e){var t=e.twinfieldMessage,n=t.createdAt,a=t.messageText,r=t.isError?"alert-warning":"";return l.createElement("div",{className:"row border"},l.createElement("div",null,l.createElement("div",{className:"col-sm-2 ".concat(r)},n?E()(n).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-10 ".concat(r)},a)))};function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ye=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),(t=s.call(this,e)).state={twinfieldMessage:ze({},e.twinfieldMessage)},t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement("div",null,l.createElement($e,{twinfieldMessage:this.state.twinfieldMessage}))}}]),u}(l.Component),Ge=(0,s.$j)((function(e){return{twinfieldMessages:e.invoiceDetails.twinfieldMessagesInvoice}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-2"},"Datum"),l.createElement("div",{className:"col-sm-10"},"Melding")),e.twinfieldMessages.length>0?e.twinfieldMessages.map((function(e){return l.createElement(Ye,{key:e.id,twinfieldMessage:e})})):l.createElement("div",null,"Geen Twinfield meldingen."))}));const _e=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(){return(0,a.Z)(this,u),s.apply(this,arguments)}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(V.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Twinfield log nota's")),l.createElement(q.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(Ge,null))))}}]),u}(l.Component);E().locale("nl");const He=function(e){var t=e.twinfieldMessage,n=t.createdAt,a=t.messageText,r=t.isError?"alert-warning":"";return l.createElement("div",{className:"row border"},l.createElement("div",null,l.createElement("div",{className:"col-sm-2 ".concat(r)},n?E()(n).format("L HH:mm"):""),l.createElement("div",{className:"col-sm-10 ".concat(r)},a)))};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ue=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),(t=s.call(this,e)).state={twinfieldMessage:Ke({},e.twinfieldMessage)},t}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(He,{twinfieldMessage:this.state.twinfieldMessage}))}}]),u}(l.Component),Qe=(0,s.$j)((function(e){return{twinfieldMessages:e.invoiceDetails.twinfieldMessagesPayment}}))((function(e){return l.createElement("div",null,l.createElement("div",{className:"row border header"},l.createElement("div",{className:"col-sm-2"},"Datum"),l.createElement("div",{className:"col-sm-10"},"Melding")),e.twinfieldMessages.length>0?e.twinfieldMessages.map((function(e){return l.createElement(Ue,{key:e.id,twinfieldMessage:e})})):l.createElement("div",null,"Geen Twinfield meldingen."))}));const Xe=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(){return(0,a.Z)(this,u),s.apply(this,arguments)}return(0,r.Z)(u,[{key:"render",value:function(){return l.createElement(V.Z,null,l.createElement(Y.Z,null,l.createElement("span",{className:"h5 text-bold"},"Twinfield log betalingen")),l.createElement(q.Z,null,l.createElement("div",{className:"col-md-12"},l.createElement(Qe,null))))}}]),u}(l.Component);E().locale("nl");var et=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){return(0,a.Z)(this,u),s.call(this,e)}return(0,r.Z)(u,[{key:"render",value:function(){var e="",t=!0;return this.props.hasError?e="Fout bij het ophalen van nota.":this.props.isLoading?e="Gegevens aan het laden.":(0,B.isEmpty)(this.props.invoiceDetails)?e="Geen nota gevonden!":t=!1,t?l.createElement("div",null,e):l.createElement("div",null,l.createElement(W,null),l.createElement(ge,null),this.props.invoiceDetails.usesTwinfield?l.createElement(_e,null):null,l.createElement(xe,null),this.props.invoiceDetails.usesMollie?l.createElement(qe,null):null,this.props.invoiceDetails.usesTwinfield?l.createElement(Xe,null):null,l.createElement(G,null))}}]),u}(l.Component);const tt=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails,isLoading:e.loadingData.isLoading,hasError:e.loadingData.hasError}}))(et);var nt=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"openItem",(function(e){p.nA.push("/taak/".concat(e))})),t.state={relatedTasks:""},t}return(0,r.Z)(u,[{key:"render",value:function(){var e=this,t=this.props.relatedTasks;return l.createElement("div",null,""==t&&l.createElement("div",null,"Geen taken of notities gevonden."),""!=t&&l.createElement("table",{className:"table harmonica-table"},l.createElement("tbody",null,t.map((function(t,n){return l.createElement("tr",{onClick:function(){return e.openItem(t.id)},key:n},l.createElement("td",{className:"col-xs-12 clickable"},E()(t.createdAt).format("L")," - ",t.noteSummary))})))))}}]),u}(l.Component);const at=(0,s.$j)((function(e){return{relatedTasks:e.invoiceDetails.relatedTasks}}))(nt),rt=(0,s.$j)((function(e){return{permissions:e.meDetails.permissions}}),null)((function(e){var t=e.toggleShowList,n=e.showTasksList,a=e.newTask,r=e.taskCount,i=e.permissions;return l.createElement(V.Z,{className:"harmonica-button"},l.createElement(q.Z,null,l.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},l.createElement("span",null,"TAKEN/NOTITIES ",l.createElement("span",{className:"badge"},r))),l.createElement("div",{className:"col-sm-2"},i.manageTask&&l.createElement("div",{className:"pull-right"},l.createElement(Ee.ZP,{className:"harmonica-button",size:14,icon:Te.P,"data-toggle":"dropdown",role:"button"}),l.createElement("ul",{className:"dropdown-menu"},l.createElement("li",null,l.createElement("a",{className:"btn",onClick:function(){return a("open")}},"Maak taak")),l.createElement("li",null,l.createElement("a",{className:"btn",onClick:function(){return a("afgehandeld")}},"Maak notitie"))))),l.createElement("div",{className:"col-sm-12"},n&&l.createElement(at,null))))}));var it=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"openItem",(function(e){p.nA.push("/email/".concat(e))})),t}return(0,r.Z)(u,[{key:"render",value:function(){var e=this,t=this.props.relatedEmails;return l.createElement("div",null,""==t&&l.createElement("div",null,"Geen e-mails gevonden."),""!=t&&l.createElement("table",{className:"table harmonica-table"},l.createElement("tbody",null,t.map((function(t,n){return l.createElement("tr",{key:n},l.createElement("td",{className:"col-xs-4 clickable",onClick:function(){return e.openItem(t.id)}},E()(t.date_sent).format("L")),l.createElement("td",{className:"col-xs-8 clickable",onClick:function(){return e.openItem(t.id)}},t.subject))})))))}}]),u}(l.Component);const ot=(0,s.$j)((function(e){return{relatedEmails:e.invoiceDetails.relatedEmails}}))(it),ct=function(e){var t=e.toggleShowList,n=e.showEmailsList,a=e.newEmail,r=e.emailCount;return l.createElement(V.Z,{className:"harmonica-button"},l.createElement(q.Z,null,l.createElement("div",{className:"col-sm-10",onClick:t,role:"button"},l.createElement("span",{onClick:t,className:""},"E-MAILS ",l.createElement("span",{className:"badge"},r))),l.createElement("div",{className:"col-sm-2"},l.createElement("a",{role:"button",className:"pull-right",onClick:a},l.createElement(Ee.ZP,{className:"harmonica-button",size:14,icon:Te.P}))),l.createElement("div",{className:"col-sm-12"},n&&l.createElement(ot,null))))};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),t=s.call(this,e),(0,d.Z)((0,m.Z)(t),"newTask",(function(e){t.props.invoiceDetails&&p.nA.push("/taak/nieuw/".concat(e,"/nota/").concat(t.props.invoiceDetails.id,"/order/").concat(t.props.invoiceDetails.orderId,"/contact/").concat(t.props.invoiceDetails.contactId))})),(0,d.Z)((0,m.Z)(t),"newEmail",(function(){p.nA.push("/email/nieuw")})),t.state={toggleShowList:{tasks:!1,emails:!1}},t.toggleShowList=t.toggleShowList.bind((0,m.Z)(t)),t}return(0,r.Z)(u,[{key:"componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.setState({toggleShowList:{tasks:!1,emails:!1}})}},{key:"toggleShowList",value:function(e){this.setState(st(st({},this.state),{},{toggleShowList:st(st({},this.state.toggleShowList),{},(0,d.Z)({},e,!this.state.toggleShowList[e]))}))}},{key:"render",value:function(){var e=this;return l.createElement("div",{className:"margin-10-top"},l.createElement(rt,{toggleShowList:function(){return e.toggleShowList("tasks")},showTasksList:this.state.toggleShowList.tasks,taskCount:this.props.invoiceDetails.taskCount,newTask:this.newTask}),l.createElement(ct,{toggleShowList:function(){return e.toggleShowList("emails")},showEmailsList:this.state.toggleShowList.emails,newEmail:this.newEmail,emailCount:this.props.invoiceDetails.emailCount}))}}]),u}(l.Component);const mt=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails,permissions:e.meDetails.permissions}}),null)(ut);var dt=function(e){(0,i.Z)(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){return(0,a.Z)(this,u),s.call(this,e)}return(0,r.Z)(u,[{key:"componentDidMount",value:function(){this.props.fetchInvoiceDetails(this.props.params.id)}},{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(V.Z,null,l.createElement(q.Z,{className:"panel-small"},l.createElement(M,null)))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(tt,null))),l.createElement(V.Z,{className:"col-md-3 harmonica"},l.createElement(q.Z,null,l.createElement(mt,null))))}}]),u}(l.Component);const pt=(0,s.$j)((function(e){return{invoiceDetails:e.invoiceDetails}}),(function(e){return{fetchInvoiceDetails:function(t){e((0,u.Js)(t))}}}))(dt)}}]);