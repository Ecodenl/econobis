"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[9499],{59499:(t,e,a)=>{a.r(e),a.d(e,{default:()=>M}),a(52675),a(2008),a(51629),a(67945),a(84185),a(83851),a(81278),a(79432),a(26099),a(60825),a(23500);var n=a(23029),r=a(92901),o=a(50388),s=a(53954),i=a(85501),c=a(64467),l=a(58168),u=(a(62010),a(96540)),p=a(47767),m=a(91858);const d=function(t){var e=t.name,a=(0,p.Zp)();return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-4"},u.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},u.createElement(m.A,{iconName:"arrowLeft",onClickAction:function(){return a(-1)}}))),u.createElement("div",{className:"col-md-4"},u.createElement("h4",{className:"text-center"},"Kans status: ",e)),u.createElement("div",{className:"col-md-4"}))};var f=a(2543),v=a(69733),h=(a(94170),a(95093)),E=a.n(h),g=a(55956),y=a(62493),b=a(55849),S=(a(28706),a(61941)),w={fld:["id","name","usesWf"]};var A=a(82960),O=a(26062),j=a(77465),N=a(30483);function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach(function(e){(0,c.A)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(z=function(){return!!t})()}E().locale("nl");var P=function(t){function e(t){var a,r,i,l;return(0,n.A)(this,e),r=this,i=e,l=[t],i=(0,s.A)(i),a=(0,o.A)(r,z()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l)),(0,c.A)(a,"handleInputChange",function(t){var e=t.target,n="checkbox"===e.type?e.checked:e.value,r=e.name;a.setState(D(D({},a.state),{},{opportunityStatus:D(D({},a.state.opportunityStatus),{},(0,c.A)({},r,n))}))}),(0,c.A)(a,"handleSubmit",function(t){t.preventDefault();var e=a.state.opportunityStatus;a.setState(D(D({},a.state),{},{errors:{}})),function(t){var e="".concat("opportunity-status","/").concat(t.id);return(0,S.A)().post(e,t,{params:{jory:w}})}(e).then(function(t){a.props.updateState(t.data.data),a.props.fetchSystemData(),a.props.switchToView()}).catch(function(t){alert("Er is iets misgegaan bij opslaan. Herlaad de pagina en probeer het nogmaals.")})}),a.state={opportunityStatus:D({},t.opportunityStatus),errors:{usesWf:!1}},a.handleReactSelectChange=a.handleReactSelectChange.bind(a),a}return(0,i.A)(e,t),(0,r.A)(e,[{key:"handleReactSelectChange",value:function(t,e){this.setState(D(D({},this.state),{},{opportunityStatus:D(D({},this.state.opportunityStatus),{},(0,c.A)({},e,t))}))}},{key:"render",value:function(){var t=this.state.opportunityStatus,e=t.name,a=t.usesWf;return u.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},u.createElement(y.A,null,u.createElement(b.A,null,u.createElement("div",{className:"row"},u.createElement(N.A,{label:"Omschrijving",divSize:"col-sm-10",value:e,className:"col-sm-10 form-group"})),u.createElement("div",{className:"row"},u.createElement(j.A,{label:"Gebruikt workflow email bij deze status",divSize:"col-sm-10",name:"usesWf",value:a,onChangeAction:this.handleInputChange})),1==a&&u.createElement(u.Fragment,null,u.createElement("div",{className:"row"},u.createElement(N.A,{label:"Uitleg workflow",divSize:"col-sm-10",value:this.props.explanationWf,className:"col-sm-10 form-group"})))),u.createElement(b.A,null,u.createElement("div",{className:"pull-right btn-group",role:"group"},u.createElement(g.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),u.createElement(g.A,{buttonText:"Opslaan",type:"submit",value:"Submit"})))))}}])}(u.Component);const C=(0,v.Ng)(null,function(t){return(0,A.zH)({fetchSystemData:O.u},t)})(P),L=function(t){var e=t.name,a=t.usesWf,n=t.switchToEdit,r=t.explanationWf;return u.createElement("div",{onClick:n},u.createElement(y.A,null,u.createElement(b.A,null,u.createElement("div",{className:"row"},u.createElement(N.A,{label:"Omschrijving",divSize:"col-sm-10",value:e,className:"col-sm-10 form-group"})),u.createElement("div",{className:"row"},u.createElement(N.A,{label:"Gebruikt workflow bij deze status",divSize:"col-sm-10",value:a?"Ja":"Nee",className:"col-sm-10 form-group"})),1==a&&u.createElement(u.Fragment,null,u.createElement("div",{className:"row"},u.createElement(N.A,{label:"Uitleg workflow",divSize:"col-sm-10",value:r,className:"col-sm-10 form-group"}))))))};function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(T=function(){return!!t})()}var x=function(t){function e(t){var a,r,i,l;return(0,n.A)(this,e),r=this,i=e,l=[t],i=(0,s.A)(i),a=(0,o.A)(r,T()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l)),(0,c.A)(a,"switchToEdit",function(){a.setState({showEdit:!0})}),(0,c.A)(a,"switchToView",function(){a.setState({showEdit:!1,activeDiv:""})}),a.state={showEdit:!1,activeDiv:""},a}return(0,i.A)(e,t),(0,r.A)(e,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var t=this,e=this.props.meDetails.permissions,a=void 0===e?{}:e,n=u.createElement("span",null,"Als gebruik workflow bij deze status is aangezet, dan zal er automatisch eenmalig een e-mail verstuurd gaan worden naar contact als kans op deze status is gezet.",u.createElement("br",null),"De verzenddatum wordt dan bepaald, rekening houdend met het opgegeven aantal dagen.",u.createElement("br",null),"Bij aantal dagen 0 zal de e-mail direct verzonden worden.");return u.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return t.onDivEnter()},onMouseLeave:function(){return t.onDivLeave()}},this.state.showEdit&&a.manageFinancial?u.createElement(C,{opportunityStatus:this.props.opportunityStatus,switchToView:this.switchToView,updateState:this.props.updateState,explanationWf:n}):u.createElement(L,(0,l.A)({},this.props.opportunityStatus,{switchToEdit:this.switchToEdit,explanationWf:n})))}}])}(u.Component);const R=(0,v.Ng)(function(t){return{meDetails:t.meDetails,permissions:t.meDetails.permissions}})(x),W=function(t){var e=t.opportunityStatus,a=t.hasError,n=t.isLoading,r=t.updateState,o="",s=!0;return a?o="Fout bij het ophalen van kans status.":n?o="Gegevens aan het laden.":(0,f.isEmpty)(e)?o="Geen kans status gevonden!":s=!1,s?u.createElement("div",null,o):u.createElement("div",null,u.createElement(R,{opportunityStatus:e,updateState:r}))};function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?B(Object(a),!0).forEach(function(e){(0,c.A)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(V=function(){return!!t})()}var G=function(t){function e(t){var a,r,i,l;return(0,n.A)(this,e),r=this,i=e,l=[t],i=(0,s.A)(i),a=(0,o.A)(r,V()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l)),(0,c.A)(a,"callFetchOpportunityStatusDetails",function(){var t,e;a.setState({isLoading:!0,hasError:!1}),(t=a.props.params.id,e="jory/opportunity-status/".concat(t),(0,S.A)().get(e,{params:{jory:w}})).then(function(t){a.setState({isLoading:!1,opportunityStatus:F({},t.data.data)})}).catch(function(t){a.setState({isLoading:!1,hasError:!0})})}),(0,c.A)(a,"updateState",function(t){a.setState({opportunityStatus:t})}),a.state={opportunityStatus:{},isLoading:!1,hasError:!1},a}return(0,i.A)(e,t),(0,r.A)(e,[{key:"componentDidMount",value:function(){this.callFetchOpportunityStatusDetails()}},{key:"render",value:function(){return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-9"},u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(y.A,null,u.createElement(b.A,{className:"panel-small"},u.createElement(d,{name:this.state.opportunityStatus.name||""})))),u.createElement("div",{className:"col-md-12 margin-10-top"},u.createElement(W,{opportunityStatus:this.state.opportunityStatus,isLoading:this.state.isLoading,hasError:this.state.hasError,updateState:this.updateState}))),u.createElement("div",{className:"col-md-3"}))}}])}(u.Component);const M=function(t){var e=(0,p.g)();return u.createElement(G,(0,l.A)({},t,{params:e}))}}}]);