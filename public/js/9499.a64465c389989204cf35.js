"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[9499],{59499:(t,e,a)=>{a.r(e),a.d(e,{default:()=>G});var n=a(23029),r=a(92901),o=a(56822),s=a(53954),i=a(85501),c=a(64467),l=a(96540),u=a(24179),p=a(91858);const m=function(t){var e=t.name;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},l.createElement(p.A,{iconName:"arrowLeft",onClickAction:u.Nc.goBack}))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"text-center"},"Kans status: ",e)),l.createElement("div",{className:"col-md-4"}))};var d=a(2543),f=a(58168),h=a(69733),v=a(95093),E=a.n(v),g=a(55956),y=a(62493),b=a(55849),S=a(61941),w={fld:["id","name","usesWf"]};var A=a(17375),O=a(26062),j=a(77465),N=a(30483);function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){(0,c.A)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(z=function(){return!!t})()}E().locale("nl");var P=function(t){function e(t){var a,r,i,l;return(0,n.A)(this,e),r=this,i=e,l=[t],i=(0,s.A)(i),a=(0,o.A)(r,z()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l)),(0,c.A)(a,"handleInputChange",(function(t){var e=t.target,n="checkbox"===e.type?e.checked:e.value,r=e.name;a.setState(D(D({},a.state),{},{opportunityStatus:D(D({},a.state.opportunityStatus),{},(0,c.A)({},r,n))}))})),(0,c.A)(a,"handleSubmit",(function(t){t.preventDefault();var e=a.state.opportunityStatus;a.setState(D(D({},a.state),{},{errors:{}})),function(t){var e="".concat("opportunity-status","/").concat(t.id);return S.A.post(e,t,{params:{jory:w}})}(e).then((function(t){a.props.updateState(t.data.data),a.props.fetchSystemData(),a.props.switchToView()})).catch((function(t){alert("Er is iets misgegaan bij opslaan. Herlaad de pagina en probeer het nogmaals.")}))})),a.state={opportunityStatus:D({},t.opportunityStatus),errors:{usesWf:!1}},a.handleReactSelectChange=a.handleReactSelectChange.bind(a),a}return(0,i.A)(e,t),(0,r.A)(e,[{key:"handleReactSelectChange",value:function(t,e){this.setState(D(D({},this.state),{},{opportunityStatus:D(D({},this.state.opportunityStatus),{},(0,c.A)({},e,t))}))}},{key:"render",value:function(){var t=this.state.opportunityStatus,e=t.name,a=t.usesWf;return l.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},l.createElement(y.A,null,l.createElement(b.A,null,l.createElement("div",{className:"row"},l.createElement(N.A,{label:"Omschrijving",divSize:"col-sm-10",value:e,className:"col-sm-10 form-group"})),l.createElement("div",{className:"row"},l.createElement(j.A,{label:"Gebruikt workflow email bij deze status",divSize:"col-sm-10",name:"usesWf",value:a,onChangeAction:this.handleInputChange})),1==a&&l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement(N.A,{label:"Uitleg workflow",divSize:"col-sm-10",value:this.props.explanationWf,className:"col-sm-10 form-group"})))),l.createElement(b.A,null,l.createElement("div",{className:"pull-right btn-group",role:"group"},l.createElement(g.A,{buttonClassName:"btn-default",buttonText:"Sluiten",onClickAction:this.props.switchToView}),l.createElement(g.A,{buttonText:"Opslaan",type:"submit",value:"Submit"})))))}}])}(l.Component);const C=(0,h.Ng)(null,(function(t){return(0,A.zH)({fetchSystemData:O.u},t)}))(P),L=function(t){var e=t.name,a=t.usesWf,n=t.switchToEdit,r=t.explanationWf;return l.createElement("div",{onClick:n},l.createElement(y.A,null,l.createElement(b.A,null,l.createElement("div",{className:"row"},l.createElement(N.A,{label:"Omschrijving",divSize:"col-sm-10",value:e,className:"col-sm-10 form-group"})),l.createElement("div",{className:"row"},l.createElement(N.A,{label:"Gebruikt workflow bij deze status",divSize:"col-sm-10",value:a?"Ja":"Nee",className:"col-sm-10 form-group"})),1==a&&l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement(N.A,{label:"Uitleg workflow",divSize:"col-sm-10",value:r,className:"col-sm-10 form-group"}))))))};function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(T=function(){return!!t})()}var x=function(t){function e(t){var a,r,i,l;return(0,n.A)(this,e),r=this,i=e,l=[t],i=(0,s.A)(i),a=(0,o.A)(r,T()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l)),(0,c.A)(a,"switchToEdit",(function(){a.setState({showEdit:!0})})),(0,c.A)(a,"switchToView",(function(){a.setState({showEdit:!1,activeDiv:""})})),a.state={showEdit:!1,activeDiv:""},a}return(0,i.A)(e,t),(0,r.A)(e,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var t=this,e=this.props.meDetails.permissions,a=void 0===e?{}:e,n=l.createElement("span",null,"Als gebruik workflow bij deze status is aangezet, dan zal er automatisch eenmalig een e-mail verstuurd gaan worden naar contact als kans op deze status is gezet.",l.createElement("br",null),"De verzenddatum wordt dan bepaald, rekening houdend met het opgegeven aantal dagen.",l.createElement("br",null),"Bij aantal dagen 0 zal de e-mail direct verzonden worden.");return l.createElement("div",{className:this.state.activeDiv,onMouseEnter:function(){return t.onDivEnter()},onMouseLeave:function(){return t.onDivLeave()}},this.state.showEdit&&a.manageFinancial?l.createElement(C,{opportunityStatus:this.props.opportunityStatus,switchToView:this.switchToView,updateState:this.props.updateState,explanationWf:n}):l.createElement(L,(0,f.A)({},this.props.opportunityStatus,{switchToEdit:this.switchToEdit,explanationWf:n})))}}])}(l.Component);const R=(0,h.Ng)((function(t){return{meDetails:t.meDetails,permissions:t.meDetails.permissions}}))(x),W=function(t){var e=t.opportunityStatus,a=t.hasError,n=t.isLoading,r=t.updateState,o="",s=!0;return a?o="Fout bij het ophalen van kans status.":n?o="Gegevens aan het laden.":(0,d.isEmpty)(e)?o="Geen kans status gevonden!":s=!1,s?l.createElement("div",null,o):l.createElement("div",null,l.createElement(R,{opportunityStatus:e,updateState:r}))};function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?B(Object(a),!0).forEach((function(e){(0,c.A)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V=function(){return!!t})()}const G=function(t){function e(t){var a,r,i,l;return(0,n.A)(this,e),r=this,i=e,l=[t],i=(0,s.A)(i),a=(0,o.A)(r,V()?Reflect.construct(i,l||[],(0,s.A)(r).constructor):i.apply(r,l)),(0,c.A)(a,"callFetchOpportunityStatusDetails",(function(){var t,e;a.setState({isLoading:!0,hasError:!1}),(t=a.props.params.id,e="jory/opportunity-status/".concat(t),S.A.get(e,{params:{jory:w}})).then((function(t){a.setState({isLoading:!1,opportunityStatus:F({},t.data.data)})})).catch((function(t){a.setState({isLoading:!1,hasError:!0})}))})),(0,c.A)(a,"updateState",(function(t){a.setState({opportunityStatus:t})})),a.state={opportunityStatus:{},isLoading:!1,hasError:!1},a}return(0,i.A)(e,t),(0,r.A)(e,[{key:"componentDidMount",value:function(){this.callFetchOpportunityStatusDetails()}},{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(y.A,null,l.createElement(b.A,{className:"panel-small"},l.createElement(m,{name:this.state.opportunityStatus.name||""})))),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(W,{opportunityStatus:this.state.opportunityStatus,isLoading:this.state.isLoading,hasError:this.state.hasError,updateState:this.updateState}))),l.createElement("div",{className:"col-md-3"}))}}])}(l.Component)}}]);