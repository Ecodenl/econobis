"use strict";(self.webpackChunkeco=self.webpackChunkeco||[]).push([[9533],{76837:(e,t,n)=>{n.d(t,{Rl:()=>a,_5:()=>r,xJ:()=>l});var a=function(e){return{type:"FETCH_TASK_DETAILS",id:e}},l=function(e){return{type:"UPDATE_TASK_DETAILS",task:e}},r=function(e){return{type:"DELETE_TASK",id:e}}},38404:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(67294),l=n(45697),r=n.n(l),s=n(86733),o=n(30071),i=n(30381),c=n.n(i);c().locale("nl");var u=function(e){var t=e.className,n=e.value,l=e.onChangeAction,r=e.placeholder,i=n?c()(n).format("L"):"";return a.createElement("th",{className:"DayPicker-overflow ".concat(t)},a.createElement(s.default,{value:i,onDayChange:l,formatDate:o.formatDate,parseDate:o.parseDate,dayPickerProps:{showWeekNumbers:!0,locale:"nl",firstDayOfWeek:1,localeUtils:o.default},inputProps:{className:"form-control input-sm",placeholder:r},placeholder:""}))};u.defaultProps={className:"",value:null,placeholder:""},u.propTypes={className:r().string,value:r().oneOfType([r().string,r().object]),onChangeAction:r().func,placeholder:r().string};const m=u},69025:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(67294),l=n(45697),r=n.n(l),s=n(97894),o=n(75987),i=n(75495),c=void 0,u=function(e){var t=e.RowClassName,n=e.setSorts,l=e.sortColumn,r=e.title,u=e.width;return a.createElement("th",{className:t,width:u},r,a.createElement(s.ZP,{className:"pull-right small",size:14,icon:i.D,role:"button",onClick:n.bind(c,l,"ASC")}),a.createElement(s.ZP,{className:"pull-right small",size:14,icon:o.z,role:"button",onClick:n.bind(c,l,"DESC")}))};u.defaultProps={RowClassName:""},u.propTypes={setSorts:r().func.isRequired,sortColumn:r().string.isRequired,title:r().string.isRequired,width:r().string.isRequired,RowClassName:r().string};const m=u},49533:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var a=n(29439),l=n(67294),r=n(86706),s=function(e,t,n){return{type:"FETCH_TASKS",filters:e,sorts:t,pagination:n}},o=function(e){return{type:"SET_FILTER_TASK_CREATED_AT",createdAt:e}},i=function(e){return{type:"SET_FILTER_TASK_TYPE_ID",typeId:e}},c=function(e){return{type:"SET_FILTER_TASK_NOTE",note:e}},u=function(e){return{type:"SET_FILTER_TASK_CONTACT_FULL_NAME",contactFullName:e}},m=function(e){return{type:"SET_FILTER_TASK_DATE_PLANNED_START",datePlannedStart:e}},d=function(e){return{type:"SET_FILTER_TASK_RESPONSIBLE_NAME",responsibleName:e}},f=function(e){return{type:"SET_FILTER_TASK_ME",me:e}},h=function(e){return{type:"SET_TASKS_PAGINATION",pagination:e}},p=n(87462),E=n(93433),k=n(96498),g=n(75286),v=n(24480),T=n(69025),S=n(52822);const N=(0,r.$j)(null,(function(e){return{setTasksSortsFilter:function(t,n){e(function(e,t){return{type:"SET_TASKS_SORTS",field:e,order:t}}(t,n))}}}))((function(e){var t=function(t,n){e.setTasksSortsFilter(t,n),setTimeout((function(){e.fetchTasksData()}),100)};return l.createElement("tr",{className:"thead-title"},e.showSelectTasks&&l.createElement("th",{width:"5%"}),l.createElement(T.Z,{sortColumn:"createdAt",title:"Datum",width:"8%",setSorts:t}),l.createElement(T.Z,{sortColumn:"typeName",title:"Type taak",width:"10%",setSorts:t}),l.createElement(T.Z,{sortColumn:"note",title:"Taak / notitie",width:e.showSelectTasks?"15%":"20%",setSorts:t}),l.createElement(T.Z,{sortColumn:"contactFullName",title:"Contact",width:"17%",setSorts:t}),l.createElement(T.Z,{sortColumn:"datePlannedStart",title:"Datum afhandelen",width:"8%",setSorts:t}),l.createElement(S.Z,{title:"Verantwoordelijke",width:"15%"}),l.createElement("th",{width:"5%"}))}));var A=n(83920),y=n(30381),C=n.n(y),w=n(38404);const b=(0,r.$j)((function(e){return{filters:e.tasks.filters,taskTypes:e.systemData.taskTypes}}),(function(e){return(0,A.DE)({setFilterTaskCreatedAt:o,setFilterTaskTypeId:i,setFilterTaskNote:c,setFilterTaskContactFullName:u,setFilterTaskDatePlannedStart:m,setFilterTaskResponsibleName:d},e)}))((function(e){return l.createElement("tr",{className:"thead-filter"},e.showSelectTasks&&l.createElement("th",null,l.createElement("input",{type:"checkbox",onChange:e.toggleCheckedAll})),l.createElement(w.Z,{value:e.filters.createdAt.data&&e.filters.createdAt.data,onChangeAction:function(t){void 0===t?e.setFilterTaskCreatedAt(""):e.setFilterTaskCreatedAt(C()(t).format("Y-MM-DD"))}}),l.createElement("th",null,l.createElement("select",{className:"form-control input-sm",value:e.filters.typeId.data,onChange:function(t){e.setFilterTaskTypeId(t.target.value),setTimeout((function(){e.onSubmitFilter()}),100)}},l.createElement("option",null),e.taskTypes.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.name)})))),l.createElement("th",null,l.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.note.data,onChange:function(t){e.setFilterTaskNote(t.target.value)}})),l.createElement("th",null,l.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.contactFullName.data,onChange:function(t){e.setFilterTaskContactFullName(t.target.value)}})),l.createElement(w.Z,{value:e.filters.datePlannedStart.data&&e.filters.datePlannedStart.data,onChangeAction:function(t){void 0===t?e.setFilterTaskDatePlannedStart(""):e.setFilterTaskDatePlannedStart(C()(t).format("Y-MM-DD"))}}),l.createElement("th",null,l.createElement("input",{type:"text",className:"form-control input-sm",value:e.filters.responsibleName.data,onChange:function(t){e.setFilterTaskResponsibleName(t.target.value)}})),l.createElement("th",null))}));var Z=n(15671),D=n(43144),I=n(97326),F=n(60136),_=n(82963),R=n(61120),P=n(61409),M=n(97894),B=n(77320),L=n(75502),j=n(65148);var q=function(e){(0,F.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,R.Z)(t);if(n){var l=(0,R.Z)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,_.Z)(this,e)});function r(e){var t;return(0,Z.Z)(this,r),(t=a.call(this,e)).state={showActionButtons:!1,highlightRow:""},t.openItem=t.openItem.bind((0,I.Z)(t)),t.setItemFinished=t.setItemFinished.bind((0,I.Z)(t)),t}return(0,D.Z)(r,[{key:"onRowEnter",value:function(){this.setState({showActionButtons:!0,highlightRow:"highlight-row"})}},{key:"onRowLeave",value:function(){this.setState({showActionButtons:!1,highlightRow:""})}},{key:"openItem",value:function(){P.nA.push("/taak/".concat(this.props.id))}},{key:"setItemFinished",value:function(){var e={id:this.props.id,finished:!0};this.props.setTaskFinished(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.createdAt,r=t.typeName,s=t.noteSummary,o=t.contactFullName,i=t.datePlannedStart,c=t.responsibleName,u=t.showSelectTasks,m=t.toggleTaskCheck,d=t.taskIds;return l.createElement("tr",{className:this.state.highlightRow,onDoubleClick:function(){return e.openItem(n)},onMouseEnter:function(){return e.onRowEnter()},onMouseLeave:function(){return e.onRowLeave()}},u&&l.createElement("td",null,l.createElement("input",{type:"checkbox",name:n,onChange:m,checked:!!(d&&d.length>0)&&d.includes(n)})),l.createElement("td",null,C()(a).format("L")),l.createElement("td",null,r),l.createElement("td",null,s),l.createElement("td",null,o),l.createElement("td",null,i&&C()(i).format("L")),l.createElement("td",null,c),l.createElement("td",null,this.state.showActionButtons?l.createElement("a",{role:"button",onClick:this.openItem},l.createElement(M.ZP,{className:"mybtn-success",size:14,icon:L.r})):"",this.state.showActionButtons&&this.props.permissions.manageTask?l.createElement("a",{role:"button",onClick:this.props.showDeleteItemModal.bind(this,n,s)},l.createElement(M.ZP,{className:"mybtn-danger",size:14,icon:B._})):"",this.state.showActionButtons?l.createElement("a",{role:"button",onClick:this.setItemFinished},l.createElement(M.ZP,{className:"mybtn-success",size:14,icon:j.B})):""))}}]),r}(l.Component);const K=(0,r.$j)((function(e){return{permissions:e.meDetails.permissions}}),(function(e){return{setTaskFinished:function(t){e({type:"SET_TASK_FINISHED",task:t})}}}))(q);var x=n(41355),z=n(76837);const O=(0,r.$j)(null,(function(e){return{deleteTask:function(t){e((0,z._5)(t))}}}))((function(e){return l.createElement(x.Z,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){return e.deleteTask(e.id),void e.closeDeleteItemModal()},title:"Verwijderen"},"Verwijder taak: ",l.createElement("strong",null," ",e.name," "))}));var U=n(51910),V=n(55451),G=n(4850),$=n(11776);const W=function(e){var t=(0,r.I0)();return l.createElement(x.Z,{buttonConfirmText:"Verwijderen taken",buttonClassName:"btn-danger",closeModal:e.closeBulkDeleteModal,confirmAction:function(){e.taskIds&&e.taskIds.length>0&&G.Z.deleteBulkTasks(e.taskIds).then((function(n){n.data.length>0&&t((0,$.s)(200,n.data)),e.confirmActionsBulkDelete()})).catch((function(t){console.log("hier de error:"),console.log(t),e.confirmActionsBulkDelete()}))},title:"Verwijderen taken"},"Verwijder alle ",l.createElement("strong",null,e.taskIds.length," geselecteerde taken.")," Weet je het zeker?")};var H=n(21606),Y=n(56170);const J=function(e){var t=e.confirmActionsBulkUpdate,n=e.closeBulkUpdateModal,s=e.taskIds,o=(0,r.v9)((function(e){return e.systemData.teams})),i=(0,r.v9)((function(e){return e.systemData.users})),c=(0,l.useState)(0),u=(0,a.Z)(c,2),m=u[0],d=u[1],f=(0,l.useState)(-1),h=(0,a.Z)(f,2),p=h[0],E=h[1],k=(0,l.useState)(-1),g=(0,a.Z)(k,2),v=g[0],T=g[1];return l.createElement(x.Z,{buttonConfirmText:"Bijwerken taken",buttonClassName:"btn-danger",closeModal:n,confirmAction:function(){return function(){if(s&&s.length>0){var e={};m&&(e.finished=m),-1!==p&&(e.responsibleUserId=p),-1!==v&&(e.responsibleTeamId=v),G.Z.updateBulkTasks(s,e).then((function(){t()}))}}()},title:"Bijwerken taken"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement(H.Z,{label:"Afgehandeld?",divSize:"col-sm-12",name:"finished",value:m,onChangeAction:function(e){return d(e.target.checked)}}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement(Y.Z,{label:"Verantwoordelijke",divSize:"col-sm-12",name:"responsible",optionsInGroups:[{name:"general",label:"Algemeen",options:[{id:"-1",name:"--- niet wijzigen ---"}]},{name:"user",label:"Gebruikers",options:i,optionName:"fullName"},{name:"team",label:"Teams",options:o}],value:-1===p&&-1===v?"general-1":p?"user"+p:v?"team"+v:"general-1",onChangeAction:function(e){return function(e){if("general-1"===e)return E(-1),void T(-1);E(null),T(null),0===e.indexOf("user")&&E(e.replace("user","")),0===e.indexOf("team")&&T(e.replace("team",""))}(e.target.value)},emptyOption:!1}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},"Bijwerken alle ",l.createElement("strong",null,s.length," geselecteerde taken.")," Weet je het zeker?")))},Q=function(e){var t=e.tasks,n=e.multiSelectEnabled,s=e.setMultiSelectDisabled,o=e.tasksPagination,i=e.onSubmitFilter,c=e.fetchTasksData,u=e.handlePageClick,m=(0,l.useState)(!1),d=(0,a.Z)(m,2),f=(d[0],d[1]),h=(0,l.useState)([]),T=(0,a.Z)(h,2),S=T[0],A=T[1],y=(0,l.useState)(!1),C=(0,a.Z)(y,2),w=C[0],Z=C[1],D=(0,l.useState)({id:"",name:""}),I=(0,a.Z)(D,2),F=I[0],_=I[1],R=(0,l.useState)(!1),P=(0,a.Z)(R,2),M=P[0],B=P[1],L=(0,l.useState)(!1),j=(0,a.Z)(L,2),q=j[0],x=j[1],z=(0,r.v9)((function(e){return e.meDetails.permissions})),G=(0,r.v9)((function(e){return e.loadingData.isLoading})),$=(0,r.v9)((function(e){return e.loadingData.hasError}));function H(e){var t=e.target.checked,n=Number(e.target.name);t?(A([].concat((0,E.Z)(S),[n])),f(S.length===te.taskIdsTotal.length)):(A((0,E.Z)(S.filter((function(e){return e!==n})))),f(!1))}function Y(e,t){Z(!0),_({id:e,name:t})}(0,l.useEffect)((function(){n||(f(!1),A([]))}),[n]);var Q=t.data,X=void 0===Q?[]:Q,ee=t.meta,te=void 0===ee?{}:ee,ne="",ae=!0;$?ne="Fout bij het ophalen van taken.":G?ne="Gegevens aan het laden.":0===X.length?ne="Geen taken gevonden!":ae=!1;var le=0;return S&&(le=te&&te.taskIdsTotal?S.length+"/"+te.taskIdsTotal.length:S.length),l.createElement("div",null,l.createElement("form",{onKeyUp:function(e){13===e.keyCode&&i()}},n&&z.manageTask&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"alert alert-success"},"Geselecteerde taken: ",le)),l.createElement("div",{className:"col-md-12 margin-10-bottom"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(V.Z,{iconName:"pencil",onClickAction:function(e,t){x(!0)},title:"Bijwerken geselecteerde taken"}),l.createElement(V.Z,{iconName:"trash",onClickAction:function(e,t){B(!0)},title:"Verwijderen geselecteerde taken"})))),l.createElement(k.Z,null,l.createElement(g.Z,null,l.createElement(N,{fetchTasksData:function(){return c()},showSelectTasks:n}),l.createElement(b,{onSubmitFilter:i,showSelectTasks:n,toggleCheckedAll:function(){var e=event.target.checked,t=[];e&&(t=te.taskIdsTotal),A(t),f(e)}})),l.createElement(v.Z,null,ae?l.createElement("tr",null,l.createElement("td",{colSpan:n?8:7},ne)):X.map((function(e){return l.createElement(K,(0,p.Z)({key:e.id},e,{showDeleteItemModal:Y,showSelectTasks:n,toggleTaskCheck:H,taskIds:S}))})))),l.createElement("div",{className:"col-md-6 col-md-offset-3"},l.createElement(U.Z,{onPageChangeAction:u,totalRecords:te.total,initialPage:o.page}))),w&&l.createElement(O,(0,p.Z)({closeDeleteItemModal:function(){Z(!1),_({id:"",name:""})}},F)),M&&l.createElement(W,{confirmActionsBulkDelete:function(e,t){B(!1),s(),c()},closeBulkDeleteModal:function(e,t){B(!1)},taskIds:S}),q&&l.createElement(J,{confirmActionsBulkUpdate:function(e,t){x(!1),s(),c()},closeBulkUpdateModal:function(e,t){x(!1)},taskIds:S}))},X=(0,r.$j)((function(e){return{permissions:e.meDetails.permissions,tasks:e.tasks.list}}),null)((function(e){var t=e.permissions,n=void 0===t?{}:t,a=e.tasks.meta,r=void 0===a?{}:a;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"btn-group",role:"group"},l.createElement(V.Z,{iconName:"refresh",onClickAction:e.resetTaskFilters}),n.manageTask&&l.createElement(V.Z,{iconName:"plus",onClickAction:function(){P.nA.push("taak/nieuw")}}),n.manageTask&&l.createElement(V.Z,{iconName:"check",onClickAction:e.setMultiSelectEnabled,title:"Taak selectie maken"}))),l.createElement("div",{className:"col-md-4"},l.createElement("h3",{className:"text-center table-title"},e.me?"Eigen taken":"Taken")),l.createElement("div",{className:"col-md-4"},l.createElement("div",{className:"pull-right"},"Resultaten: ",r.total||0)))}));var ee=n(4257),te=n(14309),ne=n(98688),ae=n(96486);const le=function(e){var t=(0,l.useState)(!1),n=(0,a.Z)(t,2),o=n[0],i=n[1],c=(0,r.v9)((function(e){return e.tasks.list})),u=(0,r.v9)((function(e){return e.tasks.filters})),m=(0,r.v9)((function(e){return e.tasks.sorts})),d=(0,r.v9)((function(e){return e.tasks.pagination})),p=(0,r.I0)();function E(){setTimeout((function(){var e=(0,ee.Z)(u),t=m,n={limit:20,offset:d.offset};p(s(e,t,n))}),100)}(0,l.useEffect)((function(){e.params&&"eigen"===e.params.type?p(f(!0)):p(f(!1))}),[e.params.type]),(0,l.useEffect)((function(){E()}),[u,m,d]);var k=!1;return"eigen"===e.params.type&&(k=!0),l.createElement(te.Z,null,l.createElement(ne.Z,null,l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(X,{resetTaskFilters:function(){p({type:"CLEAR_FILTER_TASKS"}),(0,ae.isEmpty)(e.params)||"eigen"===e.params.type&&p(f(!0))},me:k,setMultiSelectEnabled:function(){return i(!o)}})),l.createElement("div",{className:"col-md-12 margin-10-top"},l.createElement(Q,{tasks:c,multiSelectEnabled:o,setMultiSelectDisabled:function(){return i(!1)},tasksPagination:d,onSubmitFilter:function(){p({type:"CLEAR_TASKS"}),p(h({page:0,offset:0}))},fetchTasksData:E,handlePageClick:function(e){var t=e.selected,n=Math.ceil(20*t);p(h({page:t,offset:n}))}}))))}},4257:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){var t=[];for(var n in e)""!==e[n].data&&t.push(e[n]);return t}},75495:(e,t)=>{t.D=void 0,t.D={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 832q0 53-37 90l-651 652q-39 37-91 37-53 0-90-37l-651-652q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l294 294v-704q0-52 38-90t90-38h128q52 0 90 38t38 90v704l294-294q37-37 90-37 52 0 91 37l75 75q37 39 37 91z"}}]}},75987:(e,t)=>{t.z=void 0,t.z={viewBox:"0 0 1664 1792",children:[{name:"path",attribs:{d:"M1611 971q0 51-37 90l-75 75q-38 38-91 38-54 0-90-38l-294-293v704q0 52-37.5 84.5t-90.5 32.5h-128q-53 0-90.5-32.5t-37.5-84.5v-704l-294 293q-36 38-90 38t-90-38l-75-75q-38-38-38-90 0-53 38-91l651-651q35-37 90-37 54 0 91 37l651 651q37 39 37 91z"}}]}}}]);