(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{1598:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),o=a(17),i=a.n(o),l=a(15),s=a.n(l),c=a(16),d=a.n(c),u=a(12),m=a.n(u),p=a(0),h=a.n(p),g=a(19),v=a(9),E=a.n(v),f=a(5),b=a.n(f),w=a(4),y=a(27),k=a(30),j=a(50),C=a(35),R=a(103),T=function(e){return h.a.createElement(C.a,{buttonConfirmText:"Verwijder",buttonClassName:"btn-danger",closeModal:e.closeDeleteItemModal,confirmAction:function(){R.a.deleteProjectRevenue(e.id).then((function(){w.f.push("/project/details/".concat(e.projectId))}))},title:"Verwijderen"},h.a.createElement("p",null,"Weet u zeker dat u deze opbrengst wilt verwijderen?"))},D=a(129),N=a(24),P=a(7),S=a.n(P),A=a(163),I=a.n(A);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d()(this,a)}}var O=function(e){s()(a,e);var t=M(a);function a(e){var n;return r()(this,a),n=t.call(this,e),b()(E()(n),"toggleDelete",(function(){n.setState({showDelete:!n.state.showDelete})})),b()(E()(n),"getCSV",(function(){n.props.blockUI(),setTimeout((function(){R.a.getCSV(n.props.revenue.id).then((function(e){I()(e.data,"Opbrengstverdeling-"+S()().format("YYYY-MM-DD HH:mm:ss")+".csv"),n.props.unblockUI()})).catch((function(e){n.props.unblockUI()}))}),100)})),n.state={showDelete:!1},n}return i()(a,[{key:"render",value:function(){var e=this.props.revenue;"project/opbrengst/".concat(this.props.revenue.id,"/energieleverancier-rapport"),"project/opbrengst/".concat(this.props.revenue.id,"/energieleverancier-excel"),e.category&&e.category.codeRef;return h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm-12"},h.a.createElement(y.a,null,h.a.createElement(k.a,{className:"panel-small"},h.a.createElement("div",{className:"col-md-2"},h.a.createElement("div",{className:"btn-group btn-group-flex margin-small",role:"group"},h.a.createElement(j.a,{iconName:"glyphicon-arrow-left",onClickAction:w.e.goBack}),this.props.permissions.manageFinancial&&!this.props.revenue.confirmed&&h.a.createElement(j.a,{iconName:"glyphicon-trash",onClickAction:this.toggleDelete}),h.a.createElement(j.a,{iconName:"glyphicon-download-alt",onClickAction:this.getCSV}))),h.a.createElement("div",{className:"col-md-8"},h.a.createElement("h4",{className:"text-center text-success margin-small"},h.a.createElement("strong",null,"Opbrengst project ",e.project?e.project.name:""))),h.a.createElement("div",{className:"col-md-2"})))),this.state.showDelete&&h.a.createElement(T,{closeDeleteItemModal:this.toggleDelete,id:e.id,projectId:e.project.id}))}}]),a}(p.Component),x=Object(g.b)((function(e){return{revenue:e.projectRevenue,permissions:e.meDetails.permissions}}),(function(e){return Object(N.b)({blockUI:D.a,unblockUI:D.b},e)}))(O),F=a(40),L=a(13),Y=a.n(L),B=a(549),H=a(31),W=a.n(H);S.a.locale("nl");var z=function(e){var t=e.participation,a=t.id,n=t.contactName,r=t.contactType,o=t.contactPrimaryEmailAddress,i=t.address,l=t.postalCode,s=t.city,c=t.contactIban,d=t.payoutIban,u=t.deliveredTotal,m=t.kwhReturn,p=t.participationsAmount,g=t.participationsLoanAmount,v=t.payout,E=t.payoutType,f=t.payoutTypeCodeRef,b=t.datePayout,w=t.energySupplierName,y=t.status,k=!("createInvoices"===e.createType||o&&o.email&&!W.a.isEmpty(o.email)),j=!(i&&!W.a.isEmpty(i)),C=!(l&&!W.a.isEmpty(l)),R=!(s&&!W.a.isEmpty(s)),T=!("revenueKwh"===e.projectRevenueCategoryCodeRef||"account"!==f||c&&!W.a.isEmpty(c)||d&&!W.a.isEmpty(d)),D=k||j||C||R?"Er ontbreken contactgegevens (email, adres, postcode of plaats).":"",N=T?"Iban code ontbreekt.":"",P=k||j||C||R||T?"missing-data-row":null,A="";switch(y){case"concept":A="Concept";break;case"confirmed":A="Definitief";break;case"in-progress":A="Bezig...";break;case"processed":A="Verwerkt"}return h.a.createElement("div",{title:D+" "+N,className:"row border ".concat("processed"===y?"warning-row":""," ").concat(P||"")},e.showCheckboxList?h.a.createElement("div",{className:"col-sm-1"},h.a.createElement("input",{type:"checkbox",name:a,onChange:e.toggleDistributionCheck,checked:e.distributionIds.includes(a)})):null,h.a.createElement("div",{className:"col-sm-1"},r?r.name:""),h.a.createElement("div",{className:"col-sm-2"},n),"loan"===e.projectTypeCodeRef?h.a.createElement("div",{className:"col-sm-2"},Object(B.a)(g)):h.a.createElement("div",{className:"col-sm-1"},p),"revenueKwh"===e.projectRevenueCategoryCodeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col-sm-2"},w&&w),h.a.createElement("div",{className:"col-sm-1"},u&&u),h.a.createElement("div",{className:"col-sm-2"},m?"â‚¬"+m.toLocaleString("nl",{minimumFractionDigits:2,maximumFractionDigits:2}):"")):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col-sm-2"},v?Object(B.a)(v):0),h.a.createElement("div",{className:"col-sm-1"},E&&E),h.a.createElement("div",{className:"col-sm-2"},b?S()(b).format("L"):"")),h.a.createElement("div",{className:"col-sm-2"},A))},_=a(164),K=Object(g.b)((function(e){return{projectTypeCodeRef:e.projectRevenue.project.projectType.codeRef,projectRevenue:e.projectRevenue}}))((function(e){return h.a.createElement("div",null,h.a.createElement("div",{className:"row border header"},e.projectRevenue.confirmed&&e.showCheckboxList?h.a.createElement("div",{className:"col-sm-1"},h.a.createElement("input",{type:"checkbox",onChange:e.toggleCheckedAll,checked:e.checkedAll})):null,h.a.createElement("div",{className:"col-sm-1"},"Type"),h.a.createElement("div",{className:"col-sm-2"},"Naam"),"loan"==e.projectTypeCodeRef?h.a.createElement("div",{className:"col-sm-2"},"Huidige lening"):h.a.createElement("div",{className:"col-sm-1"},"Deelnames"),"revenueKwh"===e.projectRevenue.category.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col-sm-2"},"Energieleverancier"),h.a.createElement("div",{className:"col-sm-1"},"Geleverd totaal"),h.a.createElement("div",{className:"col-sm-2"},"Teruggave energiebelasting")):"","revenueEuro"===e.projectRevenue.category.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col-sm-2"},"Uit te keren bedrag"),h.a.createElement("div",{className:"col-sm-1"},"Uitkeren op"),h.a.createElement("div",{className:"col-sm-2"},"Datum uitkering")):"","redemptionEuro"===e.projectRevenue.category.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col-sm-2"},"Af te lossen bedrag"),h.a.createElement("div",{className:"col-sm-1"},"Aflossen op"),h.a.createElement("div",{className:"col-sm-2"},"Datum aflossing")):"",h.a.createElement("div",{className:"col-sm-2"},"Status")),e.projectRevenue.distribution&&e.projectRevenue.distribution.data.length>0?e.projectRevenue.distribution.data.map((function(t){return h.a.createElement(z,{key:t.id,participation:t,showCheckboxList:e.showCheckboxList,toggleDistributionCheck:e.toggleDistributionCheck,projectRevenueCategoryCodeRef:e.projectRevenue.category.codeRef,projectTypeCodeRef:e.projectTypeCodeRef,distributionIds:e.distributionIds,createType:e.createType})})):h.a.createElement("div",null,"Geen deelnemers bekend."),h.a.createElement(_.a,{initialPage:0,onPageChangeAction:e.changePage,recordsPerPage:100,totalRecords:e.projectRevenue.distribution&&e.projectRevenue.distribution.meta&&e.projectRevenue.distribution.meta.total}))})),V=a(53),q=a(38),U=a(123),G=a(92),J=a(20),Z=a(76),Q=a(36),X=a(91),$=a(198),ee=a.n($),te=a(51),ae=a(128),ne=a(89);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d()(this,a)}}var oe=function(e){s()(a,e);var t=re(a);function a(e){var n;return r()(this,a),n=t.call(this,e),b()(E()(n),"reloadDistributions",(function(){n.props.getDistribution(n.props.projectRevenue.id,0)})),b()(E()(n),"changePage",(function(e){var t=e.selected;n.props.getDistribution(n.props.projectRevenue.id,t)})),b()(E()(n),"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(b()({},r,a))})),b()(E()(n),"handleInputChangeDate",(function(e,t){n.setState(b()({},t,e))})),b()(E()(n),"handleSubjectChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value;n.setState({subject:a})})),b()(E()(n),"handleEmailTemplateChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value;t.name;n.setState({emailTemplateId:a}),Z.a.fetchEmailTemplateWithUser(a).then((function(e){n.setState({subject:e.subject?e.subject:n.state.subject})}))})),b()(E()(n),"toggleShowCheckboxList",(function(e){n.state.showCheckboxList?n.setState({showCheckboxList:!1,distributionIds:[],createType:""}):n.setState({showCheckboxList:!0,createType:e,distributionIds:n.props.projectRevenue.distribution.meta.distributionIdsTotal,checkedAll:!0})})),b()(E()(n),"toggleModal",(function(){n.setState({showModal:!n.state.showModal})})),b()(E()(n),"toggleCheckedAll",(function(e){var t=e.target.checked,a=[];t&&(a=n.props.projectRevenue.distribution.meta.distributionIdsTotal),n.setState({distributionIds:a,checkedAll:t})})),b()(E()(n),"closeSuccesMessage",(function(){n.toggleShowCheckboxList(),n.setState({showSuccessMessage:"",createType:""}),n.reloadDistributions()})),b()(E()(n),"toggleDistributionCheck",(function(e){var t=e.target.checked,a=Number(e.target.name);t?n.setState({distributionIds:[].concat(Y()(n.state.distributionIds),[a])},n.checkAllDistributionsAreChecked):n.setState({distributionIds:n.state.distributionIds.filter((function(e){return e!==a})),checkedAll:!1})})),b()(E()(n),"checkDistributionRevenueReport",(function(){var e=!1;W.a.isEmpty(n.state.templateId)?(e=!0,n.setState({templateIdError:!0})):n.setState({templateIdError:!1}),W.a.isEmpty(n.state.emailTemplateId)?(e=!0,n.setState({emailTemplateIdError:!0})):n.setState({emailTemplateIdError:!1}),W.a.isEmpty(n.state.datePayout+"")?(e=!0,n.setState({datePayoutError:!0})):n.setState({datePayoutError:!1}),n.state.distributionIds.length>0&&!e?(n.props.previewReport({templateId:n.state.templateId,emailTemplateId:n.state.emailTemplateId,subject:n.state.subject,distributionIds:n.state.distributionIds,showOnPortal:n.state.showOnPortal}),w.f.push("/project/opbrengst/".concat(n.props.projectRevenue.id,"/rapportage"))):e||n.setState({showModal:!0,modalText:"Er zijn geen deelnemers geselecteerd.",buttonConfirmText:"Voeg deelnemers toe"})})),b()(E()(n),"checkDistributionRevenueInvoices",(function(){var e=0;n.props.projectRevenue.project&&n.props.projectRevenue.project.lastYearFinancialOverviewDefinitive?e=n.props.projectRevenue.project.lastYearFinancialOverviewDefinitive:n.props.projectRevenue.project.administration&&n.props.projectRevenue.project.administration.lastYearFinancialOverviewDefinitive&&(e=n.props.projectRevenue.project.administration.lastYearFinancialOverviewDefinitive);var t=e>0?ee()(ee()().year(e+1)).format("YYYY-01-01"):"",a="redemptionEuro"===n.props.projectRevenue.category.codeRef?"aflossingsdatum":"uitkeringsdatum";if(!W.a.isEmpty(t)&&ee()(n.state.datePayout).format("YYYY-MM-DD")<t)return n.props.setError(412,"De "+a+" valt in jaar waar al een definitive waardestaat voor dit project aanwezig is."),void n.setState({showModal:!1});if(n.state.distributionIds.length){if(!n.props.projectRevenue.project.administration.canCreatePaymentInvoices.can)return n.props.setError(412,n.props.projectRevenue.project.administration.canCreatePaymentInvoices.message),void n.setState({showModal:!1});n.setState({showModal:!0,modalText:"De "+a+" wordt de datum die bij de mutatie komt te staan in de deelname overzichten van de deelnemers.\nIn een eventueel te maken Sepa betaalbestand wordt dit de datum waarop het bedrag van jouw rekening wordt afgeschreven, als je het Sepa betaalbestand hebt aangeboden bij je bank. Als je dus een "+a+" gebruikt, die voor of op de huidige datum ligt, dan kan je het Sepa bestand dus niet gebruiken.\n\nWeet je zeker dat je de goede "+a+" hebt gekozen ?",modalText2:ee()(n.state.datePayout).format("YYYY-MM-DD")<ee()().nextBusinessDay().format("YYYY-MM-DD")?"Gekozen "+a+" ("+ee()(n.state.datePayout).format("L")+") ligt voor volgende werkdag!":"",modalAction:n.createPaymentInvoices,buttonConfirmText:"Ga verder"})}else n.setState({showModal:!0,modalText:"Er zijn geen deelnemers geselecteerd.",buttonConfirmText:"Voeg deelnemers toe"})})),b()(E()(n),"createPaymentInvoices",(function(){n.toggleModal();var e="**onbekend**";n.props.projectRevenue&&n.props.projectRevenue.project&&n.props.projectRevenue.project.administration&&(e=n.props.projectRevenue.project.administration.name);var t="";t="revenueKwh"===n.props.projectRevenue.category.codeRef?'De mutaties van opbrengsten bij de deelnemers zijn aangemaakt. De status van de uitkeringen zijn veranderd van "Definitief" in Verwerkt.\n                Mutaties die niet verwerkt konden worden, omdat er gegevens ontbreken bij het contact, zijn niet aangemaakt bij de deelnemers. Zij behouden de status "Definitief". Maak de gegevens compleet en maak vervolgens opnieuw een opbrengst verdeling van de uitkeringen met de status "Definitief".':"redemptionEuro"===n.props.projectRevenue.category.codeRef?'De mutaties van aflossing bij de deelnemers zijn aangemaakt. De status van de aflossingen zijn veranderd van "Definitief" in Verwerkt.\n                Mutaties die niet verwerkt konden worden, omdat er gegevens ontbreken bij het contact, zijn niet aangemaakt bij de deelnemers. Zij behouden de status "Definitief". Maak de gegevens compleet en maak vervolgens opnieuw een aflossing verdeling van de aflossingen met de status "Definitief".':'De mutaties van opbrengsten bij de deelnemers zijn aangemaakt. De status van de uitkeringen zijn veranderd van "Definitief" in Verwerkt.\n                Indien er sprake is van uitkeren op rekening, dan is er van de betreffende uitkeringen een Sepa betaalbestand aangemaakt. Deze kan je vinden bij de administratie "'+e+'". Mutaties die niet verwerkt konden worden, omdat er gegevens ontbreken bij het contact, zijn niet aangemaakt bij de deelnemers. Zij behouden de status "Definitief". Maak de gegevens compleet en maak vervolgens opnieuw een opbrengst verdeling van de uitkeringen met de status "Definitief."',document.body.style.cursor="wait",R.a.createPaymentInvoices(n.state.datePayout,n.state.distributionIds).then((function(e){document.body.style.cursor="default",n.setState({showSuccessMessage:!0,successMessage:t})})).catch((function(e){var t=JSON.parse(JSON.stringify(e)),a="Er is iets misgegaan bij opslaan. Probeer het opnieuw.";500!==t.response.status&&(a=t.response.data.message),n.setState({showErrorModal:!0,modalErrorMessage:a})}))})),b()(E()(n),"closeErrorModal",(function(){n.setState({showErrorModal:!1,modalErrorMessage:""})})),n.state={distributionIds:[],templateId:"",templateIdError:!1,templates:[],emailTemplateId:"",emailTemplateIdError:!1,emailTemplates:[],datePayout:ee()().nextBusinessDay().format("YYYY-MM-DD"),datePayoutError:!1,subject:[],documentGroup:"",checkedAll:!1,showCheckboxList:!1,showModal:!1,showSuccessMessage:!1,modalText:"",modalText2:"",modalAction:n.toggleModal,buttonConfirmText:"",readyForCreation:!1,createType:"",showErrorModal:!1,modalErrorMessage:"",showOnPortal:!0},n}return i()(a,[{key:"componentDidMount",value:function(){var e=this;G.a.fetchDocumentTemplatesPeekGeneral().then((function(t){var a=[];t.forEach((function(e){"revenue"==e.group&&a.push({id:e.id,name:e.name})})),e.setState({templates:a})})),Z.a.fetchEmailTemplatesPeek().then((function(t){e.setState({emailTemplates:t})})),this.props.getDistribution(this.props.projectRevenue.id,0)}},{key:"checkAllDistributionsAreChecked",value:function(){this.setState({checkedAll:this.state.distributionIds.length===this.props.projectRevenue.distribution.meta.distributionIdsTotal.length})}},{key:"render",value:function(){var e=this,t=[];this.props.administrations.forEach((function(e){t.push(e.id)}));var a=0;return a=this.props&&this.props.projectRevenue&&this.props.projectRevenue.distribution&&this.props.projectRevenue.distribution.meta&&this.props.projectRevenue.distribution.meta.distributionIdsTotal?this.state.distributionIds.length+"/"+this.props.projectRevenue.distribution.meta.distributionIdsTotal.length:this.state.distributionIds.length,h.a.createElement(y.a,null,h.a.createElement(V.a,null,h.a.createElement("span",{className:"h5 text-bold"},"Opbrengstverdeling deelnemers"),h.a.createElement("div",{className:"btn-group pull-right"},h.a.createElement(j.a,{iconName:"glyphicon-refresh",onClickAction:this.reloadDistributions}),1==this.props.projectRevenue.confirmed&&t.includes(this.props.projectRevenue.project.administrationId)&&(""===this.state.createType?h.a.createElement(h.a.Fragment,null,h.a.createElement(q.a,{buttonText:"Selecteer preview rapportage",onClickAction:function(){return e.toggleShowCheckboxList("createReport")}}),h.a.createElement(q.a,{buttonText:"redemptionEuro"===this.props.projectRevenue.category.codeRef?"Selecteer preview aflossing verdeling":"Selecteer preview opbrengst verdeling",onClickAction:function(){return e.toggleShowCheckboxList("createInvoices")},buttonClassName:"btn-primary"})):null))),h.a.createElement(k.a,null,this.state.showCheckboxList&&"createReport"===this.state.createType?h.a.createElement(y.a,null,h.a.createElement(k.a,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-12"},h.a.createElement(J.a,{label:"Documentgroep",value:"Opbrengst"}),h.a.createElement(U.a,{label:"Document template",name:"templateId",value:this.state.templateId,options:this.state.templates,onChangeAction:this.handleInputChange,required:"required",error:this.state.templateIdError})),h.a.createElement("div",{className:"col-md-12"},h.a.createElement(U.a,{label:"E-mail template",name:"emailTemplateId",value:this.state.emailTemplateId,options:this.state.emailTemplates,onChangeAction:this.handleEmailTemplateChange,required:"required",error:this.state.emailTemplateIdError}),h.a.createElement(Q.a,{label:"E-mail onderwerp",name:"subject",value:this.state.subject,onChangeAction:this.handleSubjectChange})),h.a.createElement("div",{className:"col-md-12"},h.a.createElement(J.a,{label:"Geselecteerde deelnemers",value:a}),h.a.createElement(ne.a,{label:"Rapportage tonen op portal",name:"showOnPortal",value:this.state.showOnPortal,onChangeAction:this.handleInputChange})),h.a.createElement("div",{className:"col-md-12"},h.a.createElement("div",{className:"margin-10-top pull-right btn-group",role:"group"},h.a.createElement(q.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.toggleShowCheckboxList}),h.a.createElement(q.a,{buttonText:"Preview rapportage",onClickAction:this.checkDistributionRevenueReport,type:"submit",value:"Submit"})))))):null,this.state.showCheckboxList&&"createInvoices"===this.state.createType?h.a.createElement(y.a,null,h.a.createElement(k.a,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-12"},h.a.createElement(te.a,{label:"redemptionEuro"===this.props.projectRevenue.category.codeRef?"Aflossingsdatum":"Uitkeringsdatum",name:"datePayout",value:this.state.datePayout,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.datePayoutError})),h.a.createElement("div",{className:"col-md-12"},h.a.createElement("div",{className:"margin-10-top pull-right btn-group",role:"group"},h.a.createElement(q.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.toggleShowCheckboxList}),h.a.createElement(q.a,{buttonText:"revenueKwh"===this.props.projectRevenue.category.codeRef?"Opbrengst verdelen":"redemptionEuro"===this.props.projectRevenue.category.codeRef?"Aflossing verdelen en Sepa bestand maken":"Opbrengst verdelen en Sepa bestand maken",onClickAction:this.checkDistributionRevenueInvoices,type:"submit",value:"Submit"})))))):null,h.a.createElement("div",{className:"col-md-12"},h.a.createElement(K,{changePage:this.changePage,showCheckboxList:this.state.showCheckboxList,toggleCheckedAll:this.toggleCheckedAll,checkedAll:this.state.checkedAll,toggleDistributionCheck:this.toggleDistributionCheck,distributionIds:this.state.distributionIds,createType:this.state.createType}))),this.state.showModal&&h.a.createElement(C.a,{title:"Deelnemer rapport maken",closeModal:this.toggleModal,buttonConfirmText:this.state.buttonConfirmText,confirmAction:this.state.modalAction},this.state.modalText,h.a.createElement("br",null),h.a.createElement("br",null),this.state.modalText2),this.state.showSuccessMessage&&h.a.createElement(C.a,{title:"Succes",closeModal:this.closeSuccesMessage,buttonCancelText:"Ok",showConfirmAction:!1},this.state.successMessage),this.state.showErrorModal&&h.a.createElement(ae.a,{closeModal:this.closeErrorModal,title:"Fout bij opslaan",errorMessage:this.state.modalErrorMessage}))}}]),a}(p.Component),ie=Object(g.b)((function(e){return{projectRevenue:e.projectRevenue,documentGroups:e.systemData.documentGroups,administrations:e.meDetails.administrations}}),(function(e){return{previewReport:function(t){e(Object(F.v)(t))},getDistribution:function(t,a){e(Object(F.q)({id:t,page:a}))},setError:function(t,a){e(Object(X.b)(t,a))}}}))(oe);S.a.locale("nl");var le,se=Object(g.b)((function(e){return{revenue:e.projectRevenue}}))((function(e){var t=e.revenue,a=t.createdAt,n=t.createdBy;return h.a.createElement("div",null,h.a.createElement("div",{className:"row"},h.a.createElement(J.a,{label:"Gemaakt op",value:a?S()(a).format("L"):"Onbekend"}),h.a.createElement(J.a,{label:"Gemaakt door",value:n?n.fullName:"Onbekend"})))})),ce=function(e){return h.a.createElement(y.a,null,h.a.createElement(V.a,null,h.a.createElement("span",{className:"h5 text-bold"},"Afsluiting gegevens")),h.a.createElement(k.a,null,h.a.createElement("div",{className:"col-md-12"},h.a.createElement(se,null))))},de=a(548),ue=a.n(de),me=a(124),pe=a(973);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d()(this,a)}}S.a.locale("nl");var Ee,fe=pe.a.em(le||(le=ue()(["\n    font-weight: normal;\n"]))),be=function(e){s()(a,e);var t=ve(a);function a(e){var n;r()(this,a),n=t.call(this,e),b()(E()(n),"isPeriodExceedingYear",(function(e,t){return e=S()(e),(t=S()(t)).year()>e.year()})),b()(E()(n),"toggleShowModal",(function(){n.setState({showModal:!n.state.showModal})})),b()(E()(n),"cancelSetDate",(function(){n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},{dateConfirmed:"",confirmed:!1})})),n.setState({showModal:!n.state.showModal})})),b()(E()(n),"handleInputChange",(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,r=t.name;n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},b()({},r,a))}),(function(){return n.linkedValueAdjustment(r)})),setTimeout((function(){var e=(n.state.revenue.kwhStartLow?parseFloat(n.state.revenue.kwhStartLow):0)+(n.state.revenue.kwhStartHigh?parseFloat(n.state.revenue.kwhStartHigh):0),t=(n.state.revenue.kwhEndLow?parseFloat(n.state.revenue.kwhEndLow):0)+(n.state.revenue.kwhEndHigh?parseFloat(n.state.revenue.kwhEndHigh):0),a=t-e;n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},{kwhStart:e,kwhEnd:t,kwhTotal:a})}))}),200)})),b()(E()(n),"linkedValueAdjustment",(function(e){"keyAmountFirstPercentage"===e&&(n.state.revenue.keyAmountFirstPercentage&&0!=n.state.revenue.keyAmountFirstPercentage||n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},{payPercentageValidFromKeyAmount:""})})))})),b()(E()(n),"handleInputChangeDate",(function(e,t){n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},b()({},t,e))}))})),b()(E()(n),"handleInputChangeDateConfirmed",(function(e,t){var a,r;e?(n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},(a={},b()(a,t,e),b()(a,"confirmed",!0),a))})),n.toggleShowModal()):n.setState(ge(ge({},n.state),{},{revenue:ge(ge({},n.state.revenue),{},(r={},b()(r,t,e),b()(r,"confirmed",!1),r))}))})),b()(E()(n),"handleSubmit",(function(e){e.preventDefault();var t=n.state.revenue,a={},r={},o=!1;if(W.a.isEmpty(t.categoryId+"")&&(a.categoryId=!0,o=!0),"redemptionEuro"!==n.props.revenue.category.codeRef&&W.a.isEmpty(t.dateBegin+"")&&(a.dateBegin=!0,r.dateBegin="Verplicht",o=!0),"redemptionEuro"!==n.props.revenue.category.codeRef&&W.a.isEmpty(t.dateEnd+"")&&(a.dateEnd=!0,r.dateEnd="Verplicht",o=!0),"revenueKwh"===n.props.revenue.category.codeRef&&W.a.isEmpty(t.kwhEndCalendarYearHigh+"")&&n.isPeriodExceedingYear(t.dateBegin,t.dateEnd)&&(a.kwhEndCalendarYearHigh=!0,r.kwhEndCalendarYearHigh="Verplicht",o=!0),"revenueKwh"===n.props.revenue.category.codeRef&&W.a.isEmpty(t.kwhEndHigh+"")&&n.isPeriodExceedingYear(t.dateBegin,t.dateEnd)&&(a.kwhEndHigh=!0,r.kwhEndHigh="Verplicht",o=!0),"revenueKwh"===n.props.revenue.category.codeRef&&!t.payoutKwh&&n.isPeriodExceedingYear(t.dateBegin,t.dateEnd)&&(a.payoutKwh=!0,r.payoutKwh="Verplicht",o=!0),"redemptionEuro"===n.props.revenue.category.codeRef&&!t.dateBegin&&t.dateEnd&&(a.dateBegin=!0,r.dateBegin="Begin periode moet ook ingevuld worden als Eind periode ingevuld is.",o=!0),"redemptionEuro"===n.props.revenue.category.codeRef&&t.dateBegin&&!t.dateEnd&&(a.dateEnd=!0,r.dateEnd="Eind periode moet ook ingevuld worden als Begin periode ingevuld is.",o=!0),!o&&t.dateEnd<t.dateBegin&&(a.dateEnd=!0,r.dateEnd="Eind periode mag niet voor Begin periode liggen.",o=!0),!o&&"redemptionEuro"===n.props.revenue.category.codeRef&&S()(t.dateBegin).format("Y-MM-DD")<S()(t.dateEnd).add(-1,"year").add(1,"day").format("Y-MM-DD")&&(a.dateBegin=!0,r.dateBegin="Aflossingperiode mag maximaal 1 jaar zijn.",a.dateEnd=!0,r.dateEnd="Aflossingperiode mag maximaal 1 jaar zijn.",o=!0),!o&&"revenueEuro"===n.props.revenue.category.codeRef&&S()(t.dateBegin).format("Y-MM-DD")<S()(t.dateEnd).add(-1,"year").add(1,"day").format("Y-MM-DD")&&(a.dateBegin=!0,r.dateBegin="Periode mag maximaal 1 jaar zijn.",a.dateEnd=!0,r.dateEnd="Periode mag maximaal 1 jaar zijn.",o=!0),"inPossessionOf"===t.distributionTypeId&&W.a.isEmpty(t.dateReference+"")&&(a.dateReference=!0,o=!0),W.a.isEmpty(t.payAmount+"")||("inPossessionOf"!==t.distributionTypeId&&(a.payAmount=!0,r.payAmount='Bedrag mag alleen bij type opbrengst verdeling "In bezit op" ingevuld zijn.',o=!0),t.payAmount+""<0&&(a.payAmount=!0,r.payAmount="Bedrag mag niet negatief zijn.",o=!0)),W.a.isEmpty(t.payPercentage+"")||(t.payPercentage+""<0&&(a.payPercentage=!0,r.payPercentage="Percentage mag niet negatief zijn.",o=!0),"redemptionEuro"===n.props.revenue.category.codeRef&&t.payPercentage+"">100&&(a.payPercentage=!0,r.payPercentage="Percentage mag niet meer dan 100% zijn.",o=!0)),"revenueKwh"===n.props.revenue.category.codeRef&&((t.kwhEndHigh?parseFloat(t.kwhEndHigh):0)<(t.kwhStartHigh?parseFloat(t.kwhStartHigh):0)&&(a.kwhEndHigh=!0,r.kwhEndHigh="Eindstand kWh hoog mag niet lager zijn dan Beginstand kWh hoog.",o=!0),(t.kwhEndLow?parseFloat(t.kwhEndLow):0)<(t.kwhStartLow?parseFloat(t.kwhStartLow):0)&&(a.kwhEndLow=!0,r.kwhEndLow="Eindstand kWh laag mag niet lager zijn dan Beginstand kWh laag.",o=!0),S()(t.dateBegin).year()!==S()(t.dateEnd).year()?(t.kwhEndCalendarYearHigh&&t.kwhEndCalendarYearHigh>0||t.kwhEndCalendarYearLow&&t.kwhEndCalendarYearLow>0)&&((t.kwhEndCalendarYearHigh?parseFloat(t.kwhEndCalendarYearHigh):0)<(t.kwhStartHigh?parseFloat(t.kwhStartHigh):0)&&(a.kwhEndCalendarYearHigh=!0,r.kwhEndCalendarYearHigh="Eindstand kWh 31-12 hoog mag niet lager zijn dan Beginstand kWh hoog.",o=!0),(t.kwhEndCalendarYearHigh?parseFloat(t.kwhEndCalendarYearHigh):0)>(t.kwhEndHigh?parseFloat(t.kwhEndHigh):0)&&(a.kwhEndHigh=!0,r.kwhEndHigh="Eindstand kWh 31-12 hoog mag niet hoger zijn dan Beginstand kWh hoog.",o=!0),(t.kwhEndCalendarYearLow?parseFloat(t.kwhEndCalendarYearLow):0)<(t.kwhStartLow?parseFloat(t.kwhStartLow):0)&&(a.kwhEndCalendarYearLow=!0,r.kwhEndCalendarYearLow="Eindstand kWh 31-12 laag mag niet lager zijn dan Beginstand kWh laag.",o=!0),(t.kwhEndCalendarYearLow?parseFloat(t.kwhEndCalendarYearLow):0)>(t.kwhEndLow?parseFloat(t.kwhEndLow):0)&&(a.kwhEndLow=!0,r.kwhEndLow="Eindstand kWh 31-12 laag mag niet hoger zijn dan Eindstand kWh laag.",o=!0)):(t.kwhEndCalendarYearHigh=null,t.kwhEndCalendarYearLow=null)),"revenueEuro"===n.props.revenue.category.codeRef&&("capital"===n.props.revenue.project.projectType.codeRef||"postalcode_link_capital"===n.props.revenue.project.projectType.codeRef)){W.a.isEmpty(t.payoutTypeId+"")&&(a.payoutTypeId=!0,o=!0);var i=n.props.participantProjectPayoutTypes.find((function(e){return"account"===e.codeRef})).id;t.revenue<0&&t.payoutTypeId==i&&(a.payoutTypeId=!0,r.payoutTypeId="Als je een negatief resultaat wilt verdelen dan kan dat niet uitgekeerd worden op een rekening. Kies voor bijschrijven.",o=!0)}W.a.isEmpty(t.payPercentage+"")&&0==t.keyAmountFirstPercentage&&W.a.isEmpty(t.payPercentageValidFromKeyAmount+"")||W.a.isEmpty(t.payAmount+"")||(a.payAmount=!0,a.payPercentage=!0,a.keyAmountFirstPercentage=!0,a.payPercentageValidFromKeyAmount=!0,r.payAmount="Percentage(s) en Bedrag mogen niet allebei ingevuld zijn.",o=!0),t.payoutKwh=t.payoutKwh?parseFloat(t.payoutKwh).toFixed(5):"",n.setState(ge(ge({},n.state),{},{errors:a,errorMessage:r})),o||(n.setState({isSaving:!0}),R.a.updateProjectRevenue(t.id,t).then((function(e){n.props.fetchRevenue(t.id),setTimeout((function(){n.props.getDistribution(t.id,0)}),250),n.setState({isSaving:!0}),n.props.switchToView()})))}));var o=e.revenue,i=o.id,l=o.distributionTypeId,s=o.confirmed,c=o.dateBegin,d=o.dateEnd,u=o.dateReference,m=o.dateConfirmed,p=o.payoutTypeId,h=o.kwhStart,g=o.kwhEnd,v=o.kwhStartHigh,f=o.kwhEndCalendarYearHigh,w=o.kwhEndHigh,y=o.kwhStartLow,k=o.kwhEndCalendarYearLow,j=o.kwhEndLow,C=o.revenue,T=o.datePayed,D=o.payPercentage,N=o.payAmount,P=o.keyAmountFirstPercentage,A=o.payPercentageValidFromKeyAmount,I=o.payoutKwh;return n.state={showModal:!1,revenue:{id:i,distributionTypeId:l,confirmed:!!s,dateBegin:c?S()(c).format("Y-MM-DD"):"",dateEnd:d?S()(d).format("Y-MM-DD"):"",dateReference:u?S()(u).format("Y-MM-DD"):"",dateConfirmed:m?S()(m).format("Y-MM-DD"):"",payoutTypeId:p||"",kwhStart:h||0,kwhEnd:g||0,kwhTotal:(g||0)-(h||0),kwhStartHigh:v||"",kwhEndCalendarYearHigh:f||"",kwhEndHigh:w||"",kwhStartLow:y||"",kwhEndCalendarYearLow:k||"",kwhEndLow:j||"",revenue:C||"",datePayed:T?S()(T).format("Y-MM-DD"):"",payPercentage:D||"",payAmount:N||"",keyAmountFirstPercentage:P||0,payPercentageValidFromKeyAmount:A||"",payoutKwh:I?parseFloat(I).toFixed(5):""},errors:{categoryId:!1,dateBegin:!1,dateEnd:!1,dateReference:!1,payoutTypeId:!1,kwhEndCalendarYearHigh:!1,kwhEndCalendarYearLow:!1,kwhEndHigh:!1,kwhEndLow:!1,payAmount:!1,payPercentage:!1,keyAmountFirstPercentage:!1,payPercentageValidFromKeyAmount:!1},errorMessage:{payoutTypeId:"",dateBegin:"",dateEnd:"",kwhEndCalendarYearHigh:"",kwhEndCalendarYearLow:"",kwhEndHigh:"",kwhEndLow:"",payAmount:""},isSaving:!1},n}return i()(a,[{key:"render",value:function(){var e=this.state.revenue,t=e.distributionTypeId,a=e.confirmed,n=e.dateBegin,r=e.dateEnd,o=e.dateReference,i=e.dateConfirmed,l=e.kwhStart,s=e.kwhEnd,c=e.kwhTotal,d=e.kwhStartHigh,u=e.kwhEndCalendarYearHigh,m=e.kwhEndHigh,p=e.kwhStartLow,g=e.kwhEndCalendarYearLow,v=e.kwhEndLow,E=e.revenue,f=e.payPercentage,b=e.payAmount,w=e.keyAmountFirstPercentage,y=e.payPercentageValidFromKeyAmount,k=e.payoutKwh,j=e.payoutTypeId,R=this.props.revenue.project,T=this.props.revenue.category,D="";return R&&R.projectType&&R.projectType.codeRef&&(D=R.projectType.codeRef),h.a.createElement("form",{className:"form-horizontal col-md-12",onSubmit:this.handleSubmit},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Algemene informatie"))),h.a.createElement("div",{className:"row"},h.a.createElement(J.a,{label:"Soort",value:T?T.name:"",className:"form-group col-sm-6"}),h.a.createElement(J.a,{label:"Definitief",value:a?"Ja":"Nee",className:"form-group col-sm-6"})),"revenueEuro"===T.codeRef?h.a.createElement("div",{className:"row"},"loan"!==D?h.a.createElement(U.a,{label:"Type opbrengst verdeling",name:"distributionTypeId",options:this.props.projectRevenueDistributionTypes,value:t,onChangeAction:this.handleInputChange}):null,"inPossessionOf"===t?h.a.createElement(te.a,{label:"Peildatum",name:"dateReference",value:o,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateReference}):null):null,"redemptionEuro"===T.codeRef?h.a.createElement("div",{className:"row"},"inPossessionOf"===t?h.a.createElement(te.a,{label:"Peildatum",name:"dateReference",value:o,onChangeAction:this.handleInputChangeDate,required:"required",error:this.state.errors.dateReference}):null):null,h.a.createElement("div",{className:"row"},h.a.createElement(te.a,{label:h.a.createElement("span",null,"Begin periode",R&&!a&&R.dateInterestBearingRedemption&&"redemptionEuro"===T.codeRef&&S()(n).format("Y-MM-DD")<S()(R.dateInterestBearingRedemption).format("Y-MM-DD")?h.a.createElement(h.a.Fragment,null,h.a.createElement("br",null),h.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Let op de begin periode ligt voor de eind periode van de vorige aflossing.")):""),name:"dateBegin",value:n,onChangeAction:this.handleInputChangeDate,required:"redemptionEuro"!==T.codeRef?"required":"",error:this.state.errors.dateBegin,errorMessage:this.state.errorMessage.dateBegin,disabledBefore:"revenueEuro"!==T.codeRef||"loan"!==D&&"obligation"!==D?"redemptionEuro"===T.codeRef?S()(R.dateInterestBearingRedemption).add(-1,"year").format("Y-MM-DD"):"revenueKwh"===T.codeRef?R.dateInterestBearingKwh:"":R.dateInterestBearing}),h.a.createElement(te.a,{label:"Eind periode",name:"dateEnd",value:r,onChangeAction:this.handleInputChangeDate,required:"redemptionEuro"!==T.codeRef?"required":"",error:this.state.errors.dateEnd,errorMessage:this.state.errorMessage.dateEnd,disabledBefore:n,disabledAfter:"revenueKwh"===T.codeRef?S()(n).add(1,"year").add(6,"month").add(-1,"day").format("Y-MM-DD"):S()(n).add(1,"year").add(-1,"day").format("Y-MM-DD")})),h.a.createElement("div",{className:"row"},h.a.createElement(te.a,{label:"Datum definitief",name:"dateConfirmed",value:i,onChangeAction:this.handleInputChangeDateConfirmed}),"revenueEuro"!==T.codeRef||"capital"!==D&&"postalcode_link_capital"!==D?null:h.a.createElement(U.a,{label:"Uitkeren op",name:"payoutTypeId",id:"payoutTypeId",options:this.props.participantProjectPayoutTypes,value:j,onChangeAction:this.handleInputChange,required:"required",error:this.state.errors.payoutTypeId,errorMessage:this.state.errorMessage.payoutTypeId})),"revenueKwh"===T.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-part panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Opbrengst kWh"))),this.isPeriodExceedingYear(n,r)?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},this.props.revenue.project.kwhStartHighNextRevenue>0?h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh hoog",name:"kwhStartHigh",value:d,readOnly:!0}):h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh hoog",name:"kwhStartHigh",value:d,onChangeAction:this.handleInputChange})),h.a.createElement("div",{className:"row"},this.props.revenue.project.kwhStartLowNextRevenue>0?h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh laag",name:"kwhStartLow",value:p,readOnly:!0}):h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh laag",name:"kwhStartLow",value:p,onChangeAction:this.handleInputChange})),h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh op 31-12 hoog",name:"kwhEndCalendarYearHigh",value:u,onChangeAction:this.handleInputChange,error:this.state.errors.kwhEndCalendarYearHigh,errorMessage:this.state.errorMessage.kwhEndCalendarYearHigh,required:"required"}),h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh hoog",name:"kwhEndHigh",value:m,onChangeAction:this.handleInputChange,error:this.state.errors.kwhEndHigh,errorMessage:this.state.errorMessage.kwhEndHigh,required:"required"})),h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh op 31-12 laag",name:"kwhEndCalendarYearLow",value:g,onChangeAction:this.handleInputChange,error:this.state.errors.kwhEndCalendarYearLow,errorMessage:this.state.errorMessage.kwhEndCalendarYearLow}),h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh laag",name:"kwhEndLow",value:v,onChangeAction:this.handleInputChange,error:this.state.errors.kwhEndLow,errorMessage:this.state.errorMessage.kwhEndLow}))):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},this.props.revenue.project.kwhStartHighNextRevenue>0?h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh hoog",name:"kwhStartHigh",value:d,readOnly:!0}):h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh hoog",name:"kwhStartHigh",value:d,onChangeAction:this.handleInputChange}),h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh hoog",name:"kwhEndHigh",value:m,onChangeAction:this.handleInputChange,error:this.state.errors.kwhEndHigh,errorMessage:this.state.errorMessage.kwhEndHigh})),h.a.createElement("div",{className:"row"},this.props.revenue.project.kwhStartLowNextRevenue>0?h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh laag",name:"kwhStartLow",value:p,readOnly:!0}):h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh laag",name:"kwhStartLow",value:p,onChangeAction:this.handleInputChange}),h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh laag",name:"kwhEndLow",value:v,onChangeAction:this.handleInputChange,error:this.state.errors.kwhEndLow,errorMessage:this.state.errorMessage.kwhEndLow}))),h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Beginstand kWh",name:"kwhStart",value:l,readOnly:!0}),h.a.createElement(Q.a,{type:"number",label:"Eindstand kWh",name:"kwhEnd",value:s,readOnly:!0})),h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Opbrengst kWh â‚¬",name:"payoutKwh",value:k&&k.toLocaleString("nl",{minimumFractionDigits:3,maximumFractionDigits:5}),onChangeAction:this.handleInputChange,error:this.state.errors.payoutKwh,errorMessage:this.state.errorMessage.payoutKwh,required:"required"}),h.a.createElement(Q.a,{type:"number",label:"Totaal productie kWh",name:"kwhTotal",value:c,readOnly:!0}))):null,"revenueEuro"===T.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-part panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Opbrengst euro"))),"loan"===D||"obligation"===D?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Uitkering (rente) %",name:"payPercentage",value:f,onChangeAction:this.handleInputChange,error:this.state.errors.payPercentage,errorMessage:this.state.errorMessage.payPercentage}),h.a.createElement(Q.a,{type:"number",label:"loan"===D?"of uitkeringsbedrag (per deelname)":"of uitkeringsbedrag (per participatie)",name:"payAmount",value:b,onChangeAction:this.handleInputChange,error:this.state.errors.payAmount,errorMessage:this.state.errorMessage.payAmount})),h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{label:h.a.createElement(h.a.Fragment,null,"Bedrag ",h.a.createElement(fe,null,"(uitkering % geldig tot en met)")),name:"keyAmountFirstPercentage",value:w,onChangeAction:this.handleInputChange,error:this.state.errors.keyAmountFirstPercentage})),this.state.revenue.keyAmountFirstPercentage?h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:h.a.createElement(h.a.Fragment,null,"Uitkering (rente) % vanaf bedrag"),name:"payPercentageValidFromKeyAmount",value:y,onChangeAction:this.handleInputChange,error:this.state.errors.payPercentageValidFromKeyAmount})):null):null,"capital"===D||"postalcode_link_capital"===D?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Resultaat",name:"revenue",value:E,onChangeAction:this.handleInputChange}))):null):null,"redemptionEuro"===T.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"panel-part panel-heading"},h.a.createElement("span",{className:"h5 text-bold"},"Aflossing euro"))),"loan"===D||"obligation"===D?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement(Q.a,{type:"number",label:"Aflossing %",name:"payPercentage",value:f,onChangeAction:this.handleInputChange,error:this.state.errors.payPercentage,errorMessage:this.state.errorMessage.payPercentage}),h.a.createElement(Q.a,{type:"number",label:"loan"===D?"of aflossingsbedrag (per deelname)":"of aflossingsbedrag (per participatie)",name:"payAmount",value:b,onChangeAction:this.handleInputChange,error:this.state.errors.payAmount,errorMessage:this.state.errorMessage.payAmount}))):null):null,h.a.createElement(me.a,null,h.a.createElement("div",{className:"pull-right btn-group",role:"group"},h.a.createElement(q.a,{buttonClassName:"btn-default",buttonText:"Annuleren",onClickAction:this.props.switchToView}),h.a.createElement(q.a,{buttonText:"Opslaan",onClickAction:this.handleSubmit,type:"submit",value:"Submit",loading:this.state.isSaving}))),this.state.showModal&&h.a.createElement(C.a,{buttonConfirmText:"Bevestigen",closeModal:this.cancelSetDate,confirmAction:this.toggleShowModal,title:"Bevestigen"},h.a.createElement("p",null,"redemptionEuro"===this.props.revenue.category.codeRef?"Als je deze datum invult, zal de aflossing definitief worden gemaakt. Je kunt deze hierna niet meer aanpassen.":"Als je deze datum invult, zal de opbrengst definitief worden gemaakt. Je kunt deze hierna niet meer aanpassen.")))}}]),a}(p.Component),we=Object(g.b)((function(e){return{revenue:e.projectRevenue,projectRevenueDistributionTypes:e.systemData.projectRevenueDistributionTypes,participantProjectPayoutTypes:e.systemData.participantProjectPayoutTypes}}),(function(e){return{fetchRevenue:function(t){e(Object(F.n)(t))},getDistribution:function(t,a){e(Object(F.q)({id:t,page:a}))}}}))(be);S.a.locale("nl");var ye=pe.a.em(Ee||(Ee=ue()(["\n    font-weight: normal;\n"]))),ke=Object(g.b)((function(e){return{revenue:e.projectRevenue}}))((function(e){var t=e.revenue,a=t.confirmed,n=t.dateBegin,r=t.dateEnd,o=t.dateReference,i=t.dateConfirmed,l=t.participantProjectPayoutType,s=t.kwhStart,c=t.kwhEnd,d=t.kwhStartHigh,u=t.kwhEndCalendarYearHigh,m=t.kwhEndHigh,p=t.kwhStartLow,g=t.kwhEndCalendarYearLow,v=t.kwhEndLow,E=t.revenue,f=t.payPercentage,b=t.payAmount,w=t.keyAmountFirstPercentage,y=t.payPercentageValidFromKeyAmount,k=t.category,j=t.project,C=t.payoutKwh,R=t.distributionType,T=c-s;return h.a.createElement("div",null,h.a.createElement("div",{className:"panel-heading",onClick:e.switchToEdit},h.a.createElement("span",{className:"h5 text-bold"},"Algemeen")),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Soort",value:k?k.name:""}),h.a.createElement(J.a,{label:"Definitief",value:a?"Ja":"Nee"})),"revenueEuro"===k.codeRef||"redemptionEuro"===k.codeRef?h.a.createElement("div",{className:"row",onClick:e.switchToEdit},"loan"!==j.projectType.codeRef?h.a.createElement(J.a,{label:"Type opbrengst verdeling",value:R?R.name:""}):null,R&&"inPossessionOf"===R.id?h.a.createElement(J.a,{label:"Peildatum",value:o?S()(o).format("L"):""}):null):null,h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:h.a.createElement("span",null,"Begin periode",j&&!a&&j.dateInterestBearingRedemption&&"redemptionEuro"===k.codeRef&&S()(n).format("Y-MM-DD")<S()(j.dateInterestBearingRedemption).format("Y-MM-DD")?h.a.createElement(h.a.Fragment,null,h.a.createElement("br",null),h.a.createElement("small",{style:{color:"red",fontWeight:"normal"}},"Let op de begin periode ligt voor de eind periode van de vorige aflossing.")):""),value:n?S()(n).format("L"):""}),h.a.createElement(J.a,{label:"Eind periode",value:r?S()(r).format("L"):""})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Datum definitief",value:i?S()(i).format("L"):""}),"revenueEuro"!==k.codeRef||"capital"!==j.projectType.codeRef&&"postalcode_link_capital"!==j.projectType.codeRef?null:h.a.createElement(J.a,{label:"Uitkeren op",value:l?l.name:""})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit}),"revenueKwh"===k.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"panel-part panel-heading",onClick:e.switchToEdit},h.a.createElement("span",{className:"h5 text-bold"},"Opbrengst kWh")),S()(n).year()!==S()(r).year()?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Beginstand kWh hoog",value:d&&d})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Beginstand kWh laag",value:p&&p})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Eindstand kWh op 31-12 hoog",value:u&&u}),h.a.createElement(J.a,{label:"Eindstand kWh hoog",value:m&&m})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Eindstand kWh op 31-12 laag",value:g&&g}),h.a.createElement(J.a,{label:"Eindstand kWh laag",value:v&&v}))):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Beginstand kWh hoog",value:d&&d}),h.a.createElement(J.a,{label:"Eindstand kWh hoog",value:m&&m})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Beginstand kWh laag",value:p&&p}),h.a.createElement(J.a,{label:"Eindstand kWh laag",value:v&&v}))),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Beginstand kWh",value:s&&s}),h.a.createElement(J.a,{label:"Eindstand kWh",value:c&&c})),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},h.a.createElement(J.a,{label:"Opbrengst kWh â‚¬",value:C&&C.toLocaleString("nl",{minimumFractionDigits:3,maximumFractionDigits:5})}),h.a.createElement(J.a,{label:"Totaal productie kWh",value:T&&T}))):null,"revenueEuro"===k.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"panel-part panel-heading",onClick:e.switchToEdit},h.a.createElement("span",{className:"h5 text-bold"},"Opbrengst euro")),h.a.createElement("div",{className:"row",onClick:e.switchToEdit},"loan"===j.projectType.codeRef||"obligation"===j.projectType.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,h.a.createElement(J.a,{label:"Uitkering (rente) %",value:f&&f+"%"}),h.a.createElement(J.a,{label:"loan"===j.projectType.codeRef?"of uitkeringsbedrag (per deelnemer)":"of uitkeringsbedrag (per participatie)",value:Object(B.a)(b)})),h.a.createElement("div",null,h.a.createElement(J.a,{label:h.a.createElement(h.a.Fragment,null,"Bedrag ",h.a.createElement(ye,null,"(uitkering % geldig tot en met)")),value:w&&"â‚¬ "+w}))):null,"capital"===j.projectType.codeRef||"postalcode_link_capital"===j.projectType.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement(J.a,{label:"Resultaat",value:E})):null),w?h.a.createElement("div",{className:"row"},h.a.createElement(J.a,{type:"number",label:h.a.createElement(h.a.Fragment,null,"Uitkering (rente) % vanaf bedrag"),value:y&&y+"%"})):null):null,"redemptionEuro"===k.codeRef?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"panel-part panel-heading",onClick:e.switchToEdit},h.a.createElement("span",{className:"h5 text-bold"},"Aflossing euro")),b?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row",onClick:e.switchToEdit},"loan"===j.projectType.codeRef||"obligation"===j.projectType.codeRef?h.a.createElement(J.a,{label:"Aflossingsbedrag (per deelnemer)",value:Object(B.a)(b)}):null)):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row",onClick:e.switchToEdit},"loan"===j.projectType.codeRef||"obligation"===j.projectType.codeRef?h.a.createElement(J.a,{label:"Aflossing %",value:f&&f+"%"}):null))):null)}));function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d()(this,a)}}var Ce=function(e){s()(a,e);var t=je(a);function a(e){var n;return r()(this,a),n=t.call(this,e),b()(E()(n),"switchToEdit",(function(){n.setState({showEdit:!0})})),b()(E()(n),"switchToView",(function(){n.setState({showEdit:!1,activeDiv:""})})),n.state={showEdit:!1,activeDiv:""},n}return i()(a,[{key:"onDivEnter",value:function(){this.setState({activeDiv:"panel-grey"})}},{key:"onDivLeave",value:function(){this.state.showEdit||this.setState({activeDiv:""})}},{key:"render",value:function(){var e=this;return h.a.createElement(y.a,{className:this.state.activeDiv,onMouseEnter:function(){return e.onDivEnter()},onMouseLeave:function(){return e.onDivLeave()}},h.a.createElement(k.a,null,this.state.showEdit&&!this.props.revenue.confirmed&&this.props.permissions.manageFinancial?h.a.createElement(we,{switchToView:this.switchToView}):h.a.createElement(ke,{switchToEdit:this.switchToEdit})))}}]),a}(p.Component),Re=Object(g.b)((function(e){return{permissions:e.meDetails.permissions,revenue:e.projectRevenue}}))(Ce);function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d()(this,a)}}var De=function(e){s()(a,e);var t=Te(a);function a(e){return r()(this,a),t.call(this,e)}return i()(a,[{key:"componentDidMount",value:function(){this.props.fetchRevenue(this.props.params.id)}},{key:"componentWillUnmount",value:function(){this.props.clearRevenue()}},{key:"render",value:function(){return h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-9"},h.a.createElement("div",{className:"col-md-12"},h.a.createElement(x,null)),this.props.projectRevenue.id?h.a.createElement("div",{className:"col-md-12"},1==this.props.projectRevenue.confirmed&&h.a.createElement(y.a,null,h.a.createElement(V.a,null,h.a.createElement("span",{className:"h5",style:{color:"#e64a4a"}},"Deze opbrengst is definitief. Hierdoor kan deze niet meer gewijzigd worden en staat de opbrengstverdeling vast."))),h.a.createElement(Re,null),h.a.createElement(ie,null),h.a.createElement(ce,null)):h.a.createElement("div",null,"Geen gegevens gevonden.")))}}]),a}(p.Component);t.default=Object(g.b)((function(e){return{projectRevenue:e.projectRevenue}}),(function(e){return{fetchRevenue:function(t){e(Object(F.n)(t))},clearRevenue:function(){e(Object(F.e)())}}}))(De)},973:function(e,t,a){"use strict";var n=a(46),r=a(0),o=a(232),i=a(22),l=a(108),s=a(98),c=o.a,d=function(e){return"theme"!==e&&"innerRef"!==e},u=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?c:d};function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=function(){return null},g=function e(t,a){var n,o,c;void 0!==a&&(n=a.label,c=a.target,o=t.__emotion_forwardProp&&a.shouldForwardProp?function(e){return t.__emotion_forwardProp(e)&&a.shouldForwardProp(e)}:a.shouldForwardProp);var d=t.__emotion_real===t,m=d&&t.__emotion_base||t;"function"!=typeof o&&d&&(o=t.__emotion_forwardProp);var g=o||u(m),v=!g("as");return function(){var E=arguments,f=d&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&f.push("label:"+n+";"),null==E[0]||void 0===E[0].raw)f.push.apply(f,E);else{0,f.push(E[0][0]);for(var b=E.length,w=1;w<b;w++)f.push(E[w],E[0][w])}var y=Object(i.f)((function(e,t,a){return Object(r.createElement)(i.c.Consumer,null,(function(n){var i=v&&e.as||m,d="",p=[],E=e;if(null==e.theme){for(var b in E={},e)E[b]=e[b];E.theme=n}"string"==typeof e.className?d=Object(l.a)(t.registered,p,e.className):null!=e.className&&(d=e.className+" ");var w=Object(s.a)(f.concat(p),t.registered,E);Object(l.b)(t,w,"string"==typeof i);d+=t.key+"-"+w.name,void 0!==c&&(d+=" "+c);var y=v&&void 0===o?u(i):g,k={};for(var j in e)v&&"as"===j||y(j)&&(k[j]=e[j]);k.className=d,k.ref=a||e.innerRef;var C=Object(r.createElement)(i,k),R=Object(r.createElement)(h,null);return Object(r.createElement)(r.Fragment,null,R,C)}))}));return y.displayName=void 0!==n?n:"Styled("+("string"==typeof m?m:m.displayName||m.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=m,y.__emotion_styles=f,y.__emotion_forwardProp=o,Object.defineProperty(y,"toString",{value:function(){return"."+c}}),y.withComponent=function(t,n){return e(t,void 0!==n?p({},a||{},{},n):a).apply(void 0,f)},y}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));t.a=g}}]);